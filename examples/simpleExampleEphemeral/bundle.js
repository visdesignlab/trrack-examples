!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=42)}([function(t,e,n){"use strict";t.exports=n(36)},function(t,e,n){t.exports=n(37)()},function(t,e,n){var r,i;i=function(t){var e=["N","E","A","D"];function n(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function r(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function i(t,e,n){i.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function o(t,e){o.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function s(t,e){s.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function a(t,e,n){a.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function u(t,e,n){var r=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,r),t}function c(t){var e=typeof t;return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":"function"==typeof t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function l(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}function h(t){var e=0,n=c(t);if("array"===n)return t.forEach((function(t){e+=h(t)})),e+l("[type: array, hash: "+e+"]");if("object"===n){for(var r in t)if(t.hasOwnProperty(r)){var i="[ type: object, key: "+r+", value hash: "+h(t[r])+"]";e+=l(i)}return e}return e+l("[ type: "+n+" ; value: "+t+"]")}function f(t,e,n,r,u,l,p,d){n=n||[],p=p||[];var y=(u=u||[]).slice(0);if(null!=l){if(r){if("function"==typeof r&&r(y,l))return;if("object"==typeof r){if(r.prefilter&&r.prefilter(y,l))return;if(r.normalize){var v=r.normalize(y,l,t,e);v&&(t=v[0],e=v[1])}}}y.push(l)}"regexp"===c(t)&&"regexp"===c(e)&&(t=t.toString(),e=e.toString());var g,m,_,b,w=typeof t,E=typeof e,T="undefined"!==w||p&&p.length>0&&p[p.length-1].lhs&&Object.getOwnPropertyDescriptor(p[p.length-1].lhs,l),C="undefined"!==E||p&&p.length>0&&p[p.length-1].rhs&&Object.getOwnPropertyDescriptor(p[p.length-1].rhs,l);if(!T&&C)n.push(new o(y,e));else if(!C&&T)n.push(new s(y,t));else if(c(t)!==c(e))n.push(new i(y,t,e));else if("date"===c(t)&&t-e!=0)n.push(new i(y,t,e));else if("object"===w&&null!==t&&null!==e){for(g=p.length-1;g>-1;--g)if(p[g].lhs===t){b=!0;break}if(b)t!==e&&n.push(new i(y,t,e));else{if(p.push({lhs:t,rhs:e}),Array.isArray(t)){for(d&&(t.sort((function(t,e){return h(t)-h(e)})),e.sort((function(t,e){return h(t)-h(e)}))),g=e.length-1,m=t.length-1;g>m;)n.push(new a(y,g,new o(void 0,e[g--])));for(;m>g;)n.push(new a(y,m,new s(void 0,t[m--])));for(;g>=0;--g)f(t[g],e[g],n,r,y,g,p,d)}else{var S=Object.keys(t),I=Object.keys(e);for(g=0;g<S.length;++g)_=S[g],(b=I.indexOf(_))>=0?(f(t[_],e[_],n,r,y,_,p,d),I[b]=null):f(t[_],void 0,n,r,y,_,p,d);for(g=0;g<I.length;++g)(_=I[g])&&f(void 0,e[_],n,r,y,_,p,d)}p.length=p.length-1}}else t!==e&&("number"===w&&isNaN(t)&&isNaN(e)||n.push(new i(y,t,e)))}function p(t,e,n,r,i){var o=[];if(f(t,e,o,r,null,null,null,i),n)for(var s=0;s<o.length;++s)n(o[s]);return o}function d(t,e,n,r){var i=p(t,e,r?function(t){t&&r.push(t)}:void 0,n);return r||(i.length?i:void 0)}function y(t,n,r){if(void 0===r&&n&&~e.indexOf(n.kind)&&(r=n),t&&r&&r.kind){for(var i=t,o=-1,s=r.path?r.path.length-1:0;++o<s;)void 0===i[r.path[o]]&&(i[r.path[o]]=void 0!==r.path[o+1]&&"number"==typeof r.path[o+1]?[]:{}),i=i[r.path[o]];switch(r.kind){case"A":r.path&&void 0===i[r.path[o]]&&(i[r.path[o]]=[]),function t(e,n,r){if(r.path&&r.path.length){var i,o=e[n],s=r.path.length-1;for(i=0;i<s;i++)o=o[r.path[i]];switch(r.kind){case"A":t(o[r.path[i]],r.index,r.item);break;case"D":delete o[r.path[i]];break;case"E":case"N":o[r.path[i]]=r.rhs}}else switch(r.kind){case"A":t(e[n],r.index,r.item);break;case"D":e=u(e,n);break;case"E":case"N":e[n]=r.rhs}return e}(r.path?i[r.path[o]]:i,r.index,r.item);break;case"D":delete i[r.path[o]];break;case"E":case"N":i[r.path[o]]=r.rhs}}}return n(i,r),n(o,r),n(s,r),n(a,r),Object.defineProperties(d,{diff:{value:d,enumerable:!0},orderIndependentDiff:{value:function(t,e,n,r){var i=r?function(t){t&&r.push(t)}:void 0,o=p(t,e,i,n,!0);return r||(o.length?o:void 0)},enumerable:!0},observableDiff:{value:p,enumerable:!0},orderIndependentObservableDiff:{value:function(t,e,n,r,i,o,s){return f(t,e,n,r,i,o,s,!0)},enumerable:!0},orderIndepHash:{value:h,enumerable:!0},applyDiff:{value:function(t,e,n){t&&e&&p(t,e,(function(r){n&&!n(t,e,r)||y(t,e,r)}))},enumerable:!0},applyChange:{value:y,enumerable:!0},revertChange:{value:function(t,e,n){if(t&&e&&n&&n.kind){var r,i,o=t;for(i=n.path.length-1,r=0;r<i;r++)void 0===o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":!function t(e,n,r){if(r.path&&r.path.length){var i,o=e[n],s=r.path.length-1;for(i=0;i<s;i++)o=o[r.path[i]];switch(r.kind){case"A":t(o[r.path[i]],r.index,r.item);break;case"D":case"E":o[r.path[i]]=r.lhs;break;case"N":delete o[r.path[i]]}}else switch(r.kind){case"A":t(e[n],r.index,r.item);break;case"D":case"E":e[n]=r.lhs;break;case"N":e=u(e,n)}return e}(o[n.path[r]],n.index,n.item);break;case"D":case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}},enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof $conflict},enumerable:!0}}),d.DeepDiff=d,t&&(t.DeepDiff=d),d}(this),void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)},,function(t,e,n){"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}}(),t.exports=n(39)},,,,,function(t,e,n){var r,i=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(t,e){if(!r[t]){r[t]={};for(var n=0;n<t.length;n++)r[t][t.charAt(n)]=n}return r[t][e]}var o={compressToBase64:function(t){if(null==t)return"";var n=o._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:o._decompress(t.length,32,(function(n){return i(e,t.charAt(n))}))},compressToUTF16:function(e){return null==e?"":o._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:o._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function(t){for(var e=o.compress(t),n=new Uint8Array(2*e.length),r=0,i=e.length;r<i;r++){var s=e.charCodeAt(r);n[2*r]=s>>>8,n[2*r+1]=s%256}return n},decompressFromUint8Array:function(e){if(null==e)return o.decompress(e);for(var n=new Array(e.length/2),r=0,i=n.length;r<i;r++)n[r]=256*e[2*r]+e[2*r+1];var s=[];return n.forEach((function(e){s.push(t(e))})),o.decompress(s.join(""))},compressToEncodedURIComponent:function(t){return null==t?"":o._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),o._decompress(t.length,32,(function(e){return i(n,t.charAt(e))})))},compress:function(e){return o._compress(e,16,(function(e){return t(e)}))},_compress:function(t,e,n){if(null==t)return"";var r,i,o,s={},a={},u="",c="",l="",h=2,f=3,p=2,d=[],y=0,v=0;for(o=0;o<t.length;o+=1)if(u=t.charAt(o),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=f++,a[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(s,c))l=c;else{if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)y<<=1,v==e-1?(v=0,d.push(n(y)),y=0):v++;for(i=l.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}else{for(i=1,r=0;r<p;r++)y=y<<1|i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[l]}else for(i=s[l],r=0;r<p;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1;0==--h&&(h=Math.pow(2,p),p++),s[c]=f++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(r=0;r<p;r++)y<<=1,v==e-1?(v=0,d.push(n(y)),y=0):v++;for(i=l.charCodeAt(0),r=0;r<8;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}else{for(i=1,r=0;r<p;r++)y=y<<1|i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i=0;for(i=l.charCodeAt(0),r=0;r<16;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1}0==--h&&(h=Math.pow(2,p),p++),delete a[l]}else for(i=s[l],r=0;r<p;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1;0==--h&&(h=Math.pow(2,p),p++)}for(i=2,r=0;r<p;r++)y=y<<1|1&i,v==e-1?(v=0,d.push(n(y)),y=0):v++,i>>=1;for(;;){if(y<<=1,v==e-1){d.push(n(y));break}v++}return d.join("")},decompress:function(t){return null==t?"":""==t?null:o._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function(e,n,r){var i,o,s,a,u,c,l,h=[],f=4,p=4,d=3,y="",v=[],g={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)h[i]=i;for(s=0,u=Math.pow(2,2),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;switch(s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;l=t(s);break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;l=t(s);break;case 2:return""}for(h[3]=l,o=l,v.push(l);;){if(g.index>e)return"";for(s=0,u=Math.pow(2,d),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;switch(l=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;h[p++]=t(s),l=p-1,f--;break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=r(g.index++)),s|=(a>0?1:0)*c,c<<=1;h[p++]=t(s),l=p-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,d),d++),h[l])y=h[l];else{if(l!==p)return null;y=o+o.charAt(0)}v.push(y),h[p++]=o+y.charAt(0),o=y,0==--f&&(f=Math.pow(2,d),d++)}}};return o}();void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)},,,,,,,,,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=a(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,u=s(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){a=r(n);for(var h=0;h<a.length;h++)o.call(n,a[h])&&(u[a[h]]=n[a[h]])}}return u}},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return dy}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function u(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function c(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}function f(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p=!1,d="${JSCORE_VERSION}",y=function(t,e){if(!t)throw v(e)},v=function(t){return new Error("Firebase Database ("+d+") INTERNAL ASSERT FAILED: "+t)},g=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(g(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},_=function(t){try{return m.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function b(t){return w(void 0,t)}function w(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=w(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function C(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())}function S(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}function I(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function x(){return!0===p}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,k.prototype.create),i}return o(e,t),e}(Error),k=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?A(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new N(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function A(t,e){return t.replace(P,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var P=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t){return JSON.parse(t)}function R(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=O(_(o[0])||""),n=O(_(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function F(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var U=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782);i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function V(t,e){var n=new q(t,e);return n.subscribe.bind(n)}var q=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function B(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function z(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(z(t,e,r)+"must be a valid function.")}function Q(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(z(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},Y=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),K=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new E;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=s({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=c(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=l(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var h=this.getOrInitializeService(u);a.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return a(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var $,X=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new K(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function J(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z,tt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Z||(Z={}));var et,nt={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},rt=Z.INFO,it=(($={})[Z.DEBUG]="log",$[Z.VERBOSE]="log",$[Z.INFO]="info",$[Z.WARN]="warn",$[Z.ERROR]="error",$),ot=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=it[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,J(["["+i+"]  "+t.name+":"],n))}},st=function(){function t(t){this.name=t,this._logLevel=rt,this._logHandler=ot,this._userLogHandler=null,tt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Z))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?nt[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.DEBUG],t)),this._logHandler.apply(this,J([this,Z.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.VERBOSE],t)),this._logHandler.apply(this,J([this,Z.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.INFO],t)),this._logHandler.apply(this,J([this,Z.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.WARN],t)),this._logHandler.apply(this,J([this,Z.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,J([this,Z.ERROR],t)),this._logHandler.apply(this,J([this,Z.ERROR],t))},t}();function at(t){tt.forEach((function(e){e.setLogLevel(t)}))}var ut,ct=((et={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",et["bad-app-name"]="Illegal App name: '{$appName}",et["duplicate-app"]="Firebase App named '{$appName}' already exists",et["app-deleted"]="Firebase App named '{$appName}' already deleted",et["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",et["invalid-log-argument"]="First argument to `onLog` must be null or a function.",et),lt=new k("app","Firebase",ct),ht=((ut={})["@firebase/app"]="fire-core",ut["@firebase/analytics"]="fire-analytics",ut["@firebase/auth"]="fire-auth",ut["@firebase/database"]="fire-rtdb",ut["@firebase/functions"]="fire-fn",ut["@firebase/installations"]="fire-iid",ut["@firebase/messaging"]="fire-fcm",ut["@firebase/performance"]="fire-perf",ut["@firebase/remote-config"]="fire-rc",ut["@firebase/storage"]="fire-gcs",ut["@firebase/firestore"]="fire-fst",ut["fire-js"]="fire-js",ut["firebase-wrapper"]="fire-js-all",ut),ft=new st("@firebase/app"),pt=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=b(t),this.container=new X(e.name),this._addComponent(new Y("app",(function(){return o}),"PUBLIC"));try{for(var s=c(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){ft.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw lt.create("app-deleted",{appName:this.name_})},t}();pt.prototype.name&&pt.prototype.options||pt.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function dt(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw lt.create("bad-app-name",{appName:String(s)});if(L(e,s))throw lt.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=ht[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ft.warn(u.join(" "))}o(new Y(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:at,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw lt.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=nt[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Z[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=tt;r<i.length;r++){n(i[r])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"7.16.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!L(e,t=t||"[DEFAULT]"))throw lt.create("no-app",{appName:t});return e[t]}function o(o){var s,a,u=o.name;if(n.has(u))return ft.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var l=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw lt.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&w(l,o.serviceProps),r[u]=l,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var h=c(Object.keys(e)),f=h.next();!f.done;f=h.next()){var p=f.value;e[p]._addComponent(o)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt=function t(){var e=dt(pt);return e.INTERNAL=s(s({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){w(e,t)},createSubscribe:V,ErrorFactory:k,deepExtend:w}),e}(),vt=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ft.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var gt=self.firebase.SDK_VERSION;gt&&gt.indexOf("LITE")>=0&&ft.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var mt=yt.initializeApp;yt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return S()&&ft.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),mt.apply(void 0,t)};var _t=yt;!function(t,e){t.INTERNAL.registerComponent(new Y("platform-logger",(function(t){return new vt(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.8",e),t.registerVersion("fire-js","")}(_t);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bt=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),R(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:O(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),wt=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return L(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),Et=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new bt(e)}}catch(t){}return new wt},Tt=Et("localStorage"),Ct=Et("sessionStorage"),St=new st("@firebase/database"),It=function(){var t=1;return function(){return t++}}(),xt=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,y(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new U;n.update(e);var r=n.digest();return m.encodeByteArray(r)},Nt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Nt.apply(null,i):n+="object"==typeof i?R(i):i,n+=" "}return n},kt=null,At=!0,Pt=function(t,e){y(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(St.logLevel=Z.VERBOSE,kt=St.log.bind(St),e&&Ct.set("logging_enabled",!0)):"function"==typeof t?kt=t:(kt=null,Ct.remove("logging_enabled"))},Ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===At&&(At=!1,null===kt&&!0===Ct.get("logging_enabled")&&Pt(!0)),kt){var n=Nt.apply(null,t);kt(n)}},Rt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ot.apply(void 0,h([t],e))}},Dt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Nt.apply(void 0,h(t));St.error(n)},Lt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Nt.apply(void 0,h(t));throw St.error(n),new Error(n)},Mt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Nt.apply(void 0,h(t));St.warn(n)},Ft=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},jt="[MIN_NAME]",Ut="[MAX_NAME]",Vt=function(t,e){if(t===e)return 0;if(t===jt||e===Ut)return-1;if(e===jt||t===Ut)return 1;var n=Yt(t),r=Yt(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},qt=function(t,e){return t===e?0:t<e?-1:1},Bt=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+R(e))},Wt=function(t){if("object"!=typeof t||null===t)return R(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=R(e[i]),r+=":",r+=Wt(t[e[i]]);return r+="}"},zt=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Qt=function(t){y(!Ft(t),"Invalid JSON number");var e,n,r,i,o;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},Gt=new RegExp("^-?(0*)\\d{1,10}$"),Yt=function(t){if(Gt.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Kt=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Mt("Exception was thrown by user callback.",e),t}),Math.floor(0))}},$t=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Xt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Vt(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Jt=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=G(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=G(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=G(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Zt=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Tt.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Tt.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(y("string"==typeof t,"typeof type must == string"),y("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Ht(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var te,ee,ne,re,ie,oe=function(t){var e=se(t),n=e.namespace;"firebase.com"===e.domain&&Lt(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||Lt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Mt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new Zt(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Xt(e.pathString)}},se=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=c(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Mt("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),o=r}"ns"in p&&(o=p.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},ae=/[\[\].#$\/\u0000-\u001F\u007F]/,ue=/[\[\].#$\u0000-\u001F\u007F]/,ce=function(t){return"string"==typeof t&&0!==t.length&&!ae.test(t)},le=function(t){return"string"==typeof t&&0!==t.length&&!ue.test(t)},he=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Ft(t)||t&&"object"==typeof t&&L(t,".sv")},fe=function(t,e,n,r,i){i&&void 0===n||pe(z(t,e,i),n,r)},pe=function(t,e,n){var r=n instanceof Xt?new Jt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Ft(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&G(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Ht(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!ce(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),pe(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},de=function(t,e,n,r,i){if(!i||void 0!==n){var o=z(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Ht(n,(function(t,e){var n=new Xt(t);if(pe(o,e,r.child(n)),".priority"===n.getBack()&&!he(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ce(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Xt.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},ye=function(t,e,n,r){if(!r||void 0!==n){if(Ft(n))throw new Error(z(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!he(n))throw new Error(z(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ve=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(z(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ge=function(t,e,n,r){if(!(r&&void 0===n||ce(n)))throw new Error(z(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},me=function(t,e,n,r){if(!(r&&void 0===n||le(n)))throw new Error(z(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_e=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),me(t,e,n,r)},be=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},we=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ce(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),le(t)}(r))throw new Error(z(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ee=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(z(t,e,r)+"must be a boolean.")},Te=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){W("OnDisconnect.cancel",0,1,arguments.length),H("OnDisconnect.cancel",1,t,!0);var e=new E;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){W("OnDisconnect.remove",0,1,arguments.length),be("OnDisconnect.remove",this.path_),H("OnDisconnect.remove",1,t,!0);var e=new E;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){W("OnDisconnect.set",1,2,arguments.length),be("OnDisconnect.set",this.path_),fe("OnDisconnect.set",1,t,this.path_,!1),H("OnDisconnect.set",2,e,!0);var n=new E;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){W("OnDisconnect.setWithPriority",2,3,arguments.length),be("OnDisconnect.setWithPriority",this.path_),fe("OnDisconnect.setWithPriority",1,t,this.path_,!1),ye("OnDisconnect.setWithPriority",2,e,!1),H("OnDisconnect.setWithPriority",3,n,!0);var r=new E;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(W("OnDisconnect.update",1,2,arguments.length),be("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Mt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}de("OnDisconnect.update",1,t,this.path_,!1),H("OnDisconnect.update",2,e,!0);var i=new E;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Ce=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return W("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Se=(te="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ee=0,ne=[],function(t){var e,n=t===ee;ee=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=te.charAt(t%64),t=Math.floor(t/64);y(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===ne[e];e--)ne[e]=0;ne[e]++}else for(e=0;e<12;e++)ne[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=te.charAt(ne[e]);return y(20===i.length,"nextPushId: Length should be 20."),i}),Ie=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),xe=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ie(jt,t),r=new Ie(jt,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ie.MIN},t}(),Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return re},set:function(t){re=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return Vt(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw v("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ie.MIN},e.prototype.maxPost=function(){return new Ie(Ut,re)},e.prototype.makePost=function(t,e){return y("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ie(t,re)},e.prototype.toString=function(){return".key"},e}(xe),ke=new Ne;var Ae,Pe,Oe,Re=function(t){return"number"==typeof t?"number:"+Qt(t):"string:"+t},De=function(t){if(t.isLeafNode()){var e=t.val();y("string"==typeof e||"number"==typeof e||"object"==typeof e&&L(e,".sv"),"Priority must be a string or number.")}else y(t===ie||t.isEmpty(),"priority of unexpected type.");y(t===ie||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Le=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,y(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),De(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ae},set:function(t){Ae=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(y(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Re(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?Qt(this.value_):this.value_,this.lazyHash_=xt(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(y(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return y(i>=0,"Unknown leaf type: "+n),y(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Me,Fe,je=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Vt(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ie.MIN},e.prototype.maxPost=function(){return new Ie(Ut,new Le("[PRIORITY-POST]",Oe))},e.prototype.makePost=function(t,e){var n=Pe(t);return new Ie(e,new Le("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(xe)),Ue=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ve=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Be.EMPTY_NODE,this.right=null!=o?o:Be.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Be.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Be.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),qe=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ve(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Be=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ve.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ve.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ue(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ue(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ue(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ue(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new qe,t}(),We=Math.log(2),ze=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/We,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),He=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ve(s,o.node,Ve.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ve(s,o.node,Ve.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ve(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ve.BLACK):(a(h,Ve.BLACK),a(h,Ve.RED))}return o}(new ze(t.length));return new Be(r||e,o)},Qe={},Ge=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return y(Qe&&je,"ChildrenNode.ts has not been loaded"),Me=Me||new t({".priority":Qe},{".priority":je})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=M(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Be?e:null},t.prototype.hasIndex=function(t){return L(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){y(e!==ke,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Ie.Wrap),u=a.getNext();u;)o=o||e.isDefinedOn(u.node),i.push(u),u=a.getNext();r=o?He(i,e.getCompare()):Qe;var c=e.toString(),l=s({},this.indexSet_);l[c]=e;var h=s({},this.indexes_);return h[c]=r,new t(h,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(j(this.indexes_,(function(t,i){var o=M(r.indexSet_,i);if(y(o,"Missing index implementation for "+i),t===Qe){if(o.isDefinedOn(e.node)){for(var s=[],a=n.getIterator(Ie.Wrap),u=a.getNext();u;)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),He(s,o.getCompare())}return Qe}var c=n.get(e.name),l=t;return c&&(l=l.remove(new Ie(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(j(this.indexes_,(function(t){if(t===Qe)return t;var r=n.get(e.name);return r?t.remove(new Ie(e.name,r)):t})),this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ye(t,e){return Vt(t.name,e.name)}function Ke(t,e){return Vt(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&De(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Fe||(Fe=new t(new Be(Ke),null,Ge.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Fe},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Fe:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(y(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ie(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Fe:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;y(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(je,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Re(this.getPriority().val())+":"),this.forEachChild(je,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":xt(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ie(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ie(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ie(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Ie.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Ie.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xe?-1:0},t.prototype.withIndex=function(e){if(e===ke||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===ke||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(je),r=e.getIterator(je),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===ke?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Xe=new(function(t){function e(){return t.call(this,new Be(Ke),$e.EMPTY_NODE,Ge.Default)||this}return o(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return $e.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}($e));Object.defineProperties(Ie,{MIN:{value:new Ie(jt,$e.EMPTY_NODE)},MAX:{value:new Ie(Ut,Xe)}}),Ne.__EMPTY_NODE=$e.EMPTY_NODE,Le.__childrenNodeConstructor=$e,ie=Xe,function(t){Oe=t}(Xe);function Je(t,e){if(void 0===e&&(e=null),null===t)return $e.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),y(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Le(t,Je(e));if(t instanceof Array){var n=$e.EMPTY_NODE;return Ht(t,(function(e,r){if(L(t,e)&&"."!==e.substring(0,1)){var i=Je(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Je(e))}var r=[],i=!1;if(Ht(t,(function(t,e){if("."!==t.substring(0,1)){var n=Je(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ie(t,n)))}})),0===r.length)return $e.EMPTY_NODE;var o=He(r,Ye,(function(t){return t.name}),Ke);if(i){var s=He(r,je.getCompare());return new $e(o,Je(e),new Ge({".priority":s},{".priority":je}))}return new $e(o,Je(e),Ge.Default)}!function(t){Pe=t}(Je);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ze,tn=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Vt(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ie.MIN},e.prototype.maxPost=function(){return Ie.MAX},e.prototype.makePost=function(t,e){var n=Je(t);return new Ie(e,n)},e.prototype.toString=function(){return".value"},e}(xe)),en=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,y(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return o(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Vt(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Je(t),r=$e.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ie(e,r)},e.prototype.maxPost=function(){var t=$e.EMPTY_NODE.updateChild(this.indexPath_,Xe);return new Ie(Ut,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(xe),nn=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return W("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return W("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return W("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return W("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){W("DataSnapshot.child",0,1,arguments.length),e=String(e),me("DataSnapshot.child",1,e,!1);var n=new Xt(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,je)},t.prototype.hasChild=function(t){W("DataSnapshot.hasChild",1,1,arguments.length),me("DataSnapshot.hasChild",1,t,!1);var e=new Xt(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return W("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(W("DataSnapshot.forEach",1,1,arguments.length),H("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),je))}))},t.prototype.hasChildren=function(){return W("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return W("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return W("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),rn=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+R(this.snapshot.exportVal())},t}(),on=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),sn=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new rn("value",this,new nn(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){y(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new on(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),an=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,L(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new on(this,t,e):null},t.prototype.createEvent=function(t,e){y(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new rn(t.type,this,new nn(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){y(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),un=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return y(Ze,"Reference.ts has not been loaded"),Ze},set:function(t){Ze=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===ke){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==jt)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ut)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===je){if(null!=e&&!he(e)||null!=n&&!he(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(y(t.getIndex()instanceof en||t.getIndex()===tn,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return W("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){W("Query.on",2,4,arguments.length),ve("Query.on",1,e,!1),H("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new sn(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new an(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){W("Query.off",0,3,arguments.length),ve("Query.off",1,t,!0),H("Query.off",2,e,!0),Q("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new sn(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new an(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;W("Query.once",1,4,arguments.length),ve("Query.once",1,e,!1),H("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new E;u.promise.catch((function(){}));var c=function(t){a&&(a=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(W("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(W("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(W("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');me("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Xt(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new en(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){W("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(ke);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){W("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(je);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){W("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(tn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),W("Query.startAt",0,2,arguments.length),fe("Query.startAt",1,e,this.path,!0),ge("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),W("Query.endAt",0,2,arguments.length),fe("Query.endAt",1,e,this.path,!0),ge("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(W("Query.equalTo",1,2,arguments.length),fe("Query.equalTo",1,t,this.path,!1),ge("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return W("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return W("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Wt(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(W("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,H(t,3,r.cancel,!0),r.context=n,Q(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(z(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),cn=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ln=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),hn=function(t,e,n){return t&&"object"==typeof t?(y(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?fn(t[".sv"],e,n):"object"==typeof t[".sv"]?pn(t[".sv"],e):void y(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},fn=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+t)}},pn=function(t,e,n){t.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&y(!1,"Unexpected increment value: "+r);var i=e.node();if(y(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},dn=function(t,e,n,r){return vn(e,new ln(n,t),r)},yn=function(t,e,n){return vn(t,new cn(e),n)};function vn(t,e,n){var r,i=t.getPriority().val(),o=hn(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=hn(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Le(a,Je(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Le(o))),u.forEachChild(je,(function(t,i){var o=vn(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,mn=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(je,(function(t,e){n.remember(new Xt(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();if(t=t.popFront(),this.children.has(r))this.children.get(r).forget(t)&&this.children.delete(r);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new Xt(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(gn||(gn={}));var _n,bn,wn=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,y(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),En=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=gn.ACK_USER_WRITE,this.source=wn.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Xt(e));return new t(Xt.Empty,n,this.revert)}return y(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Tn=function(){function t(t,e){void 0===e&&(_n||(_n=new Be(qt)),e=_n),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return Ht(e,(function(t,e){n=n.set(new Xt(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Xt.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Xt(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(Xt.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Xt.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Xt.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(Xt.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),Cn=function(){function t(t,e){this.source=t,this.path=e,this.type=gn.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Xt.Empty):new t(this.source,this.path.popFront())},t}(),Sn=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=gn.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Xt.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),In=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=gn.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Xt(e));return n.isEmpty()?null:n.value?new Sn(this.source,Xt.Empty,n.value):new t(this.source,Xt.Empty,n)}return y(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),xn=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Nn=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new xn(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new xn(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new xn($e.EMPTY_NODE,!1,!1),new xn($e.EMPTY_NODE,!1,!1)),t}(),kn=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),An=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){y(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(kn.childRemovedChange(e,s)):y(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(kn.childAddedChange(e,n)):o.trackChildChange(kn.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(je,(function(t,r){e.hasChild(t)||n.trackChildChange(kn.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(je,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(kn.childChangedChange(e,r,i))}else n.trackChildChange(kn.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?$e.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Pn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;y(e===kn.CHILD_ADDED||e===kn.CHILD_CHANGED||e===kn.CHILD_REMOVED,"Only child changes supported for tracking"),y(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===kn.CHILD_ADDED&&i===kn.CHILD_REMOVED)this.changeMap.set(n,kn.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===kn.CHILD_REMOVED&&i===kn.CHILD_ADDED)this.changeMap.delete(n);else if(e===kn.CHILD_REMOVED&&i===kn.CHILD_CHANGED)this.changeMap.set(n,kn.childRemovedChange(n,r.oldSnap));else if(e===kn.CHILD_CHANGED&&i===kn.CHILD_ADDED)this.changeMap.set(n,kn.childAddedChange(n,t.snapshotNode));else{if(e!==kn.CHILD_CHANGED||i!==kn.CHILD_CHANGED)throw v("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,kn.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),On=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Rn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new xn(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Dn=function(t,e){this.viewCache=t,this.changes=e},Ln=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){y(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),y(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,a=new Pn;if(n.type===gn.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,a):(y(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,a))}else if(n.type===gn.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,a):(y(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,a))}else if(n.type===gn.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,a):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,a)}else{if(n.type!==gn.LISTEN_COMPLETE)throw v("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,a)}var h=a.getChanges();return t.maybeAddValueEvent_(e,o,h),new Dn(o,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(kn.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(y(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof $e?u:$e.EMPTY_NODE,l=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){y(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),g=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);g=null!=m?o.getNode().getImmediateChild(f).updateChild(v,m):o.getNode().getImmediateChild(f)}else g=n.calcCompleteChild(f,t.getServerCache());s=null!=g?this.filter_.updateChild(o.getNode(),f,g,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,On,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new Rn(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,y,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Rn(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):$e.EMPTY_NODE}if(f.equals(p))s=t;else{var y=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:Tn.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new Xt(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new Xt(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=Tn.Empty;return a.getNode().forEachChild(ke,(function(t,e){u=u.set(new Xt(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=Tn.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,On,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Rn(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();y(l instanceof $e,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=a.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(a,h,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(a,h,$e.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Xt.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Mn=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===kn.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(kn.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,kn.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,kn.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,kn.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,kn.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,kn.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw v("Should only compare child_ events.");var n=new Ie(t.childName,t.snapshotNode),r=new Ie(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Fn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new An(n.getIndex()),i=n.getNodeFilter();this.processor_=new Ln(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode($e.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode($e.EMPTY_NODE,s.getNode(),null),c=new xn(a,o.isFullyInitialized(),r.filtersNodes()),l=new xn(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Nn(l,c),this.eventGenerator_=new Mn(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){y(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===gn.MERGE&&null!==t.source.queryId&&(y(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),y(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),y(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(je,(function(t,e){n.push(kn.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(kn.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),jn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return y(bn,"Reference.ts has not been loaded"),bn},set:function(t){y(!bn,"__referenceConstructor has already been defined"),bn=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return y(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=c(this.views.values()),l=u.next();!l.done;l=u.next()){s=l.value;a=a.concat(s.applyOperation(t,e,n))}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof $e?(a=n.calcCompleteEventChildren(r),u=!1):(a=$e.EMPTY_NODE,u=!1);var c=new Nn(new xn(a,u,!1),new xn(r,i,!1));s=new Fn(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],h=this.hasCompleteView();if("default"===s)try{for(var f=c(this.views.entries()),p=f.next();!p.done;p=f.next()){var d=l(p.value,2),y=d[0],v=d[1];u=u.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(y),v.getQuery().getQueryParams().loadsAllData()||a.push(v.getQuery()))}}catch(t){i={error:t}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}else(v=this.views.get(s))&&(u=u.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(s),v.getQuery().getQueryParams().loadsAllData()||a.push(v.getQuery())));return h&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=c(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=c(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=c(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Un=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Tn(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Xt.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new Tn(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return Ht(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,Tn.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Xt.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(je,(function(e,n){t.push(new Ie(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Ie(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new Tn(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(y(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Xt.Empty,this.writeTree_,t)},t.Empty=new t(new Tn(null)),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn=function(){function t(){this.visibleWrites_=Un.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new qn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){y(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){y(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));y(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Ht(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(Xt.Empty)){var s=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);c=n||$e.EMPTY_NODE;return s.apply(c)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(Xt.Empty)){var c=n||$e.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=$e.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(je,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(je,(function(t,e){var r=i.childCompoundWrite(new Xt(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){y(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Xt.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Xt.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Un.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=Xt.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=Xt.relativePath(s,n),r=r.addWrite(Xt.Empty,o.snap.getChild(a)));else{if(!o.children)throw v("WriteRecord should have .snap or .children");if(n.contains(s))a=Xt.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=Xt.relativePath(s,n)).isEmpty())r=r.addWrites(Xt.Empty,o.children);else{var u=M(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(Xt.Empty,c)}}}}}return r},t}(),qn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Bn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Tn.Empty,this.pendingWriteTree_=new Vn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Sn(wn.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Tn.fromObject(e);return this.applyOperationToSyncPoints_(new In(wn.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Tn.Empty;return null!=n.snap?r=r.set(Xt.Empty,!0):Ht(n.children,(function(t,e){r=r.set(new Xt(t),e)})),this.applyOperationToSyncPoints_(new En(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Sn(wn.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=Tn.fromObject(e);return this.applyOperationToSyncPoints_(new In(wn.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Cn(wn.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Xt.relativePath(s,e),c=new Sn(wn.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Xt.relativePath(s,e),c=Tn.fromObject(n),l=new In(wn.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Xt.relativePath(o,e),u=new Cn(wn.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Xt.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(Xt.Empty)):(a=new jn,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)?s=!0:(s=!1,i=$e.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(Xt.Empty);n&&(i=i.updateImmediateChild(t,n))})));var u=a.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);y(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(c,l),this.tagToQueryMap.set(l,c)}var h=this.pendingWriteTree_.childWrites(r),f=a.addEventRegistration(e,n,h,i,s);if(!u&&!o){var p=a.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var y=p[d],v=y.getQuery(),g=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Xt.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Ht(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)y(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),Ht(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||$e.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return y(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Xt(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);y(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Xt.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Xt.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Xt.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Xt.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Xt.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Wn=function(){function t(){this.rootNode_=$e.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),zn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Ot("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Mt(t)},t}(),Hn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),L(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return b(this.counters_)},t}(),Qn=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Hn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Gn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=s({},t);return this.last_&&Ht(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Yn=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Gn(t);var n=1e4+2e4*Math.random();$t(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Ht(e,(function(e,i){i>0&&L(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),$t(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Kn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new $n(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),$n=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();kt&&Ot("event: "+e.toString()),Kt(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Xn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},y(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=h(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){y(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Jn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return o(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return y("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Xn),Zn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||C()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return o(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return y("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Xn),tr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&Kt((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),er=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rt(t),this.stats_=Qn.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new nr((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=l(t,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=l(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=R(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=g(e),m.encodeByteArray(n,!0)),i=zt(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=R(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),nr=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=It(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){Ot("frame writing exception"),t.stack&&Ot(t.stack),Ot(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Ot("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Ot("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),rr="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ir=null;"undefined"!=typeof MozWebSocket?ir=MozWebSocket:"undefined"!=typeof WebSocket&&(ir=WebSocket);var or=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rt(this.connId),this.stats_=Qn.getCollection(n),this.connURL=t.connectionURL_(n,i,o)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tt.set("previous_websocket_failure",!0);try{if(x()){var i=p?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+rr+"/"+r.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},s=r.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(o.proxy={origin:a}),this.mySock=new ir(this.connURL,[],o)}else{o={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new ir(this.connURL,[],o)}}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ir&&!t.forceDisallow_},t.previouslyFailed=function(){return Tt.isInMemoryStorage||!0===Tt.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){Tt.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=O(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(y(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=R(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=zt(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),sr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[er,or]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=or&&or.isAvailable(),o=i&&!or.previouslyFailed();if(e.webSocketOnly&&(i||Mt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[or];else{var s=this.transports_=[];try{for(var a=c(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var l=u.value;l&&l.isAvailable()&&s.push(l)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ar=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rt("c:"+this.id+":"),this.transportManager_=new sr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=$t((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Bt("t",t),n=Bt("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Bt("t",t),n=Bt("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Bt("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?Dt("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Dt("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Mt("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),$t((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$t((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ur=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),cr=function(t){function e(n,r,i,o,s,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=Rt("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!x())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Jn.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&Zn.getInstance().on("online",c.onOnline_,c),c}return o(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(R(i)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),y(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&L(t,"w")){var n=M(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();Mt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=D(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=D(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),y(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+R(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Dt("Unrecognized action received from server: "+R(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(t){y(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(e){a?Ot("getToken() completed but was canceled"):(Ot("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new ar(i,o.repoInfo_,o.applicationId_,t,n,r,(function(t){Mt(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),s))})).then(null,(function(t){o.log_("Failed to get token: "+t),a||c()}))}},e.prototype.interrupt=function(t){Ot("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Ot("Resuming connection for reason: "+t),delete this.interruptReasons_[t],F(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return Wt(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Xt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){Ot("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=c(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,c(s.values())),u=a.next();!u.done;u=a.next()){var l=u.value;this.sendListen_(l)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+rr.replace(/\./g,"-")]=1,C()?t["framework.cordova"]=1:I()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Zn.getInstance().currentlyOnline();return F(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ur),lr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=Rt("p:rest:"),i.listens_={},i}return o(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(y(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),M(o.listens_,a)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(a.status>=200&&a.status<300){try{t=O(a.responseText)}catch(t){Mt("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Mt("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},e}(ur),hr=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new mn,this.persistentConnection_=null;var o=new zn(n,r);if(this.stats_=Qn.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new lr(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var s=n.options.databaseAuthVariableOverride;if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{R(s)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new cr(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,s),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=Qn.getOrCreateReporter(t,(function(){return new Yn(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new Wn,this.infoSyncTree_=new Bn({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Bn({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Xt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Xt(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=j(e,(function(t){return Je(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=Je(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=j(e,(function(t){return Je(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Je(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;Ht(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new Xt("/.info/"+t),r=Je(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Je(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=yn(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||Mt("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(Ht(e,(function(e,n){i=!1,s[e]=dn(t.child(e),Je(n),r.serverSyncTree_,o)})),i)Ot("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||Mt("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),Ht(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new mn;this.onDisconnect_.forEachTree(Xt.Empty,(function(r,i){var o=dn(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(Xt.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new mn,this.eventQueue_.raiseEventsForChangedPath(Xt.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Je(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Je(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(F(e))return Ot("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&Ht(e,(function(e,n){var i=Je(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Gn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);Ht(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Ot.apply(void 0,h([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&Kt((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new wr(this))},enumerable:!1,configurable:!0}),t}(),fr=function(){function t(e){this.indexedFilter_=new An(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ie(e,n))||(n=$e.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=$e.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority($e.EMPTY_NODE);var i=this;return e.forEachChild(je,(function(t,e){i.matches(new Ie(t,e))||(r=r.updateImmediateChild(t,$e.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),pr=function(){function t(t){this.rangedFilter_=new fr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ie(e,n))||(n=$e.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=$e.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=$e.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority($e.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){s=i.getNext();!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,$e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;y(a.numChildren()===this.limit_,"");var u=new Ie(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var h=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(kn.childChangedChange(e,n,h)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(kn.childRemovedChange(e,h));var d=a.updateImmediateChild(e,$e.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(kn.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(kn.childRemovedChange(c.name,c.node)),i.trackChildChange(kn.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,$e.EMPTY_NODE)):t},t}(),dr=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=je}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jt},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ut},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==je&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===je},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new An(this.getIndex()):this.hasLimit()?new pr(this):new fr(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===je?e=n.PRIORITY_INDEX:this.index_===tn?e=n.VALUE_INDEX:this.index_===ke?e=n.KEY_INDEX:(y(this.index_ instanceof en,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=R(e),this.startSet_&&(r[n.START_AT]=R(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+R(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=R(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+R(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),yr=function(t){function e(e,n){if(!(e instanceof hr))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,dr.DEFAULT,!1)||this}return o(e,t),e.prototype.getKey=function(){return W("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return W("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Xt||(null===this.path.getFront()?_e("Reference.child",1,t,!1):me("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){W("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){W("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){W("Reference.set",1,2,arguments.length),be("Reference.set",this.path),fe("Reference.set",1,t,this.path,!1),H("Reference.set",2,e,!0);var n=new E;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(W("Reference.update",1,2,arguments.length),be("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Mt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}de("Reference.update",1,t,this.path,!1),H("Reference.update",2,e,!0);var i=new E;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(W("Reference.setWithPriority",2,3,arguments.length),be("Reference.setWithPriority",this.path),fe("Reference.setWithPriority",1,t,this.path,!1),ye("Reference.setWithPriority",2,e,!1),H("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new E;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return W("Reference.remove",0,1,arguments.length),be("Reference.remove",this.path),H("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(W("Reference.transaction",1,3,arguments.length),be("Reference.transaction",this.path),H("Reference.transaction",1,t,!1),H("Reference.transaction",2,e,!0),Ee("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new E;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Ce(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){W("Reference.setPriority",1,2,arguments.length),be("Reference.setPriority",this.path),ye("Reference.setPriority",1,t,!1),H("Reference.setPriority",2,e,!0);var n=new E;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){W("Reference.push",0,2,arguments.length),be("Reference.push",this.path),fe("Reference.push",1,t,this.path,!0),H("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Se(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return be("Reference.onDisconnect",this.path),new Te(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(un);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.__referenceConstructor=yr,jn.__referenceConstructor=yr;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vr,gr=function(){this.children={},this.childCount=0,this.value=null},mr=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new gr),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Xt?e:new Xt(e),r=this,i=n.getFront();null!==i;){r=new t(i,r,M(r.node_.children,i)||new gr),i=(n=n.popFront()).getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){y(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;Ht(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new Xt(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=L(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(vr||(vr={})),hr.MAX_TRANSACTION_RETRIES_=25,hr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new mr},hr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new yr(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:It(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new nn(s.currentInputSnapshot,new yr(this,s.path),je);s.onComplete(null,!1,c)}}else{pe("transaction failed: Data returned ",u,s.path),s.status=vr.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(s),l.setValue(h);var f=void 0;if("object"==typeof u&&null!==u&&L(u,".priority"))f=M(u,".priority"),y(he(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||$e.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=Je(u,f),v=yn(d,a,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,g),this.sendReadyTransactions_()}},hr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||$e.EMPTY_NODE},hr.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);y(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===vr.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},hr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];y(u.status===vr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=vr.SENT,u.retryCount++;var c=Xt.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=vr.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new yr(n,e[s].path),c=new nn(a,u,je);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(s=0;s<o.length;s++)Kt(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===vr.SENT_NEEDS_ABORT?e[s].status=vr.NEEDS_ABORT:e[s].status=vr.RUN;else{Mt("transaction at "+h.toString()+" failed: "+r);for(s=0;s<e.length;s++)e[s].status=vr.NEEDS_ABORT,e[s].abortReason=r}n.rerunTransactions_(t)}}),s)},hr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},hr.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===vr.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=Xt.relativePath(e,a.path),c=!1,l=void 0;if(y(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===vr.NEEDS_ABORT)c=!0,l=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===vr.RUN)if(a.retryCount>=hr.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,o);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){pe("transaction failed: Data returned ",f,a.path);var p=Je(f);"object"==typeof f&&null!=f&&L(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=a.currentWriteId,v=this.generateServerValues(),g=yn(p,h,v);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,g,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[s].status=vr.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===l){var m=new yr(this,t[s].path),_=t[s].currentInputSnapshot,b=new nn(_,m,je);r.push(t[s].onComplete.bind(null,null,!1,b))}else r.push(t[s].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)Kt(r[s]);this.sendReadyTransactions_()}},hr.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},hr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},hr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},hr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==vr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},hr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},hr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===vr.SENT_NEEDS_ABORT);else if(e[o].status===vr.SENT)y(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=vr.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(y(e[o].status===vr.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Kt(n[o])}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _r,br=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return _r||(_r=new t),_r},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=c(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,c(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var l=u.value;this.repos_[s][l].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=c(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,c(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var l=u.value;this.repos_[s][l].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var i=n||t.options.databaseURL;void 0===i&&Lt("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var o=oe(i),s=o.repoInfo,a=void 0;return void 0!==r&&(a=r.env.FIREBASE_DATABASE_EMULATOR_HOST),a&&(i="http://"+a+"?ns="+s.namespace,s=(o=oe(i)).repoInfo),we("Invalid Firebase Database URL",1,o),o.path.isEmpty()||Lt("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,t,e).database},t.prototype.deleteRepo=function(t){var e=M(this.repos_,t.app.name);e&&M(e,t.repoInfo_.toURLString())===t||Lt("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=M(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=M(r,t.toURLString());return i&&Lt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new hr(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),wr=function(){function t(t){this.repo_=t,t instanceof hr||Lt("Don't call new Database() directly - please use firebase.database()."),this.root_=new yr(t,Xt.Empty),this.INTERNAL=new Er(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),W("database.ref",0,1,arguments.length),t instanceof yr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),W(e,1,1,arguments.length);var n=oe(t);we(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Lt(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&Lt("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){W("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){W("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Er=function(){function t(t){this.database=t}return t.prototype.delete=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return this.database.checkDeleted_("delete"),br.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),Tr=Object.freeze({__proto__:null,forceLongPolling:function(){or.forceDisallow(),er.forceAllow()},forceWebSockets:function(){er.forceDisallow()},isWebSocketsAvailable:function(){return or.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Cr=cr;cr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},cr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Sr,Ir=ar,xr=Zt,Nr=Object.freeze({__proto__:null,DataConnection:Cr,RealTimeConnection:Ir,hijackHash:function(t){var e=cr.prototype.put;return cr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){cr.prototype.put=e}},ConnectionTarget:xr,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){br.getInstance().forceRestClient(t)}}),kr=wr.ServerValue;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function Ar(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(function(t){rr=t})((Sr=_t).SDK_VERSION),Sr.INTERNAL.registerComponent(new Y("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return br.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:yr,Query:un,Database:wr,DataSnapshot:nn,enableLogging:Pt,INTERNAL:Tr,ServerValue:kr,TEST_ACCESS:Nr}).setMultipleInstances(!0)),Sr.registerVersion("@firebase/database","0.6.7");var Pr,Or="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},Rr=Rr||{},Dr=Or||self;function Lr(){}function Mr(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function Fr(t){var e=Mr(t);return"array"==e||"object"==e&&"number"==typeof t.length}function jr(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ur="closure_uid_"+(1e9*Math.random()>>>0),Vr=0;function qr(t,e,n){return t.call.apply(t.bind,arguments)}function Br(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Wr(t,e,n){return(Wr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qr:Br).apply(null,arguments)}function zr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var Hr=Date.now||function(){return+new Date};function Qr(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Gr(){this.j=this.j,this.i=this.i}Gr.prototype.j=!1,Gr.prototype.da=function(){if(!this.j&&(this.j=!0,this.C(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Ur)&&t[Ur]||(t[Ur]=++Vr)})(this)},Gr.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Yr=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Kr=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function $r(t){return Array.prototype.concat.apply([],arguments)}function Xr(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Jr(t){return/^[\s\xa0]*$/.test(t)}var Zr,ti=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ei(t,e){return-1!=t.indexOf(e)}function ni(t,e){return t<e?-1:t>e?1:0}t:{var ri=Dr.navigator;if(ri){var ii=ri.userAgent;if(ii){Zr=ii;break t}}Zr=""}function oi(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function si(t){var e={};for(var n in t)e[n]=t[n];return e}var ai="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ui(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ai.length;o++)n=ai[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ci(t){return ci[" "](t),t}ci[" "]=Lr;var li,hi,fi=ei(Zr,"Opera"),pi=ei(Zr,"Trident")||ei(Zr,"MSIE"),di=ei(Zr,"Edge"),yi=di||pi,vi=ei(Zr,"Gecko")&&!(ei(Zr.toLowerCase(),"webkit")&&!ei(Zr,"Edge"))&&!(ei(Zr,"Trident")||ei(Zr,"MSIE"))&&!ei(Zr,"Edge"),gi=ei(Zr.toLowerCase(),"webkit")&&!ei(Zr,"Edge");function mi(){var t=Dr.document;return t?t.documentMode:void 0}t:{var _i="",bi=(hi=Zr,vi?/rv:([^\);]+)(\)|;)/.exec(hi):di?/Edge\/([\d\.]+)/.exec(hi):pi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(hi):gi?/WebKit\/(\S+)/.exec(hi):fi?/(?:Version)[ \/]?(\S+)/.exec(hi):void 0);if(bi&&(_i=bi?bi[1]:""),pi){var wi=mi();if(null!=wi&&wi>parseFloat(_i)){li=String(wi);break t}}li=_i}var Ei,Ti={};function Ci(t){return function(t,e){var n=Ti;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=ti(String(li)).split("."),r=ti(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ni(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ni(0==s[2].length,0==a[2].length)||ni(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(Dr.document&&pi){var Si=mi();Ei=Si||(parseInt(li,10)||void 0)}else Ei=void 0;var Ii=Ei,xi=!pi||9<=Number(Ii),Ni=pi&&!Ci("9"),ki=function(){if(!Dr.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Dr.addEventListener("test",Lr,e),Dr.removeEventListener("test",Lr,e)}catch(t){}return t}();function Ai(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Pi(t,e){if(Ai.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(vi){t:{try{ci(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Oi[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ai.prototype.b=function(){this.defaultPrevented=!0},Qr(Pi,Ai);var Oi={2:"touch",3:"pen",4:"mouse"};Pi.prototype.b=function(){Pi.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ni)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Ri="closure_listenable_"+(1e6*Math.random()|0),Di=0;function Li(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++Di,this.V=this.X=!1}function Mi(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function Fi(t){this.src=t,this.a={},this.b=0}function ji(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Yr(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Mi(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ui(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}Fi.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ui(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new Li(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var Vi="closure_lm_"+(1e6*Math.random()|0),qi={};function Bi(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=$i(r),e&&e[Ri]?e.sa(n,r,jr(i)?!!i.capture:!!i,o):Wi(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Bi(t,e[o],n,r,i);return null}return n=$i(n),t&&t[Ri]?t.ra(e,n,jr(r)?!!r.capture:!!r,i):Wi(t,e,n,!1,r,i)}function Wi(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=jr(i)?!!i.capture:!!i;if(s&&!xi)return null;var a=Yi(t);if(a||(t[Vi]=a=new Fi(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Gi,e=xi?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ki||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Hi(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function zi(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[Ri])ji(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Hi(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Yi(e))?(ji(n,t),0==n.b&&(n.src=null,e[Vi]=null)):Mi(t)}}}function Hi(t){return t in qi?qi[t]:qi[t]="on"+t}function Qi(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&zi(t),n.call(r,e)}function Gi(t,e){if(t.V)return!0;if(!xi){if(!e)t:{e=["window","event"];for(var n=Dr,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Qi(t,e=new Pi(e,this))}return Qi(t,new Pi(e,this))}function Yi(t){return(t=t[Vi])instanceof Fi?t:null}var Ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function $i(t){return"function"==Mr(t)?t:(t[Ki]||(t[Ki]=function(e){return t.handleEvent(e)}),t[Ki])}function Xi(){Gr.call(this),this.c=new Fi(this),this.J=this,this.A=null}function Ji(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.V&&s.capture==n){var a=s.listener,u=s.aa||s.src;s.X&&ji(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Qr(Xi,Gr),Xi.prototype[Ri]=!0,(Pr=Xi.prototype).addEventListener=function(t,e,n,r){Bi(this,t,e,n,r)},Pr.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=jr(i)?!!i.capture:!!i,r=$i(r),e&&e[Ri]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=Ui(s=e.a[n],r,i,o))&&(Mi(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--)))):e&&(e=Yi(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Ui(n,r,i,o)),(r=-1<e?n[e]:null)&&zi(r))}(this,t,e,n,r)},Pr.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new Ai(t,n);else if(t instanceof Ai)t.target=t.target||n;else{var i=t;ui(t=new Ai(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Ji(s,r,!0,t)&&i}if(i=Ji(s=t.a=n,r,!0,t)&&i,i=Ji(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Ji(s=t.a=e[o],r,!1,t)&&i;return i},Pr.C=function(){if(Xi.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Mi(n[r]);delete e.a[t],e.b--}}this.A=null},Pr.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Pr.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Zi=Dr.JSON.stringify;function to(){this.b=this.a=null}var eo,no=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new io}),(function(t){t.reset()}),100);function ro(){var t=uo,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function io(){this.next=this.b=this.a=null}function oo(t){Dr.setTimeout((function(){throw t}),0)}function so(t,e){eo||function(){var t=Dr.Promise.resolve(void 0);eo=function(){t.then(co)}}(),ao||(eo(),ao=!0),uo.add(t,e)}to.prototype.add=function(t,e){var n=no.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},io.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},io.prototype.reset=function(){this.next=this.b=this.a=null};var ao=!1,uo=new to;function co(){for(var t;t=ro();){try{t.a.call(t.b)}catch(t){oo(t)}var e=no;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}ao=!1}function lo(t,e){Xi.call(this),this.b=t||1,this.a=e||Dr,this.f=Wr(this.Ua,this),this.g=Hr()}function ho(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function fo(t,e,n){if("function"==Mr(t))n&&(t=Wr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Wr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Dr.setTimeout(t,e||0)}function po(t,e,n){Gr.call(this),this.f=null!=n?Wr(t,n):t,this.c=e,this.b=Wr(this.Pa,this),this.a=[]}function yo(t){t.T=fo(t.b,t.c),t.f.apply(null,t.a)}function vo(t){Gr.call(this),this.b=t,this.a={}}Qr(lo,Xi),(Pr=lo.prototype).Z=!1,Pr.L=null,Pr.Ua=function(){if(this.Z){var t=Hr()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(ho(this),this.start()))}},Pr.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=Hr())},Pr.C=function(){lo.M.C.call(this),ho(this),delete this.a},Qr(po,Gr),(Pr=po.prototype).ba=!1,Pr.T=null,Pr.Ia=function(t){this.a=arguments,this.T?this.ba=!0:yo(this)},Pr.C=function(){po.M.C.call(this),this.T&&(Dr.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},Pr.Pa=function(){this.T=null,this.ba&&(this.ba=!1,yo(this))},Qr(vo,Gr);var go=[];function mo(t,e,n,r){Array.isArray(n)||(n&&(go[0]=n.toString()),n=go);for(var i=0;i<n.length;i++){var o=Bi(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function _o(t){oi(t.a,(function(t,e){this.a.hasOwnProperty(e)&&zi(t)}),t),t.a={}}function bo(){}vo.prototype.C=function(){vo.M.C.call(this),_o(this)},vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wo=null;function Eo(){return wo=wo||new Xi}function To(t){Ai.call(this,"serverreachability",t)}function Co(t){var e=Eo();e.dispatchEvent(new To(e,t))}function So(t){Ai.call(this,"statevent",t)}function Io(t){var e=Eo();e.dispatchEvent(new So(e,t))}function xo(t){Ai.call(this,"timingevent",t)}function No(t,e){if("function"!=Mr(t))throw Error("Fn must not be null and must be a function");return Dr.setTimeout((function(){t()}),e)}Qr(To,Ai),Qr(So,Ai),Qr(xo,Ai);var ko={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},Ao={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function Po(){}function Oo(t){var e;return(e=t.a)||(e=t.a={}),e}function Ro(){}Po.prototype.a=null;var Do,Lo={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function Mo(){Ai.call(this,"d")}function Fo(){Ai.call(this,"c")}function jo(){}function Uo(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new vo(this),this.N=Vo,t=yi?125:void 0,this.O=new lo(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}Qr(Mo,Ai),Qr(Fo,Ai),Qr(jo,Po),Do=new jo;var Vo=45e3,qo={},Bo={};function Wo(t,e,n){t.B=1,t.f=hs(os(e)),t.j=n,t.F=!0,zo(t,null)}function zo(t,e){t.s=Hr(),Go(t),t.A=os(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Cs(n.b,"t",r),t.w=0,t.a=ya(t.g,t.g.w?e:null),0<t.J&&(t.D=new po(Wr(t.ya,t,t.a),t.J)),mo(t.G,t.a,"readystatechange",t.Sa),e=t.m?si(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),Co(1)}function Ho(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=Qo(t,n);if(i==Bo){4==e&&(t.c=4,Io(14),r=!1);break}if(i==qo){t.c=4,Io(15),r=!1;break}Jo(t,i)}4==e&&0==n.length&&(t.c=1,Io(16),r=!1),t.b=t.b&&r,r||(Xo(t),$o(t))}function Qo(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?Bo:(n=Number(e.substring(n,r)),isNaN(n)?qo:(r+=1)+n>e.length?Bo:(e=e.substr(r,n),t.w=r+n,e))}function Go(t){t.P=Hr()+t.N,Yo(t,t.N)}function Yo(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=No(Wr(t.Qa,t),e)}function Ko(t){t.h&&(Dr.clearTimeout(t.h),t.h=null)}function $o(t){0==t.g.u||t.l||la(t.g,t)}function Xo(t){Ko(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,ho(t.O),_o(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function Jo(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||Ps(n.b,t)))if(n.A=t.H,!t.o&&Ps(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;ca(n),n.a.cancel(),n.a=null}ua(n),Io(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=No(Wr(n.Na,n),6e3));if(1>=As(n.b)&&n.O){try{n.O()}catch(t){}n.O=void 0}}else fa(n,11)}else if((t.o||n.a==t)&&ca(n),!Jr(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var s=i[5];null!=s&&"number"==typeof s&&0<s&&(n.D=1.5*s);var a=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var l=a.b;!l.a&&(ei(c,"spdy")||ei(c,"quic")||ei(c,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Os(l,l.b),l.b=null))}if(a.s){var h=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(a.ha=h,ls(a.v,a.s,h))}}n.u=3,n.c&&n.c.na();var f=t;if((a=n).ea=da(a,a.w?a.R:null,a.P),f.o){Rs(a.b,f);var p=f,d=a.D;d&&p.setTimeout(d),p.h&&(Ko(p),Go(p)),a.a=f}else aa(a);0<n.f.length&&ra(n)}else"stop"!=i[0]&&"close"!=i[0]||fa(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?fa(n,7):ta(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);Co(4)}catch(t){}}function Zo(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Fr(t)||"string"==typeof t)Kr(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(Fr(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(Fr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ts(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ts)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function es(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ns(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ns(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ns(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Pr=Uo.prototype).setTimeout=function(t){this.N=t},Pr.Sa=function(t){t=t.target;var e=this.D;e&&3==$s(t)?e.Ia():this.ya(t)},Pr.ya=function(t){try{if(t==this.a)t:{var e=$s(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!yi&&!this.a.Y())){this.l||4!=e||7==n||Co(8==n||0>=r?3:2),Ko(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jr(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,Io(12),Xo(this),$o(this);break t}this.o=!0,Jo(this,u)}this.F?(Ho(this,e,o),yi&&this.b&&3==e&&(mo(this.G,this.O,"tick",this.Ra),this.O.start())):Jo(this,o),4==e&&Xo(this),this.b&&!this.l&&(4==e?la(this.g,this):(this.b=!1,Go(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Io(12)):(this.c=0,Io(13)),Xo(this),$o(this)}}}catch(t){}},Pr.Ra=function(){if(this.a){var t=$s(this.a),e=this.a.Y();this.w<e.length&&(Ko(this),Ho(this,t,e),this.b&&4!=t&&Go(this))}},Pr.cancel=function(){this.l=!0,Xo(this)},Pr.Qa=function(){this.h=null;var t=Hr();0<=t-this.P?(2!=this.B&&(Co(3),Io(17)),Xo(this),this.c=2,$o(this)):Yo(this,this.P-t)},(Pr=ts.prototype).I=function(){es(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Pr.K=function(){return es(this),this.a.concat()},Pr.get=function(t,e){return ns(this.b,t)?this.b[t]:e},Pr.set=function(t,e){ns(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Pr.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var rs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function is(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof is){this.a=void 0!==e?e:t.a,ss(this,t.f),this.j=t.j,as(this,t.c),us(this,t.h),this.g=t.g,e=t.b;var n=new bs;n.c=e.c,e.a&&(n.a=new ts(e.a),n.b=e.b),cs(this,n),this.i=t.i}else t&&(n=String(t).match(rs))?(this.a=!!e,ss(this,n[1]||"",!0),this.j=fs(n[2]||""),as(this,n[3]||"",!0),us(this,n[4]),this.g=fs(n[5]||"",!0),cs(this,n[6]||"",!0),this.i=fs(n[7]||"")):(this.a=!!e,this.b=new bs(null,this.a))}function os(t){return new is(t)}function ss(t,e,n){t.f=n?fs(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function as(t,e,n){t.c=n?fs(e,!0):e}function us(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function cs(t,e,n){e instanceof bs?(t.b=e,function(t,e){e&&!t.f&&(ws(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Es(this,e),Cs(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ps(e,ms)),t.b=new bs(e,t.a))}function ls(t,e,n){t.b.set(e,n)}function hs(t){return ls(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Hr()).toString(36)),t}function fs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ps(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ds),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ds(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}is.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ps(e,ys,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ps(e,ys,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ps(n,"/"==n.charAt(0)?gs:vs,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ps(n,_s)),t.join("")};var ys=/[#\/\?@]/g,vs=/[#\?:]/g,gs=/[#\?]/g,ms=/[#\?@]/g,_s=/#/g;function bs(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ws(t){t.a||(t.a=new ts,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Es(t,e){ws(t),e=Ss(t,e),ns(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ns((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&es(t)))}function Ts(t,e){return ws(t),e=Ss(t,e),ns(t.a.b,e)}function Cs(t,e,n){Es(t,e),0<n.length&&(t.c=null,t.a.set(Ss(t,e),Xr(n)),t.b+=n.length)}function Ss(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Is(t,e){this.b=t,this.a=e}function xs(t){this.g=t||Ns,Dr.PerformanceNavigationTiming?t=0<(t=Dr.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Dr.ca&&Dr.ca.ua&&Dr.ca.ua()&&Dr.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Pr=bs.prototype).add=function(t,e){ws(this),this.c=null,t=Ss(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Pr.forEach=function(t,e){ws(this),this.a.forEach((function(n,r){Kr(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Pr.K=function(){ws(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Pr.I=function(t){ws(this);var e=[];if("string"==typeof t)Ts(this,t)&&(e=$r(e,this.a.get(Ss(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=$r(e,t[n])}return e},Pr.set=function(t,e){return ws(this),this.c=null,Ts(this,t=Ss(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Pr.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},Pr.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ns=10;function ks(t){return!!t.b||!!t.a&&t.a.size>=t.f}function As(t){return t.b?1:t.a?t.a.size:0}function Ps(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Os(t,e){t.a?t.a.add(e):t.b=e}function Rs(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Ds(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ar(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Xr(t.c)}function Ls(){}function Ms(){this.a=new Ls}function Fs(t,e,n){var r=n||"";try{Zo(t,(function(t,n){var i=t;jr(t)&&(i=Zi(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function js(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}xs.prototype.cancel=function(){var t,e;if(this.c=Ds(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ar(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ls.prototype.stringify=function(t){return Dr.JSON.stringify(t,void 0)},Ls.prototype.parse=function(t){return Dr.JSON.parse(t,void 0)};var Us=Dr.JSON.parse;function Vs(t){Xi.call(this),this.headers=new ts,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=qs,this.B=this.F=!1}Qr(Vs,Xi);var qs="",Bs=/^https?$/i,Ws=["POST","PUT"];function zs(t){return"content-type"==t.toLowerCase()}function Hs(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Qs(t),Ys(t)}function Qs(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Gs(t){if(t.b&&void 0!==Rr&&(!t.s[1]||4!=$s(t)||2!=t.S()))if(t.l&&4==$s(t))fo(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==$s(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(rs)[1]||null;if(!o&&Dr.self&&Dr.self.location){var s=Dr.self.location.protocol;o=s.substr(0,s.length-1)}i=!Bs.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<$s(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",Qs(t)}}finally{Ys(t)}}}function Ys(t,e){if(t.a){Ks(t);var n=t.a,r=t.s[0]?Lr:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Ks(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(Dr.clearTimeout(t.m),t.m=null)}function $s(t){return t.a?t.a.readyState:0}function Xs(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return oi(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ls(t,e,n))}function Js(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Zs(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=Js("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=Js("baseRetryDelayMs",5e3,t),this.Ga=Js("retryDelaySeedMs",1e4,t),this.Da=Js("forwardChannelMaxRetries",2,t),this.ga=Js("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new xs(t&&t.concurrentRequestLimit),this.ja=new Ms,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function ta(t){if(ea(t),3==t.u){var e=t.H++,n=os(t.v);ls(n,"SID",t.B),ls(n,"RID",e),ls(n,"TYPE","terminate"),oa(t,n),(e=new Uo(t,e,void 0)).B=2,e.f=hs(os(n)),n=!1,Dr.navigator&&Dr.navigator.sendBeacon&&(n=Dr.navigator.sendBeacon(e.f.toString(),"")),!n&&Dr.Image&&((new Image).src=e.f,n=!0),n||(e.a=ya(e.g,null),e.a.$(e.f)),e.s=Hr(),Go(e)}pa(t)}function ea(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(Dr.clearTimeout(t.i),t.i=null),ca(t),t.b.cancel(),t.g&&("number"==typeof t.g&&Dr.clearTimeout(t.g),t.g=null)}function na(t,e){t.f.push(new Is(t.Fa++,e)),3==t.u&&ra(t)}function ra(t){ks(t.b)||t.g||(t.g=!0,so(t.xa,t),t.o=0)}function ia(t,e){var n;n=e?e.W:t.H++;var r=os(t.v);ls(r,"SID",t.B),ls(r,"RID",n),ls(r,"AID",t.G),oa(t,r),t.h&&t.j&&Xs(r,t.h,t.j),n=new Uo(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=sa(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),Os(t.b,n),Wo(n,r,e)}function oa(t,e){t.c&&Zo({},(function(t,n){ls(e,n,t)}))}function sa(t,e,n){n=Math.min(t.f.length,n);var r=t.c?Wr(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Fs(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function aa(t){t.a||t.i||(t.J=1,so(t.wa,t),t.m=0)}function ua(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=No(Wr(t.wa,t),ha(t,t.m)),t.m++,!0)}function ca(t){null!=t.l&&(Dr.clearTimeout(t.l),t.l=null)}function la(t,e){var n=null;if(t.a==e){ca(t),t.a=null;var r=2}else{if(!Ps(t.b,e))return;n=e.i,Rs(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Hr()-e.s;var i=t.o;(r=Eo()).dispatchEvent(new xo(r,n,e,i)),ra(t)}else aa(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(As(t.b)>=t.b.f-(t.g?1:0))&&(t.g?(t.f=e.i.concat(t.f),!0):!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da))&&(t.g=No(Wr(t.xa,t,e),ha(t,t.o)),t.o++,!0))}(t,e)||2==r&&ua(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:fa(t,5);break;case 4:fa(t,10);break;case 3:fa(t,6);break;default:fa(t,2)}}function ha(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function fa(t,e){if(2==e){var n=null;t.c&&(n=null);var r=Wr(t.Ta,t);n||(n=new is("//www.google.com/images/cleardot.gif"),Dr.location&&"http"==Dr.location.protocol||ss(n,"https"),hs(n)),function(t,e){var n=new bo;if(Dr.Image){var r=new Image;r.onload=zr(js,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zr(js,n,r,"TestLoadImage: error",!1,e),r.onabort=zr(js,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zr(js,n,r,"TestLoadImage: timeout",!1,e),Dr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Io(2);t.u=0,t.c&&t.c.la(e),pa(t),ea(t)}function pa(t){t.u=0,t.A=-1,t.c&&(0==Ds(t.b).length&&0==t.f.length||(t.b.c.length=0,Xr(t.f),t.f.length=0),t.c.ka())}function da(t,e,n){var r=function(t){return t instanceof is?os(t):new is(t,void 0)}(n);if(""!=r.c)e&&as(r,e+"."+r.c),us(r,r.h);else{var i=Dr.location;r=function(t,e,n,r){var i=new is(null,void 0);return t&&ss(i,t),e&&as(i,e),n&&us(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&oi(t.N,(function(t,e){ls(r,e,t)})),e=t.s,n=t.ha,e&&n&&ls(r,e,n),ls(r,"VER",t.oa),oa(t,r),r}function ya(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vs(t.Ea)).F=t.w,e}function va(){}function ga(){if(pi&&!(10<=Number(Ii)))throw Error("Environmental error: no available transport.")}function ma(t,e){Xi.call(this),this.a=new Zs(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!Jr(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jr(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new wa(this)}function _a(t){Mo.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ba(){Fo.call(this),this.status=1}function wa(t){this.a=t}(Pr=Vs.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?Oo(this.G):Oo(Do),this.a.onreadystatechange=Wr(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Hs(this,t)}t=n||"";var i=new ts(this.headers);r&&Zo(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=zs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=Dr.FormData&&t instanceof Dr.FormData,!(0<=Yr(Ws,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ks(this),0<this.o&&((this.B=function(t){return pi&&Ci(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Wr(this.ta,this)):this.m=fo(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Hs(this,t)}},Pr.ta=function(){void 0!==Rr&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Pr.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ys(this))},Pr.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ys(this,!0)),Vs.M.C.call(this)},Pr.va=function(){this.j||(this.w||this.l||this.g?Gs(this):this.Oa())},Pr.Oa=function(){Gs(this)},Pr.S=function(){try{return 2<$s(this)?this.a.status:-1}catch(t){return-1}},Pr.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Pr.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Us(e)}},Pr.qa=function(){return this.h},Pr.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(Pr=Zs.prototype).oa=8,Pr.u=1,Pr.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new Uo(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?ui(r=si(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=sa(this,n,e),ls(i=os(this.v),"RID",t),ls(i,"CVER",22),this.s&&ls(i,"X-HTTP-Session-Id",this.s),oa(this,i),this.h&&r&&Xs(i,this.h,r),Os(this.b,n),this.fa?(ls(i,"$req",e),ls(i,"SID","null"),n.R=!0,Wo(n,i,null)):Wo(n,i,e),this.u=2}}else 3==this.u&&(t?ia(this,t):0==this.f.length||ks(this.b)||ia(this))},Pr.wa=function(){this.i=null,this.a=new Uo(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=os(this.ea);ls(t,"RID","rpc"),ls(t,"SID",this.B),ls(t,"CI",this.U?"0":"1"),ls(t,"AID",this.G),oa(this,t),ls(t,"TYPE","xmlhttp"),this.h&&this.j&&Xs(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=hs(os(t)),e.j=null,e.F=!0,zo(e,n)},Pr.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,ua(this),Io(19))},Pr.Ta=function(t){Io(t?2:1)},(Pr=va.prototype).na=function(){},Pr.ma=function(){},Pr.la=function(){},Pr.ka=function(){},Pr.Ha=function(){},ga.prototype.a=function(t,e){return new ma(t,e)},Qr(ma,Xi),(Pr=ma.prototype).addEventListener=function(t,e,n,r){ma.M.addEventListener.call(this,t,e,n,r)},Pr.removeEventListener=function(t,e,n,r){ma.M.removeEventListener.call(this,t,e,n,r)},Pr.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Io(0),t.P=e,t.N=n||{},t.U=t.W,t.v=da(t,null,t.P),ra(t)},Pr.close=function(){ta(this.a)},Pr.La=function(t){if("string"==typeof t){var e={};e.__data__=t,na(this.a,e)}else this.g?((e={}).__data__=Zi(t),na(this.a,e)):na(this.a,t)},Pr.C=function(){this.a.c=null,delete this.f,ta(this.a),delete this.a,ma.M.C.call(this)},Qr(_a,Mo),Qr(ba,Fo),Qr(wa,va),wa.prototype.na=function(){this.a.dispatchEvent("a")},wa.prototype.ma=function(t){this.a.dispatchEvent(new _a(t))},wa.prototype.la=function(t){this.a.dispatchEvent(new ba(t))},wa.prototype.ka=function(){this.a.dispatchEvent("b")},ga.prototype.createWebChannel=ga.prototype.a,ma.prototype.send=ma.prototype.La,ma.prototype.open=ma.prototype.Ka,ma.prototype.close=ma.prototype.close,ko.NO_ERROR=0,ko.TIMEOUT=8,ko.HTTP_ERROR=6,Ao.COMPLETE="complete",Ro.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",Xi.prototype.listen=Xi.prototype.ra,Vs.prototype.listenOnce=Vs.prototype.sa,Vs.prototype.getLastError=Vs.prototype.Ma,Vs.prototype.getLastErrorCode=Vs.prototype.qa,Vs.prototype.getStatus=Vs.prototype.S,Vs.prototype.getResponseJson=Vs.prototype.Ja,Vs.prototype.getResponseText=Vs.prototype.Y,Vs.prototype.send=Vs.prototype.$;var Ea={createWebChannelTransport:function(){return new ga},ErrorCode:ko,EventType:Ao,WebChannel:Ro,XhrIo:Vs},Ta=Ea.createWebChannelTransport,Ca=Ea.ErrorCode,Sa=Ea.EventType,Ia=Ea.WebChannel,xa=Ea.XhrIo,Na=_t.SDK_VERSION,ka=new st("@firebase/firestore");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Aa(){return ka.logLevel}function Pa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ka.logLevel<=Z.DEBUG){var r=e.map(Ra);ka.debug.apply(ka,f(["Firestore ("+Na+"): "+t],r))}}function Oa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ka.logLevel<=Z.ERROR){var r=e.map(Ra);ka.error.apply(ka,f(["Firestore ("+Na+"): "+t],r))}}function Ra(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+Na+") INTERNAL ASSERTION FAILED: "+t;throw Oa(e),new Error(e)}function La(t,e){t||Da()}function Ma(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ja=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Fa(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ua(t,e){return t<e?-1:t>e?1:0}function Va(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function qa(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ba=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},Wa=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return Ua(this.projectId,t.projectId)||Ua(this.database,t.database)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ha(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qa(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ga=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ha(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype._=function(){return Qa(this.l)},t}(),Ya={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ka=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o(e,t),e}(Error),$a=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ka(Ya.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ka(Ya.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ka(Ya.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ka(Ya.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?Ua(this.nanoseconds,t.nanoseconds):Ua(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Xa=function(){function t(t){this.timestamp=t}return t.I=function(e){return new t(e)},t.min=function(){return new t(new $a(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.A=function(){return this.timestamp},t}(),Ja=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Da(),void 0===n?n=t.length-e:n>t.length-e&&Da(),this.segments=t,this.offset=e,this.R=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.V(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Za=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.prototype.N=function(){return this.F().join("/")},e.prototype.toString=function(){return this.N()},e.$=function(t){if(t.indexOf("//")>=0)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.k=function(){return new e([])},e}(Ja),tu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.M=function(t){return tu.test(t)},e.prototype.N=function(){return this.F().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.M(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.N()},e.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},e.L=function(){return new e(["__name__"])},e.B=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ka(Ya.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ka(Ya.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ka(Ya.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.k=function(){return new e([])},e}(Ja),nu=function(){function t(t){this.path=t}return t.q=function(e){return new t(Za.$(e).g(5))},t.prototype.U=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Za.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return Za.P(t.path,e.path)},t.W=function(t){return t.length%2==0},t.j=function(e){return new t(new Za(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){return null==t}function iu(t){return-0===t&&1/t==-1/0}function ou(t){return"number"==typeof t&&Number.isInteger(t)&&!iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var su=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.K=null};function au(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new su(t,e,n,r,i,o,s)}function uu(t){var e=Ma(t);if(null===e.K){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.N()+t.op.toString()+Zu(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.N()+e.dir;var e})).join(","),ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Fl(e.startAt)),e.endAt&&(n+="|ub:",n+=Fl(e.endAt)),e.K=n}return e.K}function cu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Bl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],!(i instanceof Al&&o instanceof Al&&i.op===o.op&&i.field.isEqual(o.field)&&Ku(i.value,o.value)))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ul(t.startAt,e.startAt)&&Ul(t.endAt,e.endAt)}function lu(t){return nu.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hu=function(){function t(t){this.G=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.G,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},t.prototype.H=function(){return 2*this.G.length},t.prototype.o=function(t){return Ua(this.G,t.G)},t.prototype.isEqual=function(t){return this.G===t.G},t}();hu.Y=new hu("");var fu,pu,du=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Xa.min()),void 0===o&&(o=Xa.min()),void 0===s&&(s=hu.Y),this.target=t,this.targetId=e,this.J=n,this.sequenceNumber=r,this.X=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Z=function(e){return new t(this.target,this.targetId,this.J,e,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.tt=function(e,n){return new t(this.target,this.targetId,this.J,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.et=function(e){return new t(this.target,this.targetId,this.J,this.sequenceNumber,this.X,e,this.resumeToken)},t}(),yu=function(t){this.count=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){switch(t){case Ya.OK:return Da();case Ya.CANCELLED:case Ya.UNKNOWN:case Ya.DEADLINE_EXCEEDED:case Ya.RESOURCE_EXHAUSTED:case Ya.INTERNAL:case Ya.UNAVAILABLE:case Ya.UNAUTHENTICATED:return!1;case Ya.INVALID_ARGUMENT:case Ya.NOT_FOUND:case Ya.ALREADY_EXISTS:case Ya.PERMISSION_DENIED:case Ya.FAILED_PRECONDITION:case Ya.ABORTED:case Ya.OUT_OF_RANGE:case Ya.UNIMPLEMENTED:case Ya.DATA_LOSS:return!0;default:return Da()}}function gu(t){if(void 0===t)return Oa("GRPC error has no .code"),Ya.UNKNOWN;switch(t){case fu.OK:return Ya.OK;case fu.CANCELLED:return Ya.CANCELLED;case fu.UNKNOWN:return Ya.UNKNOWN;case fu.DEADLINE_EXCEEDED:return Ya.DEADLINE_EXCEEDED;case fu.RESOURCE_EXHAUSTED:return Ya.RESOURCE_EXHAUSTED;case fu.INTERNAL:return Ya.INTERNAL;case fu.UNAVAILABLE:return Ya.UNAVAILABLE;case fu.UNAUTHENTICATED:return Ya.UNAUTHENTICATED;case fu.INVALID_ARGUMENT:return Ya.INVALID_ARGUMENT;case fu.NOT_FOUND:return Ya.NOT_FOUND;case fu.ALREADY_EXISTS:return Ya.ALREADY_EXISTS;case fu.PERMISSION_DENIED:return Ya.PERMISSION_DENIED;case fu.FAILED_PRECONDITION:return Ya.FAILED_PRECONDITION;case fu.ABORTED:return Ya.ABORTED;case fu.OUT_OF_RANGE:return Ya.OUT_OF_RANGE;case fu.UNIMPLEMENTED:return Ya.UNIMPLEMENTED;case fu.DATA_LOSS:return Ya.DATA_LOSS;default:return Da()}}(pu=fu||(fu={}))[pu.OK=0]="OK",pu[pu.CANCELLED=1]="CANCELLED",pu[pu.UNKNOWN=2]="UNKNOWN",pu[pu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pu[pu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pu[pu.NOT_FOUND=5]="NOT_FOUND",pu[pu.ALREADY_EXISTS=6]="ALREADY_EXISTS",pu[pu.PERMISSION_DENIED=7]="PERMISSION_DENIED",pu[pu.UNAUTHENTICATED=16]="UNAUTHENTICATED",pu[pu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pu[pu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pu[pu.ABORTED=10]="ABORTED",pu[pu.OUT_OF_RANGE=11]="OUT_OF_RANGE",pu[pu.UNIMPLEMENTED=12]="UNIMPLEMENTED",pu[pu.INTERNAL=13]="INTERNAL",pu[pu.UNAVAILABLE=14]="UNAVAILABLE",pu[pu.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mu=function(){function t(t,e){this.P=t,this.root=e||bu.EMPTY}return t.prototype.nt=function(e,n){return new t(this.P,this.root.nt(e,n,this.P).copy(null,null,bu.st,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).copy(null,null,bu.st,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.it=function(){return this.root.it()},t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(t){return this.root.ot(t)},t.prototype.forEach=function(t){this.ot((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ot((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.at=function(){return new _u(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new _u(this.root,t,this.P,!1)},t.prototype.ct=function(){return new _u(this.root,null,this.P,!0)},t.prototype.lt=function(t){return new _u(this.root,t,this.P,!0)},t}(),_u=function(){function t(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}return t.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},t.prototype.wt=function(){return this.ft.length>0},t.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},t}(),bu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype._=function(){return!1},t.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.it=function(){return this.min().key},t.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},t.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},t.prototype.It=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.At()||e.left.left.At()||(e=e.Rt()),(e=e.copy(null,null,null,e.left.It(),null)).Et()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.At()||i.left.left.At()||(i=i.Rt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.At()&&(i=i.Pt()),i.right._()||i.right.At()||i.right.left.At()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.It())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Et()},t.prototype.At=function(){return this.color},t.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.yt()),t},t.prototype.Rt=function(){var t=this.yt();return t.right.left.At()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).gt()).yt()),t},t.prototype.Vt=function(){var t=this.yt();return t.left.left.At()&&(t=(t=t.Pt()).yt()),t},t.prototype.gt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Pt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.pt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},t.prototype.bt=function(){if(this.At()&&this.left.At())throw Da();if(this.right.At())throw Da();var t=this.left.bt();if(t!==this.right.bt())throw Da();return t+(this.At()?0:1)},t}();bu.EMPTY=null,bu.RED=!0,bu.st=!1,bu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Da()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Da()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Da()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Da()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Da()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.nt=function(t,e,n){return new bu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ot=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.it=function(){return null},t.prototype.rt=function(){return null},t.prototype.At=function(){return!1},t.prototype.pt=function(){return!0},t.prototype.bt=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wu=function(){function t(t){this.P=t,this.data=new mu(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.it()},t.prototype.last=function(){return this.data.rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ot((function(e,n){return t(e),!1}))},t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},t.prototype.at=function(){return new Eu(this.data.at())},t.prototype.ut=function(t){return new Eu(this.data.ut(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.at(),r=e.data.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(0!==this.P(i,o))return!1}return!0},t.prototype.F=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.P);return n.data=e,n},t}(),Eu=function(){function t(t){this.Ft=t}return t.prototype.dt=function(){return this.Ft.dt().key},t.prototype.wt=function(){return this.Ft.wt()},t}(),Tu=new mu(nu.P);function Cu(){return Tu}function Su(){return Cu()}var Iu=new mu(nu.P);function xu(){return Iu}var Nu=new mu(nu.P),ku=new wu(nu.P);function Au(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ku,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Pu=new wu(Ua);function Ou(){return Pu}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ru=function(){function t(t){this.P=t?function(e,n){return t(e,n)||nu.P(e.key,n.key)}:function(t,e){return nu.P(t.key,e.key)},this.Nt=xu(),this.$t=new mu(this.P)}return t.kt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.Nt.get(t)},t.prototype.get=function(t){return this.Nt.get(t)},t.prototype.first=function(){return this.$t.it()},t.prototype.last=function(){return this.$t.rt()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ot((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Nt.nt(t.key,t),e.$t.nt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Nt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.at(),r=e.$t.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.P=this.P,r.Nt=e,r.$t=n,r},t}(),Du=function(){function t(){this.xt=new mu(nu.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);n?0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):Da():this.xt=this.xt.nt(e,t)},t.prototype.Mt=function(){var t=[];return this.xt.ot((function(e,n){t.push(n)})),t},t}(),Lu=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ot=n,this.docChanges=r,this.Lt=i,this.fromCache=o,this.Bt=s,this.qt=a}return t.Ut=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ru.kt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Lt._()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Lt.isEqual(t.Lt)&&Sl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Mu=function(){function t(t,e,n,r,i){this.X=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}return t.Gt=function(e,n){var r=new Map;return r.set(e,Fu.zt(e,n)),new t(Xa.min(),r,Ou(),Cu(),Au())},t}(),Fu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}return t.zt=function(e,n){return new t(hu.Y,n,Au(),Au(),Au())},t}(),ju=function(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r},Uu=function(t,e){this.targetId=t,this.ee=e},Vu=function(t,e,n,r){void 0===n&&(n=hu.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},qu=function(){function t(){this.ne=0,this.se=zu(),this.ie=hu.Y,this.re=!1,this.oe=!0}return Object.defineProperty(t.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){t.H()>0&&(this.oe=!0,this.ie=t)},t.prototype.ce=function(){var t=Au(),e=Au(),n=Au();return this.se.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Da()}})),new Fu(this.ie,this.re,t,e,n)},t.prototype.le=function(){this.oe=!1,this.se=zu()},t.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},t.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},t.prototype.de=function(){this.ne+=1},t.prototype.we=function(){this.ne-=1},t.prototype.Te=function(){this.oe=!0,this.re=!0},t}(),Bu=function(){function t(t){this.Ee=t,this.Ie=new Map,this.me=Cu(),this.Ae=Wu(),this.Re=new wu(Ua)}return t.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof wl?this.Ve(r,t.te):t.te instanceof El&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ge(s,t.key,t.te)}},t.prototype.ye=function(t){var e=this;this.pe(t,(function(n){var r=e.be(n);switch(t.state){case 0:e.ve(n)&&r.ue(t.resumeToken);break;case 1:r.we(),r.he||r.le(),r.ue(t.resumeToken);break;case 2:r.we(),r.he||e.removeTarget(n);break;case 3:e.ve(n)&&(r.Te(),r.ue(t.resumeToken));break;case 4:e.ve(n)&&(e.Se(n),r.ue(t.resumeToken));break;default:Da()}}))},t.prototype.pe=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.ve(r)&&e(r)}))},t.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(lu(i))if(0===n){var o=new nu(i.path);this.ge(e,o,new El(o,Xa.min()))}else La(1===n);else this.Fe(e)!==n&&(this.Se(e),this.Re=this.Re.add(e))}},t.prototype.Ne=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o=e.Ce(i);if(o){if(r.Ht&&lu(o.target)){var s=new nu(o.target.path);null!==e.me.get(s)||e.$e(i,s)||e.ge(i,s,new El(s,t))}r.ae&&(n.set(i,r.ce()),r.le())}}));var r=Au();this.Ae.forEach((function(t,n){var i=!0;n.St((function(t){var n=e.Ce(t);return!n||2===n.J||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Mu(t,n,this.Re,this.me,r);return this.me=Cu(),this.Ae=Wu(),this.Re=new wu(Ua),i},t.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.me=this.me.nt(e.key,e),this.Ae=this.Ae.nt(e.key,this.ke(e.key).add(t))}},t.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Ae=this.Ae.nt(e,this.ke(e).delete(t)),n&&(this.me=this.me.nt(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},t.prototype.de=function(t){this.be(t).de()},t.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new qu,this.Ie.set(t,e)),e},t.prototype.ke=function(t){var e=this.Ae.get(t);return e||(e=new wu(Ua),this.Ae=this.Ae.nt(t,e)),e},t.prototype.ve=function(t){var e=null!==this.Ce(t);return e||Pa("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},t.prototype.Se=function(t){var e=this;this.Ie.set(t,new qu),this.Ee.xe(t).forEach((function(n){e.ge(t,n,null)}))},t.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(){return new mu(nu.P)}function zu(){return new mu(nu.P)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Qu(t){var e=tc(t.mapValue.fields.__local_write_time__.timestampValue);return new $a(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hu(t)?4:10:Da()}function Ku(t,e){var n=Yu(t);if(n!==Yu(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qu(t).isEqual(Qu(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=tc(t.timestampValue),r=tc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return nc(t.bytesValue).isEqual(nc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ec(t.geoPointValue.latitude)===ec(e.geoPointValue.latitude)&&ec(t.geoPointValue.longitude)===ec(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ec(t.integerValue)===ec(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ec(t.doubleValue),r=ec(e.doubleValue);return n===r?iu(n)===iu(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Va(t.arrayValue.values||[],e.arrayValue.values||[],Ku);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(za(n)!==za(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ku(n[i],r[i])))return!1;return!0}(t,e);default:return Da()}}function $u(t,e){return void 0!==(t.values||[]).find((function(t){return Ku(t,e)}))}function Xu(t,e){var n=Yu(t),r=Yu(e);if(n!==r)return Ua(n,r);switch(n){case 0:return 0;case 1:return Ua(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ec(t.integerValue||t.doubleValue),r=ec(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ju(t.timestampValue,e.timestampValue);case 4:return Ju(Qu(t),Qu(e));case 5:return Ua(t.stringValue,e.stringValue);case 6:return function(t,e){var n=nc(t),r=nc(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ua(n[i],r[i]);if(0!==o)return o}return Ua(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ua(ec(t.latitude),ec(e.latitude));return 0!==n?n:Ua(ec(t.longitude),ec(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Xu(n[i],r[i]);if(o)return o}return Ua(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ua(r[s],o[s]);if(0!==a)return a;var u=Xu(n[r[s]],i[o[s]]);if(0!==u)return u}return Ua(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Da()}}function Ju(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ua(t,e);var n=tc(t),r=tc(e),i=Ua(n.seconds,r.seconds);return 0!==i?i:Ua(n.nanos,r.nanos)}function Zu(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=tc(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nc(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,nu.q(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=t(s)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Da();var n,r}(t)}function tc(t){if(La(!!t),"string"==typeof t){var e=0,n=Gu.exec(t);if(La(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ec(t.seconds),nanos:ec(t.nanos)}}function ec(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function nc(t){return"string"==typeof t?hu.fromBase64String(t):hu.fromUint8Array(t)}function rc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function ic(t){return!!t&&"integerValue"in t}function oc(t){return!!t&&"arrayValue"in t}function sc(t){return!!t&&"nullValue"in t}function ac(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function uc(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cc={asc:"ASCENDING",desc:"DESCENDING"},lc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hc=function(t,e){this.s=t,this.Oe=e};function fc(t){return{integerValue:""+t}}function pc(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function dc(t,e){return ou(e)?fc(e):pc(t,e)}function yc(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function vc(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function gc(t,e){return yc(t,e.A())}function mc(t){return La(!!t),Xa.I(function(t){var e=tc(t);return new $a(e.seconds,e.nanos)}(t))}function _c(t,e){return function(t){return new Za(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).N()}function bc(t){var e=Za.$(t);return La(Uc(e)),e}function wc(t,e){return _c(t.s,e.path)}function Ec(t,e){var n=bc(e);return La(n.get(1)===t.s.projectId),La(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new nu(Ic(n))}function Tc(t,e){return _c(t.s,e)}function Cc(t){var e=bc(t);return 4===e.length?Za.k():Ic(e)}function Sc(t){return new Za(["projects",t.s.projectId,"databases",t.s.database]).N()}function Ic(t){return La(t.length>4&&"documents"===t.get(4)),t.g(5)}function xc(t,e,n){return{name:wc(t,e),fields:n.proto.mapValue.fields}}function Nc(t,e){var n;if(e instanceof cl)n={update:xc(t,e.key,e.value)};else if(e instanceof yl)n={delete:wc(t,e.key)};else if(e instanceof ll)n={update:xc(t,e.key,e.data),updateMask:jc(e.Le)};else if(e instanceof fl)n={transform:{document:wc(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof zc)return{fieldPath:e.field.N(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hc)return{fieldPath:e.field.N(),appendMissingElements:{values:n.elements}};if(n instanceof Gc)return{fieldPath:e.field.N(),removeAllFromArray:{values:n.elements}};if(n instanceof Kc)return{fieldPath:e.field.N(),increment:n.Be};throw Da()}(0,t)}))}};else{if(!(e instanceof vl))return Da();n={verify:wc(t,e.key)}}return e.Ue.qe||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:gc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Da()}(t,e.Ue)),n}function kc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?el.updateTime(mc(t.updateTime)):void 0!==t.exists?el.exists(t.exists):el.Qe()}(e.currentDocument):el.Qe();if(e.update){e.update.name;var r=Ec(t,e.update.name),i=new gl({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Jc(e.map((function(t){return eu.B(t)})))}(e.updateMask);return new ll(r,i,o,n)}return new cl(r,i,n)}if(e.delete){var s=Ec(t,e.delete);return new yl(s,n)}if(e.transform){var a=Ec(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)La("REQUEST_TIME"===e.setToServerValue),n=new zc;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Hc(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Gc(i)}else"increment"in e?n=new Kc(t,e.increment):Da();var o=eu.B(e.fieldPath);return new Zc(o,n)}(t,e)}));return La(!0===n.exists),new fl(a,u)}if(e.verify){var c=Ec(t,e.verify);return new vl(c,n)}return Da()}function Ac(t,e){return{documents:[Tc(t,e.path)]}}function Pc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Tc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Tc(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return t instanceof Al?function(t){if("=="===t.op){if(ac(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NAN"}};if(sc(t.value))return{unaryFilter:{field:Dc(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Dc(t.field),op:(e=t.op,lc[e]),value:t.value}};var e}(t):Da()}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Dc((e=t).field),direction:(n=e.dir,cc[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Oe||ru(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Oc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Oc(e.endAt)),n}function Oc(t){return{before:t.before,values:t.position}}function Rc(t){var e=!!t.before,n=t.values||[];return new Ml(n,e)}function Dc(t){return{fieldPath:t.N()}}function Lc(t){return eu.B(t.fieldPath)}function Mc(t){return Al.create(Lc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Da()}}(t.fieldFilter.op),t.fieldFilter.value)}function Fc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Lc(t.unaryFilter.field);return Al.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Lc(t.unaryFilter.field);return Al.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Da()}}function jc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.N())})),{fieldPaths:e}}function Uc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vc=function(){this.je=void 0};function qc(t,e,n){return t instanceof zc?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Hc?Qc(t,e):t instanceof Gc?Yc(t,e):function(t,e){var n=Wc(t,e),r=$c(n)+$c(t.Be);return ic(n)&&ic(t.Be)?fc(r):pc(t.serializer,r)}(t,e)}function Bc(t,e,n){return t instanceof Hc?Qc(t,e):t instanceof Gc?Yc(t,e):n}function Wc(t,e){return t instanceof Kc?ic(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var zc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Vc),Hc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(Vc);function Qc(t,e){for(var n=Xc(e),r=function(t){n.some((function(e){return Ku(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Gc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o(e,t),e}(Vc);function Yc(t,e){for(var n=Xc(e),r=function(t){n=n.filter((function(e){return!Ku(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Kc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Be=n,r}return o(e,t),e}(Vc);function $c(t){return ec(t.integerValue||t.doubleValue)}function Xc(t){return oc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jc=function(){function t(t){this.fields=t,t.sort(eu.P)}return t.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return Va(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Zc=function(t,e){this.field=t,this.transform=e},tl=function(t,e){this.version=t,this.transformResults=e},el=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Qe=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function nl(t,e){return void 0!==t.updateTime?e instanceof wl&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof wl}var rl=function(){};function il(t,e,n){return t instanceof cl?function(t,e,n){return new wl(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof ll?function(t,e,n){if(!nl(t.Ue,e))return new Tl(t.key,n.version);var r=hl(t,e);return new wl(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof fl?function(t,e,n){if(La(null!=n.transformResults),!nl(t.Ue,e))return new Tl(t.key,n.version);var r=pl(t,e),i=function(t,e,n){var r=[];La(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof wl&&(a=e.field(o.field)),r.push(Bc(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=dl(t,r.data(),i);return new wl(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new El(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function ol(t,e,n,r){return t instanceof cl?function(t,e){if(!nl(t.Ue,e))return e;var n=ul(e);return new wl(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof ll?function(t,e){if(!nl(t.Ue,e))return e;var n=ul(e),r=hl(t,e);return new wl(t.key,n,r,{Ge:!0})}(t,e):t instanceof fl?function(t,e,n,r){if(!nl(t.Ue,e))return e;var i=pl(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof wl&&(c=n.field(a.field)),null===c&&r instanceof wl&&(c=r.field(a.field)),i.push(qc(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=dl(t,i.data(),o);return new wl(t.key,i.version,s,{Ge:!0})}(t,e,r,n):function(t,e){return nl(t.Ue,e)?new El(t.key,Xa.min()):e}(t,e)}function sl(t,e){return t instanceof fl?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof wl?e.field(o.field):void 0,a=Wc(o.transform,s||null);null!=a&&(n=null==n?(new ml).set(o.field,a):n.set(o.field,a))}return n?n.ze():null}(t,e):null}function al(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ue.isEqual(e.Ue)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Le.isEqual(e.Le):2!==t.type||Va(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Hc&&e instanceof Hc||t instanceof Gc&&e instanceof Gc?Va(t.elements,e.elements,Ku):t instanceof Kc&&e instanceof Kc?Ku(t.Be,e.Be):t instanceof zc&&e instanceof zc}(t.transform,e.transform)}(t,e)})))}function ul(t){return t instanceof wl?t.version:Xa.min()}var cl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ue=r,i.type=0,i}return o(e,t),e}(rl),ll=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Le=r,o.Ue=i,o.type=1,o}return o(e,t),e}(rl);function hl(t,e){return function(t,e){var n=new ml(e);return t.Le.fields.forEach((function(e){if(!e._()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.ze()}(t,e instanceof wl?e.data():gl.empty())}var fl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ue=el.exists(!0),r}return o(e,t),e}(rl);function pl(t,e){return e}function dl(t,e,n){for(var r=new ml(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var yl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=3,r}return o(e,t),e}(rl),vl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=4,r}return o(e,t),e}(rl),gl=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!uc(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return Ku(this.proto,t.proto)},t}(),ml=function(){function t(t){void 0===t&&(t=gl.empty()),this.He=t,this.Ye=new Map}return t.prototype.set=function(t,e){return this.Je(t,e),this},t.prototype.delete=function(t){return this.Je(t,null),this},t.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Yu(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},t.prototype.ze=function(){var t=this.Xe(eu.k(),this.Ye);return null!=t?new gl(t):this.He},t.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=uc(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.Xe(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function _l(t){var e=[];return Ha(t.fields||{},(function(t,n){var r=new eu([t]);if(uc(n)){var i=_l(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Jc(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var bl=function(t,e){this.key=t,this.version=e},wl=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return o(e,t),e.prototype.field=function(t){return this.Ze.field(t)},e.prototype.data=function(){return this.Ze},e.prototype.tn=function(){return this.Ze.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(bl),El=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(bl),Tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(bl),Cl=function(){function t(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=s,this.endAt=a,this.sn=null,this.rn=null,this.startAt&&this.on(this.startAt),this.endAt&&this.on(this.endAt)}return t.hn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.sn){this.sn=[];var t=this.an(),e=this.un();if(null!==t&&null===e)t.O()||this.sn.push(new Vl(t)),this.sn.push(new Vl(eu.L(),"asc"));else{for(var n=!1,r=0,i=this.en;r<i.length;r++){var o=i[r];this.sn.push(o),o.field.O()&&(n=!0)}if(!n){var s=this.en.length>0?this.en[this.en.length-1].dir:"asc";this.sn.push(new Vl(eu.L(),s))}}}return this.sn},enumerable:!1,configurable:!0}),t.prototype.cn=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.en.slice(),n,this.limit,this.nn,this.startAt,this.endAt)},t.prototype.ln=function(e){var n=this.en.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype._n=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.fn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.dn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,e,this.endAt)},t.prototype.wn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,e)},t.prototype.Tn=function(e){return new t(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype.En=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.O())},t.prototype.In=function(){return!ru(this.limit)&&"F"===this.nn},t.prototype.mn=function(){return!ru(this.limit)&&"L"===this.nn},t.prototype.un=function(){return this.en.length>0?this.en[0].field:null},t.prototype.an=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Al&&n.An())return n.field}return null},t.prototype.Rn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Al&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Pn=function(){return lu(this.We())},t.prototype.Vn=function(){return null!==this.collectionGroup},t.prototype.We=function(){if(!this.rn)if("F"===this.nn)this.rn=au(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new Vl(r.field,i))}var o=this.endAt?new Ml(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Ml(this.startAt.position,!this.startAt.before):null;this.rn=au(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.rn},t.prototype.on=function(t){},t}();function Sl(t,e){return cu(t.We(),e.We())&&t.nn===e.nn}function Il(t){return uu(t.We())+"|lt:"+t.nn}function xl(t){return"Query(target="+function(t){var e=t.path.N();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.N()+" "+e.op+" "+Zu(e.value);var e})).join(", ")+"]"),ru(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.N()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Fl(t.startAt)),t.endAt&&(e+=", endAt: "+Fl(t.endAt)),"Target("+e+")"}(t.We())+"; limitType="+t.nn+")"}function Nl(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.U(t.collectionGroup)&&t.path.D(n):nu.W(t.path)?t.path.isEqual(n):t.path.C(n)}(t,e)&&function(t,e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.O()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!jl(t.startAt,t.orderBy,e)||t.endAt&&jl(t.endAt,t.orderBy,e))}(t,e)}function kl(t){return function(e,n){for(var r=!1,i=0,o=t.orderBy;i<o.length;i++){var s=o[i],a=ql(s,e,n);if(0!==a)return a;r=r||s.field.O()}return 0}}var Al=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return o(e,t),e.create=function(t,n,r){if(t.O())return"in"===n?new Ol(t,r):new Pl(t,n,r);if(sc(r)){if("=="!==n)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(ac(r)){if("=="!==n)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new Rl(t,r):"in"===n?new Dl(t,r):"array-contains-any"===n?new Ll(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Yu(this.value)===Yu(e)&&this.gn(Xu(e,this.value))},e.prototype.gn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return Da()}},e.prototype.An=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e}((function(){})),Pl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=nu.q(r.referenceValue),i}return o(e,t),e.prototype.matches=function(t){var e=nu.P(t.key,this.key);return this.gn(e)},e}(Al),Ol=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return nu.q(t.referenceValue)})),r}return o(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Al),Rl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return oc(e)&&$u(e.arrayValue,this.value)},e}(Al),Dl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return o(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&$u(this.value.arrayValue,e)},e}(Al),Ll=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return o(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!oc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return $u(e.value.arrayValue,t)}))},e}(Al),Ml=function(t,e){this.position=t,this.before=e};function Fl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Zu(t)})).join(",")}function jl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.O()?nu.P(nu.q(s.referenceValue),n.key):Xu(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ul(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ku(t.position[n],e.position[n]))return!1;return!0}var Vl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ql(t,e,n){var r=t.field.O()?nu.P(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Xu(r,i):Da()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Da()}}function Bl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wl=function(){function t(t,e,n,r){this.batchId=t,this.yn=e,this.baseMutations=n,this.mutations=r}return t.prototype.pn=function(t,e,n){for(var r=n.bn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=il(o,e,r[i]))}return e},t.prototype.vn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=ol(i,e,e,this.yn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=ol(u,e,o,this.yn))}return e},t.prototype.Sn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.vn(r.key,t.get(r.key));i&&(n=n.nt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Au())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Va(this.mutations,t.mutations,(function(t,e){return al(t,e)}))&&Va(this.baseMutations,t.baseMutations,(function(t,e){return al(t,e)}))},t}(),zl=function(){function t(t,e,n,r){this.batch=t,this.Dn=e,this.bn=n,this.Cn=r}return t.from=function(e,n,r){La(e.mutations.length===r.length);for(var i=Nu,o=e.mutations,s=0;s<o.length;s++)i=i.nt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Hl=function(){function t(t){var e=this;this.Fn=null,this.Nn=null,this.result=void 0,this.error=void 0,this.$n=!1,this.kn=!1,t((function(t){e.$n=!0,e.result=t,e.Fn&&e.Fn(t)}),(function(t){e.$n=!0,e.error=t,e.Nn&&e.Nn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.kn&&Da(),this.kn=!0,this.$n?this.error?this.xn(n,this.error):this.Mn(e,this.result):new t((function(t,i){r.Fn=function(n){r.Mn(e,n).next(t,i)},r.Nn=function(e){r.xn(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Mn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.xn=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Bn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.qn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Bn(r)},t}(),Ql=function(){function t(){this.Un=new Ga((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Qn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Wn},set:function(t){this.Wn=t},enumerable:!1,configurable:!0}),t.prototype.jn=function(t,e){this.Kn(),this.readTime=e,this.Un.set(t.key,t)},t.prototype.Gn=function(t,e){this.Kn(),e&&(this.readTime=e),this.Un.set(t,null)},t.prototype.zn=function(t,e){this.Kn();var n=this.Un.get(e);return void 0!==n?Hl.resolve(n):this.Hn(t,e)},t.prototype.getEntries=function(t,e){return this.Yn(t,e)},t.prototype.apply=function(t){return this.Kn(),this.Qn=!0,this.Jn(t)},t.prototype.Kn=function(){},t}(),Gl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yl=function(){function t(){this.Xn=[]}return t.prototype.Zn=function(t){this.Xn.push(t)},t.prototype.ts=function(){this.Xn.forEach((function(t){return t()}))},t}(),Kl=function(){function t(t,e,n){this.es=t,this.ns=e,this.ss=n}return t.prototype.rs=function(t,e){var n=this;return this.ns.os(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.es.zn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].vn(e,t);return t}))},t.prototype.as=function(t,e,n){var r=Su();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].vn(t,e);r=r.nt(t,e)})),r},t.prototype.us=function(t,e){var n=this;return this.es.getEntries(t,e).next((function(e){return n.cs(t,e)}))},t.prototype.cs=function(t,e){var n=this;return this.ns.ls(t,e).next((function(r){var i=n.as(t,e,r),o=Cu();return i.forEach((function(t,e){e||(e=new El(t,Xa.min())),o=o.nt(t,e)})),o}))},t.prototype._s=function(t,e,n){return e.Pn()?this.fs(t,e.path):e.Vn()?this.ds(t,e,n):this.ws(t,e,n)},t.prototype.fs=function(t,e){return this.rs(t,new nu(e)).next((function(t){var e=xu();return t instanceof wl&&(e=e.nt(t.key,t)),e}))},t.prototype.ds=function(t,e,n){var r=this,i=e.collectionGroup,o=xu();return this.ss.Ts(t,i).next((function(s){return Hl.forEach(s,(function(s){var a=e.Tn(s.child(i));return r.ws(t,a,n).next((function(t){t.forEach((function(t,e){o=o.nt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.ws=function(t,e,n){var r,i,o=this;return this.es._s(t,e,n).next((function(n){return r=n,o.ns.Es(t,e)})).next((function(e){return i=e,o.Is(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=ol(u,l,l,o.yn);r=h instanceof wl?r.nt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Nl(e,n)||(r=r.remove(t))})),r}))},t.prototype.Is=function(t,e,n){for(var r=Au(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ll&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.es.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof wl&&(c=c.nt(t,e))})),c}))},t}(),$l=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ms=n,this.As=r}return t.Rs=function(e,n){for(var r=Au(),i=Au(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Xl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Ps=function(t){return n.Vs(t)},this.gs=function(t){return e.ys(t)})}return t.prototype.Vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.gs&&this.gs(t),t},t}();Xl.ps=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Jl=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Zl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.bs=t,this.vs=e,this.Ss=n,this.Ds=r,this.Cs=i,this.Fs=0,this.Ns=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fs=0},t.prototype.ks=function(){this.Fs=this.Cs},t.prototype.xs=function(t){var e=this;this.cancel();var n=Math.floor(this.Fs+this.Ms()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&Pa("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ns=this.bs.Os(this.vs,i,(function(){return e.$s=Date.now(),t()})),this.Fs*=this.Ds,this.Fs<this.Ss&&(this.Fs=this.Ss),this.Fs>this.Cs&&(this.Fs=this.Cs)},t.prototype.Ls=function(){null!==this.Ns&&(this.Ns.Bs(),this.Ns=null)},t.prototype.cancel=function(){null!==this.Ns&&(this.Ns.cancel(),this.Ns=null)},t.prototype.Ms=function(){return(Math.random()-.5)*this.Fs},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=nh(e)),e=eh(t.get(n),e);return nh(e)}function eh(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function nh(t){return t+""}function rh(t){var e=t.length;if(La(e>=2),2===e)return La(""===t.charAt(0)&&""===t.charAt(1)),Za.k();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Da(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Da()}o=s+2}return new Za(r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ih=function(){function t(){this.qs=new oh}return t.prototype.Us=function(t,e){return this.qs.add(e),Hl.resolve()},t.prototype.Ts=function(t,e){return Hl.resolve(this.qs.getEntries(e))},t}(),oh=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new wu(Za.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new wu(Za.P)).F()},t}(),sh=function(){function t(){this.Qs=new oh}return t.prototype.Us=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.S(),i=e.p();t.Zn((function(){n.Qs.add(e)}));var o={collectionId:r,parent:th(i)};return ah(t).put(o)}return Hl.resolve()},t.prototype.Ts=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[qa(e),""],!1,!0);return ah(t).Ws(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(rh(o.parent))}return n}))},t}();function ah(t){return Ah.js(t,ef.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uh=function(t){this.Ks=t};function ch(t,e){if(e.document)return function(t,e,n){var r=Ec(t,e.name),i=mc(e.updateTime),o=new gl({mapValue:{fields:e.fields}});return new wl(r,i,o,{hasCommittedMutations:!!n})}(t.Ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=nu.j(e.noDocument.path),r=dh(e.noDocument.readTime);return new El(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=nu.j(e.unknownDocument.path),o=dh(e.unknownDocument.version);return new Tl(i,o)}return Da()}function lh(t,e,n){var r=hh(n),i=e.key.path.p().F();if(e instanceof wl){var o=function(t,e){return{name:wc(t,e.key),fields:e.tn().mapValue.fields,updateTime:yc(t,e.version.A())}}(t.Ks,e),s=e.hasCommittedMutations;return new $h(null,null,o,s,r,i)}if(e instanceof El){var a=e.key.path.F(),u=ph(e.version),c=e.hasCommittedMutations;return new $h(null,new Yh(a,u),null,c,r,i)}if(e instanceof Tl){var l=e.key.path.F(),h=ph(e.version);return new $h(new Kh(l,h),null,null,!0,r,i)}return Da()}function hh(t){var e=t.A();return[e.seconds,e.nanoseconds]}function fh(t){var e=new $a(t[0],t[1]);return Xa.I(e)}function ph(t){var e=t.A();return new Wh(e.seconds,e.nanoseconds)}function dh(t){var e=new $a(t.seconds,t.nanoseconds);return Xa.I(e)}function yh(t,e){var n=(e.baseMutations||[]).map((function(e){return kc(t.Ks,e)})),r=e.mutations.map((function(e){return kc(t.Ks,e)})),i=$a.fromMillis(e.localWriteTimeMs);return new Wl(e.batchId,i,n,r)}function vh(t){var e,n=dh(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?dh(t.lastLimboFreeSnapshotVersion):Xa.min();return e=void 0!==t.query.documents?function(t){La(1===t.documents.length);var e=t.documents[0];return Cl.hn(Cc(e)).We()}(t.query):function(t){var e=Cc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){La(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Fc(e)]:void 0!==e.fieldFilter?[Mc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Da():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Vl(Lc((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u=null;n.limit&&(u=function(t){var e;return ru(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Rc(n.startAt));var l=null;return n.endAt&&(l=Rc(n.endAt)),new Cl(e,i,a,s,u,"F",c,l).We()}(t.query),new du(e,t.targetId,0,t.lastListenSequenceNumber,n,r,hu.fromBase64String(t.resumeToken))}function gh(t,e){var n,r=ph(e.X),i=ph(e.lastLimboFreeSnapshotVersion);n=lu(e.target)?Ac(t.Ks,e.target):Pc(t.Ks,e.target);var o=e.resumeToken.toBase64();return new Jh(e.targetId,uu(e.target),r,o,e.sequenceNumber,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mh=function(){function t(t,e){this.serializer=t,this.ss=e}return t.prototype.jn=function(t,e,n){return bh(t).put(wh(e),n)},t.prototype.Gn=function(t,e){var n=bh(t),r=wh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Gs(t,r)}))},t.prototype.zn=function(t,e){var n=this;return bh(t).get(wh(e)).next((function(t){return n.zs(t)}))},t.prototype.Hs=function(t,e){var n=this;return bh(t).get(wh(e)).next((function(t){var e=n.zs(t);return e?{Ys:e,size:Eh(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Su();return this.Js(t,e,(function(t,e){var i=n.zs(e);r=r.nt(t,i)})).next((function(){return r}))},t.prototype.Xs=function(t,e){var n=this,r=Su(),i=new mu(nu.P);return this.Js(t,e,(function(t,e){var o=n.zs(e);o?(r=r.nt(t,o),i=i.nt(t,Eh(e))):(r=r.nt(t,null),i=i.nt(t,0))})).next((function(){return{Zs:r,ti:i}}))},t.prototype.Js=function(t,e,n){if(e._())return Hl.resolve();var r=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),i=e.at(),o=i.dt();return bh(t).ei({range:r},(function(t,e,r){for(var s=nu.j(t);o&&nu.P(o,s)<0;)n(o,null),o=i.dt();o&&o.isEqual(s)&&(n(o,e),o=i.wt()?i.dt():null),o?r.ni(o.path.F()):r.done()})).next((function(){for(;o;)n(o,null),o=i.wt()?i.dt():null}))},t.prototype._s=function(t,e,n){var r=this,i=xu(),o=e.path.length+1,s={};if(n.isEqual(Xa.min())){var a=e.path.F();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.F(),c=hh(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=$h.collectionReadTimeIndex}return bh(t).ei(s,(function(t,n,s){if(t.length===o){var a=ch(r.serializer,n);e.path.D(a.key.path)?a instanceof wl&&Nl(e,a)&&(i=i.nt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.si=function(t,e){var n=this,r=Cu(),i=hh(e),o=bh(t),s=IDBKeyRange.lowerBound(i,!0);return o.ei({index:$h.readTimeIndex,range:s},(function(t,e){var o=ch(n.serializer,e);r=r.nt(o.key,o),i=e.readTime})).next((function(){return{ii:r,readTime:fh(i)}}))},t.prototype.ri=function(t){var e=bh(t),n=Xa.min();return e.ei({index:$h.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=fh(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.oi=function(e){return new t.hi(this,!!e&&e.ai)},t.prototype.ui=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return _h(t).get(Xh.key).next((function(t){return La(!!t),t}))},t.prototype.Gs=function(t,e){return _h(t).put(Xh.key,e)},t.prototype.zs=function(t){if(t){var e=ch(this.serializer,t);return e instanceof El&&e.version.isEqual(Xa.min())?null:e}return null},t}();function _h(t){return Ah.js(t,Xh.store)}function bh(t){return Ah.js(t,$h.store)}function wh(t){return t.path.F()}function Eh(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Da();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mh.hi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ci=e,r.ai=n,r.li=new Ga((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return o(e,t),e.prototype.Jn=function(t){var e=this,n=[],r=0,i=new wu((function(t,e){return Ua(t.N(),e.N())}));return this.Un.forEach((function(o,s){var a=e.li.get(o);if(s){var u=lh(e.ci.serializer,s,e.readTime);i=i.add(o.path.p());var c=Eh(u);r+=c-a,n.push(e.ci.jn(t,o,u))}else if(r-=a,e.ai){var l=lh(e.ci.serializer,new El(o,Xa.min()),e.readTime);n.push(e.ci.jn(t,o,l))}else n.push(e.ci.Gn(t,o))})),i.forEach((function(r){n.push(e.ci.ss.Us(t,r))})),n.push(this.ci.updateMetadata(t,r)),Hl.Bn(n)},e.prototype.Hn=function(t,e){var n=this;return this.ci.Hs(t,e).next((function(t){return null===t?(n.li.set(e,0),null):(n.li.set(e,t.size),t.Ys)}))},e.prototype.Yn=function(t,e){var n=this;return this.ci.Xs(t,e).next((function(t){var e=t.Zs;return t.ti.forEach((function(t,e){n.li.set(t,e)})),e}))},e}(Ql);var Th=function(){function t(t){this._i=t}return t.prototype.next=function(){return this._i+=2,this._i},t.fi=function(){return new t(0)},t.di=function(){return new t(-1)},t}(),Ch=function(){function t(t,e){this.wi=t,this.serializer=e}return t.prototype.Ti=function(t){var e=this;return this.Ei(t).next((function(n){var r=new Th(n.highestTargetId);return n.highestTargetId=r.next(),e.Ii(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.mi=function(t){return this.Ei(t).next((function(t){return Xa.I(new $a(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ai=function(t){return this.Ei(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Ri=function(t,e,n){var r=this;return this.Ei(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ii(t,i)}))},t.prototype.Pi=function(t,e){var n=this;return this.Vi(t,e).next((function(){return n.Ei(t).next((function(r){return r.targetCount+=1,n.gi(e,r),n.Ii(t,r)}))}))},t.prototype.yi=function(t,e){return this.Vi(t,e)},t.prototype.pi=function(t,e){var n=this;return this.bi(t,e.targetId).next((function(){return Sh(t).delete(e.targetId)})).next((function(){return n.Ei(t)})).next((function(e){return La(e.targetCount>0),e.targetCount-=1,n.Ii(t,e)}))},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return Sh(t).ei((function(s,a){var u=vh(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.pi(t,u)))})).next((function(){return Hl.Bn(o)})).next((function(){return i}))},t.prototype.pe=function(t,e){return Sh(t).ei((function(t,n){var r=vh(n);e(r)}))},t.prototype.Ei=function(t){return Ih(t).get(tf.key).next((function(t){return La(null!==t),t}))},t.prototype.Ii=function(t,e){return Ih(t).put(tf.key,e)},t.prototype.Vi=function(t,e){return Sh(t).put(gh(this.serializer,e))},t.prototype.gi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Si=function(t){return this.Ei(t).next((function(t){return t.targetCount}))},t.prototype.Di=function(t,e){var n=uu(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Sh(t).ei({range:r,index:Jh.queryTargetsIndexName},(function(t,n,r){var o=vh(n);cu(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Ci=function(t,e,n){var r=this,i=[],o=xh(t);return e.forEach((function(e){var s=th(e.path);i.push(o.put(new Zh(n,s))),i.push(r.wi.Fi(t,n,e))})),Hl.Bn(i)},t.prototype.Ni=function(t,e,n){var r=this,i=xh(t);return Hl.forEach(e,(function(e){var o=th(e.path);return Hl.Bn([i.delete([n,o]),r.wi.$i(t,n,e)])}))},t.prototype.bi=function(t,e){var n=xh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ki=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=xh(t),i=Au();return r.ei({range:n,xi:!0},(function(t,e,n){var r=rh(t[1]),o=new nu(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=th(e.path),r=IDBKeyRange.bound([n],[qa(n)],!1,!0),i=0;return xh(t).ei({index:Zh.documentTargetsIndex,xi:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return Sh(t).get(e).next((function(t){return t?vh(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t){return Ah.js(t,Jh.store)}function Ih(t){return Ah.js(t,tf.store)}function xh(t){return Ah.js(t,Zh.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nh="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Oi=e,r.Li=n,r}return o(e,t),e}(Yl),Ah=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.bs=o,this.window=s,this.document=a,this.Bi=c,this.qi=l,this.Ui=null,this.Qi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Wi=null,this.inForeground=!1,this.ji=null,this.Ki=null,this.Gi=Number.NEGATIVE_INFINITY,this.zi=function(t){return Promise.resolve()},!t.Hi())throw new Ka(Ya.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.wi=new Rh(this,i),this.Yi=n+t.Ji,this.serializer=new uh(u),this.Xi=new Ch(this.wi,this.serializer),this.ss=new sh,this.es=new mh(this.serializer,this.ss),this.window&&this.window.localStorage?this.Zi=this.window.localStorage:(this.Zi=null,!1===l&&Oa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.js=function(t,e){if(t instanceof kh)return sf.js(t.Oi,e);throw Da()},t.prototype.start=function(){var t=this;return sf.tr(this.Yi,qh,new Bh(this.serializer)).then((function(e){return t.er=e,t.nr()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ka(Ya.FAILED_PRECONDITION,Nh);return t.sr(),t.ir(),t.rr(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Xi.Ai(e)}))})).then((function(e){t.Ui=new Xl(e,t.Bi)})).then((function(){t.Qi=!0})).catch((function(e){return t.er&&t.er.close(),Promise.reject(e)}))},t.prototype.or=function(t){var e=this;return this.zi=function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){return this.hr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ar=function(t){var e=this;this.er.ur((function(n){return a(e,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.cr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.bs.lr((function(){return a(e,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.hr?[4,this.nr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.nr=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Oh(e).put(new rf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._r(e).next((function(e){e||(t.isPrimary=!1,t.bs.dr((function(){return t.zi(!1)})))}))})).next((function(){return t.wr(e)})).next((function(n){return t.isPrimary&&!n?t.Tr(e).next((function(){return!1})):!!n&&t.Er(e).next((function(){return!0}))}))})).catch((function(e){if(cf(e))return Pa("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Pa("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.bs.dr((function(){return t.zi(e)})),t.isPrimary=e}))},t.prototype._r=function(t){var e=this;return Ph(t).get(zh.key).next((function(t){return Hl.resolve(e.Ir(t))}))},t.prototype.mr=function(t){return Oh(t).delete(this.clientId)},t.prototype.Ar=function(){return a(this,void 0,void 0,(function(){var e,n,r,i,o=this;return u(this,(function(s){switch(s.label){case 0:return!this.isPrimary||this.Rr(this.Gi,18e5)?[3,2]:(this.Gi=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.js(e,rf.store);return n.Ws().next((function(t){var e=o.Pr(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Hl.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=s.sent(),this.Zi)for(n=0,r=e;n<r.length;n++)i=r[n],this.Zi.removeItem(this.Vr(i.clientId));s.label=2;case 2:return[2]}}))}))},t.prototype.rr=function(){var t=this;this.Ki=this.bs.Os("client_metadata_refresh",4e3,(function(){return t.nr().then((function(){return t.Ar()})).then((function(){return t.rr()}))}))},t.prototype.Ir=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.wr=function(t){var e=this;return this.qi?Hl.resolve(!0):Ph(t).get(zh.key).next((function(n){if(null!==n&&e.Rr(n.leaseTimestampMs,5e3)&&!e.gr(n.ownerId)){if(e.Ir(n)&&e.networkEnabled)return!0;if(!e.Ir(n)){if(!n.allowTabSynchronization)throw new Ka(Ya.FAILED_PRECONDITION,Nh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Oh(t).Ws().next((function(t){return void 0===e.Pr(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Pa("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.yr=function(){return a(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){switch(e.label){case 0:return this.Qi=!1,this.pr(),this.Ki&&(this.Ki.cancel(),this.Ki=null),this.br(),this.vr(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.Tr(e).next((function(){return t.mr(e)}))})).catch((function(t){Pa("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.er.close(),this.Sr(),[2]}}))}))},t.prototype.Pr=function(t,e){var n=this;return t.filter((function(t){return n.Rr(t.updateTimeMs,e)&&!n.gr(t.clientId)}))},t.prototype.Dr=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Oh(e).Ws().next((function(e){return t.Pr(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return t.Hi()?(n=e+t.Ji,[4,sf.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){return Lh.Fr(t,this.serializer,this.ss,this.wi)},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.kr=function(){return this.ss},t.prototype.runTransaction=function(t,e,n){var r=this;Pa("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.er.runTransaction(o,of,(function(o){return i=new kh(o,r.Ui?r.Ui.next():Xl.ps),"readwrite-primary"===e?r._r(i).next((function(t){return!!t||r.wr(i)})).next((function(e){if(!e)throw Oa("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.bs.dr((function(){return r.zi(!1)})),new Ka(Ya.FAILED_PRECONDITION,Gl);return n(i)})).next((function(t){return r.Er(i).next((function(){return t}))})):r.xr(i).next((function(){return n(i)}))})).then((function(t){return i.ts(),t}))},t.prototype.xr=function(t){var e=this;return Ph(t).get(zh.key).next((function(t){if(null!==t&&e.Rr(t.leaseTimestampMs,5e3)&&!e.gr(t.ownerId)&&!e.Ir(t)&&!(e.qi||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ka(Ya.FAILED_PRECONDITION,Nh)}))},t.prototype.Er=function(t){var e=new zh(this.clientId,this.allowTabSynchronization,Date.now());return Ph(t).put(zh.key,e)},t.Hi=function(){return sf.Hi()},t.Mr=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Tr=function(t){var e=this,n=Ph(t);return n.get(zh.key).next((function(t){return e.Ir(t)?(Pa("IndexedDbPersistence","Releasing primary lease."),n.delete(zh.key)):Hl.resolve()}))},t.prototype.Rr=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Oa("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.sr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ji=function(){t.bs.lr((function(){return t.inForeground="visible"===t.document.visibilityState,t.nr()}))},this.document.addEventListener("visibilitychange",this.ji),this.inForeground="visible"===this.document.visibilityState)},t.prototype.br=function(){this.ji&&(this.document.removeEventListener("visibilitychange",this.ji),this.ji=null)},t.prototype.ir=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Wi=function(){e.pr(),e.bs.lr((function(){return e.yr()}))},this.window.addEventListener("unload",this.Wi))},t.prototype.vr=function(){this.Wi&&(this.window.removeEventListener("unload",this.Wi),this.Wi=null)},t.prototype.gr=function(t){var e;try{var n=null!==(null===(e=this.Zi)||void 0===e?void 0:e.getItem(this.Vr(t)));return Pa("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Oa("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.pr=function(){if(this.Zi)try{this.Zi.setItem(this.Vr(this.clientId),String(Date.now()))}catch(t){Oa("Failed to set zombie client id.",t)}},t.prototype.Sr=function(){if(this.Zi)try{this.Zi.removeItem(this.Vr(this.clientId))}catch(t){}},t.prototype.Vr=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Ph(t){return Ah.js(t,zh.store)}function Oh(t){return Ah.js(t,rf.store)}Ah.Ji="main";var Rh=function(){function t(t,e){this.db=t,this.Or=new Cf(this,e)}return t.prototype.Lr=function(t){var e=this.Br(t);return this.db.Nr().Si(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Br=function(t){var e=0;return this.qr(t,(function(t){e++})).next((function(){return e}))},t.prototype.pe=function(t,e){return this.db.Nr().pe(t,e)},t.prototype.qr=function(t,e){return this.Ur(t,(function(t,n){return e(n)}))},t.prototype.Fi=function(t,e,n){return Dh(t,n)},t.prototype.$i=function(t,e,n){return Dh(t,n)},t.prototype.vi=function(t,e,n){return this.db.Nr().vi(t,e,n)},t.prototype.Qr=function(t,e){return Dh(t,e)},t.prototype.Wr=function(t,e){return function(t,e){var n=!1;return Vh(t).jr((function(r){return Mh(t,r,e).next((function(t){return t&&(n=!0),Hl.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Kr=function(t,e){var n=this,r=this.db.$r().oi(),i=[],o=0;return this.Ur(t,(function(s,a){if(a<=e){var u=n.Wr(t,s).next((function(e){if(!e)return o++,r.zn(t,s).next((function(){return r.Gn(s),xh(t).delete([0,th(s.path)])}))}));i.push(u)}})).next((function(){return Hl.Bn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Z(t.Li);return this.db.Nr().yi(t,n)},t.prototype.Gr=function(t,e){return Dh(t,e)},t.prototype.Ur=function(t,e){var n,r=xh(t),i=Xl.ps;return r.ei({index:Zh.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==Xl.ps&&e(new nu(rh(n)),i),i=a,n=s):i=Xl.ps})).next((function(){i!==Xl.ps&&e(new nu(rh(n)),i)}))},t.prototype.zr=function(t){return this.db.$r().ui(t)},t}();function Dh(t,e){return xh(t).put(function(t,e){return new Zh(0,th(t.path),e)}(e,t.Li))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lh=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ss=n,this.wi=r,this.Hr={}}return t.Fr=function(e,n,r,i){return La(""!==e.uid),new t(e.Yr()?e.uid:"",n,r,i)},t.prototype.Jr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jh(t).ei({index:Qh.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Xr=function(t,e,n,r){var i=this,o=Uh(t),s=jh(t);return s.add({}).next((function(a){La("number"==typeof a);for(var u=new Wl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Nc(t.Ks,e)})),i=n.mutations.map((function(e){return Nc(t.Ks,e)}));return new Qh(e,n.batchId,n.yn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new wu((function(t,e){return Ua(t.N(),e.N())})),f=0,p=r;f<p.length;f++){var d=p[f],y=Gh.key(i.userId,d.key.path,a);h=h.add(d.key.path.p()),l.push(s.put(c)),l.push(o.put(y,Gh.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ss.Us(t,e))})),t.Zn((function(){i.Hr[a]=u.keys()})),Hl.Bn(l).next((function(){return u}))}))},t.prototype.Zr=function(t,e){var n=this;return jh(t).get(e).next((function(t){return t?(La(t.userId===n.userId),yh(n.serializer,t)):null}))},t.prototype.to=function(t,e){var n=this;return this.Hr[e]?Hl.resolve(this.Hr[e]):this.Zr(t,e).next((function(t){if(t){var r=t.keys();return n.Hr[e]=r,r}return null}))},t.prototype.eo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return jh(t).ei({index:Qh.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(La(e.batchId>=r),o=yh(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.no=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jh(t).ei({index:Qh.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.so=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jh(t).Ws(Qh.userMutationsIndex,n).next((function(t){return t.map((function(t){return yh(e.serializer,t)}))}))},t.prototype.os=function(t,e){var n=this,r=Gh.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Uh(t).ei({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=rh(u);if(a===n.userId&&e.path.isEqual(l))return jh(t).get(c).next((function(t){if(!t)throw Da();La(t.userId===n.userId),o.push(yh(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.ls=function(t,e){var n=this,r=new wu(Ua),i=[];return e.forEach((function(e){var o=Gh.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Uh(t).ei({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=rh(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Hl.Bn(i).next((function(){return n.io(t,r)}))},t.prototype.Es=function(t,e){var n=this,r=e.path,i=r.length+1,o=Gh.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new wu(Ua);return Uh(t).ei({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=rh(u);s===n.userId&&r.D(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.io(t,a)}))},t.prototype.io=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(jh(t).get(e).next((function(t){if(null===t)throw Da();La(t.userId===n.userId),r.push(yh(n.serializer,t))})))})),Hl.Bn(i).next((function(){return r}))},t.prototype.ro=function(t,e){var n=this;return Fh(t.Oi,this.userId,e).next((function(r){return t.Zn((function(){n.oo(e.batchId)})),Hl.forEach(r,(function(e){return n.wi.Qr(t,e)}))}))},t.prototype.oo=function(t){delete this.Hr[t]},t.prototype.ho=function(t){var e=this;return this.Jr(t).next((function(n){if(!n)return Hl.resolve();var r=IDBKeyRange.lowerBound(Gh.prefixForUser(e.userId)),i=[];return Uh(t).ei({range:r},(function(t,n,r){if(t[0]===e.userId){var o=rh(t[1]);i.push(o)}else r.done()})).next((function(){La(0===i.length)}))}))},t.prototype.Mi=function(t,e){return Mh(t,this.userId,e)},t.prototype.ao=function(t){var e=this;return Vh(t).get(this.userId).next((function(t){return t||new Hh(e.userId,-1,"")}))},t}();function Mh(t,e,n){var r=Gh.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Uh(t).ei({range:o,xi:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Fh(t,e,n){var r=t.store(Qh.store),i=t.store(Gh.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ei({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){La(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Gh.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Hl.Bn(o).next((function(){return c}))}function jh(t){return Ah.js(t,Qh.store)}function Uh(t){return Ah.js(t,Gh.store)}function Vh(t){return Ah.js(t,Hh.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qh=10,Bh=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;La(n<r&&n>=0&&r<=qh);var o=new lf(e);n<1&&r>=1&&(function(t){t.createObjectStore(zh.store)}(t),function(t){t.createObjectStore(Hh.store,{keyPath:Hh.keyPath}),t.createObjectStore(Qh.store,{keyPath:Qh.keyPath,autoIncrement:!0}).createIndex(Qh.userMutationsIndex,Qh.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Gh.store)}(t),nf(t),function(t){t.createObjectStore($h.store)}(t));var s=Hl.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Zh.store),t.deleteObjectStore(Jh.store),t.deleteObjectStore(tf.store)}(t),nf(t)),s=s.next((function(){return function(t){var e=t.store(tf.store),n=new tf(0,0,Xa.min().A(),0);return e.put(tf.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Qh.store).Ws().next((function(n){t.deleteObjectStore(Qh.store),t.createObjectStore(Qh.store,{keyPath:Qh.keyPath,autoIncrement:!0}).createIndex(Qh.userMutationsIndex,Qh.userMutationsKeyPath,{unique:!0});var r=e.store(Qh.store),i=n.map((function(t){return r.put(t)}));return Hl.Bn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(rf.store,{keyPath:rf.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Xh.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore($h.store);e.createIndex($h.readTimeIndex,$h.readTimeIndexPath,{unique:!1}),e.createIndex($h.collectionReadTimeIndex,$h.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store($h.store).ei((function(t,n){e+=Eh(n)})).next((function(){var n=new Xh(e);return t.store(Xh.store).put(Xh.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Hh.store),r=t.store(Qh.store);return n.Ws().next((function(n){return Hl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ws(Qh.userMutationsIndex,i).next((function(r){return Hl.forEach(r,(function(r){La(r.userId===n.userId);var i=yh(e.serializer,r);return Fh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Zh.store),n=t.store($h.store);return t.store(tf.store).get(tf.key).next((function(t){var r=[];return n.ei((function(n,i){var o=new Za(n),s=function(t){return[0,th(t)]}(o);r.push(e.get(s).next((function(n){return n?Hl.resolve():function(n){return e.put(new Zh(0,th(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Hl.Bn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(ef.store,{keyPath:ef.keyPath});var n=e.store(ef.store),r=new oh,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:th(i)})}};return e.store($h.store).ei({xi:!0},(function(t,e){var n=new Za(t);return i(n.p())})).next((function(){return e.store(Gh.store).ei({xi:!0},(function(t,e){t[0];var n=t[1],r=(t[2],rh(n));return i(r.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Jh.store);return n.ei((function(t,r){var i=vh(r),o=gh(e.serializer,i);return n.put(o)}))},t}(),Wh=function(t,e){this.seconds=t,this.nanoseconds=e},zh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};zh.store="owner",zh.key="owner";var Hh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Hh.store="mutationQueues",Hh.keyPath="userId";var Qh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Qh.store="mutations",Qh.keyPath="batchId",Qh.userMutationsIndex="userMutationsIndex",Qh.userMutationsKeyPath=["userId","batchId"];var Gh=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,th(e)]},t.key=function(t,e,n){return[t,th(e),n]},t}();Gh.store="documentMutations",Gh.PLACEHOLDER=new Gh;var Yh=function(t,e){this.path=t,this.readTime=e},Kh=function(t,e){this.path=t,this.version=e},$h=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};$h.store="remoteDocuments",$h.readTimeIndex="readTimeIndex",$h.readTimeIndexPath="readTime",$h.collectionReadTimeIndex="collectionReadTimeIndex",$h.collectionReadTimeIndexPath=["parentPath","readTime"];var Xh=function(t){this.byteSize=t};Xh.store="remoteDocumentGlobal",Xh.key="remoteDocumentGlobalKey";var Jh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Jh.store="targets",Jh.keyPath="targetId",Jh.queryTargetsIndexName="queryTargetsIndex",Jh.queryTargetsKeyPath=["canonicalId","targetId"];var Zh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Zh.store="targetDocuments",Zh.keyPath=["targetId","path"],Zh.documentTargetsIndex="documentTargetsIndex",Zh.documentTargetsKeyPath=["path","targetId"];var tf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};tf.key="targetGlobalKey",tf.store="targetGlobal";var ef=function(t,e){this.collectionId=t,this.parent=e};function nf(t){t.createObjectStore(Zh.store,{keyPath:Zh.keyPath}).createIndex(Zh.documentTargetsIndex,Zh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Jh.store,{keyPath:Jh.keyPath}).createIndex(Jh.queryTargetsIndexName,Jh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(tf.store)}ef.store="collectionParents",ef.keyPath=["collectionId","parent"];var rf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};rf.store="clientMetadata",rf.keyPath="clientId";var of=f(f(f([Hh.store,Qh.store,Gh.store,$h.store,Jh.store,zh.store,tf.store,Zh.store],[rf.store]),[Xh.store]),[ef.store]),sf=function(){function t(e){this.db=e,12.2===t.uo(T())&&Oa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.tr=function(e,n,r){return Pa("SimpleDb","Opening database:",e),new Hl((function(i,o){var s=indexedDB.open(e,n);s.onsuccess=function(e){var n=e.target.result;i(new t(n))},s.onblocked=function(){o(new Ka(Ya.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new Ka(Ya.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},s.onupgradeneeded=function(t){Pa("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,s.transaction,t.oldVersion,qh).next((function(){Pa("SimpleDb","Database upgrade to version "+qh+" complete")}))}})).On()},t.delete=function(t){return Pa("SimpleDb","Removing database:",t),ff(window.indexedDB.deleteDatabase(t)).On()},t.Hi=function(){if("undefined"==typeof indexedDB)return!1;if(t.co())return!0;var e=T(),n=t.uo(e),r=0<n&&n<10,i=t.lo(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.co=function(){var t;return void 0!==r&&"YES"===(null===(t=r.env)||void 0===t?void 0:t._o)},t.js=function(t,e){return t.store(e)},t.uo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.lo=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.ur=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a;return u(this,(function(c){switch(c.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,a,c,l;return u(this,(function(u){switch(u.label){case 0:++i,t=lf.open(s.db,r?"readonly":"readwrite",e),u.label=1;case 1:return u.trys.push([1,3,,4]),o=n(t).catch((function(e){return t.abort(e),Hl.reject(e)})).On(),a={},o.catch((function(){})),[4,t.fo];case 2:return[2,(a.value=(u.sent(),o),a)];case 3:return c=u.sent(),l="FirebaseError"!==c.name&&i<3,Pa("SimpleDb","Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},s=this,c.label=1;case 1:return[5,o()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),af=function(){function t(t){this.do=t,this.wo=!1,this.To=null}return Object.defineProperty(t.prototype,"$n",{get:function(){return this.wo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Eo",{get:function(){return this.To},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.do=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.wo=!0},t.prototype.ni=function(t){this.To=t},t.prototype.delete=function(){return ff(this.do.delete())},t}(),uf=function(t){function e(e){var n=this;return(n=t.call(this,Ya.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return o(e,t),e}(Ka);function cf(t){return"IndexedDbTransactionError"===t.name}var lf=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.Io=new Jl,this.transaction.oncomplete=function(){e.Io.resolve()},this.transaction.onabort=function(){t.error?e.Io.reject(new uf(t.error)):e.Io.resolve()},this.transaction.onerror=function(t){var n=df(t.target.error);e.Io.reject(new uf(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"fo",{get:function(){return this.Io.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Io.reject(t),this.aborted||(Pa("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new hf(e)},t}(),hf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Pa("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Pa("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ff(n)},t.prototype.add=function(t){return Pa("SimpleDb","ADD",this.store.name,t,t),ff(this.store.add(t))},t.prototype.get=function(t){var e=this;return ff(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Pa("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Pa("SimpleDb","DELETE",this.store.name,t),ff(this.store.delete(t))},t.prototype.count=function(){return Pa("SimpleDb","COUNT",this.store.name),ff(this.store.count())},t.prototype.Ws=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.mo(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ao=function(t,e){Pa("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.xi=!1;var r=this.cursor(n);return this.mo(r,(function(t,e,n){return n.delete()}))},t.prototype.ei=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.mo(r,e)},t.prototype.jr=function(t){var e=this.cursor({});return new Hl((function(n,r){e.onerror=function(t){var e=df(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.mo=function(t,e){var n=[];return new Hl((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new af(i),s=e(i.primaryKey,i.value,o);if(s instanceof Hl){var a=s.catch((function(t){return o.done(),Hl.reject(t)}));n.push(a)}o.$n?r():null===o.Eo?i.continue():i.continue(o.Eo)}else r()}})).next((function(){return Hl.Bn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.xi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ff(t){return new Hl((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=df(t.target.error);n(e)}}))}var pf=!1;function df(t){var e=sf.uo(T());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ka("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return pf||(pf=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(){return"undefined"!=typeof window?window:null}var vf=function(){function t(t,e,n,r,i){this.Ro=t,this.vs=e,this.Po=n,this.op=r,this.Vo=i,this.yo=new Jl,this.then=this.yo.promise.then.bind(this.yo.promise),this.yo.promise.catch((function(t){}))}return t.po=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.bo=setTimeout((function(){return e.vo()}),t)},t.prototype.Bs=function(){return this.vo()},t.prototype.cancel=function(t){null!==this.bo&&(this.clearTimeout(),this.yo.reject(new Ka(Ya.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.vo=function(){var t=this;this.Ro.lr((function(){return null!==t.bo?(t.clearTimeout(),t.op().then((function(e){return t.yo.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.bo&&(this.Vo(this),clearTimeout(this.bo),this.bo=null)},t}(),gf=function(){function t(){var t=this;this.So=Promise.resolve(),this.Do=[],this.Co=!1,this.Fo=[],this.No=null,this.$o=!1,this.ko=[],this.xo=new Zl(this,"async_queue_retry"),this.Mo=function(){return t.xo.Ls()};var e=yf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Mo)}return Object.defineProperty(t.prototype,"Oo",{get:function(){return this.Co},enumerable:!1,configurable:!0}),t.prototype.lr=function(t){this.enqueue(t)},t.prototype.Lo=function(t){this.Bo(),this.qo(t)},t.prototype.Uo=function(t){return this.Bo(),this.qo(t)},t.prototype.Qo=function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return this.Bo(),this.Co?[3,2]:(this.Co=!0,(e=yf())&&e.removeEventListener("visibilitychange",this.Mo),[4,this.Uo(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.Bo(),this.Co?new Promise((function(t){})):this.qo(t)},t.prototype.dr=function(t){var e=this;this.Do.push(t),this.lr((function(){return e.Wo()}))},t.prototype.Wo=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(0===this.Do.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Do[0]()];case 2:return n.sent(),this.Do.shift(),this.xo.reset(),[3,4];case 3:if(!cf(t=n.sent()))throw t;return Pa("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Do.length>0&&this.xo.xs((function(){return e.Wo()})),n.label=5;case 5:return[2]}}))}))},t.prototype.qo=function(t){var e=this,n=this.So.then((function(){return e.$o=!0,t().catch((function(t){throw e.No=t,e.$o=!1,Oa("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.$o=!1,t}))}));return this.So=n,n},t.prototype.Os=function(t,e,n){var r=this;this.Bo(),this.ko.indexOf(t)>-1&&(e=0);var i=vf.po(this,t,e,n,(function(t){return r.jo(t)}));return this.Fo.push(i),i},t.prototype.Bo=function(){this.No&&Da()},t.prototype.Ko=function(){},t.prototype.Go=function(){return a(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return[4,t=this.So];case 1:e.sent(),e.label=2;case 2:if(t!==this.So)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.zo=function(t){for(var e=0,n=this.Fo;e<n.length;e++)if(n[e].vs===t)return!0;return!1},t.prototype.Ho=function(t){var e=this;return this.Go().then((function(){e.Fo.sort((function(t,e){return t.Po-e.Po}));for(var n=0,r=e.Fo;n<r.length;n++){var i=r[n];if(i.Bs(),"all"!==t&&i.vs===t)break}return e.Go()}))},t.prototype.Yo=function(t){this.ko.push(t)},t.prototype.jo=function(t){var e=this.Fo.indexOf(t);this.Fo.splice(e,1)},t}();function mf(t,e){if(Oa("AsyncQueue",e+": "+t),cf(t))return new Ka(Ya.UNAVAILABLE,e+": "+t);throw t}function _f(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Ua(n,i);return 0===s?Ua(r,o):s}var bf=function(){function t(t){this.Jo=t,this.buffer=new wu(_f),this.Xo=0}return t.prototype.Zo=function(){return++this.Xo},t.prototype.th=function(t){var e=[t,this.Zo()];if(this.buffer.size<this.Jo)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();_f(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),wf={eh:!1,nh:0,sh:0,ih:0},Ef=function(){function t(t,e,n){this.rh=t,this.oh=e,this.hh=n}return t.ah=function(e){return new t(e,t.uh,t.lh)},t}();Ef._h=-1,Ef.fh=1048576,Ef.dh=41943040,Ef.uh=10,Ef.lh=1e3,Ef.wh=new Ef(Ef.dh,Ef.uh,Ef.lh),Ef.Th=new Ef(Ef._h,0,0);var Tf=function(){function t(t,e){this.Or=t,this.Ro=e,this.Eh=!1,this.Ih=null}return t.prototype.start=function(t){this.Or.params.rh!==Ef._h&&this.mh(t)},t.prototype.stop=function(){this.Ih&&(this.Ih.cancel(),this.Ih=null)},Object.defineProperty(t.prototype,"hr",{get:function(){return null!==this.Ih},enumerable:!1,configurable:!0}),t.prototype.mh=function(t){var e=this,n=this.Eh?3e5:6e4;Pa("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Ih=this.Ro.Os("lru_garbage_collection",n,(function(){return a(e,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:this.Ih=null,this.Eh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ah(this.Or)];case 2:return n.sent(),[3,7];case 3:return cf(e=n.sent())?(Pa("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,xf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.mh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Cf=function(){function t(t,e){this.Rh=t,this.params=e}return t.prototype.Ph=function(t,e){return this.Rh.Lr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vh=function(t,e){var n=this;if(0===e)return Hl.resolve(Xl.ps);var r=new bf(e);return this.Rh.pe(t,(function(t){return r.th(t.sequenceNumber)})).next((function(){return n.Rh.qr(t,(function(t){return r.th(t)}))})).next((function(){return r.maxValue}))},t.prototype.vi=function(t,e,n){return this.Rh.vi(t,e,n)},t.prototype.Kr=function(t,e){return this.Rh.Kr(t,e)},t.prototype.gh=function(t,e){var n=this;return this.params.rh===Ef._h?(Pa("LruGarbageCollector","Garbage collection skipped; disabled"),Hl.resolve(wf)):this.zr(t).next((function(r){return r<n.params.rh?(Pa("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.rh),wf):n.yh(t,e)}))},t.prototype.zr=function(t){return this.Rh.zr(t)},t.prototype.yh=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ph(t,this.params.oh).next((function(e){return e>c.params.hh?(Pa("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.hh+" from "+e),r=c.params.hh):r=e,o=Date.now(),c.Vh(t,r)})).next((function(r){return n=r,s=Date.now(),c.vi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.Kr(t,n)})).next((function(t){return u=Date.now(),Aa()<=Z.DEBUG&&Pa("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Hl.resolve({eh:!0,nh:r,sh:i,ih:t})}))},t}(),Sf=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new mu(Ua),this.vh=new Ga((function(t){return uu(t)}),cu),this.Sh=Xa.min(),this.ns=t.Cr(n),this.Dh=t.$r(),this.Xi=t.Nr(),this.Ch=new Kl(this.Dh,this.ns,this.persistence.kr()),this.ph.Fh(this.Ch)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Nh=function(t){return a(this,void 0,void 0,(function(){var e,n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return e=this.ns,n=this.Ch,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var o;return i.ns.so(r).next((function(s){return o=s,e=i.persistence.Cr(t),n=new Kl(i.Dh,e,i.persistence.kr()),e.so(r)})).next((function(t){for(var e=[],i=[],s=Au(),a=0,u=o;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=t;p<d.length;p++){var y=d[p];i.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];s=s.add(m.key)}}return n.us(r,s).next((function(t){return{$h:t,kh:e,xh:i}}))}))}))];case 1:return r=o.sent(),[2,(this.ns=e,this.Ch=n,this.ph.Fh(this.Ch),r)]}}))}))},t.prototype.Mh=function(t){var e,n=this,r=$a.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Au());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.Ch.us(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],l=sl(c,e.get(c.key));null!=l&&s.push(new ll(c.key,l,_l(l.proto.mapValue),el.exists(!0)))}return n.ns.Xr(o,r,s,t)}))})).then((function(t){var n=t.Sn(e);return{batchId:t.batchId,Un:n}}))},t.prototype.Oh=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Dh.oi({ai:!0});return e.Lh(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.Bh=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.ns.Zr(n,t).next((function(t){return La(null!==t),r=t.keys(),e.ns.ro(n,t)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.no=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.ns.no(e)}))},t.prototype.mi=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Xi.mi(e)}))},t.prototype.qh=function(e){var n=this,r=e.X,i=this.bh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var s=n.Dh.oi({ai:!0});i=n.bh;var a=[];e.Qt.forEach((function(e,s){var u=i.get(s);if(u){a.push(n.Xi.Ni(o,e.Xt,s).next((function(){return n.Xi.Ci(o,e.Yt,s)})));var c=e.resumeToken;if(c.H()>0){var l=u.tt(c,r).Z(o.Li);i=i.nt(s,l),t.Uh(u,l,e)&&a.push(n.Xi.yi(o,l))}}}));var u=Cu(),c=Au();if(e.jt.forEach((function(t,e){c=c.add(t)})),a.push(s.getEntries(o,c).next((function(t){e.jt.forEach((function(i,c){var l=t.get(i);c instanceof El&&c.version.isEqual(Xa.min())?(s.Gn(i,r),u=u.nt(i,c)):null==l||c.version.o(l.version)>0||0===c.version.o(l.version)&&l.hasPendingWrites?(s.jn(c,r),u=u.nt(i,c)):Pa("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),e.Kt.has(i)&&a.push(n.persistence.wi.Gr(o,i))}))}))),!r.isEqual(Xa.min())){var l=n.Xi.mi(o).next((function(t){return n.Xi.Ri(o,o.Li,r)}));a.push(l)}return Hl.Bn(a).next((function(){return s.apply(o)})).next((function(){return n.Ch.cs(o,u)}))})).then((function(t){return n.bh=i,t}))},t.Uh=function(t,e,n){return La(e.resumeToken.H()>0),0===t.resumeToken.H()||e.X.m()-t.X.m()>=this.Qh||n.Yt.size+n.Jt.size+n.Xt.size>0},t.prototype.Wh=function(t){return a(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,c,l=this;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Hl.forEach(t,(function(t){return Hl.forEach(t.ms,(function(n){return l.persistence.wi.Fi(e,t.targetId,n)})).next((function(){return Hl.forEach(t.As,(function(n){return l.persistence.wi.$i(e,t.targetId,n)}))}))}))}))];case 1:return u.sent(),[3,3];case 2:if(!cf(e=u.sent()))throw e;return Pa("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this.bh.get(o),a=s.X,c=s.et(a),this.bh=this.bh.nt(o,c));return[2]}}))}))},t.prototype.jh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.ns.eo(n,t)}))},t.prototype.Kh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Ch.rs(n,t)}))},t.prototype.Gh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Xi.Di(n,t).next((function(i){return i?(r=i,Hl.resolve(r)):e.Xi.Ti(n).next((function(i){return r=new du(t,i,0,n.Li),e.Xi.Pi(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.bh.get(n.targetId);return(null===r||n.X.o(r.X)>0)&&(e.bh=e.bh.nt(n.targetId,n),e.vh.set(t,n.targetId)),n}))},t.prototype.Di=function(t,e){var n=this.vh.get(e);return void 0!==n?Hl.resolve(this.bh.get(n)):this.Xi.Di(t,e)},t.prototype.zh=function(t,e){var n=this,r=this.bh.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(t){return e?Hl.resolve():n.persistence.wi.removeTarget(t,r)})).then((function(){n.bh=n.bh.remove(t),n.vh.delete(r.target)}))},t.prototype.Hh=function(t,e){var n=this,r=Xa.min(),i=Au();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Di(o,t.We()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Xi.ki(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.ph._s(o,t,e?r:Xa.min(),e?i:Au())})).next((function(t){return{documents:t,Yh:i}}))}))},t.prototype.Lh=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Hl.resolve();return o.forEach((function(r){s=s.next((function(){return n.zn(t,r)})).next((function(t){var o=t,s=e.Cn.get(r);La(null!==s),(!o||o.version.o(s)<0)&&(o=i.pn(r,o,e))&&n.jn(o,e.Dn)}))})),s.next((function(){return r.ns.ro(t,i)}))},t.prototype.Ah=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.gh(n,e.bh)}))},t}();Sf.Qh=3e8;var If=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.ns=e.Cr(r),i.Dh=e.$r(),i.Xi=e.Nr(),i}return o(e,t),e.prototype.start=function(){return this.Jh()},e.prototype.Xh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.ns.to(n,t).next((function(t){return t?e.Ch.us(n,t):Hl.resolve(null)}))}))},e.prototype.Zh=function(t){this.ns.oo(t)},e.prototype.cr=function(t){this.persistence.cr(t)},e.prototype.Dr=function(){return this.persistence.Dr()},e.prototype.ta=function(t){var e=this,n=this.bh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Xi.Me(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.si=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Dh.si(e,t.Sh)})).then((function(e){var n=e.ii,r=e.readTime;return t.Sh=r,n}))},e.prototype.Jh=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Dh.ri(t)}))];case 1:return t.Sh=n.sent(),[2]}}))}))},e}(Sf);function xf(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){if(t.code!==Ya.FAILED_PRECONDITION||t.message!==Gl)throw t;return Pa("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nf=function(){function t(){this.ea=new wu(kf.na),this.sa=new wu(kf.ia)}return t.prototype._=function(){return this.ea._()},t.prototype.Fi=function(t,e){var n=new kf(t,e);this.ea=this.ea.add(n),this.sa=this.sa.add(n)},t.prototype.ra=function(t,e){var n=this;t.forEach((function(t){return n.Fi(t,e)}))},t.prototype.$i=function(t,e){this.oa(new kf(t,e))},t.prototype.ha=function(t,e){var n=this;t.forEach((function(t){return n.$i(t,e)}))},t.prototype.aa=function(t){var e=this,n=new nu(new Za([])),r=new kf(n,t),i=new kf(n,t+1),o=[];return this.sa.vt([r,i],(function(t){e.oa(t),o.push(t.key)})),o},t.prototype.ua=function(){var t=this;this.ea.forEach((function(e){return t.oa(e)}))},t.prototype.oa=function(t){this.ea=this.ea.delete(t),this.sa=this.sa.delete(t)},t.prototype.ca=function(t){var e=new nu(new Za([])),n=new kf(e,t),r=new kf(e,t+1),i=Au();return this.sa.vt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new kf(t,0),n=this.ea.Dt(e);return null!==n&&t.isEqual(n.key)},t}(),kf=function(){function t(t,e){this.key=t,this.la=e}return t.na=function(t,e){return nu.P(t.key,e.key)||Ua(t.la,e.la)},t.ia=function(t,e){return Ua(t.la,e.la)||nu.P(t.key,e.key)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t,e){if(0!==e.length)throw new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Yf(e.length,"argument")+".")}function Pf(t,e,n){if(e.length!==n)throw new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() requires "+Yf(n,"argument")+", but was called with "+Yf(e.length,"argument")+".")}function Of(t,e,n){if(e.length<n)throw new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Yf(n,"argument")+", but was called with "+Yf(e.length,"argument")+".")}function Rf(t,e,n,r){if(e.length<n||e.length>r)throw new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Yf(e.length,"argument")+".")}function Df(t,e,n,r){Vf(t,e,Gf(n)+" argument",r)}function Lf(t,e,n,r){void 0!==r&&Df(t,e,n,r)}function Mf(t,e,n,r){Vf(t,e,n+" option",r)}function Ff(t,e,n,r){void 0!==r&&Mf(t,e,n,r)}function jf(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(Bf(u))}var c=Bf(r);throw new Ka(Ya.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Uf(t,e,n,r){if(!e.some((function(t){return t===r})))throw new Ka(Ya.INVALID_ARGUMENT,"Invalid value "+Bf(r)+" provided to function "+t+"() for its "+Gf(n)+" argument. Acceptable values: "+e.join(", "));return r}function Vf(t,e,n,r){if(!("object"===e?qf(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Bf(r);throw new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function qf(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Bf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Da()}function Wf(t,e,n){if(void 0===n)throw new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Gf(e)+" argument, but it was undefined.")}function zf(t,e,n){Ha(e,(function(e,r){if(n.indexOf(e)<0)throw new Ka(Ya.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Hf(t,e,n,r){var i=Bf(r);return new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() requires its "+Gf(n)+" argument to be a "+e+", but it was: "+i)}function Qf(t,e,n){if(n<=0)throw new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() requires its "+Gf(e)+" argument to be a positive number, but it was: "+n+".")}function Gf(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Yf(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(){if("undefined"==typeof Uint8Array)throw new Ka(Ya.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function $f(){if("undefined"==typeof atob)throw new Ka(Ya.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Xf=function(){function t(t){$f(),this._a=t}return t.fromBase64String=function(e){Pf("Blob.fromBase64String",arguments,1),Df("Blob.fromBase64String","string",1,e),$f();try{return new t(hu.fromBase64String(e))}catch(e){throw new Ka(Ya.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(Pf("Blob.fromUint8Array",arguments,1),Kf(),!(e instanceof Uint8Array))throw Hf("Blob.fromUint8Array","Uint8Array",1,e);return new t(hu.fromUint8Array(e))},t.prototype.toBase64=function(){return Pf("Blob.toBase64",arguments,0),$f(),this._a.toBase64()},t.prototype.toUint8Array=function(){return Pf("Blob.toUint8Array",arguments,0),Kf(),this._a.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._a.isEqual(t._a)},t}(),Jf=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new Ka(Ya.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Yf(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(Df("FieldPath","string",e,t[e]),0===t[e].length)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.fa=new eu(t)},Zf=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return o(e,t),e.documentId=function(){return new e(eu.L().N())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Hf("isEqual","FieldPath",1,t);return this.fa.isEqual(t.fa)},e}(Jf),tp=new RegExp("[~\\*/\\[\\]]"),ep=function(){this.da=this},np=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return o(e,t),e.prototype.Ta=function(t){if(2!==t.Ea)throw 1===t.Ea?t.Ia(this.wa+"() can only appear at the top level of your update data"):t.Ia(this.wa+"() cannot be used with set() unless you pass {merge:true}");return t.Le.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ep);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t,e,n){return new gp({Ea:3,ma:e.settings.ma,methodName:t.wa,Aa:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var ip=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return o(e,t),e.prototype.Ta=function(t){return new Zc(t.path,new zc)},e.prototype.isEqual=function(t){return t instanceof e},e}(ep),op=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return o(e,t),e.prototype.Ta=function(t){var e=rp(this,t,!0),n=this.Ra.map((function(t){return Tp(t,e)})),r=new Hc(n);return new Zc(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ep),sp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return o(e,t),e.prototype.Ta=function(t){var e=rp(this,t,!0),n=this.Ra.map((function(t){return Tp(t,e)})),r=new Gc(n);return new Zc(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ep),ap=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Pa=n,r}return o(e,t),e.prototype.Ta=function(t){var e=new Kc(t.serializer,dc(t.serializer,this.Pa));return new Zc(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ep),up=function(t){function e(){return t.call(this)||this}return o(e,t),e.delete=function(){return Af("FieldValue.delete",arguments),new cp(new np("FieldValue.delete"))},e.serverTimestamp=function(){return Af("FieldValue.serverTimestamp",arguments),new cp(new ip("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Of("FieldValue.arrayUnion",arguments,1),new cp(new op("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Of("FieldValue.arrayRemove",arguments,1),new cp(new sp("FieldValue.arrayRemove",t))},e.increment=function(t){return Df("FieldValue.increment","number",1,t),Pf("FieldValue.increment",arguments,1),new cp(new ap("FieldValue.increment",t))},e}(ep),cp=function(t){function e(e){var n=this;return(n=t.call(this)||this).da=e,n.wa=e.wa,n}return o(e,t),e.prototype.Ta=function(t){return this.da.Ta(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.da.isEqual(t.da)},e}(up),lp=function(){function t(t,e){if(Pf("GeoPoint",arguments,2),Df("GeoPoint","number",1,t),Df("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new Ka(Ya.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ka(Ya.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Va=t,this.ga=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Va},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.ga},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.Va===t.Va&&this.ga===t.ga},t.prototype.T=function(t){return Ua(this.Va,t.Va)||Ua(this.ga,t.ga)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){return new hc(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fp=/^__.*__$/,pp=function(t,e,n){this.ya=t,this.pa=e,this.ba=n},dp=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[];return null!==this.Le?n.push(new ll(t,this.data,this.Le,e)):n.push(new cl(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new fl(t,this.fieldTransforms)),n},t}(),yp=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[new ll(t,this.data,this.Le,e)];return this.fieldTransforms.length>0&&n.push(new fl(t,this.fieldTransforms)),n},t}();function vp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Da()}}var gp=function(){function t(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.Le=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ea",{get:function(){return this.settings.Ea},enumerable:!1,configurable:!0}),t.prototype.Da=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Le)},t.prototype.Ca=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Fa(t),r},t.prototype.Na=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Sa(),r},t.prototype.$a=function(t){return this.Da({path:void 0,Aa:!0})},t.prototype.Ia=function(t){return kp(t,this.settings.methodName,this.settings.ka||!1,this.path,this.settings.ma)},t.prototype.contains=function(t){return void 0!==this.Le.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.Sa=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fa(this.path.get(t))},t.prototype.Fa=function(t){if(0===t.length)throw this.Ia("Document fields must not be empty");if(vp(this.Ea)&&fp.test(t))throw this.Ia('Document fields cannot begin and end with "__"')},t}(),mp=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||hp(t)}return t.prototype.xa=function(t,e,n,r){return void 0===r&&(r=!1),new gp({Ea:t,methodName:e,ma:n,path:eu.k(),Aa:!1,ka:r},this.s,this.serializer,this.ignoreUndefinedProperties)},t}();function _p(t,e,n,r,i,o){void 0===o&&(o={});var s=t.xa(o.merge||o.mergeFields?2:0,e,n,i);Ip("Data must be an object, but it was:",s,r);var a,u,c=Cp(r,s);if(o.merge)a=new Jc(s.Le),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=f[h],d=void 0;if(p instanceof Jf)d=p.fa;else{if("string"!=typeof p)throw Da();d=Np(e,p,n)}if(!s.contains(d))throw new Ka(Ya.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Ap(l,d)||l.push(d)}a=new Jc(l),u=s.fieldTransforms.filter((function(t){return a.Ke(t.field)}))}else a=null,u=s.fieldTransforms;return new dp(new gl(c),a,u)}function bp(t,e,n,r){var i=t.xa(1,e,n);Ip("Data must be an object, but it was:",i,r);var o=[],s=new ml;Ha(r,(function(t,r){var a=Np(e,t,n),u=i.Na(a);if(r instanceof ep&&r.da instanceof np)o.push(a);else{var c=Tp(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Jc(o);return new yp(s.ze(),a,i.fieldTransforms)}function wp(t,e,n,r,i,o){var s=t.xa(1,e,n),a=[xp(e,r,n)],u=[i];if(o.length%2!=0)throw new Ka(Ya.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(xp(e,o[c])),u.push(o[c+1]);for(var l=[],h=new ml,f=a.length-1;f>=0;--f)if(!Ap(l,a[f])){var p=a[f],d=u[f],y=s.Na(p);if(d instanceof ep&&d.da instanceof np)l.push(p);else{var v=Tp(d,y);null!=v&&(l.push(p),h.set(p,v))}}var g=new Jc(l);return new yp(h.ze(),g,s.fieldTransforms)}function Ep(t,e,n,r){return void 0===r&&(r=!1),Tp(n,t.xa(r?4:3,e))}function Tp(t,e){if(Sp(t))return Ip("Unsupported field value:",e,t),Cp(t,e);if(t instanceof ep)return function(t,e){if(!vp(e.Ea))throw e.Ia(t.wa+"() can only be used with update() and set()");if(!e.path)throw e.Ia(t.wa+"() is not currently supported inside arrays");var n=t.Ta(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Le.push(e.path),t instanceof Array){if(e.settings.Aa&&4!==e.Ea)throw e.Ia("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Tp(o[i],e.$a(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dc(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=$a.fromDate(t);return{timestampValue:yc(e.serializer,n)}}if(t instanceof $a){var r=new $a(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yc(e.serializer,r)}}if(t instanceof lp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xf)return{bytesValue:vc(e.serializer,t)};if(t instanceof pp){var i=e.s,o=t.ya;if(!o.isEqual(i))throw e.Ia("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:_c(t.ya||e.s,t.pa.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Ia("Unsupported field value: "+Bf(t))}(t,e)}function Cp(t,e){var n={};return Qa(t)?e.path&&e.path.length>0&&e.Le.push(e.path):Ha(t,(function(t,r){var i=Tp(r,e.Ca(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Sp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof $a||t instanceof lp||t instanceof Xf||t instanceof pp||t instanceof ep)}function Ip(t,e,n){if(!Sp(n)||!qf(n)){var r=Bf(n);throw"an object"===r?e.Ia(t+" a custom object"):e.Ia(t+" "+r)}}function xp(t,e,n){if(e instanceof Jf)return e.fa;if("string"==typeof e)return Np(t,e);throw kp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Np(t,e,n){try{return function(t){if(t.search(tp)>=0)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Zf.bind.apply(Zf,f([void 0],t.split("."))))}catch(e){throw new Ka(Ya.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).fa}catch(e){throw kp((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function kp(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ka(Ya.INVALID_ARGUMENT,(a+=". ")+t+u)}function Ap(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pp=function(){function t(t){this.uid=t}return t.prototype.Yr=function(){return null!=this.uid},t.prototype.Ma=function(){return this.Yr()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Pp.UNAUTHENTICATED=new Pp(null),Pp.Oa=new Pp("google-credentials-uid"),Pp.La=new Pp("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Op=function(t,e){this.user=e,this.type="OAuth",this.Ba={},this.Ba.Authorization="Bearer "+t},Rp=function(){function t(){this.qa=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Ua=function(){},t.prototype.Qa=function(t){this.qa=t,t(Pp.UNAUTHENTICATED)},t.prototype.Wa=function(){this.qa=null},t}(),Dp=function(){function t(t){var e=this;this.ja=null,this.currentUser=Pp.UNAUTHENTICATED,this.Ka=!1,this.Ga=0,this.qa=null,this.forceRefresh=!1,this.ja=function(){e.Ga++,e.currentUser=e.za(),e.Ka=!0,e.qa&&e.qa(e.currentUser)},this.Ga=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ja):(this.ja(null),t.get().then((function(t){e.auth=t,e.ja&&e.auth.addAuthTokenListener(e.ja)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Ga,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Ga!==e?(Pa("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(La("string"==typeof n.accessToken),new Op(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Ua=function(){this.forceRefresh=!0},t.prototype.Qa=function(t){this.qa=t,this.Ka&&t(this.currentUser)},t.prototype.Wa=function(){this.auth&&this.auth.removeAuthTokenListener(this.ja),this.ja=null,this.qa=null},t.prototype.za=function(){var t=this.auth&&this.auth.getUid();return La(null===t||"string"==typeof t),new Pp(t)},t}(),Lp=function(){function t(t,e){this.Ha=t,this.Ya=e,this.type="FirstParty",this.user=Pp.La}return Object.defineProperty(t.prototype,"Ba",{get:function(){var t={"X-Goog-AuthUser":this.Ya},e=this.Ha.auth.Ja([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Mp=function(){function t(t,e){this.Ha=t,this.Ya=e}return t.prototype.getToken=function(){return Promise.resolve(new Lp(this.Ha,this.Ya))},t.prototype.Qa=function(t){t(Pp.La)},t.prototype.Wa=function(){},t.prototype.Ua=function(){},t}(),Fp=function(){function t(t,e,n,r,i,o){this.bs=t,this.Xa=n,this.Za=r,this.tu=i,this.listener=o,this.state=0,this.eu=0,this.nu=null,this.stream=null,this.xo=new Zl(t,e)}return t.prototype.su=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.iu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ru()},t.prototype.stop=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.su()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ou=function(){this.state=0,this.xo.reset()},t.prototype.hu=function(){var t=this;this.iu()&&null===this.nu&&(this.nu=this.bs.Os(this.Xa,6e4,(function(){return t.au()})))},t.prototype.uu=function(t){this.cu(),this.stream.send(t)},t.prototype.au=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return this.iu()?[2,this.close(0)]:[2]}))}))},t.prototype.cu=function(){this.nu&&(this.nu.cancel(),this.nu=null)},t.prototype.close=function(t,e){return a(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return this.cu(),this.xo.cancel(),this.eu++,3!==t?this.xo.reset():e&&e.code===Ya.RESOURCE_EXHAUSTED?(Oa(e.toString()),Oa("Using maximum backoff delay to prevent overloading the backend."),this.xo.ks()):e&&e.code===Ya.UNAUTHENTICATED&&this.tu.Ua(),null!==this.stream&&(this.lu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener._u(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.lu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.fu(this.eu),n=this.eu;this.tu.getToken().then((function(e){t.eu===n&&t.du(e)}),(function(n){e((function(){var e=new Ka(Ya.UNKNOWN,"Fetching auth token failed: "+n.message);return t.wu(e)}))}))},t.prototype.du=function(t){var e=this,n=this.fu(this.eu);this.stream=this.Tu(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream._u((function(t){n((function(){return e.wu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ru=function(){var t=this;this.state=4,this.xo.xs((function(){return a(t,void 0,void 0,(function(){return u(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.wu=function(t){return Pa("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.fu=function(t){var e=this;return function(n){e.bs.lr((function(){return e.eu===t?n():(Pa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),jp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return o(e,t),e.prototype.Tu=function(t){return this.Za.Iu("Listen",t)},e.prototype.onMessage=function(t){this.xo.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Da()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Oe?(La(void 0===e||"string"==typeof e),hu.fromBase64String(e||"")):(La(void 0===e||e instanceof Uint8Array),hu.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?Ya.UNKNOWN:gu(t.code);return new Ka(e,t.message||"")}(s);n=new Vu(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=Ec(t,u.document.name),l=mc(u.document.updateTime),h=new gl({mapValue:{fields:u.document.fields}}),f=new wl(c,l,h,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new ju(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var v=Ec(t,y.document),g=y.readTime?mc(y.readTime):Xa.min(),m=new El(v,g),_=y.removedTargetIds||[];n=new ju([],_,m.key,m)}else if("documentRemove"in e){e.documentRemove;var b=e.documentRemove;b.document;var w=Ec(t,b.document),E=b.removedTargetIds||[];n=new ju([],E,w,null)}else{if(!("filter"in e))return Da();e.filter;var T=e.filter;T.targetId;var C=T.count||0,S=new yu(C),I=T.targetId;n=new Uu(I,S)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Xa.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Xa.min():e.readTime?mc(e.readTime):Xa.min()}(t);return this.listener.mu(e,n)},e.prototype.Au=function(t){var e={};e.database=Sc(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=lu(r)?{documents:Ac(t,r)}:{query:Pc(t,r)}).targetId=e.targetId,e.resumeToken.H()>0&&(n.resumeToken=vc(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Da()}}(0,e.J);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.uu(e)},e.prototype.Ru=function(t){var e={};e.database=Sc(this.serializer),e.removeTarget=t,this.uu(e)},e}(Fp),Up=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Pu=!1,s}return o(e,t),Object.defineProperty(e.prototype,"Vu",{get:function(){return this.Pu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Pu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.lu=function(){this.Pu&&this.gu([])},e.prototype.Tu=function(t){return this.Za.Iu("Write",t)},e.prototype.onMessage=function(t){if(La(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Pu){this.xo.reset();var e=function(t,e){return t&&t.length>0?(La(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?mc(t.updateTime):mc(e);n.isEqual(Xa.min())&&(n=mc(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new tl(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=mc(t.commitTime);return this.listener.yu(n,e)}return La(!t.writeResults||0===t.writeResults.length),this.Pu=!0,this.listener.pu()},e.prototype.bu=function(){var t={};t.database=Sc(this.serializer),this.uu(t)},e.prototype.gu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Nc(e.serializer,t)}))};this.uu(n)},e}(Fp),Vp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Za=e,i.credentials=n,i.serializer=r,i.vu=!1,i}return o(e,t),e.prototype.Su=function(){if(this.vu)throw new Ka(Ya.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Du=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Du(t,e,r)})).catch((function(t){throw t.code===Ya.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e.prototype.Cu=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Cu(t,e,r)})).catch((function(t){throw t.code===Ya.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e}((function(){this.je=void 0})),qp=function(){function t(t){this.Fu=t,this.Nu=new Map,this.mutations=[],this.$u=!1,this.ku=null,this.xu=new Set}return t.prototype.Mu=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:if(this.Ou(),this.mutations.length>0)throw new Ka(Ya.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s;return u(this,(function(a){switch(a.label){case 0:return n=Ma(t),r={database:Sc(n.serializer),documents:e.map((function(t){return wc(n.serializer,t)}))},[4,n.Cu("BatchGetDocuments",r)];case 1:return i=a.sent(),o=new Map,i.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){La(!!e.found),e.found.name,e.found.updateTime;var n=Ec(t,e.found.name),r=mc(e.found.updateTime),i=new gl({mapValue:{fields:e.found.fields}});return new wl(n,r,i,{})}(t,e):"missing"in e?function(t,e){La(!!e.missing),La(!!e.readTime);var n=Ec(t,e.missing),r=mc(e.readTime);return new El(n,r)}(t,e):Da()}(n.serializer,t);o.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=o.get(t.toString());La(!!e),s.push(e)})),s)]}}))}))}(this.Fu,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof El||t instanceof wl?n.Lu(t):Da()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.va(t,this.Ue(t))),this.xu.add(t)},t.prototype.update=function(t,e){try{this.write(e.va(t,this.Bu(t)))}catch(t){this.ku=t}this.xu.add(t)},t.prototype.delete=function(t){this.write([new yl(t,this.Ue(t))]),this.xu.add(t)},t.prototype.commit=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){switch(n.label){case 0:if(this.Ou(),this.ku)throw this.ku;return t=this.Nu,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new nu(Za.$(n));e.mutations.push(new vl(r,e.Ue(r)))})),[4,function(t,e){return a(this,void 0,void 0,(function(){var n,r;return u(this,(function(i){switch(i.label){case 0:return n=Ma(t),r={database:Sc(n.serializer),writes:e.map((function(t){return Nc(n.serializer,t)}))},[4,n.Du("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.Fu,this.mutations)];case 1:return n.sent(),this.$u=!0,[2]}}))}))},t.prototype.Lu=function(t){var e;if(t instanceof wl)e=t.version;else{if(!(t instanceof El))throw Da();e=Xa.min()}var n=this.Nu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ka(Ya.ABORTED,"Document version changed between two reads.")}else this.Nu.set(t.key.toString(),e)},t.prototype.Ue=function(t){var e=this.Nu.get(t.toString());return!this.xu.has(t)&&e?el.updateTime(e):el.Qe()},t.prototype.Bu=function(t){var e=this.Nu.get(t.toString());if(!this.xu.has(t)&&e){if(e.isEqual(Xa.min()))throw new Ka(Ya.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return el.updateTime(e)}return el.exists(!0)},t.prototype.write=function(t){this.Ou(),this.mutations=this.mutations.concat(t)},t.prototype.Ou=function(){},t}(),Bp=function(){function t(t,e){this.Ro=t,this.qu=e,this.state="Unknown",this.Uu=0,this.Qu=null,this.Wu=!0}return t.prototype.ju=function(){var t=this;0===this.Uu&&(this.Ku("Unknown"),this.Qu=this.Ro.Os("online_state_timeout",1e4,(function(){return t.Qu=null,t.Gu("Backend didn't respond within 10 seconds."),t.Ku("Offline"),Promise.resolve()})))},t.prototype.zu=function(t){"Online"===this.state?this.Ku("Unknown"):(this.Uu++,this.Uu>=1&&(this.Hu(),this.Gu("Connection failed 1 times. Most recent error: "+t.toString()),this.Ku("Offline")))},t.prototype.set=function(t){this.Hu(),this.Uu=0,"Online"===t&&(this.Wu=!1),this.Ku(t)},t.prototype.Ku=function(t){t!==this.state&&(this.state=t,this.qu(t))},t.prototype.Gu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Wu?(Oa(e),this.Wu=!1):Pa("OnlineStateTracker",e)},t.prototype.Hu=function(){null!==this.Qu&&(this.Qu.cancel(),this.Qu=null)},t}(),Wp=function(){function t(t,e,n,r,i){var o=this;this.Yu=t,this.Fu=e,this.Ro=n,this.Ju=[],this.Xu=new Map,this.Zu=null,this.tc=new Set,this.ec=i,this.ec.nc((function(t){n.lr((function(){return a(o,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.sc()?(Pa("RemoteStore","Restarting streams for network reachability change."),[4,this.ic()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.rc=new Bp(n,r),this.oc=function(t,e,n){var r=Ma(t);return new jp(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.hc.bind(this),_u:this.ac.bind(this),mu:this.uc.bind(this)}),this.cc=function(t,e,n){var r=Ma(t);return new Up(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.lc.bind(this),_u:this._c.bind(this),pu:this.fc.bind(this),yu:this.yu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.tc.delete(0),this.dc()},t.prototype.dc=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.sc()?(this.wc()?this.Tc():this.rc.set("Unknown"),[4,this.Ec()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.tc.add(0),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Offline"),[2]}}))}))},t.prototype.Ic=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.cc.stop()];case 1:return t.sent(),[4,this.oc.stop()];case 2:return t.sent(),this.Ju.length>0&&(Pa("RemoteStore","Stopping write stream with "+this.Ju.length+" pending writes"),this.Ju=[]),this.mc(),[2]}}))}))},t.prototype.yr=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return Pa("RemoteStore","RemoteStore shutting down."),this.tc.add(5),[4,this.Ic()];case 1:return t.sent(),this.ec.yr(),this.rc.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Xu.has(t.targetId)||(this.Xu.set(t.targetId,t),this.wc()?this.Tc():this.oc.iu()&&this.Ac(t))},t.prototype.Rc=function(t){this.Xu.delete(t),this.oc.iu()&&this.Pc(t),0===this.Xu.size&&(this.oc.iu()?this.oc.hu():this.sc()&&this.rc.set("Unknown"))},t.prototype.Me=function(t){return this.Xu.get(t)||null},t.prototype.xe=function(t){return this.Vc.xe(t)},t.prototype.Ac=function(t){this.Zu.de(t.targetId),this.oc.Au(t)},t.prototype.Pc=function(t){this.Zu.de(t),this.oc.Ru(t)},t.prototype.Tc=function(){this.Zu=new Bu(this),this.oc.start(),this.rc.ju()},t.prototype.wc=function(){return this.sc()&&!this.oc.su()&&this.Xu.size>0},t.prototype.sc=function(){return 0===this.tc.size},t.prototype.mc=function(){this.Zu=null},t.prototype.hc=function(){return a(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){return this.Xu.forEach((function(e,n){t.Ac(e)})),[2]}))}))},t.prototype.ac=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return this.mc(),this.wc()?(this.rc.zu(t),this.Tc()):this.rc.set("Unknown"),[2]}))}))},t.prototype.uc=function(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:if(this.rc.set("Online"),!(t instanceof Vu&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.gc(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),Pa("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.yc(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof ju?this.Zu.Pe(t):t instanceof Uu?this.Zu.De(t):this.Zu.ye(t),e.isEqual(Xa.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,this.Yu.mi()];case 8:return r=o.sent(),e.o(r)>=0?[4,this.pc(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Pa("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.yc(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.yc=function(t,e){return a(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:if(!cf(t))throw t;return this.tc.add(1),[4,this.Ic()];case 1:return r.sent(),this.rc.set("Offline"),e||(e=function(){return n.Yu.mi()}),this.Ro.dr((function(){return a(n,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return Pa("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.tc.delete(1),[4,this.dc()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.bc=function(t){var e=this;return t().catch((function(n){return e.yc(n,t)}))},t.prototype.pc=function(t){var e=this,n=this.Zu.Ne(t);return n.Qt.forEach((function(n,r){if(n.resumeToken.H()>0){var i=e.Xu.get(r);i&&e.Xu.set(r,i.tt(n.resumeToken,t))}})),n.Wt.forEach((function(t){var n=e.Xu.get(t);if(n){e.Xu.set(t,n.tt(hu.Y,n.X)),e.Pc(t);var r=new du(n.target,t,1,n.sequenceNumber);e.Ac(r)}})),this.Vc.qh(n)},t.prototype.gc=function(t){return a(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.Xu.has(i)?[4,this.Vc.vc(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.Xu.delete(i),this.Zu.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.Ec=function(){return a(this,void 0,void 0,(function(){var t,e,n;return u(this,(function(r){switch(r.label){case 0:t=this.Ju.length>0?this.Ju[this.Ju.length-1].batchId:-1,r.label=1;case 1:if(!this.Sc())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.Yu.jh(t)];case 3:return null===(e=r.sent())?(0===this.Ju.length&&this.cc.hu(),[3,7]):(t=e.batchId,this.Dc(e),[3,6]);case 4:return n=r.sent(),[4,this.yc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.Sc=function(){return this.sc()&&this.Ju.length<10},t.prototype.Nc=function(){return this.Ju.length},t.prototype.Dc=function(t){this.Ju.push(t),this.cc.iu()&&this.cc.Vu&&this.cc.gu(t.mutations)},t.prototype.Cc=function(){return this.sc()&&!this.cc.su()&&this.Ju.length>0},t.prototype.Fc=function(){this.cc.start()},t.prototype.lc=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){return this.cc.bu(),[2]}))}))},t.prototype.fc=function(){return a(this,void 0,void 0,(function(){var t,e,n;return u(this,(function(r){for(t=0,e=this.Ju;t<e.length;t++)n=e[t],this.cc.gu(n.mutations);return[2]}))}))},t.prototype.yu=function(t,e){return a(this,void 0,void 0,(function(){var n,r,i=this;return u(this,(function(o){switch(o.label){case 0:return n=this.Ju.shift(),r=zl.from(n,t,e),[4,this.bc((function(){return i.Vc.$c(r)}))];case 1:return o.sent(),[4,this.Ec()];case 2:return o.sent(),[2]}}))}))},t.prototype._c=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t&&this.cc.Vu?[4,this.kc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.kc=function(t){return a(this,void 0,void 0,(function(){var e,n,r=this;return u(this,(function(i){switch(i.label){case 0:return vu(n=t.code)&&n!==Ya.ABORTED?(e=this.Ju.shift(),this.cc.ou(),[4,this.bc((function(){return r.Vc.xc(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.Ec()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.Mc=function(){return new qp(this.Fu)},t.prototype.ic=function(){return a(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.tc.add(4),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Unknown"),this.tc.delete(4),[4,this.dc()];case 2:return t.sent(),[2]}}))}))},t.prototype.Oc=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return this.Ro.Ko(),Pa("RemoteStore","RemoteStore received new credentials"),this.tc.add(3),[4,this.Ic()];case 1:return e.sent(),this.rc.set("Unknown"),[4,this.Vc.Oc(t)];case 2:return e.sent(),this.tc.delete(3),[4,this.dc()];case 3:return e.sent(),[2]}}))}))},t.prototype.Lc=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return t?(this.tc.delete(2),[4,this.dc()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.tc.add(2),[4,this.Ic()]);case 3:e.sent(),this.rc.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t,e){return"firestore_clients_"+t+"_"+e}function Hp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Yr()&&(r+="_"+e.uid),r}function Qp(t,e){return"firestore_targets_"+t+"_"+e}var Gp=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Bc=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Ka(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Oa("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yp=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Bc=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Ka(r.error.code,r.error.message)),i?new t(e,r.state,o):(Oa("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Kp=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Bc=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ou(),s=0;i&&s<r.activeTargetIds.length;++s)i=ou(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Oa("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),$p=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Bc=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Oa("SharedClientState","Failed to parse online state: "+e),null)},t}(),Xp=function(){function t(){this.activeTargetIds=Ou()}return t.prototype.Uc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Qc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.qc=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Jp=function(){function t(t,e,n,r,i){this.window=t,this.bs=e,this.persistenceKey=n,this.Wc=r,this.Vc=null,this.qu=null,this.Ps=null,this.jc=this.Kc.bind(this),this.Gc=new mu(Ua),this.hr=!1,this.zc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Hc=zp(this.persistenceKey,this.Wc),this.Yc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Gc=this.Gc.nt(this.Wc,new Xp),this.Jc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Xc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Zc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.tl=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.jc)}return t.Hi=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return a(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,c,l,h,f=this;return u(this,(function(u){switch(u.label){case 0:return[4,this.Vc.Dr()];case 1:for(t=u.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Wc&&(i=this.getItem(zp(this.persistenceKey,r)))&&(o=Kp.Bc(r,i))&&(this.Gc=this.Gc.nt(o.clientId,o));for(this.el(),(s=this.storage.getItem(this.tl))&&(a=this.nl(s))&&this.sl(a),c=0,l=this.zc;c<l.length;c++)h=l[c],this.Kc(h);return this.zc=[],this.window.addEventListener("unload",(function(){return f.yr()})),this.hr=!0,[2]}}))}))},t.prototype.ys=function(t){this.setItem(this.Yc,JSON.stringify(t))},t.prototype.il=function(){return this.rl(this.Gc)},t.prototype.ol=function(t){var e=!1;return this.Gc.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.hl=function(t){this.al(t,"pending")},t.prototype.ul=function(t,e,n){this.al(t,e,n),this.cl(t)},t.prototype.ll=function(t){var e="not-current";if(this.ol(t)){var n=this.storage.getItem(Qp(this.persistenceKey,t));if(n){var r=Yp.Bc(t,n);r&&(e=r.state)}}return this._l.Uc(t),this.el(),e},t.prototype.fl=function(t){this._l.Qc(t),this.el()},t.prototype.dl=function(t){return this._l.activeTargetIds.has(t)},t.prototype.wl=function(t){this.removeItem(Qp(this.persistenceKey,t))},t.prototype.Tl=function(t,e,n){this.El(t,e,n)},t.prototype.Nh=function(t,e,n){var r=this;e.forEach((function(t){r.cl(t)})),this.currentUser=t,n.forEach((function(t){r.hl(t)}))},t.prototype.Il=function(t){this.ml(t)},t.prototype.yr=function(){this.hr&&(this.window.removeEventListener("storage",this.jc),this.removeItem(this.Hc),this.hr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Pa("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Pa("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Pa("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Kc=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Pa("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Hc)return void Oa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bs.dr((function(){return a(e,void 0,void 0,(function(){var t,e,r,i,o,s;return u(this,(function(a){if(this.hr){if(null!==n.key)if(this.Jc.test(n.key)){if(null==n.newValue)return t=this.Al(n.key),[2,this.Rl(t,null)];if(e=this.Pl(n.key,n.newValue))return[2,this.Rl(e.clientId,e)]}else if(this.Xc.test(n.key)){if(null!==n.newValue&&(r=this.Vl(n.key,n.newValue)))return[2,this.gl(r)]}else if(this.Zc.test(n.key)){if(null!==n.newValue&&(i=this.yl(n.key,n.newValue)))return[2,this.pl(i)]}else if(n.key===this.tl){if(null!==n.newValue&&(o=this.nl(n.newValue)))return[2,this.sl(o)]}else n.key===this.Yc&&(s=function(t){var e=Xl.ps;if(null!=t)try{var n=JSON.parse(t);La("number"==typeof n),e=n}catch(t){Oa("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Xl.ps&&this.Ps(s)}else this.zc.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"_l",{get:function(){return this.Gc.get(this.Wc)},enumerable:!1,configurable:!0}),t.prototype.el=function(){this.setItem(this.Hc,this._l.qc())},t.prototype.al=function(t,e,n){var r=new Gp(this.currentUser,t,e,n),i=Hp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.qc())},t.prototype.cl=function(t){var e=Hp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ml=function(t){var e={clientId:this.Wc,onlineState:t};this.storage.setItem(this.tl,JSON.stringify(e))},t.prototype.El=function(t,e,n){var r=Qp(this.persistenceKey,t),i=new Yp(t,e,n);this.setItem(r,i.qc())},t.prototype.Al=function(t){var e=this.Jc.exec(t);return e?e[1]:null},t.prototype.Pl=function(t,e){var n=this.Al(t);return Kp.Bc(n,e)},t.prototype.Vl=function(t,e){var n=this.Xc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Gp.Bc(new Pp(i),r,e)},t.prototype.yl=function(t,e){var n=this.Zc.exec(t),r=Number(n[1]);return Yp.Bc(r,e)},t.prototype.nl=function(t){return $p.Bc(t)},t.prototype.gl=function(t){return a(this,void 0,void 0,(function(){return u(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Vc.bl(t.batchId,t.state,t.error)]:(Pa("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.pl=function(t){return this.Vc.vl(t.targetId,t.state,t.error)},t.prototype.Rl=function(t,e){var n=this,r=e?this.Gc.nt(t,e):this.Gc.remove(t),i=this.rl(this.Gc),o=this.rl(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.Vc.Sl(s,a).then((function(){n.Gc=r}))},t.prototype.sl=function(t){this.Gc.get(t.clientId)&&this.qu(t.onlineState)},t.prototype.rl=function(t){var e=Ou();return t.forEach((function(t,n){e=e.Ct(n.activeTargetIds)})),e},t}(),Zp=function(){function t(){this.Dl=new Xp,this.Cl={},this.Vc=null,this.qu=null,this.Ps=null}return t.prototype.hl=function(t){},t.prototype.ul=function(t,e,n){},t.prototype.ll=function(t){return this.Dl.Uc(t),this.Cl[t]||"not-current"},t.prototype.Tl=function(t,e,n){this.Cl[t]=e},t.prototype.fl=function(t){this.Dl.Qc(t)},t.prototype.dl=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.wl=function(t){delete this.Cl[t]},t.prototype.il=function(){return this.Dl.activeTargetIds},t.prototype.ol=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.start=function(){return this.Dl=new Xp,Promise.resolve()},t.prototype.Nh=function(t,e,n){},t.prototype.Il=function(t){},t.prototype.yr=function(){},t.prototype.ys=function(t){},t}(),td=function(t){this.key=t},ed=function(t){this.key=t},nd=function(){function t(t,e){this.query=t,this.Fl=e,this.Nl=null,this.Ht=!1,this.$l=Au(),this.Lt=Au(),this.kl=kl(t),this.xl=new Ru(this.kl)}return Object.defineProperty(t.prototype,"Ml",{get:function(){return this.Fl},enumerable:!1,configurable:!0}),t.prototype.Ol=function(t,e){var n=this,r=e?e.Ll:new Du,i=e?e.xl:this.xl,o=e?e.Lt:this.Lt,s=i,a=!1,u=this.query.In()&&i.size===this.query.limit?i.last():null,c=this.query.mn()&&i.size===this.query.limit?i.first():null;if(t.ot((function(t,e){var l=i.get(t),h=e instanceof wl?e:null;h&&(h=Nl(n.query,h)?h:null);var f=!!l&&n.Lt.has(l.key),p=!!h&&(h.Ge||n.Lt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Bl(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.kl(h,u)>0||c&&n.kl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.In()||this.query.mn())for(;s.size>this.query.limit;){var l=this.query.In()?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{xl:s,Ll:r,ql:a,Lt:o}},t.prototype.Bl=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t.prototype.Jn=function(t,e,n){var r=this,i=this.xl;this.xl=t.xl,this.Lt=t.Lt;var o=t.Ll.Mt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Da()}};return n(t)-n(e)}(t.type,e.type)||r.kl(t.doc,e.doc)})),this.Ul(n);var s=e?this.Ql():[],a=0===this.$l.size&&this.Ht?1:0,u=a!==this.Nl;return this.Nl=a,0!==o.length||u?{snapshot:new Lu(this.query,t.xl,i,o,t.Lt,0===a,u,!1),Wl:s}:{Wl:s}},t.prototype.jl=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Jn({xl:this.xl,Ll:new Du,Lt:this.Lt,ql:!1},!1)):{Wl:[]}},t.prototype.Kl=function(t){return!this.Fl.has(t)&&!!this.xl.has(t)&&!this.xl.get(t).Ge},t.prototype.Ul=function(t){var e=this;t&&(t.Yt.forEach((function(t){return e.Fl=e.Fl.add(t)})),t.Jt.forEach((function(t){})),t.Xt.forEach((function(t){return e.Fl=e.Fl.delete(t)})),this.Ht=t.Ht)},t.prototype.Ql=function(){var t=this;if(!this.Ht)return[];var e=this.$l;this.$l=Au(),this.xl.forEach((function(e){t.Kl(e.key)&&(t.$l=t.$l.add(e.key))}));var n=[];return e.forEach((function(e){t.$l.has(e)||n.push(new ed(e))})),this.$l.forEach((function(t){e.has(t)||n.push(new td(t))})),n},t.prototype.Gl=function(t){this.Fl=t.Yh,this.$l=Au();var e=this.Ol(t.documents);return this.Jn(e,!0)},t.prototype.zl=function(){return Lu.Ut(this.query,this.xl,this.Lt,0===this.Nl)},t}(),rd=function(){function t(t,e,n,r){this.Ro=t,this.Fu=e,this.updateFunction=n,this.yo=r,this.Hl=5,this.xo=new Zl(this.Ro,"transaction_retry")}return t.prototype.run=function(){this.Yl()},t.prototype.Yl=function(){var t=this;this.xo.xs((function(){return a(t,void 0,void 0,(function(){var t,e,n=this;return u(this,(function(r){return t=new qp(this.Fu),(e=this.Jl(t))&&e.then((function(e){n.Ro.lr((function(){return t.commit().then((function(){n.yo.resolve(e)})).catch((function(t){n.Xl(t)}))}))})).catch((function(t){n.Xl(t)})),[2]}))}))}))},t.prototype.Jl=function(t){try{var e=this.updateFunction(t);return!ru(e)&&e.catch&&e.then?e:(this.yo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.yo.reject(t),null}},t.prototype.Xl=function(t){var e=this;this.Hl>0&&this.Zl(t)?(this.Hl-=1,this.Ro.lr((function(){return e.Yl(),Promise.resolve()}))):this.yo.reject(t)},t.prototype.Zl=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!vu(e)}return!1},t}(),id=function(t,e,n){this.query=t,this.targetId=e,this.view=n},od=function(t){this.key=t,this.t_=!1},sd=function(){function t(t,e,n,r,i,o){this.Yu=t,this.e_=e,this.Fu=n,this.n_=r,this.currentUser=i,this.s_=o,this.i_=null,this.r_=new Ga((function(t){return Il(t)}),Sl),this.o_=new Map,this.h_=[],this.a_=new mu(nu.P),this.u_=new Map,this.c_=new Nf,this.l_={},this.__=new Map,this.f_=Th.di(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"d_",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){this.i_=t},t.prototype.listen=function(t){return a(this,void 0,void 0,(function(){var e,n,r,i,o;return u(this,(function(s){switch(s.label){case 0:return this.w_("listen()"),(r=this.r_.get(t))?(e=r.targetId,this.n_.ll(e),n=r.view.zl(),[3,4]):[3,1];case 1:return[4,this.Yu.Gh(t.We())];case 2:return i=s.sent(),o=this.n_.ll(i.targetId),e=i.targetId,[4,this.T_(t,e,"current"===o)];case 3:n=s.sent(),this.d_&&this.e_.listen(i),s.label=4;case 4:return[2,n]}}))}))},t.prototype.T_=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i,o,s,a,c;return u(this,(function(u){switch(u.label){case 0:return[4,this.Yu.Hh(t,!0)];case 1:return r=u.sent(),i=new nd(t,r.Yh),o=i.Ol(r.documents),s=Fu.zt(e,n&&"Offline"!==this.onlineState),a=i.Jn(o,this.d_,s),this.E_(e,a.Wl),c=new id(t,e,i),[2,(this.r_.set(t,c),this.o_.has(e)?this.o_.get(e).push(t):this.o_.set(e,[t]),a.snapshot)]}}))}))},t.prototype.Rc=function(t){return a(this,void 0,void 0,(function(){var e,n,r=this;return u(this,(function(i){switch(i.label){case 0:return this.w_("unlisten()"),e=this.r_.get(t),(n=this.o_.get(e.targetId)).length>1?[2,(this.o_.set(e.targetId,n.filter((function(e){return!Sl(e,t)}))),void this.r_.delete(t))]:this.d_?(this.n_.fl(e.targetId),this.n_.ol(e.targetId)?[3,2]:[4,this.Yu.zh(e.targetId,!1).then((function(){r.n_.wl(e.targetId),r.e_.Rc(e.targetId),r.I_(e.targetId)})).catch(xf)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.I_(e.targetId),[4,this.Yu.zh(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return a(this,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:this.w_("write()"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,this.Yu.Mh(t)];case 2:return n=o.sent(),this.n_.hl(n.batchId),this.m_(n.batchId,e),[4,this.A_(n.Un)];case 3:return o.sent(),[4,this.e_.Ec()];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),i=mf(r,"Failed to persist write"),e.reject(i),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new rd(t,this.Fu,e,n).run()},t.prototype.qh=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:this.w_("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.qh(t)];case 2:return e=r.sent(),t.Qt.forEach((function(t,e){var r=n.u_.get(e);r&&(La(t.Yt.size+t.Jt.size+t.Xt.size<=1),t.Yt.size>0?r.t_=!0:t.Jt.size>0?La(r.t_):t.Xt.size>0&&(La(r.t_),r.t_=!1))})),[4,this.A_(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,xf(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.jl=function(t,e){this.w_("applyOnlineStateChange()");var n=[];this.r_.forEach((function(e,r){var i=r.view.jl(t);i.snapshot&&n.push(i.snapshot)})),this.i_.R_(t),this.i_.mu(n),this.onlineState=t},t.prototype.vc=function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return u(this,(function(u){switch(u.label){case 0:return this.w_("rejectListens()"),this.n_.Tl(t,"rejected",e),n=this.u_.get(t),(r=n&&n.key)?(i=(i=new mu(nu.P)).nt(r,new El(r,Xa.min())),o=Au().add(r),s=new Mu(Xa.min(),new Map,new wu(Ua),i,o),[4,this.qh(s)]):[3,2];case 1:return u.sent(),this.a_=this.a_.remove(r),this.u_.delete(t),this.P_(),[3,4];case 2:return[4,this.Yu.zh(t,!1).then((function(){return a.I_(t,e)})).catch(xf)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},t.prototype.$c=function(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:this.w_("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Oh(t)];case 2:return n=r.sent(),this.V_(e,null),this.g_(e),this.n_.ul(e,"acknowledged"),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,xf(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.xc=function(t,e){return a(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:this.w_("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Bh(t)];case 2:return n=r.sent(),this.V_(t,e),this.g_(t),this.n_.ul(t,"rejected",e),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,xf(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.y_=function(t){return a(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){switch(o.label){case 0:this.e_.sc()||Pa("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.Yu.no()];case 2:return-1===(e=o.sent())?[2,void t.resolve()]:((n=this.__.get(e)||[]).push(t),this.__.set(e,n),[3,4]);case 3:return r=o.sent(),i=mf(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}}))}))},t.prototype.g_=function(t){(this.__.get(t)||[]).forEach((function(t){t.resolve()})),this.__.delete(t)},t.prototype.p_=function(t){this.__.forEach((function(e){e.forEach((function(e){e.reject(new Ka(Ya.CANCELLED,t))}))})),this.__.clear()},t.prototype.m_=function(t,e){var n=this.l_[this.currentUser.Ma()];n||(n=new mu(Ua)),n=n.nt(t,e),this.l_[this.currentUser.Ma()]=n},t.prototype.V_=function(t,e){var n=this.l_[this.currentUser.Ma()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.l_[this.currentUser.Ma()]=n}},t.prototype.I_=function(t,e){var n=this;void 0===e&&(e=null),this.n_.fl(t);for(var r=0,i=this.o_.get(t);r<i.length;r++){var o=i[r];this.r_.delete(o),e&&this.i_.b_(o,e)}this.o_.delete(t),this.d_&&this.c_.aa(t).forEach((function(t){n.c_.Mi(t)||n.v_(t)}))},t.prototype.v_=function(t){var e=this.a_.get(t);null!==e&&(this.e_.Rc(e),this.a_=this.a_.remove(t),this.u_.delete(e),this.P_())},t.prototype.E_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof td?(this.c_.Fi(i.key,t),this.S_(i)):i instanceof ed?(Pa("SyncEngine","Document no longer in limbo: "+i.key),this.c_.$i(i.key,t),this.c_.Mi(i.key)||this.v_(i.key)):Da()}},t.prototype.S_=function(t){var e=t.key;this.a_.get(e)||(Pa("SyncEngine","New document in limbo: "+e),this.h_.push(e),this.P_())},t.prototype.P_=function(){for(;this.h_.length>0&&this.a_.size<this.s_;){var t=this.h_.shift(),e=this.f_.next();this.u_.set(e,new od(t)),this.a_=this.a_.nt(t,e),this.e_.listen(new du(Cl.hn(t.path).We(),e,2,Xl.ps))}},t.prototype.D_=function(){return this.a_},t.prototype.C_=function(){return this.h_},t.prototype.A_=function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o=this;return u(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.r_.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.Ol(t);return e.ql?o.Yu.Hh(a.query,!1).then((function(t){var n=t.documents;return a.view.Ol(n,e)})):e})).then((function(t){var i=e&&e.Qt.get(a.targetId),s=a.view.Jn(t,o.d_,i);if(o.E_(a.targetId,s.Wl),s.snapshot){o.d_&&o.n_.Tl(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var u=$l.Rs(a.targetId,s.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return s.sent(),this.i_.mu(n),[4,this.Yu.Wh(r)];case 2:return s.sent(),[2]}}))}))},t.prototype.w_=function(t){},t.prototype.Oc=function(t){return a(this,void 0,void 0,(function(){var e;return u(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(Pa("SyncEngine","User change. New user:",t.Ma()),[4,this.Yu.Nh(t)]);case 1:return e=n.sent(),this.currentUser=t,this.p_("'waitForPendingWrites' promise is rejected due to a user change."),this.n_.Nh(t,e.kh,e.xh),[4,this.A_(e.$h)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.e_.enableNetwork()},t.prototype.disableNetwork=function(){return this.e_.disableNetwork()},t.prototype.xe=function(t){var e=this.u_.get(t);if(e&&e.t_)return Au().add(e.key);var n=Au(),r=this.o_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.r_.get(s);n=n.Ct(a.view.Ml)}return n},t}(),ad=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,o,s)||this).Yu=e,a.F_=void 0,a}return o(e,t),Object.defineProperty(e.prototype,"d_",{get:function(){return!0===this.F_},enumerable:!1,configurable:!0}),e.prototype.enableNetwork=function(){return this.Yu.cr(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.Yu.cr(!1),t.prototype.disableNetwork.call(this)},e.prototype.N_=function(t){return a(this,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return[4,this.Yu.Hh(t.query,!0)];case 1:return e=r.sent(),n=t.view.Gl(e),[2,(this.F_&&this.E_(t.targetId,n.Wl),n)]}}))}))},e.prototype.jl=function(e,n){this.d_&&0===n&&(t.prototype.jl.call(this,e,n),this.n_.Il(e)),this.d_||1!==n||t.prototype.jl.call(this,e,n)},e.prototype.bl=function(t,e,n){return a(this,void 0,void 0,(function(){var r;return u(this,(function(i){switch(i.label){case 0:return this.w_("applyBatchState()"),[4,this.Yu.Xh(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.e_.Ec()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.V_(t,n||null),this.Yu.Zh(t)):Da(),i.label=4;case 4:return[4,this.A_(r)];case 5:return i.sent(),[3,7];case 6:Pa("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.Lc=function(t){return a(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,c=this;return u(this,(function(u){switch(u.label){case 0:return!0!==t||!0===this.F_?[3,3]:(e=this.n_.il(),[4,this.k_(e.F(),!0)]);case 1:return n=u.sent(),this.F_=!0,[4,this.e_.Lc(!0)];case 2:for(u.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.e_.listen(o);return[3,7];case 3:return!1!==t||!1===this.F_?[3,7]:(s=[],a=Promise.resolve(),this.o_.forEach((function(t,e){c.n_.dl(e)?s.push(e):a=a.then((function(){return c.I_(e),c.Yu.zh(e,!0)})),c.e_.Rc(e)})),[4,a]);case 4:return u.sent(),[4,this.k_(s,!1)];case 5:return u.sent(),this.x_(),this.F_=!1,[4,this.e_.Lc(!1)];case 6:u.sent(),u.label=7;case 7:return[2]}}))}))},e.prototype.x_=function(){var t=this;this.u_.forEach((function(e,n){t.e_.Rc(n)})),this.c_.ua(),this.u_=new Map,this.a_=new mu(nu.P)},e.prototype.k_=function(t,e){return a(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,c,l,h,f,p,d;return u(this,(function(u){switch(u.label){case 0:e=[],n=[],r=0,i=t,u.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.o_.get(o))&&0!==a.length?[4,this.Yu.Gh(a[0].We())]:[3,7]):[3,13];case 2:s=u.sent(),c=0,l=a,u.label=3;case 3:return c<l.length?(h=l[c],f=this.r_.get(h),[4,this.N_(f)]):[3,6];case 4:(p=u.sent()).snapshot&&n.push(p.snapshot),u.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,this.Yu.ta(o)];case 8:return d=u.sent(),[4,this.Yu.Gh(d)];case 9:return s=u.sent(),[4,this.T_(this.M_(d),o,!1)];case 10:u.sent(),u.label=11;case 11:e.push(s),u.label=12;case 12:return r++,[3,1];case 13:return[2,(this.i_.mu(n),e)]}}))}))},e.prototype.M_=function(t){return new Cl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.Dr=function(){return this.Yu.Dr()},e.prototype.vl=function(t,e,n){return a(this,void 0,void 0,(function(){var r,i;return u(this,(function(o){switch(o.label){case 0:return this.F_?(Pa("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.o_.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Yu.si()];case 3:return r=o.sent(),i=Mu.Gt(t,"current"===e),[4,this.A_(r,i)];case 4:return o.sent(),[3,8];case 5:return[4,this.Yu.zh(t,!0)];case 6:return o.sent(),this.I_(t,n),[3,8];case 7:Da(),o.label=8;case 8:return[2]}}))}))},e.prototype.Sl=function(t,e){return a(this,void 0,void 0,(function(){var n,r,i,o,s,a,c,l,h,f,p=this;return u(this,(function(d){switch(d.label){case 0:if(!this.F_)return[3,10];n=0,r=t,d.label=1;case 1:return n<r.length?(i=r[n],this.o_.has(i)?(Pa("SyncEngine","Adding an already active target "+i),[3,5]):[4,this.Yu.ta(i)]):[3,6];case 2:return o=d.sent(),[4,this.Yu.Gh(o)];case 3:return s=d.sent(),[4,this.T_(this.M_(o),s.targetId,!1)];case 4:d.sent(),this.e_.listen(s),d.label=5;case 5:return n++,[3,1];case 6:a=function(t){return u(this,(function(e){switch(e.label){case 0:return c.o_.has(t)?[4,c.Yu.zh(t,!1).then((function(){p.e_.Rc(t),p.I_(t)})).catch(xf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=this,l=0,h=e,d.label=7;case 7:return l<h.length?(f=h[l],[5,a(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))},e}(sd),ud=function(){this.O_=void 0,this.listeners=[]},cd=function(){function t(t){this.Vc=t,this.L_=new Ga((function(t){return Il(t)}),Sl),this.onlineState="Unknown",this.B_=new Set,this.Vc.subscribe(this)}return t.prototype.listen=function(t){return a(this,void 0,void 0,(function(){var e,n,r,i,o,s;return u(this,(function(a){switch(a.label){case 0:if(e=t.query,n=!1,(r=this.L_.get(e))||(n=!0,r=new ud),!n)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),i=r,[4,this.Vc.listen(e)];case 2:return i.O_=a.sent(),[3,4];case 3:return o=a.sent(),s=mf(o,"Initialization of query '"+xl(t.query)+"' failed"),[2,void t.onError(s)];case 4:return this.L_.set(e,r),r.listeners.push(t),t.jl(this.onlineState),r.O_&&t.q_(r.O_)&&this.U_(),[2]}}))}))},t.prototype.Rc=function(t){return a(this,void 0,void 0,(function(){var e,n,r,i;return u(this,(function(o){return e=t.query,n=!1,(r=this.L_.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.L_.delete(e),this.Vc.Rc(e))]:[2]}))}))},t.prototype.mu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.L_.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].q_(i)&&(e=!0);s.O_=i}}e&&this.U_()},t.prototype.b_=function(t,e){var n=this.L_.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.L_.delete(t)},t.prototype.R_=function(t){this.onlineState=t;var e=!1;this.L_.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].jl(t)&&(e=!0)})),e&&this.U_()},t.prototype.Q_=function(t){this.B_.add(t),t.next()},t.prototype.W_=function(t){this.B_.delete(t)},t.prototype.U_=function(){this.B_.forEach((function(t){t.next()}))},t}(),ld=function(){function t(t,e,n){this.query=t,this.j_=e,this.K_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.q_=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Lu(t.query,t.docs,t.Ot,e,t.Lt,t.fromCache,t.Bt,!0)}var o=!1;return this.K_?this.z_(t)&&(this.j_.next(t),o=!0):this.H_(t,this.onlineState)&&(this.Y_(t),o=!0),this.G_=t,o},t.prototype.onError=function(t){this.j_.error(t)},t.prototype.jl=function(t){this.onlineState=t;var e=!1;return this.G_&&!this.K_&&this.H_(this.G_,t)&&(this.Y_(this.G_),e=!0),e},t.prototype.H_=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.J_&&n||t.docs._()&&"Offline"!==e)},t.prototype.z_=function(t){if(t.docChanges.length>0)return!0;var e=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Y_=function(t){t=Lu.Ut(t.query,t.docs,t.Lt,t.fromCache),this.K_=!0,this.j_.next(t)},t}(),hd=function(){function t(){}return t.prototype.Fh=function(t){this.X_=t},t.prototype._s=function(t,e,n,r){var i=this;return e.En()||n.isEqual(Xa.min())?this.Z_(t,e):this.X_.us(t,r).next((function(o){var s=i.tf(e,o);return(e.In()||e.mn())&&i.ql(e.nn,s,r,n)?i.Z_(t,e):(Aa()<=Z.DEBUG&&Pa("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),xl(e)),i.X_._s(t,e,n).next((function(t){return s.forEach((function(e){t=t.nt(e.key,e)})),t})))}))},t.prototype.tf=function(t,e){var n=new wu(kl(t));return e.forEach((function(e,r){r instanceof wl&&Nl(t,r)&&(n=n.add(r))})),n},t.prototype.ql=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.Z_=function(t,e){return Aa()<=Z.DEBUG&&Pa("IndexFreeQueryEngine","Using full collection scan to execute query:",xl(e)),this.X_._s(t,e,Xa.min())},t}(),fd=function(){function t(t,e){this.ss=t,this.wi=e,this.ns=[],this.ef=1,this.nf=new wu(kf.na)}return t.prototype.Jr=function(t){return Hl.resolve(0===this.ns.length)},t.prototype.Xr=function(t,e,n,r){var i=this.ef;this.ef++,this.ns.length>0&&this.ns[this.ns.length-1];var o=new Wl(i,e,n,r);this.ns.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.nf=this.nf.add(new kf(u.key,i)),this.ss.Us(t,u.key.path.p())}return Hl.resolve(o)},t.prototype.Zr=function(t,e){return Hl.resolve(this.sf(e))},t.prototype.eo=function(t,e){var n=e+1,r=this.if(n),i=r<0?0:r;return Hl.resolve(this.ns.length>i?this.ns[i]:null)},t.prototype.no=function(){return Hl.resolve(0===this.ns.length?-1:this.ef-1)},t.prototype.so=function(t){return Hl.resolve(this.ns.slice())},t.prototype.os=function(t,e){var n=this,r=new kf(e,0),i=new kf(e,Number.POSITIVE_INFINITY),o=[];return this.nf.vt([r,i],(function(t){var e=n.sf(t.la);o.push(e)})),Hl.resolve(o)},t.prototype.ls=function(t,e){var n=this,r=new wu(Ua);return e.forEach((function(t){var e=new kf(t,0),i=new kf(t,Number.POSITIVE_INFINITY);n.nf.vt([e,i],(function(t){r=r.add(t.la)}))})),Hl.resolve(this.rf(r))},t.prototype.Es=function(t,e){var n=e.path,r=n.length+1,i=n;nu.W(i)||(i=i.child(""));var o=new kf(new nu(i),0),s=new wu(Ua);return this.nf.St((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.la)),!0)}),o),Hl.resolve(this.rf(s))},t.prototype.rf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.sf(t);null!==r&&n.push(r)})),n},t.prototype.ro=function(t,e){var n=this;La(0===this.hf(e.batchId,"removed")),this.ns.shift();var r=this.nf;return Hl.forEach(e.mutations,(function(i){var o=new kf(i.key,e.batchId);return r=r.delete(o),n.wi.Qr(t,i.key)})).next((function(){n.nf=r}))},t.prototype.oo=function(t){},t.prototype.Mi=function(t,e){var n=new kf(e,0),r=this.nf.Dt(n);return Hl.resolve(e.isEqual(r&&r.key))},t.prototype.ho=function(t){return this.ns.length,Hl.resolve()},t.prototype.hf=function(t,e){return this.if(t)},t.prototype.if=function(t){return 0===this.ns.length?0:t-this.ns[0].batchId},t.prototype.sf=function(t){var e=this.if(t);return e<0||e>=this.ns.length?null:this.ns[e]},t}(),pd=function(){function t(t,e){this.ss=t,this.af=e,this.docs=new mu(nu.P),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.af(e);return this.docs=this.docs.nt(r,{Ys:e,size:s,readTime:n}),this.size+=s-o,this.ss.Us(t,r.path.p())},t.prototype.Gn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.zn=function(t,e){var n=this.docs.get(e);return Hl.resolve(n?n.Ys:null)},t.prototype.getEntries=function(t,e){var n=this,r=Su();return e.forEach((function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Ys:null)})),Hl.resolve(r)},t.prototype._s=function(t,e,n){for(var r=xu(),i=new nu(e.path.child("")),o=this.docs.ut(i);o.wt();){var s=o.dt(),a=s.key,u=s.value,c=u.Ys,l=u.readTime;if(!e.path.D(a.path))break;l.o(n)<=0||c instanceof wl&&Nl(e,c)&&(r=r.nt(c.key,c))}return Hl.resolve(r)},t.prototype.uf=function(t,e){return Hl.forEach(this.docs,(function(t){return e(t)}))},t.prototype.oi=function(e){return new t.hi(this)},t.prototype.ui=function(t){return Hl.resolve(this.size)},t}();pd.hi=function(t){function e(e){var n=this;return(n=t.call(this)||this).ci=e,n}return o(e,t),e.prototype.Jn=function(t){var e=this,n=[];return this.Un.forEach((function(r,i){i?n.push(e.ci.jn(t,i,e.readTime)):e.ci.Gn(r)})),Hl.Bn(n)},e.prototype.Hn=function(t,e){return this.ci.zn(t,e)},e.prototype.Yn=function(t,e){return this.ci.getEntries(t,e)},e}(Ql);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dd=function(){function t(t){this.persistence=t,this.cf=new Ga((function(t){return uu(t)}),cu),this.lastRemoteSnapshotVersion=Xa.min(),this.highestTargetId=0,this.lf=0,this._f=new Nf,this.targetCount=0,this.ff=Th.fi()}return t.prototype.pe=function(t,e){return this.cf.forEach((function(t,n){return e(n)})),Hl.resolve()},t.prototype.mi=function(t){return Hl.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ai=function(t){return Hl.resolve(this.lf)},t.prototype.Ti=function(t){return this.highestTargetId=this.ff.next(),Hl.resolve(this.highestTargetId)},t.prototype.Ri=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.lf&&(this.lf=e),Hl.resolve()},t.prototype.Vi=function(t){this.cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ff=new Th(e),this.highestTargetId=e),t.sequenceNumber>this.lf&&(this.lf=t.sequenceNumber)},t.prototype.Pi=function(t,e){return this.Vi(e),this.targetCount+=1,Hl.resolve()},t.prototype.yi=function(t,e){return this.Vi(e),Hl.resolve()},t.prototype.pi=function(t,e){return this.cf.delete(e.target),this._f.aa(e.targetId),this.targetCount-=1,Hl.resolve()},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return this.cf.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.cf.delete(s),o.push(r.bi(t,a.targetId)),i++)})),Hl.Bn(o).next((function(){return i}))},t.prototype.Si=function(t){return Hl.resolve(this.targetCount)},t.prototype.Di=function(t,e){var n=this.cf.get(e)||null;return Hl.resolve(n)},t.prototype.Ci=function(t,e,n){return this._f.ra(e,n),Hl.resolve()},t.prototype.Ni=function(t,e,n){this._f.ha(e,n);var r=this.persistence.wi,i=[];return r&&e.forEach((function(e){i.push(r.Qr(t,e))})),Hl.Bn(i)},t.prototype.bi=function(t,e){return this._f.aa(e),Hl.resolve()},t.prototype.ki=function(t,e){var n=this._f.ca(e);return Hl.resolve(n)},t.prototype.Mi=function(t,e){return Hl.resolve(this._f.Mi(e))},t}(),yd=function(){function t(t){var e=this;this.df={},this.Ui=new Xl(0),this.Qi=!1,this.Qi=!0,this.wi=t(this),this.Xi=new dd(this),this.ss=new ih,this.es=new pd(this.ss,(function(t){return e.wi.wf(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.yr=function(){return this.Qi=!1,Promise.resolve()},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.ar=function(){},t.prototype.kr=function(){return this.ss},t.prototype.Cr=function(t){var e=this.df[t.Ma()];return e||(e=new fd(this.ss,this.wi),this.df[t.Ma()]=e),e},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.runTransaction=function(t,e,n){var r=this;Pa("MemoryPersistence","Starting transaction:",t);var i=new vd(this.Ui.next());return this.wi.Tf(),n(i).next((function(t){return r.wi.Ef(i).next((function(){return t}))})).On().then((function(t){return i.ts(),t}))},t.prototype.If=function(t,e){return Hl.qn(Object.values(this.df).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),vd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Li=e,n}return o(e,t),e}(Yl),gd=function(){function t(t){this.persistence=t,this.mf=new Nf,this.Af=null}return t.Rf=function(e){return new t(e)},Object.defineProperty(t.prototype,"Pf",{get:function(){if(this.Af)return this.Af;throw Da()},enumerable:!1,configurable:!0}),t.prototype.Fi=function(t,e,n){return this.mf.Fi(n,e),this.Pf.delete(n),Hl.resolve()},t.prototype.$i=function(t,e,n){return this.mf.$i(n,e),this.Pf.add(n),Hl.resolve()},t.prototype.Qr=function(t,e){return this.Pf.add(e),Hl.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.mf.aa(e.targetId).forEach((function(t){return n.Pf.add(t)}));var r=this.persistence.Nr();return r.ki(t,e.targetId).next((function(t){t.forEach((function(t){return n.Pf.add(t)}))})).next((function(){return r.pi(t,e)}))},t.prototype.Tf=function(){this.Af=new Set},t.prototype.Ef=function(t){var e=this,n=this.persistence.$r().oi();return Hl.forEach(this.Pf,(function(r){return e.Vf(t,r).next((function(t){t||n.Gn(r)}))})).next((function(){return e.Af=null,n.apply(t)}))},t.prototype.Gr=function(t,e){var n=this;return this.Vf(t,e).next((function(t){t?n.Pf.delete(e):n.Pf.add(e)}))},t.prototype.wf=function(t){return 0},t.prototype.Vf=function(t,e){var n=this;return Hl.qn([function(){return Hl.resolve(n.mf.Mi(e))},function(){return n.persistence.Nr().Mi(t,e)},function(){return n.persistence.If(t,e)}])},t}(),md=function(){function t(t){this.gf=t.gf,this.yf=t.yf}return t.prototype.Eu=function(t){this.pf=t},t.prototype._u=function(t){this.bf=t},t.prototype.onMessage=function(t){this.vf=t},t.prototype.close=function(){this.yf()},t.prototype.send=function(t){this.gf(t)},t.prototype.Sf=function(){this.pf()},t.prototype.Df=function(t){this.bf(t)},t.prototype.Cf=function(t){this.vf(t)},t}(),_d={BatchGetDocuments:"batchGet",Commit:"commit"},bd="gl-js/ fire/"+Na,wd=function(){function t(t){this.s=t.s;var e=t.ssl?"https":"http";this.Ff=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Nf=function(t,e){if(e)for(var n in e.Ba)e.Ba.hasOwnProperty(n)&&(t[n]=e.Ba[n]);t["X-Goog-Api-Client"]=bd},t.prototype.Du=function(t,e,n){var r=this,i=this.$f(t);return new Promise((function(o,s){var a=new xa;a.listenOnce(Sa.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Ca.NO_ERROR:var e=a.getResponseJson();Pa("Connection","XHR received:",JSON.stringify(e)),o(e);break;case Ca.TIMEOUT:Pa("Connection",'RPC "'+t+'" timed out'),s(new Ka(Ya.DEADLINE_EXCEEDED,"Request time out"));break;case Ca.HTTP_ERROR:var n=a.getStatus();if(Pa("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Ya).indexOf(e)>=0?e:Ya.UNKNOWN}(r.status);s(new Ka(i,r.message))}else s(new Ka(Ya.UNKNOWN,"Server responded with status "+a.getStatus()))}else Pa("Connection",'RPC "'+t+'" failed'),s(new Ka(Ya.UNAVAILABLE,"Connection failed."));break;default:Da()}}finally{Pa("Connection",'RPC "'+t+'" completed.')}}));var u=Object.assign({},e);delete u.database;var c=JSON.stringify(u);Pa("Connection","XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.Nf(l,n),a.send(i,"POST",c,l,15)}))},t.prototype.Cu=function(t,e,n){return this.Du(t,e,n)},t.prototype.Iu=function(t,e){var n,r,i=[this.Ff,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ta(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Nf(s.initMessageHeaders,e),C()||I()||T().indexOf("Electron/")>=0||((r=T()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||T().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");Pa("Connection","Creating WebChannel: "+a+" "+s);var u=o.createWebChannel(a,s),c=!1,l=!1,h=new md({gf:function(t){l?Pa("Connection","Not sending because WebChannel is closed:",t):(c||(Pa("Connection","Opening WebChannel transport."),u.open(),c=!0),Pa("Connection","WebChannel sending:",t),u.send(t))},yf:function(){return u.close()}}),p=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return p(Ia.EventType.OPEN,(function(){l||Pa("Connection","WebChannel transport opened.")})),p(Ia.EventType.CLOSE,(function(){l||(l=!0,Pa("Connection","WebChannel transport closed"),h.Df())})),p(Ia.EventType.ERROR,(function(t){l||(l=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ka.logLevel<=Z.WARN){var r=e.map(Ra);ka.warn.apply(ka,f(["Firestore ("+Na+"): "+t],r))}}("Connection","WebChannel transport errored:",t),h.Df(new Ka(Ya.UNAVAILABLE,"The operation could not be completed")))})),p(Ia.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];La(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Pa("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=fu[t];if(void 0!==e)return gu(e)}(o),a=i.message;void 0===s&&(s=Ya.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),l=!0,h.Df(new Ka(s,a)),u.close()}else Pa("Connection","WebChannel received:",n),h.Cf(n)}})),setTimeout((function(){h.Sf()}),0),h},t.prototype.$f=function(t){var e=_d[t];return this.Ff+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),Ed=function(){function t(){var t=this;this.kf=function(){return t.xf()},this.Mf=function(){return t.Of()},this.Lf=[],this.Bf()}return t.prototype.nc=function(t){this.Lf.push(t)},t.prototype.yr=function(){window.removeEventListener("online",this.kf),window.removeEventListener("offline",this.Mf)},t.prototype.Bf=function(){window.addEventListener("online",this.kf),window.addEventListener("offline",this.Mf)},t.prototype.xf=function(){Pa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(0)},t.prototype.Of=function(){Pa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(1)},t.Hi=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Td=function(){function t(){}return t.prototype.nc=function(t){},t.prototype.yr=function(){},t}(),Cd="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Sd=function(){function t(){}return t.prototype.initialize=function(t){return a(this,void 0,void 0,(function(){var e=this;return u(this,(function(n){switch(n.label){case 0:return this.n_=this.qf(t),this.persistence=this.Uf(t),[4,this.persistence.start()];case 1:return n.sent(),this.Qf=this.Wf(t),this.Yu=this.jf(t),this.e_=this.Kf(t),this.Vc=this.Gf(t),this.zf=this.Hf(t),this.n_.qu=function(t){return e.Vc.jl(t,1)},this.e_.Vc=this.Vc,[4,this.Yu.start()];case 2:return n.sent(),[4,this.n_.start()];case 3:return n.sent(),[4,this.e_.start()];case 4:return n.sent(),[4,this.e_.Lc(this.Vc.d_)];case 5:return n.sent(),[2]}}))}))},t.prototype.Hf=function(t){return new cd(this.Vc)},t.prototype.Wf=function(t){return null},t.prototype.jf=function(t){return e=this.persistence,n=new hd,r=t.Yf,new Sf(e,n,r);var e,n,r},t.prototype.Uf=function(t){if(t.Xf.Jf)throw new Ka(Ya.FAILED_PRECONDITION,Cd);return new yd(gd.Rf)},t.prototype.Kf=function(t){var e=this;return new Wp(this.Yu,t.Fu,t.Ro,(function(t){return e.Vc.jl(t,0)}),Ed.Hi()?new Ed:new Td)},t.prototype.qf=function(t){return new Zp},t.prototype.Gf=function(t){return e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,s=t.s_,new sd(e,n,r,i,o,s);var e,n,r,i,o,s},t.prototype.clearPersistence=function(t){throw new Ka(Ya.FAILED_PRECONDITION,Cd)},t}(),Id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.initialize=function(e){return a(this,void 0,void 0,(function(){var n=this;return u(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.or((function(t){return a(n,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this.Vc.Lc(t)];case 1:return e.sent(),this.Qf&&(t&&!this.Qf.hr?this.Qf.start(this.Yu):t||this.Qf.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.jf=function(t){return e=this.persistence,n=new hd,r=t.Yf,new If(e,n,r);var e,n,r},e.prototype.Gf=function(t){var e,n,r,i,o,s,a=(e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,s=t.s_,new ad(e,n,r,i,o,s));return this.n_ instanceof Jp&&(this.n_.Vc=a),a},e.prototype.Wf=function(t){var e=this.persistence.wi.Or;return new Tf(e,t.Ro)},e.prototype.Uf=function(t){var e=Ah.Mr(t.Zf),n=hp(t.Zf.s);return new Ah(t.Xf.synchronizeTabs,e,t.clientId,Ef.ah(t.Xf.cacheSizeBytes),t.Ro,yf(),"undefined"!=typeof document?document:null,n,this.n_,t.Xf.qi)},e.prototype.qf=function(t){if(t.Xf.Jf&&t.Xf.synchronizeTabs){var e=yf();if(!Jp.Hi(e))throw new Ka(Ya.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ah.Mr(t.Zf);return new Jp(e,t.Ro,n,t.clientId,t.Yf)}return new Zp},e.prototype.clearPersistence=function(t){var e=Ah.Mr(t);return Ah.clearPersistence(e)},e}(Sd),xd=function(){function t(t,e){this.credentials=t,this.Ro=e,this.clientId=ja.t()}return t.prototype.start=function(t,e,n){var r=this;this.Su(),this.Zf=t;var i=new Jl,o=new Jl,s=!1;return this.credentials.Qa((function(t){if(!s)return s=!0,Pa("FirestoreClient","Initializing. user=",t.uid),r.td(e,n,t,o).then(i.resolve,i.reject);r.Ro.dr((function(){return r.e_.Oc(t)}))})),this.Ro.lr((function(){return i.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.enableNetwork()}))},t.prototype.td=function(t,e,n,r){return a(this,void 0,void 0,(function(){var i,o,s,c,l,h=this;return u(this,(function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),[4,(l=this.Zf,Promise.resolve(new wd(l)))];case 1:return i=f.sent(),o=hp(this.Zf.s),s=function(t,e,n){return new Vp(t,e,n)}(i,this.credentials,o),[4,t.initialize({Ro:this.Ro,Zf:this.Zf,Fu:s,clientId:this.clientId,Yf:n,s_:100,Xf:e})];case 2:return f.sent(),this.persistence=t.persistence,this.n_=t.n_,this.Yu=t.Yu,this.e_=t.e_,this.Vc=t.Vc,this.Qf=t.Qf,this.ed=t.zf,this.persistence.ar((function(){return a(h,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(c=f.sent(),r.reject(c),!this.nd(c))throw c;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),this.td(new Sd,{Jf:!1},n,r))];case 4:return[2]}}))}))},t.prototype.nd=function(t){return"FirebaseError"===t.name?t.code===Ya.FAILED_PRECONDITION||t.code===Ya.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Su=function(){if(this.Ro.Oo)throw new Ka(Ya.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Ro.Qo((function(){return a(t,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.Qf&&this.Qf.stop(),[4,this.e_.yr()];case 1:return t.sent(),[4,this.n_.yr()];case 2:return t.sent(),[4,this.persistence.yr()];case 3:return t.sent(),this.credentials.Wa(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Su();var e=new Jl;return this.Ro.lr((function(){return t.Vc.y_(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Su();var i=new ld(t,e,n);return this.Ro.lr((function(){return r.ed.listen(i)})),i},t.prototype.Rc=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.Rc(t)}))},t.prototype.rd=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:return this.Su(),e=new Jl,[4,this.Ro.enqueue((function(){return a(n,void 0,void 0,(function(){var n,r,i;return u(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.Yu.Kh(t)];case 1:return(n=o.sent())instanceof wl?e.resolve(n):n instanceof El?e.resolve(null):e.reject(new Ka(Ya.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=mf(r,"Failed to get document '"+t+" from cache"),e.reject(i),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.od=function(t){return a(this,void 0,void 0,(function(){var e,n=this;return u(this,(function(r){switch(r.label){case 0:return this.Su(),e=new Jl,[4,this.Ro.enqueue((function(){return a(n,void 0,void 0,(function(){var n,r,i,o,s,a;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.Yu.Hh(t,!0)];case 1:return n=u.sent(),r=new nd(t,n.Yh),i=r.Ol(n.documents),o=r.Jn(i,!1),e.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=mf(s,"Failed to execute query '"+t+" against cache"),e.reject(a),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.Su();var n=new Jl;return this.Ro.lr((function(){return e.Vc.write(t,n)})),n.promise},t.prototype.s=function(){return this.Zf.s},t.prototype.Q_=function(t){var e=this;this.Su(),this.Ro.lr((function(){return e.ed.Q_(t),Promise.resolve()}))},t.prototype.W_=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.W_(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"sd",{get:function(){return this.Ro.Oo},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Su();var n=new Jl;return this.Ro.lr((function(){return e.Vc.runTransaction(e.Ro,t,n),Promise.resolve()})),n.promise},t}(),Nd=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.hd(this.observer.next,t)},t.prototype.error=function(t){this.hd(this.observer.error,t)},t.prototype.ad=function(){this.muted=!0},t.prototype.hd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ad=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.ud=n,this.ld=r}return t.prototype._d=function(t){switch(Yu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ec(t.integerValue||t.doubleValue);case 3:return this.fd(t.timestampValue);case 4:return this.dd(t);case 5:return t.stringValue;case 6:return new Xf(nc(t.bytesValue));case 7:return this.wd(t.referenceValue);case 8:return this.Td(t.geoPointValue);case 9:return this.Ed(t.arrayValue);case 10:return this.Id(t.mapValue);default:throw Da()}},t.prototype.Id=function(t){var e=this,n={};return Ha(t.fields||{},(function(t,r){n[t]=e._d(r)})),n},t.prototype.Td=function(t){return new lp(ec(t.latitude),ec(t.longitude))},t.prototype.Ed=function(t){var e=this;return(t.values||[]).map((function(t){return e._d(t)}))},t.prototype.dd=function(t){switch(this.ud){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Hu(n)?t(n):n}(t);return null==e?null:this._d(e);case"estimate":return this.fd(Qu(t));default:return null}},t.prototype.fd=function(t){var e=tc(t),n=new $a(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.wd=function(t){var e=Za.$(t);La(Uc(e));var n=new Wa(e.get(1),e.get(3)),r=new nu(e.g(5));return n.isEqual(this.s)||Oa("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.ld(r)},t}(),Pd=Ef._h,Od=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new Ka(Ya.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Mf("settings","non-empty string","host",t.host),this.host=t.host,Ff("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(zf("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Ff("settings","object","credentials",t.credentials),this.credentials=t.credentials,Ff("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Ff("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Oa("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Oa("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Ff("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Ef.dh;else{if(t.cacheSizeBytes!==Pd&&t.cacheSizeBytes<Ef.fh)throw new Ka(Ya.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Ef.fh);this.cacheSizeBytes=t.cacheSizeBytes}Ff("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Rd=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new Sd),this.md=null,this.Ad=new gf,this.INTERNAL={delete:function(){return a(i,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return this.Rd(),[4,this.Pd.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.md=o,this.ya=t.Vd(o),this.gd=o.name,this.yd=new Dp(n)}else{var s=e;if(!s.projectId)throw new Ka(Ya.INVALID_ARGUMENT,"Must provide projectId");this.ya=new Wa(s.projectId,s.database),this.gd="[DEFAULT]",this.yd=new Rp}this.pd=r,this.bd=new Od({})}return Object.defineProperty(t.prototype,"vd",{get:function(){return this.Sd||(this.Sd=new mp(this.ya,this.bd.ignoreUndefinedProperties)),this.Sd},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){Pf("Firestore.settings",arguments,1),Df("Firestore.settings","object",1,t);var e=new Od(t);if(this.Pd&&!this.bd.isEqual(e))throw new Ka(Ya.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.bd=e,void 0!==e.credentials&&(this.yd=function(t){if(!t)return new Rp;switch(t.type){case"gapi":var e=t.Dd;return La(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Mp(e,t.Ya||"0");case"provider":return t.Dd;default:throw new Ka(Ya.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Rd(),this.Pd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Rd(),this.Pd.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Pd)throw new Ka(Ya.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Oa("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new Ka(Ya.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Cd(this.pd,{Jf:!0,cacheSizeBytes:this.bd.cacheSizeBytes,synchronizeTabs:r,qi:i})},t.prototype.clearPersistence=function(){return a(this,void 0,void 0,(function(){var t,e=this;return u(this,(function(n){if(void 0!==this.Pd&&!this.Pd.sd)throw new Ka(Ya.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new Jl,[2,(this.Ad.Lo((function(){return a(e,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.Fd(),[4,this.pd.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Nd",{get:function(){return this.Rd(),this.Pd.sd},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Rd(),this.Pd.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Rd(),kd(t))return Dd(this.Pd,t);Df("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return Dd(this.Pd,e)},t.prototype.Rd=function(){return this.Pd||this.Cd(new Sd,{Jf:!1}),this.Pd},t.prototype.Fd=function(){return new Ba(this.ya,this.gd,this.bd.host,this.bd.ssl,this.bd.forceLongPolling)},t.prototype.Cd=function(t,e){var n=this.Fd();return this.Pd=new xd(this.yd,this.Ad),this.Pd.start(n,t,e)},t.Vd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new Ka(Ya.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(!n||"string"!=typeof n)throw new Ka(Ya.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Wa(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.md)throw new Ka(Ya.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Pf("Firestore.collection",arguments,1),Df("Firestore.collection","non-empty string",1,t),this.Rd(),new Qd(Za.$(t),this,null)},t.prototype.doc=function(t){return Pf("Firestore.doc",arguments,1),Df("Firestore.doc","non-empty string",1,t),this.Rd(),Fd.$d(Za.$(t),this,null)},t.prototype.collectionGroup=function(t){if(Pf("Firestore.collectionGroup",arguments,1),Df("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Rd(),new Wd(new Cl(Za.k(),t),this,null)},t.prototype.runTransaction=function(t){var e=this;return Pf("Firestore.runTransaction",arguments,1),Df("Firestore.runTransaction","function",1,t),this.Rd().transaction((function(n){return t(new Ld(e,n))}))},t.prototype.batch=function(){return this.Rd(),new Md(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(Aa()){case Z.DEBUG:return"debug";case Z.ERROR:return"error";case Z.SILENT:return"silent";case Z.WARN:return"warn";case Z.INFO:return"info";case Z.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;Pf("Firestore.setLogLevel",arguments,1),Uf("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,ka.setLogLevel(e)},t.prototype.kd=function(){return this.bd.timestampsInSnapshots},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t,e){var n=new Nd({next:function(){e.next&&e.next()},error:function(t){throw Da()}});return t.Q_(n),function(){n.ad(),t.W_(n)}}var Ld=function(){function t(t,e){this.xd=t,this.Md=e}return t.prototype.get=function(t){var e=this;Pf("Transaction.get",arguments,1);var n=$d("Transaction.get",t,this.xd);return this.Md.Mu([n.pa]).then((function(t){if(!t||1!==t.length)return Da();var r=t[0];if(r instanceof El)return new Vd(e.xd,n.pa,null,!1,!1,n.ba);if(r instanceof wl)return new Vd(e.xd,n.pa,r,!1,!1,n.ba);throw Da()}))},t.prototype.set=function(t,e,n){Rf("Transaction.set",arguments,2,3);var r=$d("Transaction.set",t,this.xd);n=Gd("Transaction.set",n);var i=Jd(r.ba,e,n),o=_p(this.xd.vd,"Transaction.set",r.pa,i,null!==r.ba,n);return this.Md.set(r.pa,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof Zf?(Of("Transaction.update",arguments,3),r=$d("Transaction.update",t,this.xd),i=wp(this.xd.vd,"Transaction.update",r.pa,e,n,o)):(Pf("Transaction.update",arguments,2),r=$d("Transaction.update",t,this.xd),i=bp(this.xd.vd,"Transaction.update",r.pa,e)),this.Md.update(r.pa,i),this},t.prototype.delete=function(t){Pf("Transaction.delete",arguments,1);var e=$d("Transaction.delete",t,this.xd);return this.Md.delete(e.pa),this},t}(),Md=function(){function t(t){this.xd=t,this.Od=[],this.Ld=!1}return t.prototype.set=function(t,e,n){Rf("WriteBatch.set",arguments,2,3),this.Bd();var r=$d("WriteBatch.set",t,this.xd);n=Gd("WriteBatch.set",n);var i=Jd(r.ba,e,n),o=_p(this.xd.vd,"WriteBatch.set",r.pa,i,null!==r.ba,n);return this.Od=this.Od.concat(o.va(r.pa,el.Qe())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Bd(),"string"==typeof e||e instanceof Zf?(Of("WriteBatch.update",arguments,3),r=$d("WriteBatch.update",t,this.xd),i=wp(this.xd.vd,"WriteBatch.update",r.pa,e,n,o)):(Pf("WriteBatch.update",arguments,2),r=$d("WriteBatch.update",t,this.xd),i=bp(this.xd.vd,"WriteBatch.update",r.pa,e)),this.Od=this.Od.concat(i.va(r.pa,el.exists(!0))),this},t.prototype.delete=function(t){Pf("WriteBatch.delete",arguments,1),this.Bd();var e=$d("WriteBatch.delete",t,this.xd);return this.Od=this.Od.concat(new yl(e.pa,el.Qe())),this},t.prototype.commit=function(){return this.Bd(),this.Ld=!0,this.Od.length>0?this.xd.Rd().write(this.Od):Promise.resolve()},t.prototype.Bd=function(){if(this.Ld)throw new Ka(Ya.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Fd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,e,r)||this).pa=e,i.firestore=n,i.ba=r,i.Pd=i.firestore.Rd(),i}return o(e,t),e.$d=function(t,n,r){if(t.length%2!=0)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new e(new nu(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Qd(this.pa.path.p(),this.firestore,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.pa.path.N()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Pf("DocumentReference.collection",arguments,1),Df("DocumentReference.collection","non-empty string",1,t),!t)throw new Ka(Ya.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Za.$(t);return new Qd(this.pa.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Hf("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.pa.isEqual(t.pa)&&this.ba===t.ba},e.prototype.set=function(t,e){Rf("DocumentReference.set",arguments,1,2),e=Gd("DocumentReference.set",e);var n=Jd(this.ba,t,e),r=_p(this.firestore.vd,"DocumentReference.set",this.pa,n,null!==this.ba,e);return this.Pd.write(r.va(this.pa,el.Qe()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Zf?(Of("DocumentReference.update",arguments,2),n=wp(this.firestore.vd,"DocumentReference.update",this.pa,t,e,r)):(Pf("DocumentReference.update",arguments,1),n=bp(this.firestore.vd,"DocumentReference.update",this.pa,t)),this.Pd.write(n.va(this.pa,el.exists(!0)))},e.prototype.delete=function(){return Pf("DocumentReference.delete",arguments,0),this.Pd.write([new yl(this.pa,el.Qe())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Rf("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||kd(i[a])||(zf("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),Ff("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(kd(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else Df("DocumentReference.onSnapshot","function",a,i[a]),Lf("DocumentReference.onSnapshot","function",a+1,i[a+1]),Lf("DocumentReference.onSnapshot","function",a+2,i[a+2]);var l={next:function(t){i[a]&&i[a](r.qd(t))},error:i[a+1],complete:i[a+2]};return jd(this.Pd,this.pa,u,l)},e.prototype.get=function(t){var e=this;return Rf("DocumentReference.get",arguments,0,1),Kd("DocumentReference.get",t),t&&"cache"===t.source?this.firestore.Rd().rd(this.pa).then((function(t){return new Vd(e.firestore,e.pa,t,!0,t instanceof wl&&t.Ge,e.ba)})):function(t,e,n){var r=new Jl,i=jd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i();var o=t.docs.has(e);!o&&t.fromCache?r.reject(new Ka(Ya.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&t.fromCache&&n&&"server"===n.source?r.reject(new Ka(Ya.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(this.Pd,this.pa,t).then((function(t){return e.qd(t)}))},e.prototype.withConverter=function(t){return new e(this.pa,this.firestore,t)},e.prototype.qd=function(t){var e=t.docs.get(this.pa);return new Vd(this.firestore,this.pa,e,t.fromCache,t.hasPendingWrites,this.ba)},e}(pp);function jd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Nd({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(Cl.hn(e.path),o,n);return function(){o.ad(),t.Rc(s)}}var Ud=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Vd=function(){function t(t,e,n,r,i,o){this.xd=t,this.pa=e,this.Ud=n,this.Qd=r,this.Wd=i,this.ba=o}return t.prototype.data=function(t){var e=this;if(Rf("DocumentSnapshot.data",arguments,0,1),t=Yd("DocumentSnapshot.data",t),this.Ud){if(this.ba){var n=new qd(this.xd,this.pa,this.Ud,this.Qd,this.Wd,null);return this.ba.fromFirestore(n,t)}return new Ad(this.xd.ya,this.xd.kd(),t.serverTimestamps||"none",(function(t){return new Fd(t,e.xd,null)}))._d(this.Ud.tn())}},t.prototype.get=function(t,e){var n=this;if(Rf("DocumentSnapshot.get",arguments,1,2),e=Yd("DocumentSnapshot.get",e),this.Ud){var r=this.Ud.data().field(xp("DocumentSnapshot.get",t,this.pa));if(null!==r)return new Ad(this.xd.ya,this.xd.kd(),e.serverTimestamps||"none",(function(t){return new Fd(t,n.xd,n.ba)}))._d(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Fd(this.pa,this.xd,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ud},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Ud(this.Wd,this.Qd)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Hf("isEqual","DocumentSnapshot",1,e);return this.xd===e.xd&&this.Qd===e.Qd&&this.pa.isEqual(e.pa)&&(null===this.Ud?null===e.Ud:this.Ud.isEqual(e.Ud))&&this.ba===e.ba},t}(),qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Vd);function Bd(t){if(t.mn()&&0===t.en.length)throw new Ka(Ya.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,n.vd,e)||this).jd=e,i.firestore=n,i.ba=r,i}return o(e,t),e.prototype.where=function(t,n,r){Pf("Query.where",arguments,3),Wf("Query.where",3,r);var i=Uf("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=xp("Query.where",t),s=this.Kd(o,i,r);return new e(this.jd.cn(s),this.firestore,this.ba)},e.prototype.orderBy=function(t,n){var r;if(Rf("Query.orderBy",arguments,1,2),Lf("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new Ka(Ya.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=xp("Query.orderBy",t),o=this.Yd(i,r);return new e(this.jd.ln(o),this.firestore,this.ba)},e.prototype.limit=function(t){return Pf("Query.limit",arguments,1),Df("Query.limit","number",1,t),Qf("Query.limit",1,t),new e(this.jd._n(t),this.firestore,this.ba)},e.prototype.limitToLast=function(t){return Pf("Query.limitToLast",arguments,1),Df("Query.limitToLast","number",1,t),Qf("Query.limitToLast",1,t),new e(this.jd.fn(t),this.firestore,this.ba)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Of("Query.startAt",arguments,1);var i=this.ew("Query.startAt",t,n,!0);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Of("Query.startAfter",arguments,1);var i=this.ew("Query.startAfter",t,n,!1);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Of("Query.endBefore",arguments,1);var i=this.ew("Query.endBefore",t,n,!0);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Of("Query.endAt",arguments,1);var i=this.ew("Query.endAt",t,n,!1);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Hf("isEqual","Query",1,t);return this.firestore===t.firestore&&Sl(this.jd,t.jd)&&this.ba===t.ba},e.prototype.withConverter=function(t){return new e(this.jd,this.firestore,t)},e.prototype.ew=function(t,e,n,r){if(Wf(t,1,e),e instanceof Vd)return Pf(t,f([e],n),1),this.Xd(t,e.Ud,r);var i=[e].concat(n);return this.Zd(t,i,r)},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Rf("Query.onSnapshot",arguments,1,4);var s={},a=0;if("object"!=typeof i[a]||kd(i[a])||(zf("Query.onSnapshot",s=i[a],["includeMetadataChanges"]),Ff("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++),kd(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else Df("Query.onSnapshot","function",a,i[a]),Lf("Query.onSnapshot","function",a+1,i[a+1]),Lf("Query.onSnapshot","function",a+2,i[a+2]);var c={next:function(t){i[a]&&i[a](new Hd(r.firestore,r.jd,t,r.ba))},error:i[a+1],complete:i[a+2]};return Bd(this.jd),zd(this.firestore.Rd(),this.jd,s,c)},e.prototype.get=function(t){var e=this;Rf("Query.get",arguments,0,1),Kd("Query.get",t),Bd(this.jd);var n=this.firestore.Rd();return(t&&"cache"===t.source?n.od(this.jd):function(t,e,n){var r=new Jl,i=zd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i(),t.fromCache&&n&&"server"===n.source?r.reject(new Ka(Ya.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(n,this.jd,t)).then((function(t){return new Hd(e.firestore,e.jd,t,e.ba)}))},e}(function(){function t(t,e,n){this.ya=t,this.vd=e,this.jd=n}return t.prototype.Kd=function(t,e,n){var r;if(t.O()){if("array-contains"===e||"array-contains-any"===e)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Gd(n,e);for(var i=[],o=0,s=n;o<s.length;o++){var a=s[o];i.push(this.zd(a))}r={arrayValue:{values:i}}}else r=this.zd(n)}else"in"!==e&&"array-contains-any"!==e||this.Gd(n,e),r=Ep(this.vd,"Query.where",n,"in"===e);var u=Al.create(t,e,r);return this.Hd(u),u},t.prototype.Yd=function(t,e){if(null!==this.jd.startAt)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.jd.endAt)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new Vl(t,e);return this.Jd(n),n},t.prototype.Xd=function(t,e,n){if(!e)throw new Ka(Ya.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.jd.orderBy;i<o.length;i++){var s=o[i];if(s.field.O())r.push(rc(this.ya,e.key));else{var a=e.field(s.field);if(Hu(a))throw new Ka(Ya.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.N();throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Ml(r,n)},t.prototype.Zd=function(t,e,n){var r=this.jd.en;if(e.length>r.length)throw new Ka(Ya.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.O()){if("string"!=typeof s)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.jd.Vn()&&-1!==s.indexOf("/"))throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.jd.path.child(Za.$(s));if(!nu.W(a))throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new nu(a);i.push(rc(this.ya,u))}else{var c=Ep(this.vd,t,s);i.push(c)}}return new Ml(i,n)},t.prototype.zd=function(t){if("string"==typeof t){if(""===t)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.jd.Vn()&&-1!==t.indexOf("/"))throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.jd.path.child(Za.$(t));if(!nu.W(e))throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return rc(this.ya,new nu(e))}if(t instanceof pp)return rc(this.ya,t.pa);throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Bf(t)+".")},t.prototype.Gd=function(t,e){if(!Array.isArray(t)||0===t.length)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Hd=function(t){if(t instanceof Al){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.An()){var o=this.jd.an();if(null!==o&&!o.isEqual(t.field))throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.jd.un();null!==s&&this.tw(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.jd.Rn(n)),null===a&&r&&(a=this.jd.Rn(e)),null!==a)throw a===t.op?new Ka(Ya.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new Ka(Ya.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.Jd=function(t){if(null===this.jd.un()){var e=this.jd.an();null!==e&&this.tw(e,t.field)}},t.prototype.tw=function(t,e){if(!e.isEqual(t))throw new Ka(Ya.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}());function zd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Nd({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(e,o,n);return function(){o.ad(),t.Rc(s)}}var Hd=function(){function t(t,e,n,r){this.xd=t,this.nw=e,this.sw=n,this.ba=r,this.iw=null,this.rw=null,this.metadata=new Ud(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.sw.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.sw.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;Rf("QuerySnapshot.forEach",arguments,1,2),Df("QuerySnapshot.forEach","function",1,t),this.sw.docs.forEach((function(r){t.call(e,n.ow(r,n.metadata.fromCache,n.sw.Lt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Wd(this.nw,this.xd,this.ba)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(zf("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Ff("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.sw.qt)throw new Ka(Ya.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.iw&&this.rw===e||(this.iw=function(t,e,n){if(t.Ot._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Lt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Ot;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Lt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:Xd(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.sw,e,this.ow.bind(this)),this.rw=e),this.iw},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Hf("isEqual","QuerySnapshot",1,e);return this.xd===e.xd&&Sl(this.nw,e.nw)&&this.sw.isEqual(e.sw)&&this.ba===e.ba},t.prototype.ow=function(t,e,n){return new qd(this.xd,t.key,t,e,n,this.ba)},t}(),Qd=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Cl.hn(e),n,r)||this).hw=e,e.length%2!=1)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.N()+" has "+e.length);return i}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.jd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.jd.path.p();return t._()?null:new Fd(new nu(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.jd.path.N()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){Rf("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=ja.t()),Df("CollectionReference.doc","non-empty string",1,t);var e=Za.$(t);return Fd.$d(this.jd.path.child(e),this.firestore,this.ba)},e.prototype.add=function(t){Pf("CollectionReference.add",arguments,1),Df("CollectionReference.add","object",1,this.ba?this.ba.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.hw,this.firestore,t)},e}(Wd);function Gd(t,e){if(void 0===e)return{merge:!1};if(zf(t,e,["merge","mergeFields"]),Ff(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Bf(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new Ka(Ya.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Bf(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof Zf}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new Ka(Ya.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Yd(t,e){return void 0===e?{}:(zf(t,e,["serverTimestamps"]),jf(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Kd(t,e){Lf(t,"object",1,e),e&&(zf(t,e,["source"]),jf(t,0,"source",e.source,["default","server","cache"]))}function $d(t,e,n){if(e instanceof pp){if(e.firestore!==n)throw new Ka(Ya.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Hf(t,"DocumentReference",1,e)}function Xd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Da()}}function Jd(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Zd={Firestore:Rd,GeoPoint:lp,Timestamp:$a,Blob:Xf,Transaction:Ld,WriteBatch:Md,DocumentReference:Fd,DocumentSnapshot:Vd,Query:Wd,QueryDocumentSnapshot:qd,QuerySnapshot:Hd,CollectionReference:Qd,FieldPath:Zf,FieldValue:up,setLogLevel:Rd.setLogLevel,CACHE_SIZE_UNLIMITED:Pd};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){if(t instanceof Array){var e=[];return t.forEach((function(t){e.push(t)})),e.map((function(t){return ty(t)}))}if("object"==typeof t&&t!=={}){var n=s({},t);return Object.keys(n).forEach((function(t){n[t]=ty(n[t])})),n}return t}!function(t){!function(t,e){t.INTERNAL.registerComponent(new Y("firestore",(function(t){return function(t,e){return new Rd(t,e,new Id)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Zd)))}(t),t.registerVersion("@firebase/firestore","1.16.0")}(_t);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
_t.registerVersion("firebase","7.16.0","app");var ey=function(){function t(t,e,n){this.label=t,this.action=e,this.args=void 0,this.metadata={},this.artifacts={extra:[]},this.eventType=void 0,this.complex=!1,this.prov=n}return t.prototype.addLabel=function(t){return this.label=t,this},t.prototype.addAction=function(t){return this.action=t,this},t.prototype.addArgs=function(t){return this.args=t,this},t.prototype.addMetadata=function(t){return this.metadata=t,this},t.prototype.addArtifacts=function(t){return this.artifacts=t,this},t.prototype.addExtra=function(t){return this.artifacts.extra.push({time:Date.now(),e:t}),this},t.prototype.addEventType=function(t){return this.eventType=t,this},t.prototype.alwaysStoreState=function(t){return this.complex=t,this},t.prototype.isEphemeral=function(t){return this.ephemeral=t,this},t.prototype.applyAction=function(){this.prov.applyAction(this.label,this.action,this.args,this.metadata,this.artifacts,this.eventType,this.complex,this.ephemeral)},t}();n(2).applyChange;function ny(t){return"parent"in t&&"state"in t}function ry(t){return"parent"in t}function iy(){var t=(new Date).getTime();return t+=(new Date).valueOf(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}function oy(){return(new Date).getTime()}var sy=n(2).diff;function ay(t,e){return sy(t,e)}var uy=n(2).applyChange;function cy(t,e){var n=ty(t),r=t.nodes[e];if(!r)throw new Error("No such node exists");return n.current=r.id,n}function ly(){var t={},e={};return{addGlobalObserver:function(e){t.GLOBAL||(t.GLOBAL=[]),t.GLOBAL.push(e)},addObserver:function(e,n){var r=e.join("|");t[r]||(t[r]=[]),t[r].push(n)},addArtifactObserver:function(t){e.ARTIFACT||(e.ARTIFACT=[]),e.ARTIFACT.push(t)},callEvents:function(n,r,i){if(ry(i)&&function(t){if(e.ARTIFACT&&e.ARTIFACT.length>0&&ry(t)&&t.artifacts.extra){var n=t.artifacts.extra||[];e.ARTIFACT.forEach((function(t){return t(n)}))}}(i),0!==n.length){!function(e){t.GLOBAL&&t.GLOBAL.length>0&&t.GLOBAL.forEach((function(t){return t(e)}))}(r);var o=[];n.forEach((function(e){var n=e.path,i=[],s=n.join("|");o.includes(s)||(o.push(s),n.forEach((function(t){0===i.length?i.push(t):i.push([i.reverse()[0],t].join("|"))})),i.reverse().forEach((function(e){t[e]&&t[e].forEach((function(t){return t(r)}))})))}))}}}}var hy=n(2).applyChange,fy=n(9).decompressFromEncodedURIComponent,py=n(9).compressToEncodedURIComponent;function dy(t,e,n,r){void 0===e&&(e=!0),void 0===n&&(n=!1);var i,o,a,u,c,l=function(t){var e,n={id:iy(),label:"Root",metadata:{createdOn:oy(),type:"Root"},children:[],state:t,getState:function(){return t},ephemeral:!1,bookmarked:!1};return{nodes:(e={},e[n.id]=n,e),root:n.id,current:n.id}}(t),h=ty(t),p=ly(),d=void 0;function y(t){var e=l.nodes[l.current].getState(),n=ay(t,e);p.callEvents(n||[],e,l.nodes[l.current])}function v(t,e,n){l=function(t,e,n){var r=ty(t),i=r.current,o=(ty(t.nodes[i].getState()),t.nodes[i]),s=void 0,a="",u=!0;ry(o)?ny(o)?(s=o.getState(),a=o.id):(s=t.nodes[o.lastStateNode].getState(),a=o.lastStateNode):(u=!1,s=o.getState(),a=o.id);var c=n,l=t.current,h=ay(s,c);void 0===h&&(h=[]),u&&Object.keys(s).length/2<h.length&&(u=!1);var f=u?function(t,e,n,i){return{id:iy(),label:"Import Node",metadata:{createdOn:oy()},artifacts:{diffs:n,extra:[]},parent:t,children:[],lastStateNode:e,diffs:n,getState:function(){var t=ty(r.nodes[e].getState()),i=n;return 0===i.length||i.forEach((function(e){uy(t,null,e)})),t},ephemeral:!1,bookmarked:!1}}(l,a,h):function(t,e,n,r){return{id:iy(),label:"Import Node",metadata:{createdOn:oy()},artifacts:{diffs:n,extra:[]},parent:t,children:[],state:e,getState:function(){return e},ephemeral:!1,bookmarked:!1}}(l,c,h);return r.nodes[f.id]=f,r.nodes[i].children.push(f.id),r.current=f.id,r}(l,0,t),void 0!==e&&(l.nodes[l.current].label=e),void 0!==n&&(l.nodes[l.current].metadata=n)}function g(t){if(e){var n=new URL(window.location.href),r=new URLSearchParams(n.search);r.delete("provState");r.set("provState",t),window.history.replaceState({},"",n.pathname+"?"+r)}}function m(t){var e={},n=l.nodes[l.current].getState();t?Object.keys(n).forEach((function(t){var r,i=h[t],o=n[t];JSON.stringify(i)!==JSON.stringify(o)&&(e=s(s({},e),((r={})[t]=n[t],r)))})):e=s({},n);var r=e;return""+py(JSON.stringify(r))}return n&&r&&(u=r,c=0===_t.apps.length?_t.initializeApp(u):_t.app(),d={config:u,app:c,db:_t.database(c)},o=null==d?void 0:d.db,a=[],i=function(t){for(var e=""+t.root,n=[],r=0,i=Object.keys(t.nodes);r<i.length;r++){var s=i[r];a.includes(s)||(n.push(s),a.push(s))}n.forEach((function(n){var r=JSON.parse(JSON.stringify(t.nodes[n]));o.ref(e+"/nodes/"+n).set(r).then((function(){Date.now(),t.current})).catch((function(t){throw console.log(t),new Error("Something went wrong while logging.")}))}))}),{graph:function(){return ty(l)},current:function(){return ty(l.nodes[l.current])},root:function(){return ty(l.nodes[l.root])},addAction:function(t,e){return new ey(t,e,this)},applyAction:function(t,e,r,o,a,u,c,h){void 0===o&&(o={}),void 0===c&&(c=!1),void 0===h&&(h=!1);var p=ty(l.nodes[l.current].getState());return u&&(o.type=u),l=function(t,e,n,r,i,o,a,u){void 0===u&&(u={});var c=ty(t),l=c.current,h=ty(t.nodes[l].getState()),p=t.nodes[l],d=void 0,y="",v=!0;ry(p)?ny(p)?(d=p.getState(),y=p.id):(d=t.nodes[p.lastStateNode].getState(),y=p.lastStateNode):(v=!1,d=p.getState(),y=p.id);var g=o?n.apply(void 0,f([h],o)):n(h),m=t.current,_=ay(d,g);void 0===_&&(_=[]),v&&Object.keys(d).length/2<_.length&&(v=!1);var b=v&&!r?function(t,n,r,i){return{id:iy(),label:e,metadata:s({createdOn:oy()},a),artifacts:s({diffs:r,extra:[]},u),parent:t,children:[],lastStateNode:n,diffs:r,getState:function(){var t=ty(c.nodes[n].getState()),e=r;return 0===e.length||e.forEach((function(e){uy(t,null,e)})),t},ephemeral:i,bookmarked:!1}}(m,y,_,i):function(t,n,r,i){return{id:iy(),label:e,metadata:s({createdOn:oy()},a),artifacts:s({diffs:r,extra:[]},u),parent:t,children:[],state:n,getState:function(){return n},ephemeral:i,bookmarked:!1}}(m,g,_,i);return c.nodes[b.id]=b,c.nodes[l].children.push(b.id),c.current=b.id,c}(l,t,e,c,h,r,o,a),y(p),g(m(!1)),n&&i(l),l.nodes[l.current].getState()},goToNode:function(t){var e=ty(l.nodes[l.current].getState());l=cy(l,t),y(e),g(m(!1))},addExtraToNodeArtifact:function(t,e){l=function(t,e,n){var r=ty(t),i=r.nodes[e];if(!ry(i))throw new Error("Cannot add artifacts to Root Node");return i.artifacts.extra.push({time:oy(),e:n}),r}(l,t,e),p.callEvents([],l.nodes[t].getState(),l.nodes[t])},addAnnotationToNode:function(t,e){l=function(t,e,n){var r=ty(t),i=r.nodes[e];if(!ry(i))throw new Error("Cannot add annotation to Root Node");return i.artifacts.annotation=n,r}(l,t,e),p.callEvents([],l.nodes[t].getState(),l.nodes[t])},getExtraFromArtifact:function(t){return function(t,e){var n=t.nodes[e];if(ry(n))return n.artifacts.extra;throw new Error("Root does not have artifacts")}(l,t)},goBackOneStep:function(){var t=ty(l.nodes[l.current].getState()),e=l.nodes[l.current];if(!ry(e))throw new Error("Already at root");l=cy(l,e.parent),y(t),g(m(!1))},goBackNSteps:function(t){for(var e=ty(l.nodes[l.current].getState()),n=t,r=ty(l);t>0;){var i=r.nodes[r.current];if(!ry(i))throw new Error("Cannot go back "+n+" steps. Reached root after "+(n-t)+" steps");r=cy(l,i.parent),t--}l=r,y(e),g(m(!1))},goBackToNonEphemeral:function(){for(var t=ty(l.nodes[l.current].getState()),e=ty(l),n=e.nodes[e.current];;){if(!ry(n)){e=cy(e,e.root);break}if(!(e=cy(l,n.parent)).nodes[e.current].ephemeral)break;n=e.nodes[e.current]}l=e,y(t),g(m(!1))},goForwardToNonEphemeral:function(){for(var t=ty(l.nodes[l.current].getState()),e=ty(l),n=e.nodes[e.current];;){if(!(n.children.length>0))throw new Error("Already at the latest node in this branch or no non ephemeral nodes later");if(!(e=cy(e,n.children.reverse()[0])).nodes[e.current].ephemeral)break;n=e.nodes[e.current]}l=e,y(t),g(m(!1))},goForwardOneStep:function(){var t=ty(l.nodes[l.current].getState()),e=l.nodes[l.current];if(!(e.children.length>0))throw new Error("Already at the latest node in this branch");l=cy(l,e.children.reverse()[0]),y(t),g(m(!1))},reset:function(){var t=ty(l.nodes[l.current].getState());l=cy(l,l.root),y(t),g(m(!1))},done:function(){if(e){var t=ty(l.nodes[l.current].getState());!function(){if(!window||!window.location||!window.location.href)throw new Error("Please use in a browser environment, or set loadFromUrl parameter in initProvenance to false");var t=new URL(window.location.href),e=new URLSearchParams(t.search);if(null!==e.get("provState")){var n=e.get("provState");v(JSON.parse(fy(n)))}}(),y(t)}},addObserver:function(t,e){var n=l.nodes[l.current].getState();t.forEach((function(e){if(!Object.keys(n).includes(e))throw new Error("Path "+t.join(".")+" does not exist");n=n[e]})),p.addObserver(t,e)},addGlobalObserver:function(t){p.addGlobalObserver(t)},addArtifactObserver:function(t){p.addArtifactObserver(t)},exportState:function(t){return void 0===t&&(t=!1),m(t)},importState:function(t){var e=ty(l.nodes[l.current].getState()),n=JSON.parse(fy(t.replace("||","")));v(s(s({},l.nodes[l.current].getState()),n)),y(e)},importLinearStates:function(t,e,n){for(var r=0;r<t.length;r++){var i=ty(l.nodes[l.current].getState());void 0!==e&&void 0!==n?v(t[r],e[r],n[r]):v(t[r]),y(i)}},exportProvenanceGraph:function(){return JSON.stringify(l)},getDiffFromNode:function(t){var e=l.nodes[t];if(ry(e)){var n=ay(l.nodes[e.parent].getState(),e.getState());return void 0===n?[]:n}return console.log("Cannot get diff from root node"),[]},setBookmark:function(t,e){l.nodes[t].bookmarked=e},getBookmark:function(t){return l.nodes[t].bookmarked},importProvenanceGraph:function(t){var e=ty(l.nodes[l.current].getState());l=JSON.parse(t);var n=function(t){var e=l.nodes[t];if("diffs"in e){var n=ty(l.nodes[e.lastStateNode].state),r=e.diffs;return 0===r.length||r.forEach((function(t){hy(n,null,t)})),{value:n}}var i=ty(e.state);e.getState=function(){return i}};for(var r in l.nodes){var i=n(r);if("object"==typeof i)return i.value}y(e)}}}}).call(this,n(18),n(19))},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return bk}));var i=n(0),o=n.n(i),s=n(1),a=n.n(s),u=n(4),c=n.n(u),l=function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function h(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function f(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function y(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var v=function(){return(v=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function g(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function m(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function _(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function w(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function E(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T=!1,C="${JSCORE_VERSION}",S=function(t,e){if(!t)throw I(e)},I=function(t){return new Error("Firebase Database ("+C+") INTERNAL ASSERT FAILED: "+t)},x=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},N={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(x(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},k=function(t){try{return N.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function A(t){return P(void 0,t)}function P(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=P(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function D(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(R())}function L(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}function M(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function F(){return!0===T}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,U.prototype.create),i}return y(e,t),e}(Error),U=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?V(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new j(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function V(t,e){return t.replace(q,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var q=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t){return JSON.parse(t)}function W(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=B(k(o[0])||""),n=B(k(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function H(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Q(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function G(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Y(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var K=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782);i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function $(t,e){var n=new X(t,e);return n.subscribe.bind(n)}var X=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function J(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tt(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function et(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(tt(t,e,r)+"must be a valid function.")}function nt(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(tt(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},it=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),ot=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new O;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=v({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var r=_(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=b(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return g(this,void 0,void 0,(function(){var t;return m(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();var st,at=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ot(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ut(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,lt=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(ct||(ct={}));var ht,ft={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},pt=ct.INFO,dt=((st={})[ct.DEBUG]="log",st[ct.VERBOSE]="log",st[ct.INFO]="info",st[ct.WARN]="warn",st[ct.ERROR]="error",st),yt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=dt[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,ut(["["+i+"]  "+t.name+":"],n))}},vt=function(){function t(t){this.name=t,this._logLevel=pt,this._logHandler=yt,this._userLogHandler=null,lt.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ct))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ft[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.DEBUG],t)),this._logHandler.apply(this,ut([this,ct.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.VERBOSE],t)),this._logHandler.apply(this,ut([this,ct.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.INFO],t)),this._logHandler.apply(this,ut([this,ct.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.WARN],t)),this._logHandler.apply(this,ut([this,ct.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,ut([this,ct.ERROR],t)),this._logHandler.apply(this,ut([this,ct.ERROR],t))},t}();function gt(t){lt.forEach((function(e){e.setLogLevel(t)}))}var mt,_t=((ht={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ht["bad-app-name"]="Illegal App name: '{$appName}",ht["duplicate-app"]="Firebase App named '{$appName}' already exists",ht["app-deleted"]="Firebase App named '{$appName}' already deleted",ht["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ht["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ht),bt=new U("app","Firebase",_t),wt=((mt={})["@firebase/app"]="fire-core",mt["@firebase/analytics"]="fire-analytics",mt["@firebase/auth"]="fire-auth",mt["@firebase/database"]="fire-rtdb",mt["@firebase/functions"]="fire-fn",mt["@firebase/installations"]="fire-iid",mt["@firebase/messaging"]="fire-fcm",mt["@firebase/performance"]="fire-perf",mt["@firebase/remote-config"]="fire-rc",mt["@firebase/storage"]="fire-gcs",mt["@firebase/firestore"]="fire-fst",mt["fire-js"]="fire-js",mt["firebase-wrapper"]="fire-js-all",mt),Et=new vt("@firebase/app"),Tt=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=A(t),this.container=new at(e.name),this._addComponent(new it("app",(function(){return o}),"PUBLIC"));try{for(var s=_(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Et.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw bt.create("app-deleted",{appName:this.name_})},t}();Tt.prototype.name&&Tt.prototype.options||Tt.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ct(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw bt.create("bad-app-name",{appName:String(s)});if(H(e,s))throw bt.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=wt[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Et.warn(u.join(" "))}o(new it(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:gt,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw bt.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ft[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ct[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=lt;r<i.length;r++){n(i[r])}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"7.16.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!H(e,t=t||"[DEFAULT]"))throw bt.create("no-app",{appName:t});return e[t]}function o(o){var s,a,u=o.name;if(n.has(u))return Et.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===o.type?r[u]:null;if(n.set(u,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[u])throw bt.create("invalid-app-argument",{appName:u});return t[u]()};void 0!==o.serviceProps&&P(c,o.serviceProps),r[u]=c,t.prototype[u]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,u);return n.apply(this,o.multipleInstances?t:[])}}try{for(var l=_(Object.keys(e)),h=l.next();!h.done;h=l.next()){var f=h.value;e[f]._addComponent(o)}}catch(t){s={error:t}}finally{try{h&&!h.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[u]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St=function t(){var e=Ct(Tt);return e.INTERNAL=v(v({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){P(e,t)},createSubscribe:$,ErrorFactory:U,deepExtend:P}),e}(),It=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Et.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var xt=self.firebase.SDK_VERSION;xt&&xt.indexOf("LITE")>=0&&Et.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Nt=St.initializeApp;St.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L()&&Et.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Nt.apply(void 0,t)};var kt=St;!function(t,e){t.INTERNAL.registerComponent(new it("platform-logger",(function(t){return new It(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.8",e),t.registerVersion("fire-js","")}(kt);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var At=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),W(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:B(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),Pt=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return H(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),Ot=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new At(e)}}catch(t){}return new Pt},Rt=Ot("localStorage"),Dt=Ot("sessionStorage"),Lt=new vt("@firebase/database"),Mt=function(){var t=1;return function(){return t++}}(),Ft=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,S(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new K;n.update(e);var r=n.digest();return N.encodeByteArray(r)},jt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=jt.apply(null,i):n+="object"==typeof i?W(i):i,n+=" "}return n},Ut=null,Vt=!0,qt=function(t,e){S(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Lt.logLevel=ct.VERBOSE,Ut=Lt.log.bind(Lt),e&&Dt.set("logging_enabled",!0)):"function"==typeof t?Ut=t:(Ut=null,Dt.remove("logging_enabled"))},Bt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===Vt&&(Vt=!1,null===Ut&&!0===Dt.get("logging_enabled")&&qt(!0)),Ut){var n=jt.apply(null,t);Ut(n)}},Wt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Bt.apply(void 0,w([t],e))}},zt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+jt.apply(void 0,w(t));Lt.error(n)},Ht=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+jt.apply(void 0,w(t));throw Lt.error(n),new Error(n)},Qt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+jt.apply(void 0,w(t));Lt.warn(n)},Gt=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Yt="[MIN_NAME]",Kt="[MAX_NAME]",$t=function(t,e){if(t===e)return 0;if(t===Yt||e===Kt)return-1;if(e===Yt||t===Kt)return 1;var n=ie(t),r=ie(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},Xt=function(t,e){return t===e?0:t<e?-1:1},Jt=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+W(e))},Zt=function(t){if("object"!=typeof t||null===t)return W(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=W(e[i]),r+=":",r+=Zt(t[e[i]]);return r+="}"},te=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var ne=function(t){S(!Gt(t),"Invalid JSON number");var e,n,r,i,o;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},re=new RegExp("^-?(0*)\\d{1,10}$"),ie=function(t){if(re.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},oe=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw Qt("Exception was thrown by user callback.",e),t}),Math.floor(0))}},se=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},ae=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=$t(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),ue=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=rt(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=rt(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=rt(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),ce=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=Rt.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Rt.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(S("string"==typeof t,"typeof type must == string"),S("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return ee(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}();var le,he,fe,pe,de,ye=function(t){var e=ve(t),n=e.namespace;"firebase.com"===e.domain&&Ht(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||Ht("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new ce(e.host,e.secure,n,r,"",n!==e.subdomain),path:new ae(e.pathString)}},ve=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,h)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=_(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Qt("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));(c=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},ge=/[\[\].#$\/\u0000-\u001F\u007F]/,me=/[\[\].#$\u0000-\u001F\u007F]/,_e=function(t){return"string"==typeof t&&0!==t.length&&!ge.test(t)},be=function(t){return"string"==typeof t&&0!==t.length&&!me.test(t)},we=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Gt(t)||t&&"object"==typeof t&&H(t,".sv")},Ee=function(t,e,n,r,i){i&&void 0===n||Te(tt(t,e,i),n,r)},Te=function(t,e,n){var r=n instanceof ae?new ue(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(Gt(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&rt(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(ee(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!_e(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),Te(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Ce=function(t,e,n,r,i){if(!i||void 0!==n){var o=tt(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];ee(n,(function(t,e){var n=new ae(t);if(Te(o,e,r.child(n)),".priority"===n.getBack()&&!we(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_e(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(ae.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Se=function(t,e,n,r){if(!r||void 0!==n){if(Gt(n))throw new Error(tt(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!we(n))throw new Error(tt(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ie=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(tt(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},xe=function(t,e,n,r){if(!(r&&void 0===n||_e(n)))throw new Error(tt(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ne=function(t,e,n,r){if(!(r&&void 0===n||be(n)))throw new Error(tt(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ke=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ne(t,e,n,r)},Ae=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},Pe=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_e(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),be(t)}(r))throw new Error(tt(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Oe=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(tt(t,e,r)+"must be a boolean.")},Re=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Z("OnDisconnect.cancel",0,1,arguments.length),et("OnDisconnect.cancel",1,t,!0);var e=new O;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Z("OnDisconnect.remove",0,1,arguments.length),Ae("OnDisconnect.remove",this.path_),et("OnDisconnect.remove",1,t,!0);var e=new O;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Z("OnDisconnect.set",1,2,arguments.length),Ae("OnDisconnect.set",this.path_),Ee("OnDisconnect.set",1,t,this.path_,!1),et("OnDisconnect.set",2,e,!0);var n=new O;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Z("OnDisconnect.setWithPriority",2,3,arguments.length),Ae("OnDisconnect.setWithPriority",this.path_),Ee("OnDisconnect.setWithPriority",1,t,this.path_,!1),Se("OnDisconnect.setWithPriority",2,e,!1),et("OnDisconnect.setWithPriority",3,n,!0);var r=new O;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Z("OnDisconnect.update",1,2,arguments.length),Ae("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Qt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ce("OnDisconnect.update",1,t,this.path_,!1),et("OnDisconnect.update",2,e,!0);var i=new O;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),De=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Z("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Le=(le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=0,fe=[],function(t){var e,n=t===he;he=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);S(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===fe[e];e--)fe[e]=0;fe[e]++}else for(e=0;e<12;e++)fe[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=le.charAt(fe[e]);return S(20===i.length,"nextPushId: Length should be 20."),i}),Me=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Fe=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Me(Yt,t),r=new Me(Yt,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Me.MIN},t}(),je=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return pe},set:function(t){pe=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return $t(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw I("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Me.MIN},e.prototype.maxPost=function(){return new Me(Kt,pe)},e.prototype.makePost=function(t,e){return S("string"==typeof t,"KeyIndex indexValue must always be a string."),new Me(t,pe)},e.prototype.toString=function(){return".key"},e}(Fe),Ue=new je;var Ve,qe,Be,We=function(t){return"number"==typeof t?"number:"+ne(t):"string:"+t},ze=function(t){if(t.isLeafNode()){var e=t.val();S("string"==typeof e||"number"==typeof e||"object"==typeof e&&H(e,".sv"),"Priority must be a string or number.")}else S(t===de||t.isEmpty(),"priority of unexpected type.");S(t===de||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},He=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,S(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ze(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ve},set:function(t){Ve=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(S(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+We(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?ne(this.value_):this.value_,this.lazyHash_=Ft(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(S(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return S(i>=0,"Unknown leaf type: "+n),S(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Qe,Ge,Ye=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?$t(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Me.MIN},e.prototype.maxPost=function(){return new Me(Kt,new He("[PRIORITY-POST]",Be))},e.prototype.makePost=function(t,e){var n=qe(t);return new Me(e,new He("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Fe)),Ke=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),$e=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Je.EMPTY_NODE,this.right=null!=o?o:Je.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Je.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Je.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Xe=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new $e(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Je=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,$e.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$e.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ke(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ke(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ke(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ke(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Xe,t}(),Ze=Math.log(2),tn=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ze,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),en=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new $e(s,o.node,$e.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new $e(s,o.node,$e.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new $e(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,$e.BLACK):(a(h,$e.BLACK),a(h,$e.RED))}return o}(new tn(t.length));return new Je(r||e,o)},nn={},rn=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return S(nn&&Ye,"ChildrenNode.ts has not been loaded"),Qe=Qe||new t({".priority":nn},{".priority":Ye})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Q(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Je?e:null},t.prototype.hasIndex=function(t){return H(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){S(e!==Ue,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(Me.Wrap),a=s.getNext();a;)o=o||e.isDefinedOn(a.node),i.push(a),a=s.getNext();r=o?en(i,e.getCompare()):nn;var u=e.toString(),c=v({},this.indexSet_);c[u]=e;var l=v({},this.indexes_);return l[u]=r,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Y(this.indexes_,(function(t,i){var o=Q(r.indexSet_,i);if(S(o,"Missing index implementation for "+i),t===nn){if(o.isDefinedOn(e.node)){for(var s=[],a=n.getIterator(Me.Wrap),u=a.getNext();u;)u.name!==e.name&&s.push(u),u=a.getNext();return s.push(e),en(s,o.getCompare())}return nn}var c=n.get(e.name),l=t;return c&&(l=l.remove(new Me(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Y(this.indexes_,(function(t){if(t===nn)return t;var r=n.get(e.name);return r?t.remove(new Me(e.name,r)):t})),this.indexSet_)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function on(t,e){return $t(t.name,e.name)}function sn(t,e){return $t(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ze(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Ge||(Ge=new t(new Je(sn),null,rn.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Ge},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Ge:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(S(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Me(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Ge:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;S(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ye,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+We(this.getPriority().val())+":"),this.forEachChild(Ye,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":Ft(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Me(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Me(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Me(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Me.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Me.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===un?-1:0},t.prototype.withIndex=function(e){if(e===Ue||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ue||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ye),r=e.getIterator(Ye),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ue?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),un=new(function(t){function e(){return t.call(this,new Je(sn),an.EMPTY_NODE,rn.Default)||this}return y(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return an.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(an));Object.defineProperties(Me,{MIN:{value:new Me(Yt,an.EMPTY_NODE)},MAX:{value:new Me(Kt,un)}}),je.__EMPTY_NODE=an.EMPTY_NODE,He.__childrenNodeConstructor=an,de=un,function(t){Be=t}(un);function cn(t,e){if(void 0===e&&(e=null),null===t)return an.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),S(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new He(t,cn(e));if(t instanceof Array){var n=an.EMPTY_NODE;return ee(t,(function(e,r){if(H(t,e)&&"."!==e.substring(0,1)){var i=cn(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(cn(e))}var r=[],i=!1;if(ee(t,(function(t,e){if("."!==t.substring(0,1)){var n=cn(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Me(t,n)))}})),0===r.length)return an.EMPTY_NODE;var o=en(r,on,(function(t){return t.name}),sn);if(i){var s=en(r,Ye.getCompare());return new an(o,cn(e),new rn({".priority":s},{".priority":Ye}))}return new an(o,cn(e),rn.Default)}!function(t){qe=t}(cn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ln,hn=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?$t(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Me.MIN},e.prototype.maxPost=function(){return Me.MAX},e.prototype.makePost=function(t,e){var n=cn(t);return new Me(e,n)},e.prototype.toString=function(){return".value"},e}(Fe)),fn=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,S(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return y(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?$t(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=cn(t),r=an.EMPTY_NODE.updateChild(this.indexPath_,n);return new Me(e,r)},e.prototype.maxPost=function(){var t=an.EMPTY_NODE.updateChild(this.indexPath_,un);return new Me(Kt,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Fe),pn=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Z("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Z("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Z("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Z("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Z("DataSnapshot.child",0,1,arguments.length),e=String(e),Ne("DataSnapshot.child",1,e,!1);var n=new ae(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ye)},t.prototype.hasChild=function(t){Z("DataSnapshot.hasChild",1,1,arguments.length),Ne("DataSnapshot.hasChild",1,t,!1);var e=new ae(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Z("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Z("DataSnapshot.forEach",1,1,arguments.length),et("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Ye))}))},t.prototype.hasChildren=function(){return Z("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Z("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Z("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),dn=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+W(this.snapshot.exportVal())},t}(),yn=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),vn=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new dn("value",this,new pn(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){S(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new yn(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),gn=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,H(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new yn(this,t,e):null},t.prototype.createEvent=function(t,e){S(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new dn(t.type,this,new pn(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){S(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),mn=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return S(ln,"Reference.ts has not been loaded"),ln},set:function(t){ln=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ue){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Yt)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Kt)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ye){if(null!=e&&!we(e)||null!=n&&!we(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(S(t.getIndex()instanceof fn||t.getIndex()===hn,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Z("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Z("Query.on",2,4,arguments.length),Ie("Query.on",1,e,!1),et("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new vn(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new gn(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Z("Query.off",0,3,arguments.length),Ie("Query.off",1,t,!0),et("Query.off",2,e,!0),nt("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new vn(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new gn(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;Z("Query.once",1,4,arguments.length),Ie("Query.once",1,e,!1),et("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new O;u.promise.catch((function(){}));var c=function(t){a&&(a=!1,o.off(e,c),n&&n.bind(s.context)(t),u.resolve(t))};return this.on(e,c,(function(t){o.off(e,c),s.cancel&&s.cancel.bind(s.context)(t),u.reject(t)})),u.promise},t.prototype.limitToFirst=function(e){if(Z("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Z("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Z("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Ne("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new ae(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new fn(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Z("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ue);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Z("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Ye);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Z("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(hn);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Z("Query.startAt",0,2,arguments.length),Ee("Query.startAt",1,e,this.path,!0),xe("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Z("Query.endAt",0,2,arguments.length),Ee("Query.endAt",1,e,this.path,!0),xe("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Z("Query.equalTo",1,2,arguments.length),Ee("Query.equalTo",1,t,this.path,!1),xe("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Z("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Z("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Zt(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Z("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,et(t,3,r.cancel,!0),r.context=n,nt(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(tt(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),_n=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),bn=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),wn=function(t,e,n){return t&&"object"==typeof t?(S(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?En(t[".sv"],e,n):"object"==typeof t[".sv"]?Tn(t[".sv"],e):void S(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},En=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:S(!1,"Unexpected server value: "+t)}},Tn=function(t,e,n){t.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&S(!1,"Unexpected increment value: "+r);var i=e.node();if(S(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},Cn=function(t,e,n,r){return In(e,new bn(n,t),r)},Sn=function(t,e,n){return In(t,new _n(e),n)};function In(t,e,n){var r,i=t.getPriority().val(),o=wn(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=wn(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new He(a,cn(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new He(o))),u.forEachChild(Ye,(function(t,i){var o=In(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xn,Nn=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ye,(function(t,e){n.remember(new ae(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();if(t=t.popFront(),this.children.has(r))this.children.get(r).forget(t)&&this.children.delete(r);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new ae(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(xn||(xn={}));var kn,An,Pn=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,S(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),On=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=xn.ACK_USER_WRITE,this.source=Pn.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ae(e));return new t(ae.Empty,n,this.revert)}return S(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),Rn=function(){function t(t,e){void 0===e&&(kn||(kn=new Je(Xt)),e=kn),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return ee(e,(function(t,e){n=n.set(new ae(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ae.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new ae(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r=e.getFront(),i=(this.children.get(r)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(ae.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ae.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ae.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(ae.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),Dn=function(){function t(t,e){this.source=t,this.path=e,this.type=xn.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,ae.Empty):new t(this.source,this.path.popFront())},t}(),Ln=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=xn.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,ae.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),Mn=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=xn.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new ae(e));return n.isEmpty()?null:n.value?new Ln(this.source,ae.Empty,n.value):new t(this.source,ae.Empty,n)}return S(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Fn=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),jn=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Fn(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Fn(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new Fn(an.EMPTY_NODE,!1,!1),new Fn(an.EMPTY_NODE,!1,!1)),t}(),Un=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),Vn=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){S(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Un.childRemovedChange(e,s)):S(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Un.childAddedChange(e,n)):o.trackChildChange(Un.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ye,(function(t,r){e.hasChild(t)||n.trackChildChange(Un.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Ye,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Un.childChangedChange(e,r,i))}else n.trackChildChange(Un.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?an.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),qn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;S(e===Un.CHILD_ADDED||e===Un.CHILD_CHANGED||e===Un.CHILD_REMOVED,"Only child changes supported for tracking"),S(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Un.CHILD_ADDED&&i===Un.CHILD_REMOVED)this.changeMap.set(n,Un.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Un.CHILD_REMOVED&&i===Un.CHILD_ADDED)this.changeMap.delete(n);else if(e===Un.CHILD_REMOVED&&i===Un.CHILD_CHANGED)this.changeMap.set(n,Un.childRemovedChange(n,r.oldSnap));else if(e===Un.CHILD_CHANGED&&i===Un.CHILD_ADDED)this.changeMap.set(n,Un.childAddedChange(n,t.snapshotNode));else{if(e!==Un.CHILD_CHANGED||i!==Un.CHILD_CHANGED)throw I("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Un.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Bn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Wn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Fn(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),zn=function(t,e){this.viewCache=t,this.changes=e},Hn=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){S(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),S(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,a=new qn;if(n.type===xn.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(e,u.path,u.snap,r,i,a):(S(u.source.fromServer,"Unknown source."),s=u.source.tagged||e.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(e,u.path,u.snap,r,i,s,a))}else if(n.type===xn.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(e,c.path,c.children,r,i,a):(S(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,c.path,c.children,r,i,s,a))}else if(n.type===xn.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,a):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,a)}else{if(n.type!==xn.LISTEN_COMPLETE)throw I("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,a)}var h=a.getChanges();return t.maybeAddValueEvent_(e,o,h),new zn(o,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Un.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(S(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof an?u:an.EMPTY_NODE,l=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){S(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var y=e.popFront(),v=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);v=null!=g?o.getNode().getImmediateChild(f).updateChild(y,g):o.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());s=null!=v?this.filter_.updateChild(o.getNode(),f,v,y,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Bn,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),y=new Wn(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,y,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Wn(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):an.EMPTY_NODE}if(f.equals(p))s=t;else{var y=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:Rn.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new ae(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new ae(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=Rn.Empty;return a.getNode().forEachChild(Ue,(function(t,e){u=u.set(new ae(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=Rn.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Bn,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Wn(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();S(l instanceof an,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=a.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(a,h,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(a,h,an.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ae.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},t}(),Qn=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===Un.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Un.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,Un.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Un.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Un.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Un.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Un.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw I("Should only compare child_ events.");var n=new Me(t.childName,t.snapshotNode),r=new Me(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Gn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Vn(n.getIndex()),i=n.getNodeFilter();this.processor_=new Hn(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(an.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(an.EMPTY_NODE,s.getNode(),null),c=new Fn(a,o.isFullyInitialized(),r.filtersNodes()),l=new Fn(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new jn(l,c),this.eventGenerator_=new Qn(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){S(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===xn.MERGE&&null!==t.source.queryId&&(S(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),S(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),S(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Ye,(function(t,e){n.push(Un.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(Un.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},t}(),Yn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return S(An,"Reference.ts has not been loaded"),An},set:function(t){S(!An,"__referenceConstructor has already been defined"),An=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return S(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=_(this.views.values()),c=u.next();!c.done;c=u.next()){s=c.value;a=a.concat(s.applyOperation(t,e,n))}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof an?(a=n.calcCompleteEventChildren(r),u=!1):(a=an.EMPTY_NODE,u=!1);var c=new jn(new Fn(a,u,!1),new Fn(r,i,!1));s=new Gn(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],c=this.hasCompleteView();if("default"===s)try{for(var l=_(this.views.entries()),h=l.next();!h.done;h=l.next()){var f=b(h.value,2),p=f[0],d=f[1];u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery()))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(d=this.views.get(s))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery())));return c&&!this.hasCompleteView()&&a.push(new t.__referenceConstructor(e.repo,e.path)),{removed:a,events:u}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=_(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=_(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=_(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Kn=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new Rn(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=ae.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new Rn(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return ee(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,Rn.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(ae.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Ye,(function(e,n){t.push(new Me(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Me(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new Rn(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(S(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(ae.Empty,this.writeTree_,t)},t.Empty=new t(new Rn(null)),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n=function(){function t(){this.visibleWrites_=Kn.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Xn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){S(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){S(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));S(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):ee(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(ae.Empty)){var s=t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);c=n||an.EMPTY_NODE;return s.apply(c)}return null}var a=this.visibleWrites_.getCompleteNode(e);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(ae.Empty)){var c=n||an.EMPTY_NODE;return u.apply(c)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=an.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Ye,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ye,(function(t,e){var r=i.childCompoundWrite(new ae(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){S(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(ae.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,ae.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Kn.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=ae.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=ae.relativePath(s,n),r=r.addWrite(ae.Empty,o.snap.getChild(a)));else{if(!o.children)throw I("WriteRecord should have .snap or .children");if(n.contains(s))a=ae.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=ae.relativePath(s,n)).isEmpty())r=r.addWrites(ae.Empty,o.children);else{var u=Q(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(ae.Empty,c)}}}}}return r},t}(),Xn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Jn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=Rn.Empty,this.pendingWriteTree_=new $n,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ln(Pn.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Rn.fromObject(e);return this.applyOperationToSyncPoints_(new Mn(Pn.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Rn.Empty;return null!=n.snap?r=r.set(ae.Empty,!0):ee(n.children,(function(t,e){r=r.set(new ae(t),e)})),this.applyOperationToSyncPoints_(new On(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ln(Pn.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=Rn.fromObject(e);return this.applyOperationToSyncPoints_(new Mn(Pn.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Dn(Pn.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=ae.relativePath(s,e),c=new Ln(Pn.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=ae.relativePath(s,e),c=Rn.fromObject(n),l=new Mn(Pn.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=ae.relativePath(o,e),u=new Dn(Pn.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=ae.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(ae.Empty)):(a=new Yn,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)?s=!0:(s=!1,i=an.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(ae.Empty);n&&(i=i.updateImmediateChild(t,n))})));var u=a.viewExistsForQuery(e);if(!u&&!e.getQueryParams().loadsAllData()){var c=t.makeQueryKey_(e);S(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(c,l),this.tagToQueryMap.set(l,c)}var h=this.pendingWriteTree_.childWrites(r),f=a.addEventRegistration(e,n,h,i,s);if(!u&&!o){var p=a.viewForQuery(e);f=f.concat(this.setupListener_(e,p))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var y=p[d],v=y.getQuery(),g=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=ae.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),ee(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)S(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),ee(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||an.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return S(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ae(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);S(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(ae.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(ae.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(ae.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(ae.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(ae.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Zn=function(){function t(){this.rootNode_=an.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),tr=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qt(t)},t}(),er=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),H(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return A(this.counters_)},t}(),nr=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new er),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),rr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=v({},t);return this.last_&&ee(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),ir=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new rr(t);var n=1e4+2e4*Math.random();se(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;ee(e,(function(e,i){i>0&&H(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),se(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),or=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new sr(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),sr=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();Ut&&Bt("event: "+e.toString()),oe(n)}}},t.prototype.getPath=function(){return this.path_},t}(),ar=function(){function t(t){this.allowedEvents_=t,this.listeners_={},S(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=w(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){S(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),ur=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return y(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return S("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ar),cr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||D()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return y(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return S("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ar),lr=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&oe((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),hr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Wt(t),this.stats_=nr.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new lr(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new fr((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=b(t,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=b(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=W(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=x(e),N.encodeByteArray(n,!0)),i=te(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},t.prototype.incrementIncomingBytes_=function(t){var e=W(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),fr=function(){function t(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Mt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(t){Bt("frame writing exception"),t.stack&&Bt(t.stack),Bt(t)}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Bt("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Bt("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),pr="";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dr=null;"undefined"!=typeof MozWebSocket?dr=MozWebSocket:"undefined"!=typeof WebSocket&&(dr=WebSocket);var yr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Wt(this.connId),this.stats_=nr.getCollection(n),this.connURL=t.connectionURL_(n,i,o)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rt.set("previous_websocket_failure",!0);try{if(F()){var i=T?"AdminNode":"Node",o={headers:{"User-Agent":"Firebase/5/"+pr+"/"+r.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},s=r.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(o.proxy={origin:a}),this.mySock=new dr(this.connURL,[],o)}else{o={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new dr(this.connURL,[],o)}}catch(t){this.log_("Error instantiating WebSocket.");var u=t.message||t.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==dr&&!t.forceDisallow_},t.previouslyFailed=function(){return Rt.isInMemoryStorage||!0===Rt.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){Rt.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=B(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(S(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=W(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=te(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),vr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[hr,yr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=yr&&yr.isAvailable(),o=i&&!yr.previouslyFailed();if(e.webSocketOnly&&(i||Qt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[yr];else{var s=this.transports_=[];try{for(var a=_(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var c=u.value;c&&c.isAvailable()&&s.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),gr=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Wt("c:"+this.id+":"),this.transportManager_=new vr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=se((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=Jt("t",t),n=Jt("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=Jt("t",t),n=Jt("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=Jt("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?zt("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zt("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Qt("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),se((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):se((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),mr=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),_r=function(t){function e(n,r,i,o,s,a,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.applicationId_=r,c.onDataUpdate_=i,c.onConnectStatus_=o,c.onServerInfoUpdate_=s,c.authTokenProvider_=a,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=Wt("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!F())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),ur.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&cr.getInstance().on("online",c.onOnline_,c),c}return y(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(W(i)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),S(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&H(t,"w")){var n=Q(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();Qt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=z(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=z(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),S(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+W(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):zt("Unrecognized action received from server: "+W(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(t){S(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(e){a?Bt("getToken() completed but was canceled"):(Bt("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new gr(i,o.repoInfo_,o.applicationId_,t,n,r,(function(t){Qt(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),s))})).then(null,(function(t){o.log_("Failed to get token: "+t),a||c()}))}},e.prototype.interrupt=function(t){Bt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){Bt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],G(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return Zt(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ae(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){Bt("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=_(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,_(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},e.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+pr.replace(/\./g,"-")]=1,D()?t["framework.cordova"]=1:M()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=cr.getInstance().currentlyOnline();return G(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(mr),br=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=Wt("p:rest:"),i.listens_={},i}return y(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(S(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=e.getListenId_(t,r),u={};this.listens_[a]=u;var c=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),Q(o.listens_,a)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var t=null;if(a.status>=200&&a.status<300){try{t=B(a.responseText)}catch(t){Qt("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Qt("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},e}(mr),wr=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new or,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Nn,this.persistentConnection_=null;var o=new tr(n,r);if(this.stats_=nr.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new br(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var s=n.options.databaseAuthVariableOverride;if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{W(s)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new _r(this.repoInfo_,n.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,s),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=nr.getOrCreateReporter(t,(function(){return new ir(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new Zn,this.infoSyncTree_=new Jn({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Jn({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new ae(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:this.serverTime()})},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new ae(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=Y(e,(function(t){return cn(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=cn(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=Y(e,(function(t){return cn(t)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=cn(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;ee(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new ae("/.info/"+t),r=cn(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=cn(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=Sn(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||Qt("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(ee(e,(function(e,n){i=!1,s[e]=Cn(t.child(e),cn(n),r.serverSyncTree_,o)})),i)Bt("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||Qt("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),ee(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Nn;this.onDisconnect_.forEachTree(ae.Empty,(function(r,i){var o=Cn(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(ae.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Nn,this.eventQueue_.raiseEventsForChangedPath(ae.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=cn(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=cn(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(G(e))return Bt("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&ee(e,(function(e,n){var i=cn(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new rr(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);ee(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),Bt.apply(void 0,w([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&oe((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Pr(this))},enumerable:!1,configurable:!0}),t}(),Er=function(){function t(e){this.indexedFilter_=new Vn(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Me(e,n))||(n=an.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=an.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(an.EMPTY_NODE);var i=this;return e.forEachChild(Ye,(function(t,e){i.matches(new Me(t,e))||(r=r.updateImmediateChild(t,an.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Tr=function(){function t(t){this.rangedFilter_=new Er(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Me(e,n))||(n=an.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=an.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=an.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(an.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){s=i.getNext();!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,an.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;S(a.numChildren()===this.limit_,"");var u=new Me(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var h=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Un.childChangedChange(e,n,h)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Un.childRemovedChange(e,h));var d=a.updateImmediateChild(e,an.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Un.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(Un.childRemovedChange(c.name,c.node)),i.trackChildChange(Un.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,an.EMPTY_NODE)):t},t}(),Cr=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ye}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yt},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kt},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Ye&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ye},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Vn(this.getIndex()):this.hasLimit()?new Tr(this):new Er(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Ye?e=n.PRIORITY_INDEX:this.index_===hn?e=n.VALUE_INDEX:this.index_===Ue?e=n.KEY_INDEX:(S(this.index_ instanceof fn,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=W(e),this.startSet_&&(r[n.START_AT]=W(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+W(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=W(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+W(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),Sr=function(t){function e(e,n){if(!(e instanceof wr))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,Cr.DEFAULT,!1)||this}return y(e,t),e.prototype.getKey=function(){return Z("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Z("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof ae||(null===this.path.getFront()?ke("Reference.child",1,t,!1):Ne("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Z("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Z("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Z("Reference.set",1,2,arguments.length),Ae("Reference.set",this.path),Ee("Reference.set",1,t,this.path,!1),et("Reference.set",2,e,!0);var n=new O;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Z("Reference.update",1,2,arguments.length),Ae("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Qt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ce("Reference.update",1,t,this.path,!1),et("Reference.update",2,e,!0);var i=new O;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Z("Reference.setWithPriority",2,3,arguments.length),Ae("Reference.setWithPriority",this.path),Ee("Reference.setWithPriority",1,t,this.path,!1),Se("Reference.setWithPriority",2,e,!1),et("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new O;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Z("Reference.remove",0,1,arguments.length),Ae("Reference.remove",this.path),et("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Z("Reference.transaction",1,3,arguments.length),Ae("Reference.transaction",this.path),et("Reference.transaction",1,t,!1),et("Reference.transaction",2,e,!0),Oe("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new O;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new De(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Z("Reference.setPriority",1,2,arguments.length),Ae("Reference.setPriority",this.path),Se("Reference.setPriority",1,t,!1),et("Reference.setPriority",2,e,!0);var n=new O;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Z("Reference.push",0,2,arguments.length),Ae("Reference.push",this.path),Ee("Reference.push",1,t,this.path,!0),et("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Le(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return Ae("Reference.onDisconnect",this.path),new Re(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(mn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.__referenceConstructor=Sr,Yn.__referenceConstructor=Sr;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ir,xr=function(){this.children={},this.childCount=0,this.value=null},Nr=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new xr),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof ae?e:new ae(e),r=this,i=n.getFront();null!==i;){r=new t(i,r,Q(r.node_.children,i)||new xr),i=(n=n.popFront()).getFront()}return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){S(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;ee(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new ae(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=H(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT"}(Ir||(Ir={})),wr.MAX_TRANSACTION_RETRIES_=25,wr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Nr},wr.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Sr(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:Mt(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new pn(s.currentInputSnapshot,new Sr(this,s.path),Ye);s.onComplete(null,!1,c)}}else{Te("transaction failed: Data returned ",u,s.path),s.status=Ir.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(s),l.setValue(h);var f=void 0;if("object"==typeof u&&null!==u&&H(u,".priority"))f=Q(u,".priority"),S(we(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||an.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=cn(u,f),y=Sn(d,a,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,y,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},wr.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||an.EMPTY_NODE},wr.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);S(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Ir.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},wr.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),a=0;a<e.length;a++){var u=e[a];S(u.status===Ir.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=Ir.SENT,u.retryCount++;var c=ae.relativePath(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;this.server_.put(h.toString(),l,(function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Ir.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Sr(n,e[s].path),c=new pn(a,u,Ye);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i);for(s=0;s<o.length;s++)oe(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status===Ir.SENT_NEEDS_ABORT?e[s].status=Ir.NEEDS_ABORT:e[s].status=Ir.RUN;else{Qt("transaction at "+h.toString()+" failed: "+r);for(s=0;s<e.length;s++)e[s].status=Ir.NEEDS_ABORT,e[s].abortReason=r}n.rerunTransactions_(t)}}),s)},wr.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},wr.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter((function(t){return t.status===Ir.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=ae.relativePath(e,a.path),c=!1,l=void 0;if(S(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Ir.NEEDS_ABORT)c=!0,l=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Ir.RUN)if(a.retryCount>=wr.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,o);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){Te("transaction failed: Data returned ",f,a.path);var p=cn(f);"object"==typeof f&&null!=f&&H(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=a.currentWriteId,y=this.generateServerValues(),v=Sn(p,h,y);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[s].status=Ir.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===l){var g=new Sr(this,t[s].path),m=t[s].currentInputSnapshot,_=new pn(m,g,Ye);r.push(t[s].onComplete.bind(null,null,!1,_))}else r.push(t[s].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)oe(r[s]);this.sendReadyTransactions_()}},wr.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},wr.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},wr.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},wr.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Ir.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},wr.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},wr.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===Ir.SENT_NEEDS_ABORT);else if(e[o].status===Ir.SENT)S(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=Ir.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(S(e[o].status===Ir.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)oe(n[o])}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kr,Ar=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return kr||(kr=new t),kr},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=_(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,_(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=_(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,_(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var i=n||t.options.databaseURL;void 0===i&&Ht("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var o=ye(i),s=o.repoInfo,a=void 0;return void 0!==r&&(a=r.env.FIREBASE_DATABASE_EMULATOR_HOST),a&&(i="http://"+a+"?ns="+s.namespace,s=(o=ye(i)).repoInfo),Pe("Invalid Firebase Database URL",1,o),o.path.isEmpty()||Ht("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,t,e).database},t.prototype.deleteRepo=function(t){var e=Q(this.repos_,t.app.name);e&&Q(e,t.repoInfo_.toURLString())===t||Ht("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=Q(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Q(r,t.toURLString());return i&&Ht("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new wr(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Pr=function(){function t(t){this.repo_=t,t instanceof wr||Ht("Don't call new Database() directly - please use firebase.database()."),this.root_=new Sr(t,ae.Empty),this.INTERNAL=new Or(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),Z("database.ref",0,1,arguments.length),t instanceof Sr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Z(e,1,1,arguments.length);var n=ye(t);Pe(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&Ht(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&Ht("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Z("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Z("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Or=function(){function t(t){this.database=t}return t.prototype.delete=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){return this.database.checkDeleted_("delete"),Ar.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),Rr=Object.freeze({__proto__:null,forceLongPolling:function(){yr.forceDisallow(),hr.forceAllow()},forceWebSockets:function(){hr.forceDisallow()},isWebSocketsAvailable:function(){return yr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Dr=_r;_r.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},_r.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Lr=gr,Mr=ce,Fr=Object.freeze({__proto__:null,DataConnection:Dr,RealTimeConnection:Lr,hijackHash:function(t){var e=_r.prototype.put;return _r.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){_r.prototype.put=e}},ConnectionTarget:Mr,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Ar.getInstance().forceRestClient(t)}}),jr=Pr.ServerValue;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function Ur(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}!function(t){!function(t){pr=t}(t.SDK_VERSION),t.INTERNAL.registerComponent(new it("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Ar.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Sr,Query:mn,Database:Pr,DataSnapshot:pn,enableLogging:qt,INTERNAL:Rr,ServerValue:jr,TEST_ACCESS:Fr}).setMultipleInstances(!0)),t.registerVersion("@firebase/database","0.6.7")}(kt);var Vr,qr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},Br=Br||{},Wr=qr||self;function zr(){}function Hr(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function Qr(t){var e=Hr(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Gr(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Yr="closure_uid_"+(1e9*Math.random()>>>0),Kr=0;function $r(t,e,n){return t.call.apply(t.bind,arguments)}function Xr(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Jr(t,e,n){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$r:Xr).apply(null,arguments)}function Zr(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var ti=Date.now||function(){return+new Date};function ei(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function ni(){this.j=this.j,this.i=this.i}ni.prototype.j=!1,ni.prototype.da=function(){if(!this.j&&(this.j=!0,this.C(),0))(function(t){Object.prototype.hasOwnProperty.call(t,Yr)&&t[Yr]||(t[Yr]=++Kr)})(this)},ni.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ri=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ii=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function oi(t){return Array.prototype.concat.apply([],arguments)}function si(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ai(t){return/^[\s\xa0]*$/.test(t)}var ui,ci=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function li(t,e){return-1!=t.indexOf(e)}function hi(t,e){return t<e?-1:t>e?1:0}t:{var fi=Wr.navigator;if(fi){var pi=fi.userAgent;if(pi){ui=pi;break t}}ui=""}function di(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function yi(t){var e={};for(var n in t)e[n]=t[n];return e}var vi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gi(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vi.length;o++)n=vi[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mi(t){return mi[" "](t),t}mi[" "]=zr;var _i,bi=li(ui,"Opera"),wi=li(ui,"Trident")||li(ui,"MSIE"),Ei=li(ui,"Edge"),Ti=Ei||wi,Ci=li(ui,"Gecko")&&!(li(ui.toLowerCase(),"webkit")&&!li(ui,"Edge"))&&!(li(ui,"Trident")||li(ui,"MSIE"))&&!li(ui,"Edge"),Si=li(ui.toLowerCase(),"webkit")&&!li(ui,"Edge");function Ii(){var t=Wr.document;return t?t.documentMode:void 0}t:{var xi="",Ni=function(){var t=ui;return Ci?/rv:([^\);]+)(\)|;)/.exec(t):Ei?/Edge\/([\d\.]+)/.exec(t):wi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Si?/WebKit\/(\S+)/.exec(t):bi?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ni&&(xi=Ni?Ni[1]:""),wi){var ki=Ii();if(null!=ki&&ki>parseFloat(xi)){_i=String(ki);break t}}_i=xi}var Ai,Pi={};function Oi(t){return function(t,e){var n=Pi;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=ci(String(_i)).split("."),r=ci(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=hi(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||hi(0==s[2].length,0==a[2].length)||hi(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(Wr.document&&wi){var Ri=Ii();Ai=Ri||(parseInt(_i,10)||void 0)}else Ai=void 0;var Di=Ai,Li=!wi||9<=Number(Di),Mi=wi&&!Oi("9"),Fi=function(){if(!Wr.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Wr.addEventListener("test",zr,e),Wr.removeEventListener("test",zr,e)}catch(t){}return t}();function ji(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ui(t,e){if(ji.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ci){t:{try{mi(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Vi[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ji.prototype.b=function(){this.defaultPrevented=!0},ei(Ui,ji);var Vi={2:"touch",3:"pen",4:"mouse"};Ui.prototype.b=function(){Ui.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Mi)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var qi="closure_listenable_"+(1e6*Math.random()|0),Bi=0;function Wi(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++Bi,this.V=this.X=!1}function zi(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function Hi(t){this.src=t,this.a={},this.b=0}function Qi(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ri(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(zi(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Gi(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}Hi.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Gi(t,e,r,i);return-1<s?(e=t[s],n||(e.X=!1)):((e=new Wi(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var Yi="closure_lm_"+(1e6*Math.random()|0),Ki={};function $i(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=io(r),e&&e[qi]?e.sa(n,r,Gr(i)?!!i.capture:!!i,o):Xi(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)$i(t,e[o],n,r,i);return null}return n=io(n),t&&t[qi]?t.ra(e,n,Gr(r)?!!r.capture:!!r,i):Xi(t,e,n,!1,r,i)}function Xi(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Gr(i)?!!i.capture:!!i;if(s&&!Li)return null;var a=no(t);if(a||(t[Yi]=a=new Hi(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=eo,e=Li?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Fi||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Zi(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ji(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[qi])Qi(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Zi(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=no(e))?(Qi(n,t),0==n.b&&(n.src=null,e[Yi]=null)):zi(t)}}}function Zi(t){return t in Ki?Ki[t]:Ki[t]="on"+t}function to(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&Ji(t),n.call(r,e)}function eo(t,e){if(t.V)return!0;if(!Li){if(!e)t:{e=["window","event"];for(var n=Wr,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return to(t,e=new Ui(e,this))}return to(t,new Ui(e,this))}function no(t){return(t=t[Yi])instanceof Hi?t:null}var ro="__closure_events_fn_"+(1e9*Math.random()>>>0);function io(t){return"function"==Hr(t)?t:(t[ro]||(t[ro]=function(e){return t.handleEvent(e)}),t[ro])}function oo(){ni.call(this),this.c=new Hi(this),this.J=this,this.A=null}function so(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.V&&s.capture==n){var a=s.listener,u=s.aa||s.src;s.X&&Qi(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ei(oo,ni),oo.prototype[qi]=!0,(Vr=oo.prototype).addEventListener=function(t,e,n,r){$i(this,t,e,n,r)},Vr.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Gr(i)?!!i.capture:!!i,r=io(r),e&&e[qi]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=Gi(s=e.a[n],r,i,o))&&(zi(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--)))):e&&(e=no(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Gi(n,r,i,o)),(r=-1<e?n[e]:null)&&Ji(r))}(this,t,e,n,r)},Vr.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new ji(t,n);else if(t instanceof ji)t.target=t.target||n;else{var i=t;gi(t=new ji(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=so(s,r,!0,t)&&i}if(i=so(s=t.a=n,r,!0,t)&&i,i=so(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=so(s=t.a=e[o],r,!1,t)&&i;return i},Vr.C=function(){if(oo.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)zi(n[r]);delete e.a[t],e.b--}}this.A=null},Vr.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Vr.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ao=Wr.JSON.stringify;function uo(){this.b=this.a=null}var co,lo=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new fo}),(function(t){t.reset()}),100);function ho(){var t=go,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function fo(){this.next=this.b=this.a=null}function po(t){Wr.setTimeout((function(){throw t}),0)}function yo(t,e){co||function(){var t=Wr.Promise.resolve(void 0);co=function(){t.then(mo)}}(),vo||(co(),vo=!0),go.add(t,e)}uo.prototype.add=function(t,e){var n=lo.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},fo.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},fo.prototype.reset=function(){this.next=this.b=this.a=null};var vo=!1,go=new uo;function mo(){for(var t;t=ho();){try{t.a.call(t.b)}catch(t){po(t)}var e=lo;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}vo=!1}function _o(t,e){oo.call(this),this.b=t||1,this.a=e||Wr,this.f=Jr(this.Ua,this),this.g=ti()}function bo(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function wo(t,e,n){if("function"==Hr(t))n&&(t=Jr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Jr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Wr.setTimeout(t,e||0)}function Eo(t,e,n){ni.call(this),this.f=null!=n?Jr(t,n):t,this.c=e,this.b=Jr(this.Pa,this),this.a=[]}function To(t){t.T=wo(t.b,t.c),t.f.apply(null,t.a)}function Co(t){ni.call(this),this.b=t,this.a={}}ei(_o,oo),(Vr=_o.prototype).Z=!1,Vr.L=null,Vr.Ua=function(){if(this.Z){var t=ti()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(bo(this),this.start()))}},Vr.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=ti())},Vr.C=function(){_o.M.C.call(this),bo(this),delete this.a},ei(Eo,ni),(Vr=Eo.prototype).ba=!1,Vr.T=null,Vr.Ia=function(t){this.a=arguments,this.T?this.ba=!0:To(this)},Vr.C=function(){Eo.M.C.call(this),this.T&&(Wr.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},Vr.Pa=function(){this.T=null,this.ba&&(this.ba=!1,To(this))},ei(Co,ni);var So=[];function Io(t,e,n,r){Array.isArray(n)||(n&&(So[0]=n.toString()),n=So);for(var i=0;i<n.length;i++){var o=$i(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function xo(t){di(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Ji(t)}),t),t.a={}}function No(){}Co.prototype.C=function(){Co.M.C.call(this),xo(this)},Co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ko=null;function Ao(){return ko=ko||new oo}function Po(t){ji.call(this,"serverreachability",t)}function Oo(t){var e=Ao();e.dispatchEvent(new Po(e,t))}function Ro(t){ji.call(this,"statevent",t)}function Do(t){var e=Ao();e.dispatchEvent(new Ro(e,t))}function Lo(t){ji.call(this,"timingevent",t)}function Mo(t,e){if("function"!=Hr(t))throw Error("Fn must not be null and must be a function");return Wr.setTimeout((function(){t()}),e)}ei(Po,ji),ei(Ro,ji),ei(Lo,ji);var Fo={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},jo={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function Uo(){}function Vo(t){var e;return(e=t.a)||(e=t.a={}),e}function qo(){}Uo.prototype.a=null;var Bo,Wo={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function zo(){ji.call(this,"d")}function Ho(){ji.call(this,"c")}function Qo(){}function Go(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new Co(this),this.N=Yo,t=Ti?125:void 0,this.O=new _o(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}ei(zo,ji),ei(Ho,ji),ei(Qo,Uo),Bo=new Qo;var Yo=45e3,Ko={},$o={};function Xo(t,e,n){t.B=1,t.f=_s(ps(e)),t.j=n,t.F=!0,Jo(t,null)}function Jo(t,e){t.s=ti(),es(t),t.A=ps(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Os(n.b,"t",r),t.w=0,t.a=Ta(t.g,t.g.w?e:null),0<t.J&&(t.D=new Eo(Jr(t.ya,t,t.a),t.J)),Io(t.G,t.a,"readystatechange",t.Sa),e=t.m?yi(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),Oo(1)}function Zo(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=ts(t,n);if(i==$o){4==e&&(t.c=4,Do(14),r=!1);break}if(i==Ko){t.c=4,Do(15),r=!1;break}ss(t,i)}4==e&&0==n.length&&(t.c=1,Do(16),r=!1),t.b=t.b&&r,r||(os(t),is(t))}function ts(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?$o:(n=Number(e.substring(n,r)),isNaN(n)?Ko:(r+=1)+n>e.length?$o:(e=e.substr(r,n),t.w=r+n,e))}function es(t){t.P=ti()+t.N,ns(t,t.N)}function ns(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=Mo(Jr(t.Qa,t),e)}function rs(t){t.h&&(Wr.clearTimeout(t.h),t.h=null)}function is(t){0==t.g.u||t.l||ma(t.g,t)}function os(t){rs(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,bo(t.O),xo(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function ss(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||Us(n.b,t)))if(n.A=t.H,!t.o&&Us(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;ga(n),n.a.cancel(),n.a=null}va(n),Do(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=Mo(Jr(n.Na,n),6e3));if(1>=js(n.b)&&n.O){try{n.O()}catch(t){}n.O=void 0}}else ba(n,11)}else if((t.o||n.a==t)&&ga(n),!ai(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var s=i[5];null!=s&&"number"==typeof s&&0<s&&(n.D=1.5*s);var a=n,u=t.a;if(u){var c=u.a?u.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var l=a.b;!l.a&&(li(c,"spdy")||li(c,"quic")||li(c,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(Vs(l,l.b),l.b=null))}if(a.s){var h=u.a?u.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(a.ha=h,ms(a.v,a.s,h))}}n.u=3,n.c&&n.c.na();var f=t;if((a=n).ea=Ea(a,a.w?a.R:null,a.P),f.o){qs(a.b,f);var p=f,d=a.D;d&&p.setTimeout(d),p.h&&(rs(p),es(p)),a.a=f}else ya(a);0<n.f.length&&ha(n)}else"stop"!=i[0]&&"close"!=i[0]||ba(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?ba(n,7):ua(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);Oo(4)}catch(t){}}function as(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qr(t)||"string"==typeof t)ii(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(Qr(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(Qr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function us(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof us)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function cs(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ls(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ls(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ls(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Vr=Go.prototype).setTimeout=function(t){this.N=t},Vr.Sa=function(t){t=t.target;var e=this.D;e&&3==ia(t)?e.Ia():this.ya(t)},Vr.ya=function(t){try{if(t==this.a)t:{var e=ia(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!Ti&&!this.a.Y())){this.l||4!=e||7==n||Oo(8==n||0>=r?3:2),rs(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ai(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.c=3,Do(12),os(this),is(this);break t}this.o=!0,ss(this,u)}this.F?(Zo(this,e,o),Ti&&this.b&&3==e&&(Io(this.G,this.O,"tick",this.Ra),this.O.start())):ss(this,o),4==e&&os(this),this.b&&!this.l&&(4==e?ma(this.g,this):(this.b=!1,es(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Do(12)):(this.c=0,Do(13)),os(this),is(this)}}}catch(t){}},Vr.Ra=function(){if(this.a){var t=ia(this.a),e=this.a.Y();this.w<e.length&&(rs(this),Zo(this,t,e),this.b&&4!=t&&es(this))}},Vr.cancel=function(){this.l=!0,os(this)},Vr.Qa=function(){this.h=null;var t=ti();0<=t-this.P?(2!=this.B&&(Oo(3),Do(17)),os(this),this.c=2,is(this)):ns(this,this.P-t)},(Vr=us.prototype).I=function(){cs(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Vr.K=function(){return cs(this),this.a.concat()},Vr.get=function(t,e){return ls(this.b,t)?this.b[t]:e},Vr.set=function(t,e){ls(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Vr.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var hs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fs(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof fs){this.a=void 0!==e?e:t.a,ds(this,t.f),this.j=t.j,ys(this,t.c),vs(this,t.h),this.g=t.g,e=t.b;var n=new Ns;n.c=e.c,e.a&&(n.a=new us(e.a),n.b=e.b),gs(this,n),this.i=t.i}else t&&(n=String(t).match(hs))?(this.a=!!e,ds(this,n[1]||"",!0),this.j=bs(n[2]||""),ys(this,n[3]||"",!0),vs(this,n[4]),this.g=bs(n[5]||"",!0),gs(this,n[6]||"",!0),this.i=bs(n[7]||"")):(this.a=!!e,this.b=new Ns(null,this.a))}function ps(t){return new fs(t)}function ds(t,e,n){t.f=n?bs(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ys(t,e,n){t.c=n?bs(e,!0):e}function vs(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function gs(t,e,n){e instanceof Ns?(t.b=e,function(t,e){e&&!t.f&&(ks(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(As(this,e),Os(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ws(e,Is)),t.b=new Ns(e,t.a))}function ms(t,e,n){t.b.set(e,n)}function _s(t){return ms(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ti()).toString(36)),t}function bs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ws(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Es),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Es(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}fs.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ws(e,Ts,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ws(e,Ts,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ws(n,"/"==n.charAt(0)?Ss:Cs,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ws(n,xs)),t.join("")};var Ts=/[#\/\?@]/g,Cs=/[#\?:]/g,Ss=/[#\?]/g,Is=/[#\?@]/g,xs=/#/g;function Ns(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ks(t){t.a||(t.a=new us,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function As(t,e){ks(t),e=Rs(t,e),ls(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ls((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&cs(t)))}function Ps(t,e){return ks(t),e=Rs(t,e),ls(t.a.b,e)}function Os(t,e,n){As(t,e),0<n.length&&(t.c=null,t.a.set(Rs(t,e),si(n)),t.b+=n.length)}function Rs(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ds(t,e){this.b=t,this.a=e}function Ls(t){this.g=t||Ms,Wr.PerformanceNavigationTiming?t=0<(t=Wr.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Wr.ca&&Wr.ca.ua&&Wr.ca.ua()&&Wr.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Vr=Ns.prototype).add=function(t,e){ks(this),this.c=null,t=Rs(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Vr.forEach=function(t,e){ks(this),this.a.forEach((function(n,r){ii(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Vr.K=function(){ks(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Vr.I=function(t){ks(this);var e=[];if("string"==typeof t)Ps(this,t)&&(e=oi(e,this.a.get(Rs(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=oi(e,t[n])}return e},Vr.set=function(t,e){return ks(this),this.c=null,Ps(this,t=Rs(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Vr.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},Vr.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ms=10;function Fs(t){return!!t.b||!!t.a&&t.a.size>=t.f}function js(t){return t.b?1:t.a?t.a.size:0}function Us(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Vs(t,e){t.a?t.a.add(e):t.b=e}function qs(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Bs(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ur(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.i)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return si(t.c)}function Ws(){}function zs(){this.a=new Ws}function Hs(t,e,n){var r=n||"";try{as(t,(function(t,n){var i=t;Gr(t)&&(i=ao(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Qs(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ls.prototype.cancel=function(){var t,e;if(this.c=Bs(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ur(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ws.prototype.stringify=function(t){return Wr.JSON.stringify(t,void 0)},Ws.prototype.parse=function(t){return Wr.JSON.parse(t,void 0)};var Gs=Wr.JSON.parse;function Ys(t){oo.call(this),this.headers=new us,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=Ks,this.B=this.F=!1}ei(Ys,oo);var Ks="",$s=/^https?$/i,Xs=["POST","PUT"];function Js(t){return"content-type"==t.toLowerCase()}function Zs(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ta(t),na(t)}function ta(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ea(t){if(t.b&&void 0!==Br&&(!t.s[1]||4!=ia(t)||2!=t.S()))if(t.l&&4==ia(t))wo(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==ia(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(hs)[1]||null;if(!o&&Wr.self&&Wr.self.location){var s=Wr.self.location.protocol;o=s.substr(0,s.length-1)}i=!$s.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<ia(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.S()+"]",ta(t)}}finally{na(t)}}}function na(t,e){if(t.a){ra(t);var n=t.a,r=t.s[0]?zr:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function ra(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(Wr.clearTimeout(t.m),t.m=null)}function ia(t){return t.a?t.a.readyState:0}function oa(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return di(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ms(t,e,n))}function sa(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function aa(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=sa("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=sa("baseRetryDelayMs",5e3,t),this.Ga=sa("retryDelaySeedMs",1e4,t),this.Da=sa("forwardChannelMaxRetries",2,t),this.ga=sa("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Ls(t&&t.concurrentRequestLimit),this.ja=new zs,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function ua(t){if(ca(t),3==t.u){var e=t.H++,n=ps(t.v);ms(n,"SID",t.B),ms(n,"RID",e),ms(n,"TYPE","terminate"),pa(t,n),(e=new Go(t,e,void 0)).B=2,e.f=_s(ps(n)),n=!1,Wr.navigator&&Wr.navigator.sendBeacon&&(n=Wr.navigator.sendBeacon(e.f.toString(),"")),!n&&Wr.Image&&((new Image).src=e.f,n=!0),n||(e.a=Ta(e.g,null),e.a.$(e.f)),e.s=ti(),es(e)}wa(t)}function ca(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(Wr.clearTimeout(t.i),t.i=null),ga(t),t.b.cancel(),t.g&&("number"==typeof t.g&&Wr.clearTimeout(t.g),t.g=null)}function la(t,e){t.f.push(new Ds(t.Fa++,e)),3==t.u&&ha(t)}function ha(t){Fs(t.b)||t.g||(t.g=!0,yo(t.xa,t),t.o=0)}function fa(t,e){var n;n=e?e.W:t.H++;var r=ps(t.v);ms(r,"SID",t.B),ms(r,"RID",n),ms(r,"AID",t.G),pa(t,r),t.h&&t.j&&oa(r,t.h,t.j),n=new Go(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=da(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),Vs(t.b,n),Xo(n,r,e)}function pa(t,e){t.c&&as({},(function(t,n){ms(e,n,t)}))}function da(t,e,n){n=Math.min(t.f.length,n);var r=t.c?Jr(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Hs(l,s,"req"+c+"_")}catch(t){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function ya(t){t.a||t.i||(t.J=1,yo(t.wa,t),t.m=0)}function va(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=Mo(Jr(t.wa,t),_a(t,t.m)),t.m++,!0)}function ga(t){null!=t.l&&(Wr.clearTimeout(t.l),t.l=null)}function ma(t,e){var n=null;if(t.a==e){ga(t),t.a=null;var r=2}else{if(!Us(t.b,e))return;n=e.i,qs(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ti()-e.s;var i=t.o;(r=Ao()).dispatchEvent(new Lo(r,n,e,i)),ha(t)}else ya(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(js(t.b)>=t.b.f-(t.g?1:0))&&(t.g?(t.f=e.i.concat(t.f),!0):!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da))&&(t.g=Mo(Jr(t.xa,t,e),_a(t,t.o)),t.o++,!0))}(t,e)||2==r&&va(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:ba(t,5);break;case 4:ba(t,10);break;case 3:ba(t,6);break;default:ba(t,2)}}function _a(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function ba(t,e){if(2==e){var n=null;t.c&&(n=null);var r=Jr(t.Ta,t);n||(n=new fs("//www.google.com/images/cleardot.gif"),Wr.location&&"http"==Wr.location.protocol||ds(n,"https"),_s(n)),function(t,e){var n=new No;if(Wr.Image){var r=new Image;r.onload=Zr(Qs,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Zr(Qs,n,r,"TestLoadImage: error",!1,e),r.onabort=Zr(Qs,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Zr(Qs,n,r,"TestLoadImage: timeout",!1,e),Wr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Do(2);t.u=0,t.c&&t.c.la(e),wa(t),ca(t)}function wa(t){t.u=0,t.A=-1,t.c&&(0==Bs(t.b).length&&0==t.f.length||(t.b.c.length=0,si(t.f),t.f.length=0),t.c.ka())}function Ea(t,e,n){var r=function(t){return t instanceof fs?ps(t):new fs(t,void 0)}(n);if(""!=r.c)e&&ys(r,e+"."+r.c),vs(r,r.h);else{var i=Wr.location;r=function(t,e,n,r){var i=new fs(null,void 0);return t&&ds(i,t),e&&ys(i,e),n&&vs(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&di(t.N,(function(t,e){ms(r,e,t)})),e=t.s,n=t.ha,e&&n&&ms(r,e,n),ms(r,"VER",t.oa),pa(t,r),r}function Ta(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ys(t.Ea)).F=t.w,e}function Ca(){}function Sa(){if(wi&&!(10<=Number(Di)))throw Error("Environmental error: no available transport.")}function Ia(t,e){oo.call(this),this.a=new aa(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!ai(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ai(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new ka(this)}function xa(t){zo.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Na(){Ho.call(this),this.status=1}function ka(t){this.a=t}(Vr=Ys.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?Vo(this.G):Vo(Bo),this.a.onreadystatechange=Jr(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Zs(this,t)}t=n||"";var i=new us(this.headers);r&&as(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Js,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=Wr.FormData&&t instanceof Wr.FormData,!(0<=ri(Xs,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ra(this),0<this.o&&((this.B=function(t){return wi&&Oi(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Jr(this.ta,this)):this.m=wo(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Zs(this,t)}},Vr.ta=function(){void 0!==Br&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Vr.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),na(this))},Vr.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),na(this,!0)),Ys.M.C.call(this)},Vr.va=function(){this.j||(this.w||this.l||this.g?ea(this):this.Oa())},Vr.Oa=function(){ea(this)},Vr.S=function(){try{return 2<ia(this)?this.a.status:-1}catch(t){return-1}},Vr.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Vr.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Gs(e)}},Vr.qa=function(){return this.h},Vr.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(Vr=aa.prototype).oa=8,Vr.u=1,Vr.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new Go(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?gi(r=yi(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=da(this,n,e),ms(i=ps(this.v),"RID",t),ms(i,"CVER",22),this.s&&ms(i,"X-HTTP-Session-Id",this.s),pa(this,i),this.h&&r&&oa(i,this.h,r),Vs(this.b,n),this.fa?(ms(i,"$req",e),ms(i,"SID","null"),n.R=!0,Xo(n,i,null)):Xo(n,i,e),this.u=2}}else 3==this.u&&(t?fa(this,t):0==this.f.length||Fs(this.b)||fa(this))},Vr.wa=function(){this.i=null,this.a=new Go(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=ps(this.ea);ms(t,"RID","rpc"),ms(t,"SID",this.B),ms(t,"CI",this.U?"0":"1"),ms(t,"AID",this.G),pa(this,t),ms(t,"TYPE","xmlhttp"),this.h&&this.j&&oa(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=_s(ps(t)),e.j=null,e.F=!0,Jo(e,n)},Vr.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,va(this),Do(19))},Vr.Ta=function(t){Do(t?2:1)},(Vr=Ca.prototype).na=function(){},Vr.ma=function(){},Vr.la=function(){},Vr.ka=function(){},Vr.Ha=function(){},Sa.prototype.a=function(t,e){return new Ia(t,e)},ei(Ia,oo),(Vr=Ia.prototype).addEventListener=function(t,e,n,r){Ia.M.addEventListener.call(this,t,e,n,r)},Vr.removeEventListener=function(t,e,n,r){Ia.M.removeEventListener.call(this,t,e,n,r)},Vr.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Do(0),t.P=e,t.N=n||{},t.U=t.W,t.v=Ea(t,null,t.P),ha(t)},Vr.close=function(){ua(this.a)},Vr.La=function(t){if("string"==typeof t){var e={};e.__data__=t,la(this.a,e)}else this.g?((e={}).__data__=ao(t),la(this.a,e)):la(this.a,t)},Vr.C=function(){this.a.c=null,delete this.f,ua(this.a),delete this.a,Ia.M.C.call(this)},ei(xa,zo),ei(Na,Ho),ei(ka,Ca),ka.prototype.na=function(){this.a.dispatchEvent("a")},ka.prototype.ma=function(t){this.a.dispatchEvent(new xa(t))},ka.prototype.la=function(t){this.a.dispatchEvent(new Na(t))},ka.prototype.ka=function(){this.a.dispatchEvent("b")},Sa.prototype.createWebChannel=Sa.prototype.a,Ia.prototype.send=Ia.prototype.La,Ia.prototype.open=Ia.prototype.Ka,Ia.prototype.close=Ia.prototype.close,Fo.NO_ERROR=0,Fo.TIMEOUT=8,Fo.HTTP_ERROR=6,jo.COMPLETE="complete",qo.EventType=Wo,Wo.OPEN="a",Wo.CLOSE="b",Wo.ERROR="c",Wo.MESSAGE="d",oo.prototype.listen=oo.prototype.ra,Ys.prototype.listenOnce=Ys.prototype.sa,Ys.prototype.getLastError=Ys.prototype.Ma,Ys.prototype.getLastErrorCode=Ys.prototype.qa,Ys.prototype.getStatus=Ys.prototype.S,Ys.prototype.getResponseJson=Ys.prototype.Ja,Ys.prototype.getResponseText=Ys.prototype.Y,Ys.prototype.send=Ys.prototype.$;var Aa={createWebChannelTransport:function(){return new Sa},ErrorCode:Fo,EventType:jo,WebChannel:qo,XhrIo:Ys},Pa=Aa.createWebChannelTransport,Oa=Aa.ErrorCode,Ra=Aa.EventType,Da=Aa.WebChannel,La=Aa.XhrIo,Ma=kt.SDK_VERSION,Fa=new vt("@firebase/firestore");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ja(){return Fa.logLevel}function Ua(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fa.logLevel<=ct.DEBUG){var r=e.map(qa);Fa.debug.apply(Fa,E(["Firestore ("+Ma+"): "+t],r))}}function Va(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fa.logLevel<=ct.ERROR){var r=e.map(qa);Fa.error.apply(Fa,E(["Firestore ("+Ma+"): "+t],r))}}function qa(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+Ma+") INTERNAL ASSERTION FAILED: "+t;throw Va(e),new Error(e)}function Wa(t,e){t||Ba()}function za(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qa=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Ha(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Ga(t,e){return t<e?-1:t>e?1:0}function Ya(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ka(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $a=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},Xa=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return Ga(this.projectId,t.projectId)||Ga(this.database,t.database)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Za(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tu(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eu=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.u(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Za(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype._=function(){return tu(this.l)},t}(),nu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ru=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return y(e,t),e}(Error),iu=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ru(nu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ru(nu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ru(nu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ru(nu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?Ga(this.nanoseconds,t.nanoseconds):Ga(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ou=function(){function t(t){this.timestamp=t}return t.I=function(e){return new t(e)},t.min=function(){return new t(new iu(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.A=function(){return this.timestamp},t}(),su=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ba(),void 0===n?n=t.length-e:n>t.length-e&&Ba(),this.segments=t,this.offset=e,this.R=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.V(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.prototype.N=function(){return this.F().join("/")},e.prototype.toString=function(){return this.N()},e.$=function(t){if(t.indexOf("//")>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.k=function(){return new e([])},e}(su),uu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.M=function(t){return uu.test(t)},e.prototype.N=function(){return this.F().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.M(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.N()},e.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},e.L=function(){return new e(["__name__"])},e.B=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ru(nu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ru(nu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ru(nu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ru(nu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.k=function(){return new e([])},e}(su),lu=function(){function t(t){this.path=t}return t.q=function(e){return new t(au.$(e).g(5))},t.prototype.U=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===au.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return au.P(t.path,e.path)},t.W=function(t){return t.length%2==0},t.j=function(e){return new t(new au(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t){return null==t}function fu(t){return-0===t&&1/t==-1/0}function pu(t){return"number"==typeof t&&Number.isInteger(t)&&!fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var du=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.K=null};function yu(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new du(t,e,n,r,i,o,s)}function vu(t){var e=za(t);if(null===e.K){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.N()+t.op.toString()+ac(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.N()+e.dir;var e})).join(","),hu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Hl(e.startAt)),e.endAt&&(n+="|ub:",n+=Hl(e.endAt)),e.K=n}return e.K}function gu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!$l(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],!(i instanceof jl&&o instanceof jl&&i.op===o.op&&i.field.isEqual(o.field)&&rc(i.value,o.value)))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gl(t.startAt,e.startAt)&&Gl(t.endAt,e.endAt)}function mu(t){return lu.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _u=function(){function t(t){this.G=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.G,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},t.prototype.H=function(){return 2*this.G.length},t.prototype.o=function(t){return Ga(this.G,t.G)},t.prototype.isEqual=function(t){return this.G===t.G},t}();_u.Y=new _u("");var bu,wu,Eu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ou.min()),void 0===o&&(o=ou.min()),void 0===s&&(s=_u.Y),this.target=t,this.targetId=e,this.J=n,this.sequenceNumber=r,this.X=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Z=function(e){return new t(this.target,this.targetId,this.J,e,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.tt=function(e,n){return new t(this.target,this.targetId,this.J,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.et=function(e){return new t(this.target,this.targetId,this.J,this.sequenceNumber,this.X,e,this.resumeToken)},t}(),Tu=function(t){this.count=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){switch(t){case nu.OK:return Ba();case nu.CANCELLED:case nu.UNKNOWN:case nu.DEADLINE_EXCEEDED:case nu.RESOURCE_EXHAUSTED:case nu.INTERNAL:case nu.UNAVAILABLE:case nu.UNAUTHENTICATED:return!1;case nu.INVALID_ARGUMENT:case nu.NOT_FOUND:case nu.ALREADY_EXISTS:case nu.PERMISSION_DENIED:case nu.FAILED_PRECONDITION:case nu.ABORTED:case nu.OUT_OF_RANGE:case nu.UNIMPLEMENTED:case nu.DATA_LOSS:return!0;default:return Ba()}}function Su(t){if(void 0===t)return Va("GRPC error has no .code"),nu.UNKNOWN;switch(t){case bu.OK:return nu.OK;case bu.CANCELLED:return nu.CANCELLED;case bu.UNKNOWN:return nu.UNKNOWN;case bu.DEADLINE_EXCEEDED:return nu.DEADLINE_EXCEEDED;case bu.RESOURCE_EXHAUSTED:return nu.RESOURCE_EXHAUSTED;case bu.INTERNAL:return nu.INTERNAL;case bu.UNAVAILABLE:return nu.UNAVAILABLE;case bu.UNAUTHENTICATED:return nu.UNAUTHENTICATED;case bu.INVALID_ARGUMENT:return nu.INVALID_ARGUMENT;case bu.NOT_FOUND:return nu.NOT_FOUND;case bu.ALREADY_EXISTS:return nu.ALREADY_EXISTS;case bu.PERMISSION_DENIED:return nu.PERMISSION_DENIED;case bu.FAILED_PRECONDITION:return nu.FAILED_PRECONDITION;case bu.ABORTED:return nu.ABORTED;case bu.OUT_OF_RANGE:return nu.OUT_OF_RANGE;case bu.UNIMPLEMENTED:return nu.UNIMPLEMENTED;case bu.DATA_LOSS:return nu.DATA_LOSS;default:return Ba()}}(wu=bu||(bu={}))[wu.OK=0]="OK",wu[wu.CANCELLED=1]="CANCELLED",wu[wu.UNKNOWN=2]="UNKNOWN",wu[wu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wu[wu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wu[wu.NOT_FOUND=5]="NOT_FOUND",wu[wu.ALREADY_EXISTS=6]="ALREADY_EXISTS",wu[wu.PERMISSION_DENIED=7]="PERMISSION_DENIED",wu[wu.UNAUTHENTICATED=16]="UNAUTHENTICATED",wu[wu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wu[wu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wu[wu.ABORTED=10]="ABORTED",wu[wu.OUT_OF_RANGE=11]="OUT_OF_RANGE",wu[wu.UNIMPLEMENTED=12]="UNIMPLEMENTED",wu[wu.INTERNAL=13]="INTERNAL",wu[wu.UNAVAILABLE=14]="UNAVAILABLE",wu[wu.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Iu=function(){function t(t,e){this.P=t,this.root=e||Nu.EMPTY}return t.prototype.nt=function(e,n){return new t(this.P,this.root.nt(e,n,this.P).copy(null,null,Nu.st,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).copy(null,null,Nu.st,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.it=function(){return this.root.it()},t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(t){return this.root.ot(t)},t.prototype.forEach=function(t){this.ot((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ot((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.at=function(){return new xu(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new xu(this.root,t,this.P,!1)},t.prototype.ct=function(){return new xu(this.root,null,this.P,!0)},t.prototype.lt=function(t){return new xu(this.root,t,this.P,!0)},t}(),xu=function(){function t(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}return t.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},t.prototype.wt=function(){return this.ft.length>0},t.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},t}(),Nu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype._=function(){return!1},t.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.it=function(){return this.min().key},t.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},t.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},t.prototype.It=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.At()||e.left.left.At()||(e=e.Rt()),(e=e.copy(null,null,null,e.left.It(),null)).Et()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.At()||i.left.left.At()||(i=i.Rt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.At()&&(i=i.Pt()),i.right._()||i.right.At()||i.right.left.At()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.It())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Et()},t.prototype.At=function(){return this.color},t.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.yt()),t},t.prototype.Rt=function(){var t=this.yt();return t.right.left.At()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).gt()).yt()),t},t.prototype.Vt=function(){var t=this.yt();return t.left.left.At()&&(t=(t=t.Pt()).yt()),t},t.prototype.gt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Pt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.pt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},t.prototype.bt=function(){if(this.At()&&this.left.At())throw Ba();if(this.right.At())throw Ba();var t=this.left.bt();if(t!==this.right.bt())throw Ba();return t+(this.At()?0:1)},t}();Nu.EMPTY=null,Nu.RED=!0,Nu.st=!1,Nu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ba()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ba()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ba()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ba()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ba()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.nt=function(t,e,n){return new Nu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ot=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.it=function(){return null},t.prototype.rt=function(){return null},t.prototype.At=function(){return!1},t.prototype.pt=function(){return!0},t.prototype.bt=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ku=function(){function t(t){this.P=t,this.data=new Iu(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.it()},t.prototype.last=function(){return this.data.rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ot((function(e,n){return t(e),!1}))},t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},t.prototype.at=function(){return new Au(this.data.at())},t.prototype.ut=function(t){return new Au(this.data.ut(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.at(),r=e.data.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(0!==this.P(i,o))return!1}return!0},t.prototype.F=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.P);return n.data=e,n},t}(),Au=function(){function t(t){this.Ft=t}return t.prototype.dt=function(){return this.Ft.dt().key},t.prototype.wt=function(){return this.Ft.wt()},t}(),Pu=new Iu(lu.P);function Ou(){return Pu}function Ru(){return Ou()}var Du=new Iu(lu.P);function Lu(){return Du}var Mu=new Iu(lu.P),Fu=new ku(lu.P);function ju(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Fu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Uu=new ku(Ga);function Vu(){return Uu}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qu=function(){function t(t){this.P=t?function(e,n){return t(e,n)||lu.P(e.key,n.key)}:function(t,e){return lu.P(t.key,e.key)},this.Nt=Lu(),this.$t=new Iu(this.P)}return t.kt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.Nt.get(t)},t.prototype.get=function(t){return this.Nt.get(t)},t.prototype.first=function(){return this.$t.it()},t.prototype.last=function(){return this.$t.rt()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ot((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Nt.nt(t.key,t),e.$t.nt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Nt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.at(),r=e.$t.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.P=this.P,r.Nt=e,r.$t=n,r},t}(),Bu=function(){function t(){this.xt=new Iu(lu.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);n?0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):Ba():this.xt=this.xt.nt(e,t)},t.prototype.Mt=function(){var t=[];return this.xt.ot((function(e,n){t.push(n)})),t},t}(),Wu=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Ot=n,this.docChanges=r,this.Lt=i,this.fromCache=o,this.Bt=s,this.qt=a}return t.Ut=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,qu.kt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Lt._()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Lt.isEqual(t.Lt)&&Rl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),zu=function(){function t(t,e,n,r,i){this.X=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}return t.Gt=function(e,n){var r=new Map;return r.set(e,Hu.zt(e,n)),new t(ou.min(),r,Vu(),Ou(),ju())},t}(),Hu=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}return t.zt=function(e,n){return new t(_u.Y,n,ju(),ju(),ju())},t}(),Qu=function(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r},Gu=function(t,e){this.targetId=t,this.ee=e},Yu=function(t,e,n,r){void 0===n&&(n=_u.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ku=function(){function t(){this.ne=0,this.se=Ju(),this.ie=_u.Y,this.re=!1,this.oe=!0}return Object.defineProperty(t.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){t.H()>0&&(this.oe=!0,this.ie=t)},t.prototype.ce=function(){var t=ju(),e=ju(),n=ju();return this.se.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ba()}})),new Hu(this.ie,this.re,t,e,n)},t.prototype.le=function(){this.oe=!1,this.se=Ju()},t.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},t.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},t.prototype.de=function(){this.ne+=1},t.prototype.we=function(){this.ne-=1},t.prototype.Te=function(){this.oe=!0,this.re=!0},t}(),$u=function(){function t(t){this.Ee=t,this.Ie=new Map,this.me=Ou(),this.Ae=Xu(),this.Re=new ku(Ga)}return t.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof kl?this.Ve(r,t.te):t.te instanceof Al&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.ge(s,t.key,t.te)}},t.prototype.ye=function(t){var e=this;this.pe(t,(function(n){var r=e.be(n);switch(t.state){case 0:e.ve(n)&&r.ue(t.resumeToken);break;case 1:r.we(),r.he||r.le(),r.ue(t.resumeToken);break;case 2:r.we(),r.he||e.removeTarget(n);break;case 3:e.ve(n)&&(r.Te(),r.ue(t.resumeToken));break;case 4:e.ve(n)&&(e.Se(n),r.ue(t.resumeToken));break;default:Ba()}}))},t.prototype.pe=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.ve(r)&&e(r)}))},t.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(mu(i))if(0===n){var o=new lu(i.path);this.ge(e,o,new Al(o,ou.min()))}else Wa(1===n);else this.Fe(e)!==n&&(this.Se(e),this.Re=this.Re.add(e))}},t.prototype.Ne=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o=e.Ce(i);if(o){if(r.Ht&&mu(o.target)){var s=new lu(o.target.path);null!==e.me.get(s)||e.$e(i,s)||e.ge(i,s,new Al(s,t))}r.ae&&(n.set(i,r.ce()),r.le())}}));var r=ju();this.Ae.forEach((function(t,n){var i=!0;n.St((function(t){var n=e.Ce(t);return!n||2===n.J||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new zu(t,n,this.Re,this.me,r);return this.me=Ou(),this.Ae=Xu(),this.Re=new ku(Ga),i},t.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.me=this.me.nt(e.key,e),this.Ae=this.Ae.nt(e.key,this.ke(e.key).add(t))}},t.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Ae=this.Ae.nt(e,this.ke(e).delete(t)),n&&(this.me=this.me.nt(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},t.prototype.de=function(t){this.be(t).de()},t.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new Ku,this.Ie.set(t,e)),e},t.prototype.ke=function(t){var e=this.Ae.get(t);return e||(e=new ku(Ga),this.Ae=this.Ae.nt(t,e)),e},t.prototype.ve=function(t){var e=null!==this.Ce(t);return e||Ua("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},t.prototype.Se=function(t){var e=this;this.Ie.set(t,new Ku),this.Ee.xe(t).forEach((function(n){e.ge(t,n,null)}))},t.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(){return new Iu(lu.P)}function Ju(){return new Iu(lu.P)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tc(t){var e=uc(t.mapValue.fields.__local_write_time__.timestampValue);return new iu(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ec=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zu(t)?4:10:Ba()}function rc(t,e){var n=nc(t);if(n!==nc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return tc(t).isEqual(tc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=uc(t.timestampValue),r=uc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return lc(t.bytesValue).isEqual(lc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return cc(t.geoPointValue.latitude)===cc(e.geoPointValue.latitude)&&cc(t.geoPointValue.longitude)===cc(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return cc(t.integerValue)===cc(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=cc(t.doubleValue),r=cc(e.doubleValue);return n===r?fu(n)===fu(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],rc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ja(n)!==Ja(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!rc(n[i],r[i])))return!1;return!0}(t,e);default:return Ba()}}function ic(t,e){return void 0!==(t.values||[]).find((function(t){return rc(t,e)}))}function oc(t,e){var n=nc(t),r=nc(e);if(n!==r)return Ga(n,r);switch(n){case 0:return 0;case 1:return Ga(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=cc(t.integerValue||t.doubleValue),r=cc(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return sc(t.timestampValue,e.timestampValue);case 4:return sc(tc(t),tc(e));case 5:return Ga(t.stringValue,e.stringValue);case 6:return function(t,e){var n=lc(t),r=lc(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ga(n[i],r[i]);if(0!==o)return o}return Ga(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Ga(cc(t.latitude),cc(e.latitude));return 0!==n?n:Ga(cc(t.longitude),cc(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=oc(n[i],r[i]);if(o)return o}return Ga(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Ga(r[s],o[s]);if(0!==a)return a;var u=oc(n[r[s]],i[o[s]]);if(0!==u)return u}return Ga(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ba()}}function sc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Ga(t,e);var n=uc(t),r=uc(e),i=Ga(n.seconds,r.seconds);return 0!==i?i:Ga(n.nanos,r.nanos)}function ac(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=uc(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?lc(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,lu.q(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=t(s)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Ba();var n,r}(t)}function uc(t){if(Wa(!!t),"string"==typeof t){var e=0,n=ec.exec(t);if(Wa(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:cc(t.seconds),nanos:cc(t.nanos)}}function cc(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function lc(t){return"string"==typeof t?_u.fromBase64String(t):_u.fromUint8Array(t)}function hc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function fc(t){return!!t&&"integerValue"in t}function pc(t){return!!t&&"arrayValue"in t}function dc(t){return!!t&&"nullValue"in t}function yc(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vc(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gc={asc:"ASCENDING",desc:"DESCENDING"},mc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_c=function(t,e){this.s=t,this.Oe=e};function bc(t){return{integerValue:""+t}}function wc(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(e)?"-0":e}}function Ec(t,e){return pu(e)?bc(e):wc(t,e)}function Tc(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cc(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function Sc(t,e){return Tc(t,e.A())}function Ic(t){return Wa(!!t),ou.I(function(t){var e=uc(t);return new iu(e.seconds,e.nanos)}(t))}function xc(t,e){return function(t){return new au(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).N()}function Nc(t){var e=au.$(t);return Wa(Gc(e)),e}function kc(t,e){return xc(t.s,e.path)}function Ac(t,e){var n=Nc(e);return Wa(n.get(1)===t.s.projectId),Wa(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new lu(Dc(n))}function Pc(t,e){return xc(t.s,e)}function Oc(t){var e=Nc(t);return 4===e.length?au.k():Dc(e)}function Rc(t){return new au(["projects",t.s.projectId,"databases",t.s.database]).N()}function Dc(t){return Wa(t.length>4&&"documents"===t.get(4)),t.g(5)}function Lc(t,e,n){return{name:kc(t,e),fields:n.proto.mapValue.fields}}function Mc(t,e){var n;if(e instanceof gl)n={update:Lc(t,e.key,e.value)};else if(e instanceof Tl)n={delete:kc(t,e.key)};else if(e instanceof ml)n={update:Lc(t,e.key,e.data),updateMask:Qc(e.Le)};else if(e instanceof bl)n={transform:{document:kc(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Jc)return{fieldPath:e.field.N(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zc)return{fieldPath:e.field.N(),appendMissingElements:{values:n.elements}};if(n instanceof el)return{fieldPath:e.field.N(),removeAllFromArray:{values:n.elements}};if(n instanceof rl)return{fieldPath:e.field.N(),increment:n.Be};throw Ba()}(0,t)}))}};else{if(!(e instanceof Cl))return Ba();n={verify:kc(t,e.key)}}return e.Ue.qe||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Sc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ba()}(t,e.Ue)),n}function Fc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?cl.updateTime(Ic(t.updateTime)):void 0!==t.exists?cl.exists(t.exists):cl.Qe()}(e.currentDocument):cl.Qe();if(e.update){e.update.name;var r=Ac(t,e.update.name),i=new Sl({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new sl(e.map((function(t){return cu.B(t)})))}(e.updateMask);return new ml(r,i,o,n)}return new gl(r,i,n)}if(e.delete){var s=Ac(t,e.delete);return new Tl(s,n)}if(e.transform){var a=Ac(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Wa("REQUEST_TIME"===e.setToServerValue),n=new Jc;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Zc(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new el(i)}else"increment"in e?n=new rl(t,e.increment):Ba();var o=cu.B(e.fieldPath);return new al(o,n)}(t,e)}));return Wa(!0===n.exists),new bl(a,u)}if(e.verify){var c=Ac(t,e.verify);return new Cl(c,n)}return Ba()}function jc(t,e){return{documents:[Pc(t,e.path)]}}function Uc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pc(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return t instanceof jl?function(t){if("=="===t.op){if(yc(t.value))return{unaryFilter:{field:Bc(t.field),op:"IS_NAN"}};if(dc(t.value))return{unaryFilter:{field:Bc(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:Bc(t.field),op:(e=t.op,mc[e]),value:t.value}};var e}(t):Ba()}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Bc((e=t).field),direction:(n=e.dir,gc[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Oe||hu(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Vc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Vc(e.endAt)),n}function Vc(t){return{before:t.before,values:t.position}}function qc(t){var e=!!t.before,n=t.values||[];return new zl(n,e)}function Bc(t){return{fieldPath:t.N()}}function Wc(t){return cu.B(t.fieldPath)}function zc(t){return jl.create(Wc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ba()}}(t.fieldFilter.op),t.fieldFilter.value)}function Hc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Wc(t.unaryFilter.field);return jl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Wc(t.unaryFilter.field);return jl.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ba()}}function Qc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.N())})),{fieldPaths:e}}function Gc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yc=function(){this.je=void 0};function Kc(t,e,n){return t instanceof Jc?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Zc?tl(t,e):t instanceof el?nl(t,e):function(t,e){var n=Xc(t,e),r=il(n)+il(t.Be);return fc(n)&&fc(t.Be)?bc(r):wc(t.serializer,r)}(t,e)}function $c(t,e,n){return t instanceof Zc?tl(t,e):t instanceof el?nl(t,e):n}function Xc(t,e){return t instanceof rl?fc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Jc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e}(Yc),Zc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return y(e,t),e}(Yc);function tl(t,e){for(var n=ol(e),r=function(t){n.some((function(e){return rc(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var el=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return y(e,t),e}(Yc);function nl(t,e){for(var n=ol(e),r=function(t){n=n.filter((function(e){return!rc(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var rl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Be=n,r}return y(e,t),e}(Yc);function il(t){return cc(t.integerValue||t.doubleValue)}function ol(t){return pc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sl=function(){function t(t){this.fields=t,t.sort(cu.P)}return t.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return Ya(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),al=function(t,e){this.field=t,this.transform=e},ul=function(t,e){this.version=t,this.transformResults=e},cl=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Qe=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ll(t,e){return void 0!==t.updateTime?e instanceof kl&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof kl}var hl=function(){};function fl(t,e,n){return t instanceof gl?function(t,e,n){return new kl(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof ml?function(t,e,n){if(!ll(t.Ue,e))return new Pl(t.key,n.version);var r=_l(t,e);return new kl(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof bl?function(t,e,n){if(Wa(null!=n.transformResults),!ll(t.Ue,e))return new Pl(t.key,n.version);var r=wl(t,e),i=function(t,e,n){var r=[];Wa(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof kl&&(a=e.field(o.field)),r.push($c(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=El(t,r.data(),i);return new kl(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Al(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function pl(t,e,n,r){return t instanceof gl?function(t,e){if(!ll(t.Ue,e))return e;var n=vl(e);return new kl(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof ml?function(t,e){if(!ll(t.Ue,e))return e;var n=vl(e),r=_l(t,e);return new kl(t.key,n,r,{Ge:!0})}(t,e):t instanceof bl?function(t,e,n,r){if(!ll(t.Ue,e))return e;var i=wl(t,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof kl&&(c=n.field(a.field)),null===c&&r instanceof kl&&(c=r.field(a.field)),i.push(Kc(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=El(t,i.data(),o);return new kl(t.key,i.version,s,{Ge:!0})}(t,e,r,n):function(t,e){return ll(t.Ue,e)?new Al(t.key,ou.min()):e}(t,e)}function dl(t,e){return t instanceof bl?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof kl?e.field(o.field):void 0,a=Xc(o.transform,s||null);null!=a&&(n=null==n?(new Il).set(o.field,a):n.set(o.field,a))}return n?n.ze():null}(t,e):null}function yl(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ue.isEqual(e.Ue)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Le.isEqual(e.Le):2!==t.type||Ya(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Zc&&e instanceof Zc||t instanceof el&&e instanceof el?Ya(t.elements,e.elements,rc):t instanceof rl&&e instanceof rl?rc(t.Be,e.Be):t instanceof Jc&&e instanceof Jc}(t.transform,e.transform)}(t,e)})))}function vl(t){return t instanceof kl?t.version:ou.min()}var gl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ue=r,i.type=0,i}return y(e,t),e}(hl),ml=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Le=r,o.Ue=i,o.type=1,o}return y(e,t),e}(hl);function _l(t,e){return function(t,e){var n=new Il(e);return t.Le.fields.forEach((function(e){if(!e._()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.ze()}(t,e instanceof kl?e.data():Sl.empty())}var bl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ue=cl.exists(!0),r}return y(e,t),e}(hl);function wl(t,e){return e}function El(t,e,n){for(var r=new Il(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var Tl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=3,r}return y(e,t),e}(hl),Cl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=4,r}return y(e,t),e}(hl),Sl=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!vc(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return rc(this.proto,t.proto)},t}(),Il=function(){function t(t){void 0===t&&(t=Sl.empty()),this.He=t,this.Ye=new Map}return t.prototype.set=function(t,e){return this.Je(t,e),this},t.prototype.delete=function(t){return this.Je(t,null),this},t.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===nc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},t.prototype.ze=function(){var t=this.Xe(cu.k(),this.Ye);return null!=t?new Sl(t):this.He},t.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=vc(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.Xe(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function xl(t){var e=[];return Za(t.fields||{},(function(t,n){var r=new cu([t]);if(vc(n)){var i=xl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new sl(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Nl=function(t,e){this.key=t,this.version=e},kl=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return y(e,t),e.prototype.field=function(t){return this.Ze.field(t)},e.prototype.data=function(){return this.Ze},e.prototype.tn=function(){return this.Ze.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Nl),Al=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return y(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Nl),Pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Nl),Ol=function(){function t(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=s,this.endAt=a,this.sn=null,this.rn=null,this.startAt&&this.on(this.startAt),this.endAt&&this.on(this.endAt)}return t.hn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.sn){this.sn=[];var t=this.an(),e=this.un();if(null!==t&&null===e)t.O()||this.sn.push(new Yl(t)),this.sn.push(new Yl(cu.L(),"asc"));else{for(var n=!1,r=0,i=this.en;r<i.length;r++){var o=i[r];this.sn.push(o),o.field.O()&&(n=!0)}if(!n){var s=this.en.length>0?this.en[this.en.length-1].dir:"asc";this.sn.push(new Yl(cu.L(),s))}}}return this.sn},enumerable:!1,configurable:!0}),t.prototype.cn=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.en.slice(),n,this.limit,this.nn,this.startAt,this.endAt)},t.prototype.ln=function(e){var n=this.en.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype._n=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.fn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.dn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,e,this.endAt)},t.prototype.wn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,e)},t.prototype.Tn=function(e){return new t(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype.En=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.O())},t.prototype.In=function(){return!hu(this.limit)&&"F"===this.nn},t.prototype.mn=function(){return!hu(this.limit)&&"L"===this.nn},t.prototype.un=function(){return this.en.length>0?this.en[0].field:null},t.prototype.an=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof jl&&n.An())return n.field}return null},t.prototype.Rn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof jl&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Pn=function(){return mu(this.We())},t.prototype.Vn=function(){return null!==this.collectionGroup},t.prototype.We=function(){if(!this.rn)if("F"===this.nn)this.rn=yu(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new Yl(r.field,i))}var o=this.endAt?new zl(this.endAt.position,!this.endAt.before):null,s=this.startAt?new zl(this.startAt.position,!this.startAt.before):null;this.rn=yu(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.rn},t.prototype.on=function(t){},t}();function Rl(t,e){return gu(t.We(),e.We())&&t.nn===e.nn}function Dl(t){return vu(t.We())+"|lt:"+t.nn}function Ll(t){return"Query(target="+function(t){var e=t.path.N();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.N()+" "+e.op+" "+ac(e.value);var e})).join(", ")+"]"),hu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.N()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Hl(t.startAt)),t.endAt&&(e+=", endAt: "+Hl(t.endAt)),"Target("+e+")"}(t.We())+"; limitType="+t.nn+")"}function Ml(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.U(t.collectionGroup)&&t.path.D(n):lu.W(t.path)?t.path.isEqual(n):t.path.C(n)}(t,e)&&function(t,e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.O()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Ql(t.startAt,t.orderBy,e)||t.endAt&&Ql(t.endAt,t.orderBy,e))}(t,e)}function Fl(t){return function(e,n){for(var r=!1,i=0,o=t.orderBy;i<o.length;i++){var s=o[i],a=Kl(s,e,n);if(0!==a)return a;r=r||s.field.O()}return 0}}var jl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return y(e,t),e.create=function(t,n,r){if(t.O())return"in"===n?new Vl(t,r):new Ul(t,n,r);if(dc(r)){if("=="!==n)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(yc(r)){if("=="!==n)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new ql(t,r):"in"===n?new Bl(t,r):"array-contains-any"===n?new Wl(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&nc(this.value)===nc(e)&&this.gn(oc(e,this.value))},e.prototype.gn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return Ba()}},e.prototype.An=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e}((function(){})),Ul=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=lu.q(r.referenceValue),i}return y(e,t),e.prototype.matches=function(t){var e=lu.P(t.key,this.key);return this.gn(e)},e}(jl),Vl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return lu.q(t.referenceValue)})),r}return y(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(jl),ql=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return y(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return pc(e)&&ic(e.arrayValue,this.value)},e}(jl),Bl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return y(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ic(this.value.arrayValue,e)},e}(jl),Wl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return y(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!pc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ic(e.value.arrayValue,t)}))},e}(jl),zl=function(t,e){this.position=t,this.before=e};function Hl(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ac(t)})).join(",")}function Ql(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.O()?lu.P(lu.q(s.referenceValue),n.key):oc(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Gl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!rc(t.position[n],e.position[n]))return!1;return!0}var Yl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Kl(t,e,n){var r=t.field.O()?lu.P(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?oc(r,i):Ba()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ba()}}function $l(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xl=function(){function t(t,e,n,r){this.batchId=t,this.yn=e,this.baseMutations=n,this.mutations=r}return t.prototype.pn=function(t,e,n){for(var r=n.bn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=fl(o,e,r[i]))}return e},t.prototype.vn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=pl(i,e,e,this.yn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=pl(u,e,o,this.yn))}return e},t.prototype.Sn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.vn(r.key,t.get(r.key));i&&(n=n.nt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ju())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ya(this.mutations,t.mutations,(function(t,e){return yl(t,e)}))&&Ya(this.baseMutations,t.baseMutations,(function(t,e){return yl(t,e)}))},t}(),Jl=function(){function t(t,e,n,r){this.batch=t,this.Dn=e,this.bn=n,this.Cn=r}return t.from=function(e,n,r){Wa(e.mutations.length===r.length);for(var i=Mu,o=e.mutations,s=0;s<o.length;s++)i=i.nt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Zl=function(){function t(t){var e=this;this.Fn=null,this.Nn=null,this.result=void 0,this.error=void 0,this.$n=!1,this.kn=!1,t((function(t){e.$n=!0,e.result=t,e.Fn&&e.Fn(t)}),(function(t){e.$n=!0,e.error=t,e.Nn&&e.Nn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.kn&&Ba(),this.kn=!0,this.$n?this.error?this.xn(n,this.error):this.Mn(e,this.result):new t((function(t,i){r.Fn=function(n){r.Mn(e,n).next(t,i)},r.Nn=function(e){r.xn(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Mn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.xn=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Bn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.qn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Bn(r)},t}(),th=function(){function t(){this.Un=new eu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Qn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Wn},set:function(t){this.Wn=t},enumerable:!1,configurable:!0}),t.prototype.jn=function(t,e){this.Kn(),this.readTime=e,this.Un.set(t.key,t)},t.prototype.Gn=function(t,e){this.Kn(),e&&(this.readTime=e),this.Un.set(t,null)},t.prototype.zn=function(t,e){this.Kn();var n=this.Un.get(e);return void 0!==n?Zl.resolve(n):this.Hn(t,e)},t.prototype.getEntries=function(t,e){return this.Yn(t,e)},t.prototype.apply=function(t){return this.Kn(),this.Qn=!0,this.Jn(t)},t.prototype.Kn=function(){},t}(),eh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nh=function(){function t(){this.Xn=[]}return t.prototype.Zn=function(t){this.Xn.push(t)},t.prototype.ts=function(){this.Xn.forEach((function(t){return t()}))},t}(),rh=function(){function t(t,e,n){this.es=t,this.ns=e,this.ss=n}return t.prototype.rs=function(t,e){var n=this;return this.ns.os(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.es.zn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].vn(e,t);return t}))},t.prototype.as=function(t,e,n){var r=Ru();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].vn(t,e);r=r.nt(t,e)})),r},t.prototype.us=function(t,e){var n=this;return this.es.getEntries(t,e).next((function(e){return n.cs(t,e)}))},t.prototype.cs=function(t,e){var n=this;return this.ns.ls(t,e).next((function(r){var i=n.as(t,e,r),o=Ou();return i.forEach((function(t,e){e||(e=new Al(t,ou.min())),o=o.nt(t,e)})),o}))},t.prototype._s=function(t,e,n){return e.Pn()?this.fs(t,e.path):e.Vn()?this.ds(t,e,n):this.ws(t,e,n)},t.prototype.fs=function(t,e){return this.rs(t,new lu(e)).next((function(t){var e=Lu();return t instanceof kl&&(e=e.nt(t.key,t)),e}))},t.prototype.ds=function(t,e,n){var r=this,i=e.collectionGroup,o=Lu();return this.ss.Ts(t,i).next((function(s){return Zl.forEach(s,(function(s){var a=e.Tn(s.child(i));return r.ws(t,a,n).next((function(t){t.forEach((function(t,e){o=o.nt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.ws=function(t,e,n){var r,i,o=this;return this.es._s(t,e,n).next((function(n){return r=n,o.ns.Es(t,e)})).next((function(e){return i=e,o.Is(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=pl(u,l,l,o.yn);r=h instanceof kl?r.nt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Ml(e,n)||(r=r.remove(t))})),r}))},t.prototype.Is=function(t,e,n){for(var r=ju(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ml&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.es.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof kl&&(c=c.nt(t,e))})),c}))},t}(),ih=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ms=n,this.As=r}return t.Rs=function(e,n){for(var r=ju(),i=ju(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),oh=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Ps=function(t){return n.Vs(t)},this.gs=function(t){return e.ys(t)})}return t.prototype.Vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.gs&&this.gs(t),t},t}();oh.ps=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sh=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ah=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.bs=t,this.vs=e,this.Ss=n,this.Ds=r,this.Cs=i,this.Fs=0,this.Ns=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fs=0},t.prototype.ks=function(){this.Fs=this.Cs},t.prototype.xs=function(t){var e=this;this.cancel();var n=Math.floor(this.Fs+this.Ms()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&Ua("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ns=this.bs.Os(this.vs,i,(function(){return e.$s=Date.now(),t()})),this.Fs*=this.Ds,this.Fs<this.Ss&&(this.Fs=this.Ss),this.Fs>this.Cs&&(this.Fs=this.Cs)},t.prototype.Ls=function(){null!==this.Ns&&(this.Ns.Bs(),this.Ns=null)},t.prototype.cancel=function(){null!==this.Ns&&(this.Ns.cancel(),this.Ns=null)},t.prototype.Ms=function(){return(Math.random()-.5)*this.Fs},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=lh(e)),e=ch(t.get(n),e);return lh(e)}function ch(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function lh(t){return t+""}function hh(t){var e=t.length;if(Wa(e>=2),2===e)return Wa(""===t.charAt(0)&&""===t.charAt(1)),au.k();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Ba(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Ba()}o=s+2}return new au(r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fh=function(){function t(){this.qs=new ph}return t.prototype.Us=function(t,e){return this.qs.add(e),Zl.resolve()},t.prototype.Ts=function(t,e){return Zl.resolve(this.qs.getEntries(e))},t}(),ph=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new ku(au.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ku(au.P)).F()},t}(),dh=function(){function t(){this.Qs=new ph}return t.prototype.Us=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.S(),i=e.p();t.Zn((function(){n.Qs.add(e)}));var o={collectionId:r,parent:uh(i)};return yh(t).put(o)}return Zl.resolve()},t.prototype.Ts=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ka(e),""],!1,!0);return yh(t).Ws(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(hh(o.parent))}return n}))},t}();function yh(t){return jh.js(t,lf.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vh=function(t){this.Ks=t};function gh(t,e){if(e.document)return function(t,e,n){var r=Ac(t,e.name),i=Ic(e.updateTime),o=new Sl({mapValue:{fields:e.fields}});return new kl(r,i,o,{hasCommittedMutations:!!n})}(t.Ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=lu.j(e.noDocument.path),r=Eh(e.noDocument.readTime);return new Al(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=lu.j(e.unknownDocument.path),o=Eh(e.unknownDocument.version);return new Pl(i,o)}return Ba()}function mh(t,e,n){var r=_h(n),i=e.key.path.p().F();if(e instanceof kl){var o=function(t,e){return{name:kc(t,e.key),fields:e.tn().mapValue.fields,updateTime:Tc(t,e.version.A())}}(t.Ks,e),s=e.hasCommittedMutations;return new of(null,null,o,s,r,i)}if(e instanceof Al){var a=e.key.path.F(),u=wh(e.version),c=e.hasCommittedMutations;return new of(null,new nf(a,u),null,c,r,i)}if(e instanceof Pl){var l=e.key.path.F(),h=wh(e.version);return new of(new rf(l,h),null,null,!0,r,i)}return Ba()}function _h(t){var e=t.A();return[e.seconds,e.nanoseconds]}function bh(t){var e=new iu(t[0],t[1]);return ou.I(e)}function wh(t){var e=t.A();return new Xh(e.seconds,e.nanoseconds)}function Eh(t){var e=new iu(t.seconds,t.nanoseconds);return ou.I(e)}function Th(t,e){var n=(e.baseMutations||[]).map((function(e){return Fc(t.Ks,e)})),r=e.mutations.map((function(e){return Fc(t.Ks,e)})),i=iu.fromMillis(e.localWriteTimeMs);return new Xl(e.batchId,i,n,r)}function Ch(t){var e,n=Eh(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?Eh(t.lastLimboFreeSnapshotVersion):ou.min();return e=void 0!==t.query.documents?function(t){Wa(1===t.documents.length);var e=t.documents[0];return Ol.hn(Oc(e)).We()}(t.query):function(t){var e=Oc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wa(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Hc(e)]:void 0!==e.fieldFilter?[zc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Ba():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Yl(Wc((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u=null;n.limit&&(u=function(t){var e;return hu(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=qc(n.startAt));var l=null;return n.endAt&&(l=qc(n.endAt)),new Ol(e,i,a,s,u,"F",c,l).We()}(t.query),new Eu(e,t.targetId,0,t.lastListenSequenceNumber,n,r,_u.fromBase64String(t.resumeToken))}function Sh(t,e){var n,r=wh(e.X),i=wh(e.lastLimboFreeSnapshotVersion);n=mu(e.target)?jc(t.Ks,e.target):Uc(t.Ks,e.target);var o=e.resumeToken.toBase64();return new af(e.targetId,vu(e.target),r,o,e.sequenceNumber,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ih=function(){function t(t,e){this.serializer=t,this.ss=e}return t.prototype.jn=function(t,e,n){return Nh(t).put(kh(e),n)},t.prototype.Gn=function(t,e){var n=Nh(t),r=kh(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Gs(t,r)}))},t.prototype.zn=function(t,e){var n=this;return Nh(t).get(kh(e)).next((function(t){return n.zs(t)}))},t.prototype.Hs=function(t,e){var n=this;return Nh(t).get(kh(e)).next((function(t){var e=n.zs(t);return e?{Ys:e,size:Ah(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Ru();return this.Js(t,e,(function(t,e){var i=n.zs(e);r=r.nt(t,i)})).next((function(){return r}))},t.prototype.Xs=function(t,e){var n=this,r=Ru(),i=new Iu(lu.P);return this.Js(t,e,(function(t,e){var o=n.zs(e);o?(r=r.nt(t,o),i=i.nt(t,Ah(e))):(r=r.nt(t,null),i=i.nt(t,0))})).next((function(){return{Zs:r,ti:i}}))},t.prototype.Js=function(t,e,n){if(e._())return Zl.resolve();var r=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),i=e.at(),o=i.dt();return Nh(t).ei({range:r},(function(t,e,r){for(var s=lu.j(t);o&&lu.P(o,s)<0;)n(o,null),o=i.dt();o&&o.isEqual(s)&&(n(o,e),o=i.wt()?i.dt():null),o?r.ni(o.path.F()):r.done()})).next((function(){for(;o;)n(o,null),o=i.wt()?i.dt():null}))},t.prototype._s=function(t,e,n){var r=this,i=Lu(),o=e.path.length+1,s={};if(n.isEqual(ou.min())){var a=e.path.F();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.F(),c=_h(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=of.collectionReadTimeIndex}return Nh(t).ei(s,(function(t,n,s){if(t.length===o){var a=gh(r.serializer,n);e.path.D(a.key.path)?a instanceof kl&&Ml(e,a)&&(i=i.nt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.si=function(t,e){var n=this,r=Ou(),i=_h(e),o=Nh(t),s=IDBKeyRange.lowerBound(i,!0);return o.ei({index:of.readTimeIndex,range:s},(function(t,e){var o=gh(n.serializer,e);r=r.nt(o.key,o),i=e.readTime})).next((function(){return{ii:r,readTime:bh(i)}}))},t.prototype.ri=function(t){var e=Nh(t),n=ou.min();return e.ei({index:of.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=bh(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.oi=function(e){return new t.hi(this,!!e&&e.ai)},t.prototype.ui=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return xh(t).get(sf.key).next((function(t){return Wa(!!t),t}))},t.prototype.Gs=function(t,e){return xh(t).put(sf.key,e)},t.prototype.zs=function(t){if(t){var e=gh(this.serializer,t);return e instanceof Al&&e.version.isEqual(ou.min())?null:e}return null},t}();function xh(t){return jh.js(t,sf.store)}function Nh(t){return jh.js(t,of.store)}function kh(t){return t.path.F()}function Ah(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ba();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ih.hi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ci=e,r.ai=n,r.li=new eu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return y(e,t),e.prototype.Jn=function(t){var e=this,n=[],r=0,i=new ku((function(t,e){return Ga(t.N(),e.N())}));return this.Un.forEach((function(o,s){var a=e.li.get(o);if(s){var u=mh(e.ci.serializer,s,e.readTime);i=i.add(o.path.p());var c=Ah(u);r+=c-a,n.push(e.ci.jn(t,o,u))}else if(r-=a,e.ai){var l=mh(e.ci.serializer,new Al(o,ou.min()),e.readTime);n.push(e.ci.jn(t,o,l))}else n.push(e.ci.Gn(t,o))})),i.forEach((function(r){n.push(e.ci.ss.Us(t,r))})),n.push(this.ci.updateMetadata(t,r)),Zl.Bn(n)},e.prototype.Hn=function(t,e){var n=this;return this.ci.Hs(t,e).next((function(t){return null===t?(n.li.set(e,0),null):(n.li.set(e,t.size),t.Ys)}))},e.prototype.Yn=function(t,e){var n=this;return this.ci.Xs(t,e).next((function(t){var e=t.Zs;return t.ti.forEach((function(t,e){n.li.set(t,e)})),e}))},e}(th);var Ph=function(){function t(t){this._i=t}return t.prototype.next=function(){return this._i+=2,this._i},t.fi=function(){return new t(0)},t.di=function(){return new t(-1)},t}(),Oh=function(){function t(t,e){this.wi=t,this.serializer=e}return t.prototype.Ti=function(t){var e=this;return this.Ei(t).next((function(n){var r=new Ph(n.highestTargetId);return n.highestTargetId=r.next(),e.Ii(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.mi=function(t){return this.Ei(t).next((function(t){return ou.I(new iu(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ai=function(t){return this.Ei(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Ri=function(t,e,n){var r=this;return this.Ei(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ii(t,i)}))},t.prototype.Pi=function(t,e){var n=this;return this.Vi(t,e).next((function(){return n.Ei(t).next((function(r){return r.targetCount+=1,n.gi(e,r),n.Ii(t,r)}))}))},t.prototype.yi=function(t,e){return this.Vi(t,e)},t.prototype.pi=function(t,e){var n=this;return this.bi(t,e.targetId).next((function(){return Rh(t).delete(e.targetId)})).next((function(){return n.Ei(t)})).next((function(e){return Wa(e.targetCount>0),e.targetCount-=1,n.Ii(t,e)}))},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return Rh(t).ei((function(s,a){var u=Ch(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.pi(t,u)))})).next((function(){return Zl.Bn(o)})).next((function(){return i}))},t.prototype.pe=function(t,e){return Rh(t).ei((function(t,n){var r=Ch(n);e(r)}))},t.prototype.Ei=function(t){return Dh(t).get(cf.key).next((function(t){return Wa(null!==t),t}))},t.prototype.Ii=function(t,e){return Dh(t).put(cf.key,e)},t.prototype.Vi=function(t,e){return Rh(t).put(Sh(this.serializer,e))},t.prototype.gi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Si=function(t){return this.Ei(t).next((function(t){return t.targetCount}))},t.prototype.Di=function(t,e){var n=vu(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Rh(t).ei({range:r,index:af.queryTargetsIndexName},(function(t,n,r){var o=Ch(n);gu(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Ci=function(t,e,n){var r=this,i=[],o=Lh(t);return e.forEach((function(e){var s=uh(e.path);i.push(o.put(new uf(n,s))),i.push(r.wi.Fi(t,n,e))})),Zl.Bn(i)},t.prototype.Ni=function(t,e,n){var r=this,i=Lh(t);return Zl.forEach(e,(function(e){var o=uh(e.path);return Zl.Bn([i.delete([n,o]),r.wi.$i(t,n,e)])}))},t.prototype.bi=function(t,e){var n=Lh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ki=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Lh(t),i=ju();return r.ei({range:n,xi:!0},(function(t,e,n){var r=hh(t[1]),o=new lu(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=uh(e.path),r=IDBKeyRange.bound([n],[Ka(n)],!1,!0),i=0;return Lh(t).ei({index:uf.documentTargetsIndex,xi:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return Rh(t).get(e).next((function(t){return t?Ch(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){return jh.js(t,af.store)}function Dh(t){return jh.js(t,cf.store)}function Lh(t){return jh.js(t,uf.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mh="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Oi=e,r.Li=n,r}return y(e,t),e}(nh),jh=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.bs=o,this.window=s,this.document=a,this.Bi=c,this.qi=l,this.Ui=null,this.Qi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Wi=null,this.inForeground=!1,this.ji=null,this.Ki=null,this.Gi=Number.NEGATIVE_INFINITY,this.zi=function(t){return Promise.resolve()},!t.Hi())throw new ru(nu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.wi=new qh(this,i),this.Yi=n+t.Ji,this.serializer=new vh(u),this.Xi=new Oh(this.wi,this.serializer),this.ss=new dh,this.es=new Ih(this.serializer,this.ss),this.window&&this.window.localStorage?this.Zi=this.window.localStorage:(this.Zi=null,!1===l&&Va("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.js=function(t,e){if(t instanceof Fh)return df.js(t.Oi,e);throw Ba()},t.prototype.start=function(){var t=this;return df.tr(this.Yi,Kh,new $h(this.serializer)).then((function(e){return t.er=e,t.nr()})).then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ru(nu.FAILED_PRECONDITION,Mh);return t.sr(),t.ir(),t.rr(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Xi.Ai(e)}))})).then((function(e){t.Ui=new oh(e,t.Bi)})).then((function(){t.Qi=!0})).catch((function(e){return t.er&&t.er.close(),Promise.reject(e)}))},t.prototype.or=function(t){var e=this;return this.zi=function(n){return g(e,void 0,void 0,(function(){return m(this,(function(e){return this.hr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ar=function(t){var e=this;this.er.ur((function(n){return g(e,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.cr=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.bs.lr((function(){return g(e,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.hr?[4,this.nr()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.nr=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Vh(e).put(new ff(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t._r(e).next((function(e){e||(t.isPrimary=!1,t.bs.dr((function(){return t.zi(!1)})))}))})).next((function(){return t.wr(e)})).next((function(n){return t.isPrimary&&!n?t.Tr(e).next((function(){return!1})):!!n&&t.Er(e).next((function(){return!0}))}))})).catch((function(e){if(gf(e))return Ua("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Ua("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.bs.dr((function(){return t.zi(e)})),t.isPrimary=e}))},t.prototype._r=function(t){var e=this;return Uh(t).get(Jh.key).next((function(t){return Zl.resolve(e.Ir(t))}))},t.prototype.mr=function(t){return Vh(t).delete(this.clientId)},t.prototype.Ar=function(){return g(this,void 0,void 0,(function(){var e,n,r,i,o=this;return m(this,(function(s){switch(s.label){case 0:return!this.isPrimary||this.Rr(this.Gi,18e5)?[3,2]:(this.Gi=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.js(e,ff.store);return n.Ws().next((function(t){var e=o.Pr(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Zl.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=s.sent(),this.Zi)for(n=0,r=e;n<r.length;n++)i=r[n],this.Zi.removeItem(this.Vr(i.clientId));s.label=2;case 2:return[2]}}))}))},t.prototype.rr=function(){var t=this;this.Ki=this.bs.Os("client_metadata_refresh",4e3,(function(){return t.nr().then((function(){return t.Ar()})).then((function(){return t.rr()}))}))},t.prototype.Ir=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.wr=function(t){var e=this;return this.qi?Zl.resolve(!0):Uh(t).get(Jh.key).next((function(n){if(null!==n&&e.Rr(n.leaseTimestampMs,5e3)&&!e.gr(n.ownerId)){if(e.Ir(n)&&e.networkEnabled)return!0;if(!e.Ir(n)){if(!n.allowTabSynchronization)throw new ru(nu.FAILED_PRECONDITION,Mh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Vh(t).Ws().next((function(t){return void 0===e.Pr(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Ua("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.yr=function(){return g(this,void 0,void 0,(function(){var t=this;return m(this,(function(e){switch(e.label){case 0:return this.Qi=!1,this.pr(),this.Ki&&(this.Ki.cancel(),this.Ki=null),this.br(),this.vr(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.Tr(e).next((function(){return t.mr(e)}))})).catch((function(t){Ua("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.er.close(),this.Sr(),[2]}}))}))},t.prototype.Pr=function(t,e){var n=this;return t.filter((function(t){return n.Rr(t.updateTimeMs,e)&&!n.gr(t.clientId)}))},t.prototype.Dr=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Vh(e).Ws().next((function(e){return t.Pr(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return g(this,void 0,void 0,(function(){var n;return m(this,(function(r){switch(r.label){case 0:return t.Hi()?(n=e+t.Ji,[4,df.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.Cr=function(t){return Wh.Fr(t,this.serializer,this.ss,this.wi)},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.kr=function(){return this.ss},t.prototype.runTransaction=function(t,e,n){var r=this;Ua("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.er.runTransaction(o,pf,(function(o){return i=new Fh(o,r.Ui?r.Ui.next():oh.ps),"readwrite-primary"===e?r._r(i).next((function(t){return!!t||r.wr(i)})).next((function(e){if(!e)throw Va("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.bs.dr((function(){return r.zi(!1)})),new ru(nu.FAILED_PRECONDITION,eh);return n(i)})).next((function(t){return r.Er(i).next((function(){return t}))})):r.xr(i).next((function(){return n(i)}))})).then((function(t){return i.ts(),t}))},t.prototype.xr=function(t){var e=this;return Uh(t).get(Jh.key).next((function(t){if(null!==t&&e.Rr(t.leaseTimestampMs,5e3)&&!e.gr(t.ownerId)&&!e.Ir(t)&&!(e.qi||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ru(nu.FAILED_PRECONDITION,Mh)}))},t.prototype.Er=function(t){var e=new Jh(this.clientId,this.allowTabSynchronization,Date.now());return Uh(t).put(Jh.key,e)},t.Hi=function(){return df.Hi()},t.Mr=function(t){var e=t.s.projectId;return t.s.i||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.Tr=function(t){var e=this,n=Uh(t);return n.get(Jh.key).next((function(t){return e.Ir(t)?(Ua("IndexedDbPersistence","Releasing primary lease."),n.delete(Jh.key)):Zl.resolve()}))},t.prototype.Rr=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Va("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.sr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ji=function(){t.bs.lr((function(){return t.inForeground="visible"===t.document.visibilityState,t.nr()}))},this.document.addEventListener("visibilitychange",this.ji),this.inForeground="visible"===this.document.visibilityState)},t.prototype.br=function(){this.ji&&(this.document.removeEventListener("visibilitychange",this.ji),this.ji=null)},t.prototype.ir=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Wi=function(){e.pr(),e.bs.lr((function(){return e.yr()}))},this.window.addEventListener("unload",this.Wi))},t.prototype.vr=function(){this.Wi&&(this.window.removeEventListener("unload",this.Wi),this.Wi=null)},t.prototype.gr=function(t){var e;try{var n=null!==(null===(e=this.Zi)||void 0===e?void 0:e.getItem(this.Vr(t)));return Ua("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Va("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.pr=function(){if(this.Zi)try{this.Zi.setItem(this.Vr(this.clientId),String(Date.now()))}catch(t){Va("Failed to set zombie client id.",t)}},t.prototype.Sr=function(){if(this.Zi)try{this.Zi.removeItem(this.Vr(this.clientId))}catch(t){}},t.prototype.Vr=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Uh(t){return jh.js(t,Jh.store)}function Vh(t){return jh.js(t,ff.store)}jh.Ji="main";var qh=function(){function t(t,e){this.db=t,this.Or=new Of(this,e)}return t.prototype.Lr=function(t){var e=this.Br(t);return this.db.Nr().Si(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Br=function(t){var e=0;return this.qr(t,(function(t){e++})).next((function(){return e}))},t.prototype.pe=function(t,e){return this.db.Nr().pe(t,e)},t.prototype.qr=function(t,e){return this.Ur(t,(function(t,n){return e(n)}))},t.prototype.Fi=function(t,e,n){return Bh(t,n)},t.prototype.$i=function(t,e,n){return Bh(t,n)},t.prototype.vi=function(t,e,n){return this.db.Nr().vi(t,e,n)},t.prototype.Qr=function(t,e){return Bh(t,e)},t.prototype.Wr=function(t,e){return function(t,e){var n=!1;return Yh(t).jr((function(r){return zh(t,r,e).next((function(t){return t&&(n=!0),Zl.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Kr=function(t,e){var n=this,r=this.db.$r().oi(),i=[],o=0;return this.Ur(t,(function(s,a){if(a<=e){var u=n.Wr(t,s).next((function(e){if(!e)return o++,r.zn(t,s).next((function(){return r.Gn(s),Lh(t).delete([0,uh(s.path)])}))}));i.push(u)}})).next((function(){return Zl.Bn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Z(t.Li);return this.db.Nr().yi(t,n)},t.prototype.Gr=function(t,e){return Bh(t,e)},t.prototype.Ur=function(t,e){var n,r=Lh(t),i=oh.ps;return r.ei({index:uf.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),a=r.sequenceNumber;0===o?(i!==oh.ps&&e(new lu(hh(n)),i),i=a,n=s):i=oh.ps})).next((function(){i!==oh.ps&&e(new lu(hh(n)),i)}))},t.prototype.zr=function(t){return this.db.$r().ui(t)},t}();function Bh(t,e){return Lh(t).put(function(t,e){return new uf(0,uh(t.path),e)}(e,t.Li))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wh=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ss=n,this.wi=r,this.Hr={}}return t.Fr=function(e,n,r,i){return Wa(""!==e.uid),new t(e.Yr()?e.uid:"",n,r,i)},t.prototype.Jr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qh(t).ei({index:tf.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Xr=function(t,e,n,r){var i=this,o=Gh(t),s=Qh(t);return s.add({}).next((function(a){Wa("number"==typeof a);for(var u=new Xl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Mc(t.Ks,e)})),i=n.mutations.map((function(e){return Mc(t.Ks,e)}));return new tf(e,n.batchId,n.yn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new ku((function(t,e){return Ga(t.N(),e.N())})),f=0,p=r;f<p.length;f++){var d=p[f],y=ef.key(i.userId,d.key.path,a);h=h.add(d.key.path.p()),l.push(s.put(c)),l.push(o.put(y,ef.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ss.Us(t,e))})),t.Zn((function(){i.Hr[a]=u.keys()})),Zl.Bn(l).next((function(){return u}))}))},t.prototype.Zr=function(t,e){var n=this;return Qh(t).get(e).next((function(t){return t?(Wa(t.userId===n.userId),Th(n.serializer,t)):null}))},t.prototype.to=function(t,e){var n=this;return this.Hr[e]?Zl.resolve(this.Hr[e]):this.Zr(t,e).next((function(t){if(t){var r=t.keys();return n.Hr[e]=r,r}return null}))},t.prototype.eo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Qh(t).ei({index:tf.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Wa(e.batchId>=r),o=Th(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.no=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Qh(t).ei({index:tf.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.so=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qh(t).Ws(tf.userMutationsIndex,n).next((function(t){return t.map((function(t){return Th(e.serializer,t)}))}))},t.prototype.os=function(t,e){var n=this,r=ef.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gh(t).ei({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=hh(u);if(a===n.userId&&e.path.isEqual(l))return Qh(t).get(c).next((function(t){if(!t)throw Ba();Wa(t.userId===n.userId),o.push(Th(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.ls=function(t,e){var n=this,r=new ku(Ga),i=[];return e.forEach((function(e){var o=ef.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Gh(t).ei({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=hh(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Zl.Bn(i).next((function(){return n.io(t,r)}))},t.prototype.Es=function(t,e){var n=this,r=e.path,i=r.length+1,o=ef.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ku(Ga);return Gh(t).ei({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=hh(u);s===n.userId&&r.D(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.io(t,a)}))},t.prototype.io=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Qh(t).get(e).next((function(t){if(null===t)throw Ba();Wa(t.userId===n.userId),r.push(Th(n.serializer,t))})))})),Zl.Bn(i).next((function(){return r}))},t.prototype.ro=function(t,e){var n=this;return Hh(t.Oi,this.userId,e).next((function(r){return t.Zn((function(){n.oo(e.batchId)})),Zl.forEach(r,(function(e){return n.wi.Qr(t,e)}))}))},t.prototype.oo=function(t){delete this.Hr[t]},t.prototype.ho=function(t){var e=this;return this.Jr(t).next((function(n){if(!n)return Zl.resolve();var r=IDBKeyRange.lowerBound(ef.prefixForUser(e.userId)),i=[];return Gh(t).ei({range:r},(function(t,n,r){if(t[0]===e.userId){var o=hh(t[1]);i.push(o)}else r.done()})).next((function(){Wa(0===i.length)}))}))},t.prototype.Mi=function(t,e){return zh(t,this.userId,e)},t.prototype.ao=function(t){var e=this;return Yh(t).get(this.userId).next((function(t){return t||new Zh(e.userId,-1,"")}))},t}();function zh(t,e,n){var r=ef.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Gh(t).ei({range:o,xi:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function Hh(t,e,n){var r=t.store(tf.store),i=t.store(ef.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.ei({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Wa(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=ef.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Zl.Bn(o).next((function(){return c}))}function Qh(t){return jh.js(t,tf.store)}function Gh(t){return jh.js(t,ef.store)}function Yh(t){return jh.js(t,Zh.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kh=10,$h=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Wa(n<r&&n>=0&&r<=Kh);var o=new mf(e);n<1&&r>=1&&(function(t){t.createObjectStore(Jh.store)}(t),function(t){t.createObjectStore(Zh.store,{keyPath:Zh.keyPath}),t.createObjectStore(tf.store,{keyPath:tf.keyPath,autoIncrement:!0}).createIndex(tf.userMutationsIndex,tf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ef.store)}(t),hf(t),function(t){t.createObjectStore(of.store)}(t));var s=Zl.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(uf.store),t.deleteObjectStore(af.store),t.deleteObjectStore(cf.store)}(t),hf(t)),s=s.next((function(){return function(t){var e=t.store(cf.store),n=new cf(0,0,ou.min().A(),0);return e.put(cf.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(tf.store).Ws().next((function(n){t.deleteObjectStore(tf.store),t.createObjectStore(tf.store,{keyPath:tf.keyPath,autoIncrement:!0}).createIndex(tf.userMutationsIndex,tf.userMutationsKeyPath,{unique:!0});var r=e.store(tf.store),i=n.map((function(t){return r.put(t)}));return Zl.Bn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(ff.store,{keyPath:ff.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(sf.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(of.store);e.createIndex(of.readTimeIndex,of.readTimeIndexPath,{unique:!1}),e.createIndex(of.collectionReadTimeIndex,of.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(of.store).ei((function(t,n){e+=Ah(n)})).next((function(){var n=new sf(e);return t.store(sf.store).put(sf.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Zh.store),r=t.store(tf.store);return n.Ws().next((function(n){return Zl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ws(tf.userMutationsIndex,i).next((function(r){return Zl.forEach(r,(function(r){Wa(r.userId===n.userId);var i=Th(e.serializer,r);return Hh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(uf.store),n=t.store(of.store);return t.store(cf.store).get(cf.key).next((function(t){var r=[];return n.ei((function(n,i){var o=new au(n),s=function(t){return[0,uh(t)]}(o);r.push(e.get(s).next((function(n){return n?Zl.resolve():function(n){return e.put(new uf(0,uh(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Zl.Bn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(lf.store,{keyPath:lf.keyPath});var n=e.store(lf.store),r=new ph,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:uh(i)})}};return e.store(of.store).ei({xi:!0},(function(t,e){var n=new au(t);return i(n.p())})).next((function(){return e.store(ef.store).ei({xi:!0},(function(t,e){t[0];var n=t[1],r=(t[2],hh(n));return i(r.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(af.store);return n.ei((function(t,r){var i=Ch(r),o=Sh(e.serializer,i);return n.put(o)}))},t}(),Xh=function(t,e){this.seconds=t,this.nanoseconds=e},Jh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Jh.store="owner",Jh.key="owner";var Zh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Zh.store="mutationQueues",Zh.keyPath="userId";var tf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};tf.store="mutations",tf.keyPath="batchId",tf.userMutationsIndex="userMutationsIndex",tf.userMutationsKeyPath=["userId","batchId"];var ef=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,uh(e)]},t.key=function(t,e,n){return[t,uh(e),n]},t}();ef.store="documentMutations",ef.PLACEHOLDER=new ef;var nf=function(t,e){this.path=t,this.readTime=e},rf=function(t,e){this.path=t,this.version=e},of=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};of.store="remoteDocuments",of.readTimeIndex="readTimeIndex",of.readTimeIndexPath="readTime",of.collectionReadTimeIndex="collectionReadTimeIndex",of.collectionReadTimeIndexPath=["parentPath","readTime"];var sf=function(t){this.byteSize=t};sf.store="remoteDocumentGlobal",sf.key="remoteDocumentGlobalKey";var af=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};af.store="targets",af.keyPath="targetId",af.queryTargetsIndexName="queryTargetsIndex",af.queryTargetsKeyPath=["canonicalId","targetId"];var uf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};uf.store="targetDocuments",uf.keyPath=["targetId","path"],uf.documentTargetsIndex="documentTargetsIndex",uf.documentTargetsKeyPath=["path","targetId"];var cf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};cf.key="targetGlobalKey",cf.store="targetGlobal";var lf=function(t,e){this.collectionId=t,this.parent=e};function hf(t){t.createObjectStore(uf.store,{keyPath:uf.keyPath}).createIndex(uf.documentTargetsIndex,uf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(af.store,{keyPath:af.keyPath}).createIndex(af.queryTargetsIndexName,af.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(cf.store)}lf.store="collectionParents",lf.keyPath=["collectionId","parent"];var ff=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ff.store="clientMetadata",ff.keyPath="clientId";var pf=E(E(E([Zh.store,tf.store,ef.store,of.store,af.store,Jh.store,cf.store,uf.store],[ff.store]),[sf.store]),[lf.store]),df=function(){function t(e){this.db=e,12.2===t.uo(R())&&Va("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.tr=function(e,n,r){return Ua("SimpleDb","Opening database:",e),new Zl((function(i,o){var s=indexedDB.open(e,n);s.onsuccess=function(e){var n=e.target.result;i(new t(n))},s.onblocked=function(){o(new ru(nu.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new ru(nu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},s.onupgradeneeded=function(t){Ua("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,s.transaction,t.oldVersion,Kh).next((function(){Ua("SimpleDb","Database upgrade to version "+Kh+" complete")}))}})).On()},t.delete=function(t){return Ua("SimpleDb","Removing database:",t),bf(window.indexedDB.deleteDatabase(t)).On()},t.Hi=function(){if("undefined"==typeof indexedDB)return!1;if(t.co())return!0;var e=R(),n=t.uo(e),r=0<n&&n<10,i=t.lo(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.co=function(){var t;return void 0!==r&&"YES"===(null===(t=r.env)||void 0===t?void 0:t._o)},t.js=function(t,e){return t.store(e)},t.uo=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.lo=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.ur=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return g(this,void 0,void 0,(function(){var r,i,o,s,a;return m(this,(function(u){switch(u.label){case 0:r="readonly"===t,i=0,o=function(){var t,o,a,u,c;return m(this,(function(l){switch(l.label){case 0:++i,t=mf.open(s.db,r?"readonly":"readwrite",e),l.label=1;case 1:return l.trys.push([1,3,,4]),o=n(t).catch((function(e){return t.abort(e),Zl.reject(e)})).On(),a={},o.catch((function(){})),[4,t.fo];case 2:return[2,(a.value=(l.sent(),o),a)];case 3:return u=l.sent(),c="FirebaseError"!==u.name&&i<3,Ua("SimpleDb","Transaction failed with error: %s. Retrying: %s.",u.message,c),c?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},s=this,u.label=1;case 1:return[5,o()];case 2:if("object"==typeof(a=u.sent()))return[2,a.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),yf=function(){function t(t){this.do=t,this.wo=!1,this.To=null}return Object.defineProperty(t.prototype,"$n",{get:function(){return this.wo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Eo",{get:function(){return this.To},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.do=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.wo=!0},t.prototype.ni=function(t){this.To=t},t.prototype.delete=function(){return bf(this.do.delete())},t}(),vf=function(t){function e(e){var n=this;return(n=t.call(this,nu.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return y(e,t),e}(ru);function gf(t){return"IndexedDbTransactionError"===t.name}var mf=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.Io=new sh,this.transaction.oncomplete=function(){e.Io.resolve()},this.transaction.onabort=function(){t.error?e.Io.reject(new vf(t.error)):e.Io.resolve()},this.transaction.onerror=function(t){var n=Ef(t.target.error);e.Io.reject(new vf(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"fo",{get:function(){return this.Io.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Io.reject(t),this.aborted||(Ua("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new _f(e)},t}(),_f=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Ua("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ua("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),bf(n)},t.prototype.add=function(t){return Ua("SimpleDb","ADD",this.store.name,t,t),bf(this.store.add(t))},t.prototype.get=function(t){var e=this;return bf(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Ua("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Ua("SimpleDb","DELETE",this.store.name,t),bf(this.store.delete(t))},t.prototype.count=function(){return Ua("SimpleDb","COUNT",this.store.name),bf(this.store.count())},t.prototype.Ws=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.mo(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ao=function(t,e){Ua("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.xi=!1;var r=this.cursor(n);return this.mo(r,(function(t,e,n){return n.delete()}))},t.prototype.ei=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.mo(r,e)},t.prototype.jr=function(t){var e=this.cursor({});return new Zl((function(n,r){e.onerror=function(t){var e=Ef(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.mo=function(t,e){var n=[];return new Zl((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new yf(i),s=e(i.primaryKey,i.value,o);if(s instanceof Zl){var a=s.catch((function(t){return o.done(),Zl.reject(t)}));n.push(a)}o.$n?r():null===o.Eo?i.continue():i.continue(o.Eo)}else r()}})).next((function(){return Zl.Bn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.xi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function bf(t){return new Zl((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Ef(t.target.error);n(e)}}))}var wf=!1;function Ef(t){var e=df.uo(R());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ru("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return wf||(wf=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(){return"undefined"!=typeof window?window:null}var Cf=function(){function t(t,e,n,r,i){this.Ro=t,this.vs=e,this.Po=n,this.op=r,this.Vo=i,this.yo=new sh,this.then=this.yo.promise.then.bind(this.yo.promise),this.yo.promise.catch((function(t){}))}return t.po=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.bo=setTimeout((function(){return e.vo()}),t)},t.prototype.Bs=function(){return this.vo()},t.prototype.cancel=function(t){null!==this.bo&&(this.clearTimeout(),this.yo.reject(new ru(nu.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.vo=function(){var t=this;this.Ro.lr((function(){return null!==t.bo?(t.clearTimeout(),t.op().then((function(e){return t.yo.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.bo&&(this.Vo(this),clearTimeout(this.bo),this.bo=null)},t}(),Sf=function(){function t(){var t=this;this.So=Promise.resolve(),this.Do=[],this.Co=!1,this.Fo=[],this.No=null,this.$o=!1,this.ko=[],this.xo=new ah(this,"async_queue_retry"),this.Mo=function(){return t.xo.Ls()};var e=Tf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Mo)}return Object.defineProperty(t.prototype,"Oo",{get:function(){return this.Co},enumerable:!1,configurable:!0}),t.prototype.lr=function(t){this.enqueue(t)},t.prototype.Lo=function(t){this.Bo(),this.qo(t)},t.prototype.Uo=function(t){return this.Bo(),this.qo(t)},t.prototype.Qo=function(t){return g(this,void 0,void 0,(function(){var e;return m(this,(function(n){switch(n.label){case 0:return this.Bo(),this.Co?[3,2]:(this.Co=!0,(e=Tf())&&e.removeEventListener("visibilitychange",this.Mo),[4,this.Uo(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.Bo(),this.Co?new Promise((function(t){})):this.qo(t)},t.prototype.dr=function(t){var e=this;this.Do.push(t),this.lr((function(){return e.Wo()}))},t.prototype.Wo=function(){return g(this,void 0,void 0,(function(){var t,e=this;return m(this,(function(n){switch(n.label){case 0:if(0===this.Do.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Do[0]()];case 2:return n.sent(),this.Do.shift(),this.xo.reset(),[3,4];case 3:if(!gf(t=n.sent()))throw t;return Ua("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Do.length>0&&this.xo.xs((function(){return e.Wo()})),n.label=5;case 5:return[2]}}))}))},t.prototype.qo=function(t){var e=this,n=this.So.then((function(){return e.$o=!0,t().catch((function(t){throw e.No=t,e.$o=!1,Va("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.$o=!1,t}))}));return this.So=n,n},t.prototype.Os=function(t,e,n){var r=this;this.Bo(),this.ko.indexOf(t)>-1&&(e=0);var i=Cf.po(this,t,e,n,(function(t){return r.jo(t)}));return this.Fo.push(i),i},t.prototype.Bo=function(){this.No&&Ba()},t.prototype.Ko=function(){},t.prototype.Go=function(){return g(this,void 0,void 0,(function(){var t;return m(this,(function(e){switch(e.label){case 0:return[4,t=this.So];case 1:e.sent(),e.label=2;case 2:if(t!==this.So)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.zo=function(t){for(var e=0,n=this.Fo;e<n.length;e++)if(n[e].vs===t)return!0;return!1},t.prototype.Ho=function(t){var e=this;return this.Go().then((function(){e.Fo.sort((function(t,e){return t.Po-e.Po}));for(var n=0,r=e.Fo;n<r.length;n++){var i=r[n];if(i.Bs(),"all"!==t&&i.vs===t)break}return e.Go()}))},t.prototype.Yo=function(t){this.ko.push(t)},t.prototype.jo=function(t){var e=this.Fo.indexOf(t);this.Fo.splice(e,1)},t}();function If(t,e){if(Va("AsyncQueue",e+": "+t),gf(t))return new ru(nu.UNAVAILABLE,e+": "+t);throw t}function xf(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Ga(n,i);return 0===s?Ga(r,o):s}var Nf=function(){function t(t){this.Jo=t,this.buffer=new ku(xf),this.Xo=0}return t.prototype.Zo=function(){return++this.Xo},t.prototype.th=function(t){var e=[t,this.Zo()];if(this.buffer.size<this.Jo)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();xf(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),kf={eh:!1,nh:0,sh:0,ih:0},Af=function(){function t(t,e,n){this.rh=t,this.oh=e,this.hh=n}return t.ah=function(e){return new t(e,t.uh,t.lh)},t}();Af._h=-1,Af.fh=1048576,Af.dh=41943040,Af.uh=10,Af.lh=1e3,Af.wh=new Af(Af.dh,Af.uh,Af.lh),Af.Th=new Af(Af._h,0,0);var Pf=function(){function t(t,e){this.Or=t,this.Ro=e,this.Eh=!1,this.Ih=null}return t.prototype.start=function(t){this.Or.params.rh!==Af._h&&this.mh(t)},t.prototype.stop=function(){this.Ih&&(this.Ih.cancel(),this.Ih=null)},Object.defineProperty(t.prototype,"hr",{get:function(){return null!==this.Ih},enumerable:!1,configurable:!0}),t.prototype.mh=function(t){var e=this,n=this.Eh?3e5:6e4;Ua("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Ih=this.Ro.Os("lru_garbage_collection",n,(function(){return g(e,void 0,void 0,(function(){var e;return m(this,(function(n){switch(n.label){case 0:this.Ih=null,this.Eh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ah(this.Or)];case 2:return n.sent(),[3,7];case 3:return gf(e=n.sent())?(Ua("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Lf(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.mh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Of=function(){function t(t,e){this.Rh=t,this.params=e}return t.prototype.Ph=function(t,e){return this.Rh.Lr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Vh=function(t,e){var n=this;if(0===e)return Zl.resolve(oh.ps);var r=new Nf(e);return this.Rh.pe(t,(function(t){return r.th(t.sequenceNumber)})).next((function(){return n.Rh.qr(t,(function(t){return r.th(t)}))})).next((function(){return r.maxValue}))},t.prototype.vi=function(t,e,n){return this.Rh.vi(t,e,n)},t.prototype.Kr=function(t,e){return this.Rh.Kr(t,e)},t.prototype.gh=function(t,e){var n=this;return this.params.rh===Af._h?(Ua("LruGarbageCollector","Garbage collection skipped; disabled"),Zl.resolve(kf)):this.zr(t).next((function(r){return r<n.params.rh?(Ua("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.rh),kf):n.yh(t,e)}))},t.prototype.zr=function(t){return this.Rh.zr(t)},t.prototype.yh=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ph(t,this.params.oh).next((function(e){return e>c.params.hh?(Ua("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.hh+" from "+e),r=c.params.hh):r=e,o=Date.now(),c.Vh(t,r)})).next((function(r){return n=r,s=Date.now(),c.vi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.Kr(t,n)})).next((function(t){return u=Date.now(),ja()<=ct.DEBUG&&Ua("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Zl.resolve({eh:!0,nh:r,sh:i,ih:t})}))},t}(),Rf=function(){function t(t,e,n){this.persistence=t,this.ph=e,this.bh=new Iu(Ga),this.vh=new eu((function(t){return vu(t)}),gu),this.Sh=ou.min(),this.ns=t.Cr(n),this.Dh=t.$r(),this.Xi=t.Nr(),this.Ch=new rh(this.Dh,this.ns,this.persistence.kr()),this.ph.Fh(this.Ch)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Nh=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i=this;return m(this,(function(o){switch(o.label){case 0:return e=this.ns,n=this.Ch,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var o;return i.ns.so(r).next((function(s){return o=s,e=i.persistence.Cr(t),n=new rh(i.Dh,e,i.persistence.kr()),e.so(r)})).next((function(t){for(var e=[],i=[],s=ju(),a=0,u=o;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=t;p<d.length;p++){var y=d[p];i.push(y.batchId);for(var v=0,g=y.mutations;v<g.length;v++){var m=g[v];s=s.add(m.key)}}return n.us(r,s).next((function(t){return{$h:t,kh:e,xh:i}}))}))}))];case 1:return r=o.sent(),[2,(this.ns=e,this.Ch=n,this.ph.Fh(this.Ch),r)]}}))}))},t.prototype.Mh=function(t){var e,n=this,r=iu.now(),i=t.reduce((function(t,e){return t.add(e.key)}),ju());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.Ch.us(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],l=dl(c,e.get(c.key));null!=l&&s.push(new ml(c.key,l,xl(l.proto.mapValue),cl.exists(!0)))}return n.ns.Xr(o,r,s,t)}))})).then((function(t){var n=t.Sn(e);return{batchId:t.batchId,Un:n}}))},t.prototype.Oh=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.Dh.oi({ai:!0});return e.Lh(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.Bh=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.ns.Zr(n,t).next((function(t){return Wa(null!==t),r=t.keys(),e.ns.ro(n,t)})).next((function(){return e.ns.ho(n)})).next((function(){return e.Ch.us(n,r)}))}))},t.prototype.no=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.ns.no(e)}))},t.prototype.mi=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Xi.mi(e)}))},t.prototype.qh=function(e){var n=this,r=e.X,i=this.bh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var s=n.Dh.oi({ai:!0});i=n.bh;var a=[];e.Qt.forEach((function(e,s){var u=i.get(s);if(u){a.push(n.Xi.Ni(o,e.Xt,s).next((function(){return n.Xi.Ci(o,e.Yt,s)})));var c=e.resumeToken;if(c.H()>0){var l=u.tt(c,r).Z(o.Li);i=i.nt(s,l),t.Uh(u,l,e)&&a.push(n.Xi.yi(o,l))}}}));var u=Ou(),c=ju();if(e.jt.forEach((function(t,e){c=c.add(t)})),a.push(s.getEntries(o,c).next((function(t){e.jt.forEach((function(i,c){var l=t.get(i);c instanceof Al&&c.version.isEqual(ou.min())?(s.Gn(i,r),u=u.nt(i,c)):null==l||c.version.o(l.version)>0||0===c.version.o(l.version)&&l.hasPendingWrites?(s.jn(c,r),u=u.nt(i,c)):Ua("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),e.Kt.has(i)&&a.push(n.persistence.wi.Gr(o,i))}))}))),!r.isEqual(ou.min())){var l=n.Xi.mi(o).next((function(t){return n.Xi.Ri(o,o.Li,r)}));a.push(l)}return Zl.Bn(a).next((function(){return s.apply(o)})).next((function(){return n.Ch.cs(o,u)}))})).then((function(t){return n.bh=i,t}))},t.Uh=function(t,e,n){return Wa(e.resumeToken.H()>0),0===t.resumeToken.H()||e.X.m()-t.X.m()>=this.Qh||n.Yt.size+n.Jt.size+n.Xt.size>0},t.prototype.Wh=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c=this;return m(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Zl.forEach(t,(function(t){return Zl.forEach(t.ms,(function(n){return c.persistence.wi.Fi(e,t.targetId,n)})).next((function(){return Zl.forEach(t.As,(function(n){return c.persistence.wi.$i(e,t.targetId,n)}))}))}))}))];case 1:return l.sent(),[3,3];case 2:if(!gf(e=l.sent()))throw e;return Ua("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)i=r[n],o=i.targetId,i.fromCache||(s=this.bh.get(o),a=s.X,u=s.et(a),this.bh=this.bh.nt(o,u));return[2]}}))}))},t.prototype.jh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.ns.eo(n,t)}))},t.prototype.Kh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Ch.rs(n,t)}))},t.prototype.Gh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Xi.Di(n,t).next((function(i){return i?(r=i,Zl.resolve(r)):e.Xi.Ti(n).next((function(i){return r=new Eu(t,i,0,n.Li),e.Xi.Pi(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.bh.get(n.targetId);return(null===r||n.X.o(r.X)>0)&&(e.bh=e.bh.nt(n.targetId,n),e.vh.set(t,n.targetId)),n}))},t.prototype.Di=function(t,e){var n=this.vh.get(e);return void 0!==n?Zl.resolve(this.bh.get(n)):this.Xi.Di(t,e)},t.prototype.zh=function(t,e){var n=this,r=this.bh.get(t),i=e?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",i,(function(t){return e?Zl.resolve():n.persistence.wi.removeTarget(t,r)})).then((function(){n.bh=n.bh.remove(t),n.vh.delete(r.target)}))},t.prototype.Hh=function(t,e){var n=this,r=ou.min(),i=ju();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Di(o,t.We()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Xi.ki(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.ph._s(o,t,e?r:ou.min(),e?i:ju())})).next((function(t){return{documents:t,Yh:i}}))}))},t.prototype.Lh=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Zl.resolve();return o.forEach((function(r){s=s.next((function(){return n.zn(t,r)})).next((function(t){var o=t,s=e.Cn.get(r);Wa(null!==s),(!o||o.version.o(s)<0)&&(o=i.pn(r,o,e))&&n.jn(o,e.Dn)}))})),s.next((function(){return r.ns.ro(t,i)}))},t.prototype.Ah=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.gh(n,e.bh)}))},t}();Rf.Qh=3e8;var Df=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).persistence=e,i.ns=e.Cr(r),i.Dh=e.$r(),i.Xi=e.Nr(),i}return y(e,t),e.prototype.start=function(){return this.Jh()},e.prototype.Xh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.ns.to(n,t).next((function(t){return t?e.Ch.us(n,t):Zl.resolve(null)}))}))},e.prototype.Zh=function(t){this.ns.oo(t)},e.prototype.cr=function(t){this.persistence.cr(t)},e.prototype.Dr=function(){return this.persistence.Dr()},e.prototype.ta=function(t){var e=this,n=this.bh.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly",(function(n){return e.Xi.Me(n,t).next((function(t){return t?t.target:null}))}))},e.prototype.si=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.Dh.si(e,t.Sh)})).then((function(e){var n=e.ii,r=e.readTime;return t.Sh=r,n}))},e.prototype.Jh=function(){return g(this,void 0,void 0,(function(){var t,e=this;return m(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.Dh.ri(t)}))];case 1:return t.Sh=n.sent(),[2]}}))}))},e}(Rf);function Lf(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){if(t.code!==nu.FAILED_PRECONDITION||t.message!==eh)throw t;return Ua("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mf=function(){function t(){this.ea=new ku(Ff.na),this.sa=new ku(Ff.ia)}return t.prototype._=function(){return this.ea._()},t.prototype.Fi=function(t,e){var n=new Ff(t,e);this.ea=this.ea.add(n),this.sa=this.sa.add(n)},t.prototype.ra=function(t,e){var n=this;t.forEach((function(t){return n.Fi(t,e)}))},t.prototype.$i=function(t,e){this.oa(new Ff(t,e))},t.prototype.ha=function(t,e){var n=this;t.forEach((function(t){return n.$i(t,e)}))},t.prototype.aa=function(t){var e=this,n=new lu(new au([])),r=new Ff(n,t),i=new Ff(n,t+1),o=[];return this.sa.vt([r,i],(function(t){e.oa(t),o.push(t.key)})),o},t.prototype.ua=function(){var t=this;this.ea.forEach((function(e){return t.oa(e)}))},t.prototype.oa=function(t){this.ea=this.ea.delete(t),this.sa=this.sa.delete(t)},t.prototype.ca=function(t){var e=new lu(new au([])),n=new Ff(e,t),r=new Ff(e,t+1),i=ju();return this.sa.vt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new Ff(t,0),n=this.ea.Dt(e);return null!==n&&t.isEqual(n.key)},t}(),Ff=function(){function t(t,e){this.key=t,this.la=e}return t.na=function(t,e){return lu.P(t.key,e.key)||Ga(t.la,e.la)},t.ia=function(t,e){return Ga(t.la,e.la)||lu.P(t.key,e.key)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e){if(0!==e.length)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+np(e.length,"argument")+".")}function Uf(t,e,n){if(e.length!==n)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires "+np(n,"argument")+", but was called with "+np(e.length,"argument")+".")}function Vf(t,e,n){if(e.length<n)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires at least "+np(n,"argument")+", but was called with "+np(e.length,"argument")+".")}function qf(t,e,n,r){if(e.length<n||e.length>r)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+np(e.length,"argument")+".")}function Bf(t,e,n,r){Yf(t,e,ep(n)+" argument",r)}function Wf(t,e,n,r){void 0!==r&&Bf(t,e,n,r)}function zf(t,e,n,r){Yf(t,e,n+" option",r)}function Hf(t,e,n,r){void 0!==r&&zf(t,e,n,r)}function Qf(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push($f(u))}var c=$f(r);throw new ru(nu.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Gf(t,e,n,r){if(!e.some((function(t){return t===r})))throw new ru(nu.INVALID_ARGUMENT,"Invalid value "+$f(r)+" provided to function "+t+"() for its "+ep(n)+" argument. Acceptable values: "+e.join(", "));return r}function Yf(t,e,n,r){if(!("object"===e?Kf(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=$f(r);throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Kf(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function $f(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ba()}function Xf(t,e,n){if(void 0===n)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+ep(e)+" argument, but it was undefined.")}function Jf(t,e,n){Za(e,(function(e,r){if(n.indexOf(e)<0)throw new ru(nu.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Zf(t,e,n,r){var i=$f(r);return new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires its "+ep(n)+" argument to be a "+e+", but it was: "+i)}function tp(t,e,n){if(n<=0)throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires its "+ep(e)+" argument to be a positive number, but it was: "+n+".")}function ep(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function np(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(){if("undefined"==typeof Uint8Array)throw new ru(nu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ip(){if("undefined"==typeof atob)throw new ru(nu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var op=function(){function t(t){ip(),this._a=t}return t.fromBase64String=function(e){Uf("Blob.fromBase64String",arguments,1),Bf("Blob.fromBase64String","string",1,e),ip();try{return new t(_u.fromBase64String(e))}catch(e){throw new ru(nu.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(Uf("Blob.fromUint8Array",arguments,1),rp(),!(e instanceof Uint8Array))throw Zf("Blob.fromUint8Array","Uint8Array",1,e);return new t(_u.fromUint8Array(e))},t.prototype.toBase64=function(){return Uf("Blob.toBase64",arguments,0),ip(),this._a.toBase64()},t.prototype.toUint8Array=function(){return Uf("Blob.toUint8Array",arguments,0),rp(),this._a.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._a.isEqual(t._a)},t}(),sp=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new ru(nu.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+np(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(Bf("FieldPath","string",e,t[e]),0===t[e].length)throw new ru(nu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.fa=new cu(t)},ap=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return y(e,t),e.documentId=function(){return new e(cu.L().N())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Zf("isEqual","FieldPath",1,t);return this.fa.isEqual(t.fa)},e}(sp),up=new RegExp("[~\\*/\\[\\]]"),cp=function(){this.da=this},lp=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return y(e,t),e.prototype.Ta=function(t){if(2!==t.Ea)throw 1===t.Ea?t.Ia(this.wa+"() can only appear at the top level of your update data"):t.Ia(this.wa+"() cannot be used with set() unless you pass {merge:true}");return t.Le.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(cp);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t,e,n){return new Sp({Ea:3,ma:e.settings.ma,methodName:t.wa,Aa:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).wa=e,n}return y(e,t),e.prototype.Ta=function(t){return new al(t.path,new Jc)},e.prototype.isEqual=function(t){return t instanceof e},e}(cp),pp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return y(e,t),e.prototype.Ta=function(t){var e=hp(this,t,!0),n=this.Ra.map((function(t){return Pp(t,e)})),r=new Zc(n);return new al(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cp),dp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Ra=n,r}return y(e,t),e.prototype.Ta=function(t){var e=hp(this,t,!0),n=this.Ra.map((function(t){return Pp(t,e)})),r=new el(n);return new al(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(cp),yp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).wa=e,r.Pa=n,r}return y(e,t),e.prototype.Ta=function(t){var e=new rl(t.serializer,Ec(t.serializer,this.Pa));return new al(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(cp),vp=function(t){function e(){return t.call(this)||this}return y(e,t),e.delete=function(){return jf("FieldValue.delete",arguments),new gp(new lp("FieldValue.delete"))},e.serverTimestamp=function(){return jf("FieldValue.serverTimestamp",arguments),new gp(new fp("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Vf("FieldValue.arrayUnion",arguments,1),new gp(new pp("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Vf("FieldValue.arrayRemove",arguments,1),new gp(new dp("FieldValue.arrayRemove",t))},e.increment=function(t){return Bf("FieldValue.increment","number",1,t),Uf("FieldValue.increment",arguments,1),new gp(new yp("FieldValue.increment",t))},e}(cp),gp=function(t){function e(e){var n=this;return(n=t.call(this)||this).da=e,n.wa=e.wa,n}return y(e,t),e.prototype.Ta=function(t){return this.da.Ta(t)},e.prototype.isEqual=function(t){return t instanceof e&&this.da.isEqual(t.da)},e}(vp),mp=function(){function t(t,e){if(Uf("GeoPoint",arguments,2),Bf("GeoPoint","number",1,t),Bf("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new ru(nu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ru(nu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Va=t,this.ga=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Va},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.ga},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.Va===t.Va&&this.ga===t.ga},t.prototype.T=function(t){return Ga(this.Va,t.Va)||Ga(this.ga,t.ga)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t){return new _c(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bp=/^__.*__$/,wp=function(t,e,n){this.ya=t,this.pa=e,this.ba=n},Ep=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[];return null!==this.Le?n.push(new ml(t,this.data,this.Le,e)):n.push(new gl(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new bl(t,this.fieldTransforms)),n},t}(),Tp=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.va=function(t,e){var n=[new ml(t,this.data,this.Le,e)];return this.fieldTransforms.length>0&&n.push(new bl(t,this.fieldTransforms)),n},t}();function Cp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ba()}}var Sp=function(){function t(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sa(),this.fieldTransforms=i||[],this.Le=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ea",{get:function(){return this.settings.Ea},enumerable:!1,configurable:!0}),t.prototype.Da=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Le)},t.prototype.Ca=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Fa(t),r},t.prototype.Na=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Da({path:n,Aa:!1});return r.Sa(),r},t.prototype.$a=function(t){return this.Da({path:void 0,Aa:!0})},t.prototype.Ia=function(t){return Fp(t,this.settings.methodName,this.settings.ka||!1,this.path,this.settings.ma)},t.prototype.contains=function(t){return void 0!==this.Le.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.Sa=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fa(this.path.get(t))},t.prototype.Fa=function(t){if(0===t.length)throw this.Ia("Document fields must not be empty");if(Cp(this.Ea)&&bp.test(t))throw this.Ia('Document fields cannot begin and end with "__"')},t}(),Ip=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||_p(t)}return t.prototype.xa=function(t,e,n,r){return void 0===r&&(r=!1),new Sp({Ea:t,methodName:e,ma:n,path:cu.k(),Aa:!1,ka:r},this.s,this.serializer,this.ignoreUndefinedProperties)},t}();function xp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.xa(o.merge||o.mergeFields?2:0,e,n,i);Dp("Data must be an object, but it was:",s,r);var a,u,c=Op(r,s);if(o.merge)a=new sl(s.Le),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=f[h],d=void 0;if(p instanceof sp)d=p.fa;else{if("string"!=typeof p)throw Ba();d=Mp(e,p,n)}if(!s.contains(d))throw new ru(nu.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");jp(l,d)||l.push(d)}a=new sl(l),u=s.fieldTransforms.filter((function(t){return a.Ke(t.field)}))}else a=null,u=s.fieldTransforms;return new Ep(new Sl(c),a,u)}function Np(t,e,n,r){var i=t.xa(1,e,n);Dp("Data must be an object, but it was:",i,r);var o=[],s=new Il;Za(r,(function(t,r){var a=Mp(e,t,n),u=i.Na(a);if(r instanceof cp&&r.da instanceof lp)o.push(a);else{var c=Pp(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new sl(o);return new Tp(s.ze(),a,i.fieldTransforms)}function kp(t,e,n,r,i,o){var s=t.xa(1,e,n),a=[Lp(e,r,n)],u=[i];if(o.length%2!=0)throw new ru(nu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Lp(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Il,f=a.length-1;f>=0;--f)if(!jp(l,a[f])){var p=a[f],d=u[f],y=s.Na(p);if(d instanceof cp&&d.da instanceof lp)l.push(p);else{var v=Pp(d,y);null!=v&&(l.push(p),h.set(p,v))}}var g=new sl(l);return new Tp(h.ze(),g,s.fieldTransforms)}function Ap(t,e,n,r){return void 0===r&&(r=!1),Pp(n,t.xa(r?4:3,e))}function Pp(t,e){if(Rp(t))return Dp("Unsupported field value:",e,t),Op(t,e);if(t instanceof cp)return function(t,e){if(!Cp(e.Ea))throw e.Ia(t.wa+"() can only be used with update() and set()");if(!e.path)throw e.Ia(t.wa+"() is not currently supported inside arrays");var n=t.Ta(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Le.push(e.path),t instanceof Array){if(e.settings.Aa&&4!==e.Ea)throw e.Ia("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Pp(o[i],e.$a(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ec(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=iu.fromDate(t);return{timestampValue:Tc(e.serializer,n)}}if(t instanceof iu){var r=new iu(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tc(e.serializer,r)}}if(t instanceof mp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof op)return{bytesValue:Cc(e.serializer,t)};if(t instanceof wp){var i=e.s,o=t.ya;if(!o.isEqual(i))throw e.Ia("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:xc(t.ya||e.s,t.pa.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Ia("Unsupported field value: "+$f(t))}(t,e)}function Op(t,e){var n={};return tu(t)?e.path&&e.path.length>0&&e.Le.push(e.path):Za(t,(function(t,r){var i=Pp(r,e.Ca(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Rp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof iu||t instanceof mp||t instanceof op||t instanceof wp||t instanceof cp)}function Dp(t,e,n){if(!Rp(n)||!Kf(n)){var r=$f(n);throw"an object"===r?e.Ia(t+" a custom object"):e.Ia(t+" "+r)}}function Lp(t,e,n){if(e instanceof sp)return e.fa;if("string"==typeof e)return Mp(t,e);throw Fp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Mp(t,e,n){try{return function(t){if(t.search(up)>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ap.bind.apply(ap,E([void 0],t.split("."))))}catch(e){throw new ru(nu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).fa}catch(e){throw Fp((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function Fp(t,e,n,r,i){var o=r&&!r._(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ru(nu.INVALID_ARGUMENT,(a+=". ")+t+u)}function jp(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Up=function(){function t(t){this.uid=t}return t.prototype.Yr=function(){return null!=this.uid},t.prototype.Ma=function(){return this.Yr()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Up.UNAUTHENTICATED=new Up(null),Up.Oa=new Up("google-credentials-uid"),Up.La=new Up("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Vp=function(t,e){this.user=e,this.type="OAuth",this.Ba={},this.Ba.Authorization="Bearer "+t},qp=function(){function t(){this.qa=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.Ua=function(){},t.prototype.Qa=function(t){this.qa=t,t(Up.UNAUTHENTICATED)},t.prototype.Wa=function(){this.qa=null},t}(),Bp=function(){function t(t){var e=this;this.ja=null,this.currentUser=Up.UNAUTHENTICATED,this.Ka=!1,this.Ga=0,this.qa=null,this.forceRefresh=!1,this.ja=function(){e.Ga++,e.currentUser=e.za(),e.Ka=!0,e.qa&&e.qa(e.currentUser)},this.Ga=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.ja):(this.ja(null),t.get().then((function(t){e.auth=t,e.ja&&e.auth.addAuthTokenListener(e.ja)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Ga,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Ga!==e?(Ua("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Wa("string"==typeof n.accessToken),new Vp(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.Ua=function(){this.forceRefresh=!0},t.prototype.Qa=function(t){this.qa=t,this.Ka&&t(this.currentUser)},t.prototype.Wa=function(){this.auth&&this.auth.removeAuthTokenListener(this.ja),this.ja=null,this.qa=null},t.prototype.za=function(){var t=this.auth&&this.auth.getUid();return Wa(null===t||"string"==typeof t),new Up(t)},t}(),Wp=function(){function t(t,e){this.Ha=t,this.Ya=e,this.type="FirstParty",this.user=Up.La}return Object.defineProperty(t.prototype,"Ba",{get:function(){var t={"X-Goog-AuthUser":this.Ya},e=this.Ha.auth.Ja([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),zp=function(){function t(t,e){this.Ha=t,this.Ya=e}return t.prototype.getToken=function(){return Promise.resolve(new Wp(this.Ha,this.Ya))},t.prototype.Qa=function(t){t(Up.La)},t.prototype.Wa=function(){},t.prototype.Ua=function(){},t}(),Hp=function(){function t(t,e,n,r,i,o){this.bs=t,this.Xa=n,this.Za=r,this.tu=i,this.listener=o,this.state=0,this.eu=0,this.nu=null,this.stream=null,this.xo=new ah(t,e)}return t.prototype.su=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.iu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ru()},t.prototype.stop=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.su()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.ou=function(){this.state=0,this.xo.reset()},t.prototype.hu=function(){var t=this;this.iu()&&null===this.nu&&(this.nu=this.bs.Os(this.Xa,6e4,(function(){return t.au()})))},t.prototype.uu=function(t){this.cu(),this.stream.send(t)},t.prototype.au=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){return this.iu()?[2,this.close(0)]:[2]}))}))},t.prototype.cu=function(){this.nu&&(this.nu.cancel(),this.nu=null)},t.prototype.close=function(t,e){return g(this,void 0,void 0,(function(){return m(this,(function(n){switch(n.label){case 0:return this.cu(),this.xo.cancel(),this.eu++,3!==t?this.xo.reset():e&&e.code===nu.RESOURCE_EXHAUSTED?(Va(e.toString()),Va("Using maximum backoff delay to prevent overloading the backend."),this.xo.ks()):e&&e.code===nu.UNAUTHENTICATED&&this.tu.Ua(),null!==this.stream&&(this.lu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener._u(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.lu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.fu(this.eu),n=this.eu;this.tu.getToken().then((function(e){t.eu===n&&t.du(e)}),(function(n){e((function(){var e=new ru(nu.UNKNOWN,"Fetching auth token failed: "+n.message);return t.wu(e)}))}))},t.prototype.du=function(t){var e=this,n=this.fu(this.eu);this.stream=this.Tu(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream._u((function(t){n((function(){return e.wu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.ru=function(){var t=this;this.state=4,this.xo.xs((function(){return g(t,void 0,void 0,(function(){return m(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.wu=function(t){return Ua("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.fu=function(t){var e=this;return function(n){e.bs.lr((function(){return e.eu===t?n():(Ua("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Qp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return y(e,t),e.prototype.Tu=function(t){return this.Za.Iu("Listen",t)},e.prototype.onMessage=function(t){this.xo.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ba()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Oe?(Wa(void 0===e||"string"==typeof e),_u.fromBase64String(e||"")):(Wa(void 0===e||e instanceof Uint8Array),_u.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?nu.UNKNOWN:Su(t.code);return new ru(e,t.message||"")}(s);n=new Yu(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=Ac(t,u.document.name),l=Ic(u.document.updateTime),h=new Sl({mapValue:{fields:u.document.fields}}),f=new kl(c,l,h,{}),p=u.targetIds||[],d=u.removedTargetIds||[];n=new Qu(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var v=Ac(t,y.document),g=y.readTime?Ic(y.readTime):ou.min(),m=new Al(v,g),_=y.removedTargetIds||[];n=new Qu([],_,m.key,m)}else if("documentRemove"in e){e.documentRemove;var b=e.documentRemove;b.document;var w=Ac(t,b.document),E=b.removedTargetIds||[];n=new Qu([],E,w,null)}else{if(!("filter"in e))return Ba();e.filter;var T=e.filter;T.targetId;var C=T.count||0,S=new Tu(C),I=T.targetId;n=new Gu(I,S)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ou.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ou.min():e.readTime?Ic(e.readTime):ou.min()}(t);return this.listener.mu(e,n)},e.prototype.Au=function(t){var e={};e.database=Rc(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=mu(r)?{documents:jc(t,r)}:{query:Uc(t,r)}).targetId=e.targetId,e.resumeToken.H()>0&&(n.resumeToken=Cc(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ba()}}(0,e.J);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.uu(e)},e.prototype.Ru=function(t){var e={};e.database=Rc(this.serializer),e.removeTarget=t,this.uu(e)},e}(Hp),Gp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s.Pu=!1,s}return y(e,t),Object.defineProperty(e.prototype,"Vu",{get:function(){return this.Pu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Pu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.lu=function(){this.Pu&&this.gu([])},e.prototype.Tu=function(t){return this.Za.Iu("Write",t)},e.prototype.onMessage=function(t){if(Wa(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Pu){this.xo.reset();var e=function(t,e){return t&&t.length>0?(Wa(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Ic(t.updateTime):Ic(e);n.isEqual(ou.min())&&(n=Ic(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new ul(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ic(t.commitTime);return this.listener.yu(n,e)}return Wa(!t.writeResults||0===t.writeResults.length),this.Pu=!0,this.listener.pu()},e.prototype.bu=function(){var t={};t.database=Rc(this.serializer),this.uu(t)},e.prototype.gu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Mc(e.serializer,t)}))};this.uu(n)},e}(Hp),Yp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Za=e,i.credentials=n,i.serializer=r,i.vu=!1,i}return y(e,t),e.prototype.Su=function(){if(this.vu)throw new ru(nu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Du=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Du(t,e,r)})).catch((function(t){throw t.code===nu.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e.prototype.Cu=function(t,e){var n=this;return this.Su(),this.credentials.getToken().then((function(r){return n.Za.Cu(t,e,r)})).catch((function(t){throw t.code===nu.UNAUTHENTICATED&&n.credentials.Ua(),t}))},e}((function(){this.je=void 0})),Kp=function(){function t(t){this.Fu=t,this.Nu=new Map,this.mutations=[],this.$u=!1,this.ku=null,this.xu=new Set}return t.prototype.Mu=function(t){return g(this,void 0,void 0,(function(){var e,n=this;return m(this,(function(r){switch(r.label){case 0:if(this.Ou(),this.mutations.length>0)throw new ru(nu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return g(this,void 0,void 0,(function(){var n,r,i,o,s;return m(this,(function(a){switch(a.label){case 0:return n=za(t),r={database:Rc(n.serializer),documents:e.map((function(t){return kc(n.serializer,t)}))},[4,n.Cu("BatchGetDocuments",r)];case 1:return i=a.sent(),o=new Map,i.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Wa(!!e.found),e.found.name,e.found.updateTime;var n=Ac(t,e.found.name),r=Ic(e.found.updateTime),i=new Sl({mapValue:{fields:e.found.fields}});return new kl(n,r,i,{})}(t,e):"missing"in e?function(t,e){Wa(!!e.missing),Wa(!!e.readTime);var n=Ac(t,e.missing),r=Ic(e.readTime);return new Al(n,r)}(t,e):Ba()}(n.serializer,t);o.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=o.get(t.toString());Wa(!!e),s.push(e)})),s)]}}))}))}(this.Fu,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Al||t instanceof kl?n.Lu(t):Ba()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.va(t,this.Ue(t))),this.xu.add(t)},t.prototype.update=function(t,e){try{this.write(e.va(t,this.Bu(t)))}catch(t){this.ku=t}this.xu.add(t)},t.prototype.delete=function(t){this.write([new Tl(t,this.Ue(t))]),this.xu.add(t)},t.prototype.commit=function(){return g(this,void 0,void 0,(function(){var t,e=this;return m(this,(function(n){switch(n.label){case 0:if(this.Ou(),this.ku)throw this.ku;return t=this.Nu,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new lu(au.$(n));e.mutations.push(new Cl(r,e.Ue(r)))})),[4,function(t,e){return g(this,void 0,void 0,(function(){var n,r;return m(this,(function(i){switch(i.label){case 0:return n=za(t),r={database:Rc(n.serializer),writes:e.map((function(t){return Mc(n.serializer,t)}))},[4,n.Du("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.Fu,this.mutations)];case 1:return n.sent(),this.$u=!0,[2]}}))}))},t.prototype.Lu=function(t){var e;if(t instanceof kl)e=t.version;else{if(!(t instanceof Al))throw Ba();e=ou.min()}var n=this.Nu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ru(nu.ABORTED,"Document version changed between two reads.")}else this.Nu.set(t.key.toString(),e)},t.prototype.Ue=function(t){var e=this.Nu.get(t.toString());return!this.xu.has(t)&&e?cl.updateTime(e):cl.Qe()},t.prototype.Bu=function(t){var e=this.Nu.get(t.toString());if(!this.xu.has(t)&&e){if(e.isEqual(ou.min()))throw new ru(nu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cl.updateTime(e)}return cl.exists(!0)},t.prototype.write=function(t){this.Ou(),this.mutations=this.mutations.concat(t)},t.prototype.Ou=function(){},t}(),$p=function(){function t(t,e){this.Ro=t,this.qu=e,this.state="Unknown",this.Uu=0,this.Qu=null,this.Wu=!0}return t.prototype.ju=function(){var t=this;0===this.Uu&&(this.Ku("Unknown"),this.Qu=this.Ro.Os("online_state_timeout",1e4,(function(){return t.Qu=null,t.Gu("Backend didn't respond within 10 seconds."),t.Ku("Offline"),Promise.resolve()})))},t.prototype.zu=function(t){"Online"===this.state?this.Ku("Unknown"):(this.Uu++,this.Uu>=1&&(this.Hu(),this.Gu("Connection failed 1 times. Most recent error: "+t.toString()),this.Ku("Offline")))},t.prototype.set=function(t){this.Hu(),this.Uu=0,"Online"===t&&(this.Wu=!1),this.Ku(t)},t.prototype.Ku=function(t){t!==this.state&&(this.state=t,this.qu(t))},t.prototype.Gu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Wu?(Va(e),this.Wu=!1):Ua("OnlineStateTracker",e)},t.prototype.Hu=function(){null!==this.Qu&&(this.Qu.cancel(),this.Qu=null)},t}(),Xp=function(){function t(t,e,n,r,i){var o=this;this.Yu=t,this.Fu=e,this.Ro=n,this.Ju=[],this.Xu=new Map,this.Zu=null,this.tc=new Set,this.ec=i,this.ec.nc((function(t){n.lr((function(){return g(o,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.sc()?(Ua("RemoteStore","Restarting streams for network reachability change."),[4,this.ic()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.rc=new $p(n,r),this.oc=function(t,e,n){var r=za(t);return new Qp(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.hc.bind(this),_u:this.ac.bind(this),mu:this.uc.bind(this)}),this.cc=function(t,e,n){var r=za(t);return new Gp(e,r.Za,r.credentials,r.serializer,n)}(this.Fu,n,{Eu:this.lc.bind(this),_u:this._c.bind(this),pu:this.fc.bind(this),yu:this.yu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.tc.delete(0),this.dc()},t.prototype.dc=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.sc()?(this.wc()?this.Tc():this.rc.set("Unknown"),[4,this.Ec()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.tc.add(0),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Offline"),[2]}}))}))},t.prototype.Ic=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return[4,this.cc.stop()];case 1:return t.sent(),[4,this.oc.stop()];case 2:return t.sent(),this.Ju.length>0&&(Ua("RemoteStore","Stopping write stream with "+this.Ju.length+" pending writes"),this.Ju=[]),this.mc(),[2]}}))}))},t.prototype.yr=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return Ua("RemoteStore","RemoteStore shutting down."),this.tc.add(5),[4,this.Ic()];case 1:return t.sent(),this.ec.yr(),this.rc.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Xu.has(t.targetId)||(this.Xu.set(t.targetId,t),this.wc()?this.Tc():this.oc.iu()&&this.Ac(t))},t.prototype.Rc=function(t){this.Xu.delete(t),this.oc.iu()&&this.Pc(t),0===this.Xu.size&&(this.oc.iu()?this.oc.hu():this.sc()&&this.rc.set("Unknown"))},t.prototype.Me=function(t){return this.Xu.get(t)||null},t.prototype.xe=function(t){return this.Vc.xe(t)},t.prototype.Ac=function(t){this.Zu.de(t.targetId),this.oc.Au(t)},t.prototype.Pc=function(t){this.Zu.de(t),this.oc.Ru(t)},t.prototype.Tc=function(){this.Zu=new $u(this),this.oc.start(),this.rc.ju()},t.prototype.wc=function(){return this.sc()&&!this.oc.su()&&this.Xu.size>0},t.prototype.sc=function(){return 0===this.tc.size},t.prototype.mc=function(){this.Zu=null},t.prototype.hc=function(){return g(this,void 0,void 0,(function(){var t=this;return m(this,(function(e){return this.Xu.forEach((function(e,n){t.Ac(e)})),[2]}))}))},t.prototype.ac=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){return this.mc(),this.wc()?(this.rc.zu(t),this.Tc()):this.rc.set("Unknown"),[2]}))}))},t.prototype.uc=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i;return m(this,(function(o){switch(o.label){case 0:if(this.rc.set("Online"),!(t instanceof Yu&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.gc(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),Ua("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.yc(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Qu?this.Zu.Pe(t):t instanceof Gu?this.Zu.De(t):this.Zu.ye(t),e.isEqual(ou.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,this.Yu.mi()];case 8:return r=o.sent(),e.o(r)>=0?[4,this.pc(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Ua("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.yc(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.yc=function(t,e){return g(this,void 0,void 0,(function(){var n=this;return m(this,(function(r){switch(r.label){case 0:if(!gf(t))throw t;return this.tc.add(1),[4,this.Ic()];case 1:return r.sent(),this.rc.set("Offline"),e||(e=function(){return n.Yu.mi()}),this.Ro.dr((function(){return g(n,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return Ua("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.tc.delete(1),[4,this.dc()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.bc=function(t){var e=this;return t().catch((function(n){return e.yc(n,t)}))},t.prototype.pc=function(t){var e=this,n=this.Zu.Ne(t);return n.Qt.forEach((function(n,r){if(n.resumeToken.H()>0){var i=e.Xu.get(r);i&&e.Xu.set(r,i.tt(n.resumeToken,t))}})),n.Wt.forEach((function(t){var n=e.Xu.get(t);if(n){e.Xu.set(t,n.tt(_u.Y,n.X)),e.Pc(t);var r=new Eu(n.target,t,1,n.sequenceNumber);e.Ac(r)}})),this.Vc.qh(n)},t.prototype.gc=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i;return m(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.Xu.has(i)?[4,this.Vc.vc(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.Xu.delete(i),this.Zu.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.Ec=function(){return g(this,void 0,void 0,(function(){var t,e,n;return m(this,(function(r){switch(r.label){case 0:t=this.Ju.length>0?this.Ju[this.Ju.length-1].batchId:-1,r.label=1;case 1:if(!this.Sc())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.Yu.jh(t)];case 3:return null===(e=r.sent())?(0===this.Ju.length&&this.cc.hu(),[3,7]):(t=e.batchId,this.Dc(e),[3,6]);case 4:return n=r.sent(),[4,this.yc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.Sc=function(){return this.sc()&&this.Ju.length<10},t.prototype.Nc=function(){return this.Ju.length},t.prototype.Dc=function(t){this.Ju.push(t),this.cc.iu()&&this.cc.Vu&&this.cc.gu(t.mutations)},t.prototype.Cc=function(){return this.sc()&&!this.cc.su()&&this.Ju.length>0},t.prototype.Fc=function(){this.cc.start()},t.prototype.lc=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){return this.cc.bu(),[2]}))}))},t.prototype.fc=function(){return g(this,void 0,void 0,(function(){var t,e,n;return m(this,(function(r){for(t=0,e=this.Ju;t<e.length;t++)n=e[t],this.cc.gu(n.mutations);return[2]}))}))},t.prototype.yu=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i=this;return m(this,(function(o){switch(o.label){case 0:return n=this.Ju.shift(),r=Jl.from(n,t,e),[4,this.bc((function(){return i.Vc.$c(r)}))];case 1:return o.sent(),[4,this.Ec()];case 2:return o.sent(),[2]}}))}))},t.prototype._c=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return t&&this.cc.Vu?[4,this.kc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Cc()&&this.Fc(),[2]}}))}))},t.prototype.kc=function(t){return g(this,void 0,void 0,(function(){var e,n,r=this;return m(this,(function(i){switch(i.label){case 0:return Cu(n=t.code)&&n!==nu.ABORTED?(e=this.Ju.shift(),this.cc.ou(),[4,this.bc((function(){return r.Vc.xc(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.Ec()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.Mc=function(){return new Kp(this.Fu)},t.prototype.ic=function(){return g(this,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.tc.add(4),[4,this.Ic()];case 1:return t.sent(),this.rc.set("Unknown"),this.tc.delete(4),[4,this.dc()];case 2:return t.sent(),[2]}}))}))},t.prototype.Oc=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return this.Ro.Ko(),Ua("RemoteStore","RemoteStore received new credentials"),this.tc.add(3),[4,this.Ic()];case 1:return e.sent(),this.rc.set("Unknown"),[4,this.Vc.Oc(t)];case 2:return e.sent(),this.tc.delete(3),[4,this.dc()];case 3:return e.sent(),[2]}}))}))},t.prototype.Lc=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return t?(this.tc.delete(2),[4,this.dc()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.tc.add(2),[4,this.Ic()]);case 3:e.sent(),this.rc.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e){return"firestore_clients_"+t+"_"+e}function Zp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Yr()&&(r+="_"+e.uid),r}function td(t,e){return"firestore_targets_"+t+"_"+e}var ed=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Bc=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new ru(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Va("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),nd=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Bc=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new ru(r.error.code,r.error.message)),i?new t(e,r.state,o):(Va("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.qc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),rd=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Bc=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Vu(),s=0;i&&s<r.activeTargetIds.length;++s)i=pu(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Va("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),id=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Bc=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Va("SharedClientState","Failed to parse online state: "+e),null)},t}(),od=function(){function t(){this.activeTargetIds=Vu()}return t.prototype.Uc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Qc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.qc=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),sd=function(){function t(t,e,n,r,i){this.window=t,this.bs=e,this.persistenceKey=n,this.Wc=r,this.Vc=null,this.qu=null,this.Ps=null,this.jc=this.Kc.bind(this),this.Gc=new Iu(Ga),this.hr=!1,this.zc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Hc=Jp(this.persistenceKey,this.Wc),this.Yc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Gc=this.Gc.nt(this.Wc,new od),this.Jc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Xc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Zc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.tl=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.jc)}return t.Hi=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return g(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return m(this,(function(f){switch(f.label){case 0:return[4,this.Vc.Dr()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Wc&&(i=this.getItem(Jp(this.persistenceKey,r)))&&(o=rd.Bc(r,i))&&(this.Gc=this.Gc.nt(o.clientId,o));for(this.el(),(s=this.storage.getItem(this.tl))&&(a=this.nl(s))&&this.sl(a),u=0,c=this.zc;u<c.length;u++)l=c[u],this.Kc(l);return this.zc=[],this.window.addEventListener("unload",(function(){return h.yr()})),this.hr=!0,[2]}}))}))},t.prototype.ys=function(t){this.setItem(this.Yc,JSON.stringify(t))},t.prototype.il=function(){return this.rl(this.Gc)},t.prototype.ol=function(t){var e=!1;return this.Gc.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.hl=function(t){this.al(t,"pending")},t.prototype.ul=function(t,e,n){this.al(t,e,n),this.cl(t)},t.prototype.ll=function(t){var e="not-current";if(this.ol(t)){var n=this.storage.getItem(td(this.persistenceKey,t));if(n){var r=nd.Bc(t,n);r&&(e=r.state)}}return this._l.Uc(t),this.el(),e},t.prototype.fl=function(t){this._l.Qc(t),this.el()},t.prototype.dl=function(t){return this._l.activeTargetIds.has(t)},t.prototype.wl=function(t){this.removeItem(td(this.persistenceKey,t))},t.prototype.Tl=function(t,e,n){this.El(t,e,n)},t.prototype.Nh=function(t,e,n){var r=this;e.forEach((function(t){r.cl(t)})),this.currentUser=t,n.forEach((function(t){r.hl(t)}))},t.prototype.Il=function(t){this.ml(t)},t.prototype.yr=function(){this.hr&&(this.window.removeEventListener("storage",this.jc),this.removeItem(this.Hc),this.hr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ua("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Ua("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Ua("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Kc=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Ua("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Hc)return void Va("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bs.dr((function(){return g(e,void 0,void 0,(function(){var t,e,r,i,o,s;return m(this,(function(a){if(this.hr){if(null!==n.key)if(this.Jc.test(n.key)){if(null==n.newValue)return t=this.Al(n.key),[2,this.Rl(t,null)];if(e=this.Pl(n.key,n.newValue))return[2,this.Rl(e.clientId,e)]}else if(this.Xc.test(n.key)){if(null!==n.newValue&&(r=this.Vl(n.key,n.newValue)))return[2,this.gl(r)]}else if(this.Zc.test(n.key)){if(null!==n.newValue&&(i=this.yl(n.key,n.newValue)))return[2,this.pl(i)]}else if(n.key===this.tl){if(null!==n.newValue&&(o=this.nl(n.newValue)))return[2,this.sl(o)]}else n.key===this.Yc&&(s=function(t){var e=oh.ps;if(null!=t)try{var n=JSON.parse(t);Wa("number"==typeof n),e=n}catch(t){Va("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==oh.ps&&this.Ps(s)}else this.zc.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"_l",{get:function(){return this.Gc.get(this.Wc)},enumerable:!1,configurable:!0}),t.prototype.el=function(){this.setItem(this.Hc,this._l.qc())},t.prototype.al=function(t,e,n){var r=new ed(this.currentUser,t,e,n),i=Zp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.qc())},t.prototype.cl=function(t){var e=Zp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ml=function(t){var e={clientId:this.Wc,onlineState:t};this.storage.setItem(this.tl,JSON.stringify(e))},t.prototype.El=function(t,e,n){var r=td(this.persistenceKey,t),i=new nd(t,e,n);this.setItem(r,i.qc())},t.prototype.Al=function(t){var e=this.Jc.exec(t);return e?e[1]:null},t.prototype.Pl=function(t,e){var n=this.Al(t);return rd.Bc(n,e)},t.prototype.Vl=function(t,e){var n=this.Xc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ed.Bc(new Up(i),r,e)},t.prototype.yl=function(t,e){var n=this.Zc.exec(t),r=Number(n[1]);return nd.Bc(r,e)},t.prototype.nl=function(t){return id.Bc(t)},t.prototype.gl=function(t){return g(this,void 0,void 0,(function(){return m(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Vc.bl(t.batchId,t.state,t.error)]:(Ua("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.pl=function(t){return this.Vc.vl(t.targetId,t.state,t.error)},t.prototype.Rl=function(t,e){var n=this,r=e?this.Gc.nt(t,e):this.Gc.remove(t),i=this.rl(this.Gc),o=this.rl(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.Vc.Sl(s,a).then((function(){n.Gc=r}))},t.prototype.sl=function(t){this.Gc.get(t.clientId)&&this.qu(t.onlineState)},t.prototype.rl=function(t){var e=Vu();return t.forEach((function(t,n){e=e.Ct(n.activeTargetIds)})),e},t}(),ad=function(){function t(){this.Dl=new od,this.Cl={},this.Vc=null,this.qu=null,this.Ps=null}return t.prototype.hl=function(t){},t.prototype.ul=function(t,e,n){},t.prototype.ll=function(t){return this.Dl.Uc(t),this.Cl[t]||"not-current"},t.prototype.Tl=function(t,e,n){this.Cl[t]=e},t.prototype.fl=function(t){this.Dl.Qc(t)},t.prototype.dl=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.wl=function(t){delete this.Cl[t]},t.prototype.il=function(){return this.Dl.activeTargetIds},t.prototype.ol=function(t){return this.Dl.activeTargetIds.has(t)},t.prototype.start=function(){return this.Dl=new od,Promise.resolve()},t.prototype.Nh=function(t,e,n){},t.prototype.Il=function(t){},t.prototype.yr=function(){},t.prototype.ys=function(t){},t}(),ud=function(t){this.key=t},cd=function(t){this.key=t},ld=function(){function t(t,e){this.query=t,this.Fl=e,this.Nl=null,this.Ht=!1,this.$l=ju(),this.Lt=ju(),this.kl=Fl(t),this.xl=new qu(this.kl)}return Object.defineProperty(t.prototype,"Ml",{get:function(){return this.Fl},enumerable:!1,configurable:!0}),t.prototype.Ol=function(t,e){var n=this,r=e?e.Ll:new Bu,i=e?e.xl:this.xl,o=e?e.Lt:this.Lt,s=i,a=!1,u=this.query.In()&&i.size===this.query.limit?i.last():null,c=this.query.mn()&&i.size===this.query.limit?i.first():null;if(t.ot((function(t,e){var l=i.get(t),h=e instanceof kl?e:null;h&&(h=Ml(n.query,h)?h:null);var f=!!l&&n.Lt.has(l.key),p=!!h&&(h.Ge||n.Lt.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Bl(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.kl(h,u)>0||c&&n.kl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.In()||this.query.mn())for(;s.size>this.query.limit;){var l=this.query.In()?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{xl:s,Ll:r,ql:a,Lt:o}},t.prototype.Bl=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t.prototype.Jn=function(t,e,n){var r=this,i=this.xl;this.xl=t.xl,this.Lt=t.Lt;var o=t.Ll.Mt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ba()}};return n(t)-n(e)}(t.type,e.type)||r.kl(t.doc,e.doc)})),this.Ul(n);var s=e?this.Ql():[],a=0===this.$l.size&&this.Ht?1:0,u=a!==this.Nl;return this.Nl=a,0!==o.length||u?{snapshot:new Wu(this.query,t.xl,i,o,t.Lt,0===a,u,!1),Wl:s}:{Wl:s}},t.prototype.jl=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Jn({xl:this.xl,Ll:new Bu,Lt:this.Lt,ql:!1},!1)):{Wl:[]}},t.prototype.Kl=function(t){return!this.Fl.has(t)&&!!this.xl.has(t)&&!this.xl.get(t).Ge},t.prototype.Ul=function(t){var e=this;t&&(t.Yt.forEach((function(t){return e.Fl=e.Fl.add(t)})),t.Jt.forEach((function(t){})),t.Xt.forEach((function(t){return e.Fl=e.Fl.delete(t)})),this.Ht=t.Ht)},t.prototype.Ql=function(){var t=this;if(!this.Ht)return[];var e=this.$l;this.$l=ju(),this.xl.forEach((function(e){t.Kl(e.key)&&(t.$l=t.$l.add(e.key))}));var n=[];return e.forEach((function(e){t.$l.has(e)||n.push(new cd(e))})),this.$l.forEach((function(t){e.has(t)||n.push(new ud(t))})),n},t.prototype.Gl=function(t){this.Fl=t.Yh,this.$l=ju();var e=this.Ol(t.documents);return this.Jn(e,!0)},t.prototype.zl=function(){return Wu.Ut(this.query,this.xl,this.Lt,0===this.Nl)},t}(),hd=function(){function t(t,e,n,r){this.Ro=t,this.Fu=e,this.updateFunction=n,this.yo=r,this.Hl=5,this.xo=new ah(this.Ro,"transaction_retry")}return t.prototype.run=function(){this.Yl()},t.prototype.Yl=function(){var t=this;this.xo.xs((function(){return g(t,void 0,void 0,(function(){var t,e,n=this;return m(this,(function(r){return t=new Kp(this.Fu),(e=this.Jl(t))&&e.then((function(e){n.Ro.lr((function(){return t.commit().then((function(){n.yo.resolve(e)})).catch((function(t){n.Xl(t)}))}))})).catch((function(t){n.Xl(t)})),[2]}))}))}))},t.prototype.Jl=function(t){try{var e=this.updateFunction(t);return!hu(e)&&e.catch&&e.then?e:(this.yo.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.yo.reject(t),null}},t.prototype.Xl=function(t){var e=this;this.Hl>0&&this.Zl(t)?(this.Hl-=1,this.Ro.lr((function(){return e.Yl(),Promise.resolve()}))):this.yo.reject(t)},t.prototype.Zl=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Cu(e)}return!1},t}(),fd=function(t,e,n){this.query=t,this.targetId=e,this.view=n},pd=function(t){this.key=t,this.t_=!1},dd=function(){function t(t,e,n,r,i,o){this.Yu=t,this.e_=e,this.Fu=n,this.n_=r,this.currentUser=i,this.s_=o,this.i_=null,this.r_=new eu((function(t){return Dl(t)}),Rl),this.o_=new Map,this.h_=[],this.a_=new Iu(lu.P),this.u_=new Map,this.c_=new Mf,this.l_={},this.__=new Map,this.f_=Ph.di(),this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"d_",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){this.i_=t},t.prototype.listen=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i,o;return m(this,(function(s){switch(s.label){case 0:return this.w_("listen()"),(r=this.r_.get(t))?(e=r.targetId,this.n_.ll(e),n=r.view.zl(),[3,4]):[3,1];case 1:return[4,this.Yu.Gh(t.We())];case 2:return i=s.sent(),o=this.n_.ll(i.targetId),e=i.targetId,[4,this.T_(t,e,"current"===o)];case 3:n=s.sent(),this.d_&&this.e_.listen(i),s.label=4;case 4:return[2,n]}}))}))},t.prototype.T_=function(t,e,n){return g(this,void 0,void 0,(function(){var r,i,o,s,a,u;return m(this,(function(c){switch(c.label){case 0:return[4,this.Yu.Hh(t,!0)];case 1:return r=c.sent(),i=new ld(t,r.Yh),o=i.Ol(r.documents),s=Hu.zt(e,n&&"Offline"!==this.onlineState),a=i.Jn(o,this.d_,s),this.E_(e,a.Wl),u=new fd(t,e,i),[2,(this.r_.set(t,u),this.o_.has(e)?this.o_.get(e).push(t):this.o_.set(e,[t]),a.snapshot)]}}))}))},t.prototype.Rc=function(t){return g(this,void 0,void 0,(function(){var e,n,r=this;return m(this,(function(i){switch(i.label){case 0:return this.w_("unlisten()"),e=this.r_.get(t),(n=this.o_.get(e.targetId)).length>1?[2,(this.o_.set(e.targetId,n.filter((function(e){return!Rl(e,t)}))),void this.r_.delete(t))]:this.d_?(this.n_.fl(e.targetId),this.n_.ol(e.targetId)?[3,2]:[4,this.Yu.zh(e.targetId,!1).then((function(){r.n_.wl(e.targetId),r.e_.Rc(e.targetId),r.I_(e.targetId)})).catch(Lf)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.I_(e.targetId),[4,this.Yu.zh(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i;return m(this,(function(o){switch(o.label){case 0:this.w_("write()"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,this.Yu.Mh(t)];case 2:return n=o.sent(),this.n_.hl(n.batchId),this.m_(n.batchId,e),[4,this.A_(n.Un)];case 3:return o.sent(),[4,this.e_.Ec()];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),i=If(r,"Failed to persist write"),e.reject(i),[3,6];case 6:return[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new hd(t,this.Fu,e,n).run()},t.prototype.qh=function(t){return g(this,void 0,void 0,(function(){var e,n=this;return m(this,(function(r){switch(r.label){case 0:this.w_("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.qh(t)];case 2:return e=r.sent(),t.Qt.forEach((function(t,e){var r=n.u_.get(e);r&&(Wa(t.Yt.size+t.Jt.size+t.Xt.size<=1),t.Yt.size>0?r.t_=!0:t.Jt.size>0?Wa(r.t_):t.Xt.size>0&&(Wa(r.t_),r.t_=!1))})),[4,this.A_(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Lf(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.jl=function(t,e){this.w_("applyOnlineStateChange()");var n=[];this.r_.forEach((function(e,r){var i=r.view.jl(t);i.snapshot&&n.push(i.snapshot)})),this.i_.R_(t),this.i_.mu(n),this.onlineState=t},t.prototype.vc=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i,o,s,a=this;return m(this,(function(u){switch(u.label){case 0:return this.w_("rejectListens()"),this.n_.Tl(t,"rejected",e),n=this.u_.get(t),(r=n&&n.key)?(i=(i=new Iu(lu.P)).nt(r,new Al(r,ou.min())),o=ju().add(r),s=new zu(ou.min(),new Map,new ku(Ga),i,o),[4,this.qh(s)]):[3,2];case 1:return u.sent(),this.a_=this.a_.remove(r),this.u_.delete(t),this.P_(),[3,4];case 2:return[4,this.Yu.zh(t,!1).then((function(){return a.I_(t,e)})).catch(Lf)];case 3:u.sent(),u.label=4;case 4:return[2]}}))}))},t.prototype.$c=function(t){return g(this,void 0,void 0,(function(){var e,n;return m(this,(function(r){switch(r.label){case 0:this.w_("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Oh(t)];case 2:return n=r.sent(),this.V_(e,null),this.g_(e),this.n_.ul(e,"acknowledged"),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,Lf(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.xc=function(t,e){return g(this,void 0,void 0,(function(){var n;return m(this,(function(r){switch(r.label){case 0:this.w_("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.Yu.Bh(t)];case 2:return n=r.sent(),this.V_(t,e),this.g_(t),this.n_.ul(t,"rejected",e),[4,this.A_(n)];case 3:return r.sent(),[3,6];case 4:return[4,Lf(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.y_=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i;return m(this,(function(o){switch(o.label){case 0:this.e_.sc()||Ua("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.Yu.no()];case 2:return-1===(e=o.sent())?[2,void t.resolve()]:((n=this.__.get(e)||[]).push(t),this.__.set(e,n),[3,4]);case 3:return r=o.sent(),i=If(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}}))}))},t.prototype.g_=function(t){(this.__.get(t)||[]).forEach((function(t){t.resolve()})),this.__.delete(t)},t.prototype.p_=function(t){this.__.forEach((function(e){e.forEach((function(e){e.reject(new ru(nu.CANCELLED,t))}))})),this.__.clear()},t.prototype.m_=function(t,e){var n=this.l_[this.currentUser.Ma()];n||(n=new Iu(Ga)),n=n.nt(t,e),this.l_[this.currentUser.Ma()]=n},t.prototype.V_=function(t,e){var n=this.l_[this.currentUser.Ma()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.l_[this.currentUser.Ma()]=n}},t.prototype.I_=function(t,e){var n=this;void 0===e&&(e=null),this.n_.fl(t);for(var r=0,i=this.o_.get(t);r<i.length;r++){var o=i[r];this.r_.delete(o),e&&this.i_.b_(o,e)}this.o_.delete(t),this.d_&&this.c_.aa(t).forEach((function(t){n.c_.Mi(t)||n.v_(t)}))},t.prototype.v_=function(t){var e=this.a_.get(t);null!==e&&(this.e_.Rc(e),this.a_=this.a_.remove(t),this.u_.delete(e),this.P_())},t.prototype.E_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof ud?(this.c_.Fi(i.key,t),this.S_(i)):i instanceof cd?(Ua("SyncEngine","Document no longer in limbo: "+i.key),this.c_.$i(i.key,t),this.c_.Mi(i.key)||this.v_(i.key)):Ba()}},t.prototype.S_=function(t){var e=t.key;this.a_.get(e)||(Ua("SyncEngine","New document in limbo: "+e),this.h_.push(e),this.P_())},t.prototype.P_=function(){for(;this.h_.length>0&&this.a_.size<this.s_;){var t=this.h_.shift(),e=this.f_.next();this.u_.set(e,new pd(t)),this.a_=this.a_.nt(t,e),this.e_.listen(new Eu(Ol.hn(t.path).We(),e,2,oh.ps))}},t.prototype.D_=function(){return this.a_},t.prototype.C_=function(){return this.h_},t.prototype.A_=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i,o=this;return m(this,(function(s){switch(s.label){case 0:return n=[],r=[],i=[],this.r_.forEach((function(s,a){i.push(Promise.resolve().then((function(){var e=a.view.Ol(t);return e.ql?o.Yu.Hh(a.query,!1).then((function(t){var n=t.documents;return a.view.Ol(n,e)})):e})).then((function(t){var i=e&&e.Qt.get(a.targetId),s=a.view.Jn(t,o.d_,i);if(o.E_(a.targetId,s.Wl),s.snapshot){o.d_&&o.n_.Tl(a.targetId,s.snapshot.fromCache?"not-current":"current"),n.push(s.snapshot);var u=ih.Rs(a.targetId,s.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return s.sent(),this.i_.mu(n),[4,this.Yu.Wh(r)];case 2:return s.sent(),[2]}}))}))},t.prototype.w_=function(t){},t.prototype.Oc=function(t){return g(this,void 0,void 0,(function(){var e;return m(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(Ua("SyncEngine","User change. New user:",t.Ma()),[4,this.Yu.Nh(t)]);case 1:return e=n.sent(),this.currentUser=t,this.p_("'waitForPendingWrites' promise is rejected due to a user change."),this.n_.Nh(t,e.kh,e.xh),[4,this.A_(e.$h)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.e_.enableNetwork()},t.prototype.disableNetwork=function(){return this.e_.disableNetwork()},t.prototype.xe=function(t){var e=this.u_.get(t);if(e&&e.t_)return ju().add(e.key);var n=ju(),r=this.o_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.r_.get(s);n=n.Ct(a.view.Ml)}return n},t}(),yd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,o,s)||this).Yu=e,a.F_=void 0,a}return y(e,t),Object.defineProperty(e.prototype,"d_",{get:function(){return!0===this.F_},enumerable:!1,configurable:!0}),e.prototype.enableNetwork=function(){return this.Yu.cr(!0),t.prototype.enableNetwork.call(this)},e.prototype.disableNetwork=function(){return this.Yu.cr(!1),t.prototype.disableNetwork.call(this)},e.prototype.N_=function(t){return g(this,void 0,void 0,(function(){var e,n;return m(this,(function(r){switch(r.label){case 0:return[4,this.Yu.Hh(t.query,!0)];case 1:return e=r.sent(),n=t.view.Gl(e),[2,(this.F_&&this.E_(t.targetId,n.Wl),n)]}}))}))},e.prototype.jl=function(e,n){this.d_&&0===n&&(t.prototype.jl.call(this,e,n),this.n_.Il(e)),this.d_||1!==n||t.prototype.jl.call(this,e,n)},e.prototype.bl=function(t,e,n){return g(this,void 0,void 0,(function(){var r;return m(this,(function(i){switch(i.label){case 0:return this.w_("applyBatchState()"),[4,this.Yu.Xh(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.e_.Ec()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.V_(t,n||null),this.Yu.Zh(t)):Ba(),i.label=4;case 4:return[4,this.A_(r)];case 5:return i.sent(),[3,7];case 6:Ua("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},e.prototype.Lc=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u=this;return m(this,(function(c){switch(c.label){case 0:return!0!==t||!0===this.F_?[3,3]:(e=this.n_.il(),[4,this.k_(e.F(),!0)]);case 1:return n=c.sent(),this.F_=!0,[4,this.e_.Lc(!0)];case 2:for(c.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.e_.listen(o);return[3,7];case 3:return!1!==t||!1===this.F_?[3,7]:(s=[],a=Promise.resolve(),this.o_.forEach((function(t,e){u.n_.dl(e)?s.push(e):a=a.then((function(){return u.I_(e),u.Yu.zh(e,!0)})),u.e_.Rc(e)})),[4,a]);case 4:return c.sent(),[4,this.k_(s,!1)];case 5:return c.sent(),this.x_(),this.F_=!1,[4,this.e_.Lc(!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))},e.prototype.x_=function(){var t=this;this.u_.forEach((function(e,n){t.e_.Rc(n)})),this.c_.ua(),this.u_=new Map,this.a_=new Iu(lu.P)},e.prototype.k_=function(t,e){return g(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,f,p;return m(this,(function(d){switch(d.label){case 0:e=[],n=[],r=0,i=t,d.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.o_.get(o))&&0!==a.length?[4,this.Yu.Gh(a[0].We())]:[3,7]):[3,13];case 2:s=d.sent(),u=0,c=a,d.label=3;case 3:return u<c.length?(l=c[u],h=this.r_.get(l),[4,this.N_(h)]):[3,6];case 4:(f=d.sent()).snapshot&&n.push(f.snapshot),d.label=5;case 5:return u++,[3,3];case 6:return[3,11];case 7:return[4,this.Yu.ta(o)];case 8:return p=d.sent(),[4,this.Yu.Gh(p)];case 9:return s=d.sent(),[4,this.T_(this.M_(p),o,!1)];case 10:d.sent(),d.label=11;case 11:e.push(s),d.label=12;case 12:return r++,[3,1];case 13:return[2,(this.i_.mu(n),e)]}}))}))},e.prototype.M_=function(t){return new Ol(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},e.prototype.Dr=function(){return this.Yu.Dr()},e.prototype.vl=function(t,e,n){return g(this,void 0,void 0,(function(){var r,i;return m(this,(function(o){switch(o.label){case 0:return this.F_?(Ua("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.o_.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Yu.si()];case 3:return r=o.sent(),i=zu.Gt(t,"current"===e),[4,this.A_(r,i)];case 4:return o.sent(),[3,8];case 5:return[4,this.Yu.zh(t,!0)];case 6:return o.sent(),this.I_(t,n),[3,8];case 7:Ba(),o.label=8;case 8:return[2]}}))}))},e.prototype.Sl=function(t,e){return g(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f=this;return m(this,(function(p){switch(p.label){case 0:if(!this.F_)return[3,10];n=0,r=t,p.label=1;case 1:return n<r.length?(i=r[n],this.o_.has(i)?(Ua("SyncEngine","Adding an already active target "+i),[3,5]):[4,this.Yu.ta(i)]):[3,6];case 2:return o=p.sent(),[4,this.Yu.Gh(o)];case 3:return s=p.sent(),[4,this.T_(this.M_(o),s.targetId,!1)];case 4:p.sent(),this.e_.listen(s),p.label=5;case 5:return n++,[3,1];case 6:a=function(t){return m(this,(function(e){switch(e.label){case 0:return u.o_.has(t)?[4,u.Yu.zh(t,!1).then((function(){f.e_.Rc(t),f.I_(t)})).catch(Lf)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},u=this,c=0,l=e,p.label=7;case 7:return c<l.length?(h=l[c],[5,a(h)]):[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e}(dd),vd=function(){this.O_=void 0,this.listeners=[]},gd=function(){function t(t){this.Vc=t,this.L_=new eu((function(t){return Dl(t)}),Rl),this.onlineState="Unknown",this.B_=new Set,this.Vc.subscribe(this)}return t.prototype.listen=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i,o,s;return m(this,(function(a){switch(a.label){case 0:if(e=t.query,n=!1,(r=this.L_.get(e))||(n=!0,r=new vd),!n)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),i=r,[4,this.Vc.listen(e)];case 2:return i.O_=a.sent(),[3,4];case 3:return o=a.sent(),s=If(o,"Initialization of query '"+Ll(t.query)+"' failed"),[2,void t.onError(s)];case 4:return this.L_.set(e,r),r.listeners.push(t),t.jl(this.onlineState),r.O_&&t.q_(r.O_)&&this.U_(),[2]}}))}))},t.prototype.Rc=function(t){return g(this,void 0,void 0,(function(){var e,n,r,i;return m(this,(function(o){return e=t.query,n=!1,(r=this.L_.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.L_.delete(e),this.Vc.Rc(e))]:[2]}))}))},t.prototype.mu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.L_.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].q_(i)&&(e=!0);s.O_=i}}e&&this.U_()},t.prototype.b_=function(t,e){var n=this.L_.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.L_.delete(t)},t.prototype.R_=function(t){this.onlineState=t;var e=!1;this.L_.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].jl(t)&&(e=!0)})),e&&this.U_()},t.prototype.Q_=function(t){this.B_.add(t),t.next()},t.prototype.W_=function(t){this.B_.delete(t)},t.prototype.U_=function(){this.B_.forEach((function(t){t.next()}))},t}(),md=function(){function t(t,e,n){this.query=t,this.j_=e,this.K_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.q_=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Wu(t.query,t.docs,t.Ot,e,t.Lt,t.fromCache,t.Bt,!0)}var o=!1;return this.K_?this.z_(t)&&(this.j_.next(t),o=!0):this.H_(t,this.onlineState)&&(this.Y_(t),o=!0),this.G_=t,o},t.prototype.onError=function(t){this.j_.error(t)},t.prototype.jl=function(t){this.onlineState=t;var e=!1;return this.G_&&!this.K_&&this.H_(this.G_,t)&&(this.Y_(this.G_),e=!0),e},t.prototype.H_=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.J_&&n||t.docs._()&&"Offline"!==e)},t.prototype.z_=function(t){if(t.docChanges.length>0)return!0;var e=this.G_&&this.G_.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Y_=function(t){t=Wu.Ut(t.query,t.docs,t.Lt,t.fromCache),this.K_=!0,this.j_.next(t)},t}(),_d=function(){function t(){}return t.prototype.Fh=function(t){this.X_=t},t.prototype._s=function(t,e,n,r){var i=this;return e.En()||n.isEqual(ou.min())?this.Z_(t,e):this.X_.us(t,r).next((function(o){var s=i.tf(e,o);return(e.In()||e.mn())&&i.ql(e.nn,s,r,n)?i.Z_(t,e):(ja()<=ct.DEBUG&&Ua("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ll(e)),i.X_._s(t,e,n).next((function(t){return s.forEach((function(e){t=t.nt(e.key,e)})),t})))}))},t.prototype.tf=function(t,e){var n=new ku(Fl(t));return e.forEach((function(e,r){r instanceof kl&&Ml(t,r)&&(n=n.add(r))})),n},t.prototype.ql=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.Z_=function(t,e){return ja()<=ct.DEBUG&&Ua("IndexFreeQueryEngine","Using full collection scan to execute query:",Ll(e)),this.X_._s(t,e,ou.min())},t}(),bd=function(){function t(t,e){this.ss=t,this.wi=e,this.ns=[],this.ef=1,this.nf=new ku(Ff.na)}return t.prototype.Jr=function(t){return Zl.resolve(0===this.ns.length)},t.prototype.Xr=function(t,e,n,r){var i=this.ef;this.ef++,this.ns.length>0&&this.ns[this.ns.length-1];var o=new Xl(i,e,n,r);this.ns.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.nf=this.nf.add(new Ff(u.key,i)),this.ss.Us(t,u.key.path.p())}return Zl.resolve(o)},t.prototype.Zr=function(t,e){return Zl.resolve(this.sf(e))},t.prototype.eo=function(t,e){var n=e+1,r=this.if(n),i=r<0?0:r;return Zl.resolve(this.ns.length>i?this.ns[i]:null)},t.prototype.no=function(){return Zl.resolve(0===this.ns.length?-1:this.ef-1)},t.prototype.so=function(t){return Zl.resolve(this.ns.slice())},t.prototype.os=function(t,e){var n=this,r=new Ff(e,0),i=new Ff(e,Number.POSITIVE_INFINITY),o=[];return this.nf.vt([r,i],(function(t){var e=n.sf(t.la);o.push(e)})),Zl.resolve(o)},t.prototype.ls=function(t,e){var n=this,r=new ku(Ga);return e.forEach((function(t){var e=new Ff(t,0),i=new Ff(t,Number.POSITIVE_INFINITY);n.nf.vt([e,i],(function(t){r=r.add(t.la)}))})),Zl.resolve(this.rf(r))},t.prototype.Es=function(t,e){var n=e.path,r=n.length+1,i=n;lu.W(i)||(i=i.child(""));var o=new Ff(new lu(i),0),s=new ku(Ga);return this.nf.St((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(s=s.add(t.la)),!0)}),o),Zl.resolve(this.rf(s))},t.prototype.rf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.sf(t);null!==r&&n.push(r)})),n},t.prototype.ro=function(t,e){var n=this;Wa(0===this.hf(e.batchId,"removed")),this.ns.shift();var r=this.nf;return Zl.forEach(e.mutations,(function(i){var o=new Ff(i.key,e.batchId);return r=r.delete(o),n.wi.Qr(t,i.key)})).next((function(){n.nf=r}))},t.prototype.oo=function(t){},t.prototype.Mi=function(t,e){var n=new Ff(e,0),r=this.nf.Dt(n);return Zl.resolve(e.isEqual(r&&r.key))},t.prototype.ho=function(t){return this.ns.length,Zl.resolve()},t.prototype.hf=function(t,e){return this.if(t)},t.prototype.if=function(t){return 0===this.ns.length?0:t-this.ns[0].batchId},t.prototype.sf=function(t){var e=this.if(t);return e<0||e>=this.ns.length?null:this.ns[e]},t}(),wd=function(){function t(t,e){this.ss=t,this.af=e,this.docs=new Iu(lu.P),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.af(e);return this.docs=this.docs.nt(r,{Ys:e,size:s,readTime:n}),this.size+=s-o,this.ss.Us(t,r.path.p())},t.prototype.Gn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.zn=function(t,e){var n=this.docs.get(e);return Zl.resolve(n?n.Ys:null)},t.prototype.getEntries=function(t,e){var n=this,r=Ru();return e.forEach((function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Ys:null)})),Zl.resolve(r)},t.prototype._s=function(t,e,n){for(var r=Lu(),i=new lu(e.path.child("")),o=this.docs.ut(i);o.wt();){var s=o.dt(),a=s.key,u=s.value,c=u.Ys,l=u.readTime;if(!e.path.D(a.path))break;l.o(n)<=0||c instanceof kl&&Ml(e,c)&&(r=r.nt(c.key,c))}return Zl.resolve(r)},t.prototype.uf=function(t,e){return Zl.forEach(this.docs,(function(t){return e(t)}))},t.prototype.oi=function(e){return new t.hi(this)},t.prototype.ui=function(t){return Zl.resolve(this.size)},t}();wd.hi=function(t){function e(e){var n=this;return(n=t.call(this)||this).ci=e,n}return y(e,t),e.prototype.Jn=function(t){var e=this,n=[];return this.Un.forEach((function(r,i){i?n.push(e.ci.jn(t,i,e.readTime)):e.ci.Gn(r)})),Zl.Bn(n)},e.prototype.Hn=function(t,e){return this.ci.zn(t,e)},e.prototype.Yn=function(t,e){return this.ci.getEntries(t,e)},e}(th);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ed=function(){function t(t){this.persistence=t,this.cf=new eu((function(t){return vu(t)}),gu),this.lastRemoteSnapshotVersion=ou.min(),this.highestTargetId=0,this.lf=0,this._f=new Mf,this.targetCount=0,this.ff=Ph.fi()}return t.prototype.pe=function(t,e){return this.cf.forEach((function(t,n){return e(n)})),Zl.resolve()},t.prototype.mi=function(t){return Zl.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ai=function(t){return Zl.resolve(this.lf)},t.prototype.Ti=function(t){return this.highestTargetId=this.ff.next(),Zl.resolve(this.highestTargetId)},t.prototype.Ri=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.lf&&(this.lf=e),Zl.resolve()},t.prototype.Vi=function(t){this.cf.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ff=new Ph(e),this.highestTargetId=e),t.sequenceNumber>this.lf&&(this.lf=t.sequenceNumber)},t.prototype.Pi=function(t,e){return this.Vi(e),this.targetCount+=1,Zl.resolve()},t.prototype.yi=function(t,e){return this.Vi(e),Zl.resolve()},t.prototype.pi=function(t,e){return this.cf.delete(e.target),this._f.aa(e.targetId),this.targetCount-=1,Zl.resolve()},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return this.cf.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.cf.delete(s),o.push(r.bi(t,a.targetId)),i++)})),Zl.Bn(o).next((function(){return i}))},t.prototype.Si=function(t){return Zl.resolve(this.targetCount)},t.prototype.Di=function(t,e){var n=this.cf.get(e)||null;return Zl.resolve(n)},t.prototype.Ci=function(t,e,n){return this._f.ra(e,n),Zl.resolve()},t.prototype.Ni=function(t,e,n){this._f.ha(e,n);var r=this.persistence.wi,i=[];return r&&e.forEach((function(e){i.push(r.Qr(t,e))})),Zl.Bn(i)},t.prototype.bi=function(t,e){return this._f.aa(e),Zl.resolve()},t.prototype.ki=function(t,e){var n=this._f.ca(e);return Zl.resolve(n)},t.prototype.Mi=function(t,e){return Zl.resolve(this._f.Mi(e))},t}(),Td=function(){function t(t){var e=this;this.df={},this.Ui=new oh(0),this.Qi=!1,this.Qi=!0,this.wi=t(this),this.Xi=new Ed(this),this.ss=new fh,this.es=new wd(this.ss,(function(t){return e.wi.wf(t)}))}return t.prototype.start=function(){return Promise.resolve()},t.prototype.yr=function(){return this.Qi=!1,Promise.resolve()},Object.defineProperty(t.prototype,"hr",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),t.prototype.ar=function(){},t.prototype.kr=function(){return this.ss},t.prototype.Cr=function(t){var e=this.df[t.Ma()];return e||(e=new bd(this.ss,this.wi),this.df[t.Ma()]=e),e},t.prototype.Nr=function(){return this.Xi},t.prototype.$r=function(){return this.es},t.prototype.runTransaction=function(t,e,n){var r=this;Ua("MemoryPersistence","Starting transaction:",t);var i=new Cd(this.Ui.next());return this.wi.Tf(),n(i).next((function(t){return r.wi.Ef(i).next((function(){return t}))})).On().then((function(t){return i.ts(),t}))},t.prototype.If=function(t,e){return Zl.qn(Object.values(this.df).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),Cd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Li=e,n}return y(e,t),e}(nh),Sd=function(){function t(t){this.persistence=t,this.mf=new Mf,this.Af=null}return t.Rf=function(e){return new t(e)},Object.defineProperty(t.prototype,"Pf",{get:function(){if(this.Af)return this.Af;throw Ba()},enumerable:!1,configurable:!0}),t.prototype.Fi=function(t,e,n){return this.mf.Fi(n,e),this.Pf.delete(n),Zl.resolve()},t.prototype.$i=function(t,e,n){return this.mf.$i(n,e),this.Pf.add(n),Zl.resolve()},t.prototype.Qr=function(t,e){return this.Pf.add(e),Zl.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.mf.aa(e.targetId).forEach((function(t){return n.Pf.add(t)}));var r=this.persistence.Nr();return r.ki(t,e.targetId).next((function(t){t.forEach((function(t){return n.Pf.add(t)}))})).next((function(){return r.pi(t,e)}))},t.prototype.Tf=function(){this.Af=new Set},t.prototype.Ef=function(t){var e=this,n=this.persistence.$r().oi();return Zl.forEach(this.Pf,(function(r){return e.Vf(t,r).next((function(t){t||n.Gn(r)}))})).next((function(){return e.Af=null,n.apply(t)}))},t.prototype.Gr=function(t,e){var n=this;return this.Vf(t,e).next((function(t){t?n.Pf.delete(e):n.Pf.add(e)}))},t.prototype.wf=function(t){return 0},t.prototype.Vf=function(t,e){var n=this;return Zl.qn([function(){return Zl.resolve(n.mf.Mi(e))},function(){return n.persistence.Nr().Mi(t,e)},function(){return n.persistence.If(t,e)}])},t}(),Id=function(){function t(t){this.gf=t.gf,this.yf=t.yf}return t.prototype.Eu=function(t){this.pf=t},t.prototype._u=function(t){this.bf=t},t.prototype.onMessage=function(t){this.vf=t},t.prototype.close=function(){this.yf()},t.prototype.send=function(t){this.gf(t)},t.prototype.Sf=function(){this.pf()},t.prototype.Df=function(t){this.bf(t)},t.prototype.Cf=function(t){this.vf(t)},t}(),xd={BatchGetDocuments:"batchGet",Commit:"commit"},Nd="gl-js/ fire/"+Ma,kd=function(){function t(t){this.s=t.s;var e=t.ssl?"https":"http";this.Ff=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Nf=function(t,e){if(e)for(var n in e.Ba)e.Ba.hasOwnProperty(n)&&(t[n]=e.Ba[n]);t["X-Goog-Api-Client"]=Nd},t.prototype.Du=function(t,e,n){var r=this,i=this.$f(t);return new Promise((function(o,s){var a=new La;a.listenOnce(Ra.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Oa.NO_ERROR:var e=a.getResponseJson();Ua("Connection","XHR received:",JSON.stringify(e)),o(e);break;case Oa.TIMEOUT:Ua("Connection",'RPC "'+t+'" timed out'),s(new ru(nu.DEADLINE_EXCEEDED,"Request time out"));break;case Oa.HTTP_ERROR:var n=a.getStatus();if(Ua("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var i=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(nu).indexOf(e)>=0?e:nu.UNKNOWN}(r.status);s(new ru(i,r.message))}else s(new ru(nu.UNKNOWN,"Server responded with status "+a.getStatus()))}else Ua("Connection",'RPC "'+t+'" failed'),s(new ru(nu.UNAVAILABLE,"Connection failed."));break;default:Ba()}}finally{Ua("Connection",'RPC "'+t+'" completed.')}}));var u=Object.assign({},e);delete u.database;var c=JSON.stringify(u);Ua("Connection","XHR sending: ",i+" "+c);var l={"Content-Type":"text/plain"};r.Nf(l,n),a.send(i,"POST",c,l,15)}))},t.prototype.Cu=function(t,e,n){return this.Du(t,e,n)},t.prototype.Iu=function(t,e){var n,r,i=[this.Ff,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Pa(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Nf(s.initMessageHeaders,e),D()||M()||R().indexOf("Electron/")>=0||((r=R()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||R().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");Ua("Connection","Creating WebChannel: "+a+" "+s);var u=o.createWebChannel(a,s),c=!1,l=!1,h=new Id({gf:function(t){l?Ua("Connection","Not sending because WebChannel is closed:",t):(c||(Ua("Connection","Opening WebChannel transport."),u.open(),c=!0),Ua("Connection","WebChannel sending:",t),u.send(t))},yf:function(){return u.close()}}),f=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(Da.EventType.OPEN,(function(){l||Ua("Connection","WebChannel transport opened.")})),f(Da.EventType.CLOSE,(function(){l||(l=!0,Ua("Connection","WebChannel transport closed"),h.Df())})),f(Da.EventType.ERROR,(function(t){l||(l=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Fa.logLevel<=ct.WARN){var r=e.map(qa);Fa.warn.apply(Fa,E(["Firestore ("+Ma+"): "+t],r))}}("Connection","WebChannel transport errored:",t),h.Df(new ru(nu.UNAVAILABLE,"The operation could not be completed")))})),f(Da.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];Wa(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ua("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=bu[t];if(void 0!==e)return Su(e)}(o),a=i.message;void 0===s&&(s=nu.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),l=!0,h.Df(new ru(s,a)),u.close()}else Ua("Connection","WebChannel received:",n),h.Cf(n)}})),setTimeout((function(){h.Sf()}),0),h},t.prototype.$f=function(t){var e=xd[t];return this.Ff+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),Ad=function(){function t(){var t=this;this.kf=function(){return t.xf()},this.Mf=function(){return t.Of()},this.Lf=[],this.Bf()}return t.prototype.nc=function(t){this.Lf.push(t)},t.prototype.yr=function(){window.removeEventListener("online",this.kf),window.removeEventListener("offline",this.Mf)},t.prototype.Bf=function(){window.addEventListener("online",this.kf),window.addEventListener("offline",this.Mf)},t.prototype.xf=function(){Ua("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(0)},t.prototype.Of=function(){Ua("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lf;t<e.length;t++)(0,e[t])(1)},t.Hi=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Pd=function(){function t(){}return t.prototype.nc=function(t){},t.prototype.yr=function(){},t}(),Od="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",Rd=function(){function t(){}return t.prototype.initialize=function(t){return g(this,void 0,void 0,(function(){var e=this;return m(this,(function(n){switch(n.label){case 0:return this.n_=this.qf(t),this.persistence=this.Uf(t),[4,this.persistence.start()];case 1:return n.sent(),this.Qf=this.Wf(t),this.Yu=this.jf(t),this.e_=this.Kf(t),this.Vc=this.Gf(t),this.zf=this.Hf(t),this.n_.qu=function(t){return e.Vc.jl(t,1)},this.e_.Vc=this.Vc,[4,this.Yu.start()];case 2:return n.sent(),[4,this.n_.start()];case 3:return n.sent(),[4,this.e_.start()];case 4:return n.sent(),[4,this.e_.Lc(this.Vc.d_)];case 5:return n.sent(),[2]}}))}))},t.prototype.Hf=function(t){return new gd(this.Vc)},t.prototype.Wf=function(t){return null},t.prototype.jf=function(t){return e=this.persistence,n=new _d,r=t.Yf,new Rf(e,n,r);var e,n,r},t.prototype.Uf=function(t){if(t.Xf.Jf)throw new ru(nu.FAILED_PRECONDITION,Od);return new Td(Sd.Rf)},t.prototype.Kf=function(t){var e=this;return new Xp(this.Yu,t.Fu,t.Ro,(function(t){return e.Vc.jl(t,0)}),Ad.Hi()?new Ad:new Pd)},t.prototype.qf=function(t){return new ad},t.prototype.Gf=function(t){return e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,s=t.s_,new dd(e,n,r,i,o,s);var e,n,r,i,o,s},t.prototype.clearPersistence=function(t){throw new ru(nu.FAILED_PRECONDITION,Od)},t}(),Dd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.initialize=function(e){return g(this,void 0,void 0,(function(){var n=this;return m(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.or((function(t){return g(n,void 0,void 0,(function(){return m(this,(function(e){switch(e.label){case 0:return[4,this.Vc.Lc(t)];case 1:return e.sent(),this.Qf&&(t&&!this.Qf.hr?this.Qf.start(this.Yu):t||this.Qf.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.jf=function(t){return e=this.persistence,n=new _d,r=t.Yf,new Df(e,n,r);var e,n,r},e.prototype.Gf=function(t){var e,n,r,i,o,s,a=(e=this.Yu,n=this.e_,r=t.Fu,i=this.n_,o=t.Yf,s=t.s_,new yd(e,n,r,i,o,s));return this.n_ instanceof sd&&(this.n_.Vc=a),a},e.prototype.Wf=function(t){var e=this.persistence.wi.Or;return new Pf(e,t.Ro)},e.prototype.Uf=function(t){var e=jh.Mr(t.Zf),n=_p(t.Zf.s);return new jh(t.Xf.synchronizeTabs,e,t.clientId,Af.ah(t.Xf.cacheSizeBytes),t.Ro,Tf(),"undefined"!=typeof document?document:null,n,this.n_,t.Xf.qi)},e.prototype.qf=function(t){if(t.Xf.Jf&&t.Xf.synchronizeTabs){var e=Tf();if(!sd.Hi(e))throw new ru(nu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jh.Mr(t.Zf);return new sd(e,t.Ro,n,t.clientId,t.Yf)}return new ad},e.prototype.clearPersistence=function(t){var e=jh.Mr(t);return jh.clearPersistence(e)},e}(Rd),Ld=function(){function t(t,e){this.credentials=t,this.Ro=e,this.clientId=Qa.t()}return t.prototype.start=function(t,e,n){var r=this;this.Su(),this.Zf=t;var i=new sh,o=new sh,s=!1;return this.credentials.Qa((function(t){if(!s)return s=!0,Ua("FirestoreClient","Initializing. user=",t.uid),r.td(e,n,t,o).then(i.resolve,i.reject);r.Ro.dr((function(){return r.e_.Oc(t)}))})),this.Ro.lr((function(){return i.promise})),o.promise},t.prototype.enableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.enableNetwork()}))},t.prototype.td=function(t,e,n,r){return g(this,void 0,void 0,(function(){var i,o,s,a,u,c=this;return m(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),[4,(u=this.Zf,Promise.resolve(new kd(u)))];case 1:return i=l.sent(),o=_p(this.Zf.s),s=function(t,e,n){return new Yp(t,e,n)}(i,this.credentials,o),[4,t.initialize({Ro:this.Ro,Zf:this.Zf,Fu:s,clientId:this.clientId,Yf:n,s_:100,Xf:e})];case 2:return l.sent(),this.persistence=t.persistence,this.n_=t.n_,this.Yu=t.Yu,this.e_=t.e_,this.Vc=t.Vc,this.Qf=t.Qf,this.ed=t.zf,this.persistence.ar((function(){return g(c,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),r.resolve(),[3,4];case 3:if(a=l.sent(),r.reject(a),!this.nd(a))throw a;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),this.td(new Rd,{Jf:!1},n,r))];case 4:return[2]}}))}))},t.prototype.nd=function(t){return"FirebaseError"===t.name?t.code===nu.FAILED_PRECONDITION||t.code===nu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Su=function(){if(this.Ro.Oo)throw new ru(nu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.Su(),this.Ro.enqueue((function(){return t.Vc.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Ro.Qo((function(){return g(t,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.Qf&&this.Qf.stop(),[4,this.e_.yr()];case 1:return t.sent(),[4,this.n_.yr()];case 2:return t.sent(),[4,this.persistence.yr()];case 3:return t.sent(),this.credentials.Wa(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Su();var e=new sh;return this.Ro.lr((function(){return t.Vc.y_(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Su();var i=new md(t,e,n);return this.Ro.lr((function(){return r.ed.listen(i)})),i},t.prototype.Rc=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.Rc(t)}))},t.prototype.rd=function(t){return g(this,void 0,void 0,(function(){var e,n=this;return m(this,(function(r){switch(r.label){case 0:return this.Su(),e=new sh,[4,this.Ro.enqueue((function(){return g(n,void 0,void 0,(function(){var n,r,i;return m(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.Yu.Kh(t)];case 1:return(n=o.sent())instanceof kl?e.resolve(n):n instanceof Al?e.resolve(null):e.reject(new ru(nu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=If(r,"Failed to get document '"+t+" from cache"),e.reject(i),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.od=function(t){return g(this,void 0,void 0,(function(){var e,n=this;return m(this,(function(r){switch(r.label){case 0:return this.Su(),e=new sh,[4,this.Ro.enqueue((function(){return g(n,void 0,void 0,(function(){var n,r,i,o,s,a;return m(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.Yu.Hh(t,!0)];case 1:return n=u.sent(),r=new ld(t,n.Yh),i=r.Ol(n.documents),o=r.Jn(i,!1),e.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=If(s,"Failed to execute query '"+t+" against cache"),e.reject(a),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.Su();var n=new sh;return this.Ro.lr((function(){return e.Vc.write(t,n)})),n.promise},t.prototype.s=function(){return this.Zf.s},t.prototype.Q_=function(t){var e=this;this.Su(),this.Ro.lr((function(){return e.ed.Q_(t),Promise.resolve()}))},t.prototype.W_=function(t){var e=this;this.sd||this.Ro.lr((function(){return e.ed.W_(t),Promise.resolve()}))},Object.defineProperty(t.prototype,"sd",{get:function(){return this.Ro.Oo},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Su();var n=new sh;return this.Ro.lr((function(){return e.Vc.runTransaction(e.Ro,t,n),Promise.resolve()})),n.promise},t}(),Md=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.hd(this.observer.next,t)},t.prototype.error=function(t){this.hd(this.observer.error,t)},t.prototype.ad=function(){this.muted=!0},t.prototype.hd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var jd=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.ud=n,this.ld=r}return t.prototype._d=function(t){switch(nc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return cc(t.integerValue||t.doubleValue);case 3:return this.fd(t.timestampValue);case 4:return this.dd(t);case 5:return t.stringValue;case 6:return new op(lc(t.bytesValue));case 7:return this.wd(t.referenceValue);case 8:return this.Td(t.geoPointValue);case 9:return this.Ed(t.arrayValue);case 10:return this.Id(t.mapValue);default:throw Ba()}},t.prototype.Id=function(t){var e=this,n={};return Za(t.fields||{},(function(t,r){n[t]=e._d(r)})),n},t.prototype.Td=function(t){return new mp(cc(t.latitude),cc(t.longitude))},t.prototype.Ed=function(t){var e=this;return(t.values||[]).map((function(t){return e._d(t)}))},t.prototype.dd=function(t){switch(this.ud){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Zu(n)?t(n):n}(t);return null==e?null:this._d(e);case"estimate":return this.fd(tc(t));default:return null}},t.prototype.fd=function(t){var e=uc(t),n=new iu(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.wd=function(t){var e=au.$(t);Wa(Gc(e));var n=new Xa(e.get(1),e.get(3)),r=new lu(e.g(5));return n.isEqual(this.s)||Va("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.ld(r)},t}(),Ud=Af._h,Vd=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new ru(nu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else zf("settings","non-empty string","host",t.host),this.host=t.host,Hf("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Jf("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),Hf("settings","object","credentials",t.credentials),this.credentials=t.credentials,Hf("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),Hf("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?Va("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&Va("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,Hf("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Af.dh;else{if(t.cacheSizeBytes!==Ud&&t.cacheSizeBytes<Af.fh)throw new ru(nu.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Af.fh);this.cacheSizeBytes=t.cacheSizeBytes}Hf("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),qd=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new Rd),this.md=null,this.Ad=new Sf,this.INTERNAL={delete:function(){return g(i,void 0,void 0,(function(){return m(this,(function(t){switch(t.label){case 0:return this.Rd(),[4,this.Pd.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var o=e;this.md=o,this.ya=t.Vd(o),this.gd=o.name,this.yd=new Bp(n)}else{var s=e;if(!s.projectId)throw new ru(nu.INVALID_ARGUMENT,"Must provide projectId");this.ya=new Xa(s.projectId,s.database),this.gd="[DEFAULT]",this.yd=new qp}this.pd=r,this.bd=new Vd({})}return Object.defineProperty(t.prototype,"vd",{get:function(){return this.Sd||(this.Sd=new Ip(this.ya,this.bd.ignoreUndefinedProperties)),this.Sd},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){Uf("Firestore.settings",arguments,1),Bf("Firestore.settings","object",1,t);var e=new Vd(t);if(this.Pd&&!this.bd.isEqual(e))throw new ru(nu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.bd=e,void 0!==e.credentials&&(this.yd=function(t){if(!t)return new qp;switch(t.type){case"gapi":var e=t.Dd;return Wa(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new zp(e,t.Ya||"0");case"provider":return t.Dd;default:throw new ru(nu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.Rd(),this.Pd.enableNetwork()},t.prototype.disableNetwork=function(){return this.Rd(),this.Pd.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Pd)throw new ru(nu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&Va("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new ru(nu.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Cd(this.pd,{Jf:!0,cacheSizeBytes:this.bd.cacheSizeBytes,synchronizeTabs:r,qi:i})},t.prototype.clearPersistence=function(){return g(this,void 0,void 0,(function(){var t,e=this;return m(this,(function(n){if(void 0!==this.Pd&&!this.Pd.sd)throw new ru(nu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new sh,[2,(this.Ad.Lo((function(){return g(e,void 0,void 0,(function(){var e,n;return m(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e=this.Fd(),[4,this.pd.clearPersistence(e)];case 1:return r.sent(),t.resolve(),[3,3];case 2:return n=r.sent(),t.reject(n),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Nd",{get:function(){return this.Rd(),this.Pd.sd},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Rd(),this.Pd.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.Rd(),Fd(t))return Bd(this.Pd,t);Bf("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return Bd(this.Pd,e)},t.prototype.Rd=function(){return this.Pd||this.Cd(new Rd,{Jf:!1}),this.Pd},t.prototype.Fd=function(){return new $a(this.ya,this.gd,this.bd.host,this.bd.ssl,this.bd.forceLongPolling)},t.prototype.Cd=function(t,e){var n=this.Fd();return this.Pd=new Ld(this.yd,this.Ad),this.Pd.start(n,t,e)},t.Vd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new ru(nu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(!n||"string"!=typeof n)throw new ru(nu.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Xa(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.md)throw new ru(nu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return Uf("Firestore.collection",arguments,1),Bf("Firestore.collection","non-empty string",1,t),this.Rd(),new ty(au.$(t),this,null)},t.prototype.doc=function(t){return Uf("Firestore.doc",arguments,1),Bf("Firestore.doc","non-empty string",1,t),this.Rd(),Hd.$d(au.$(t),this,null)},t.prototype.collectionGroup=function(t){if(Uf("Firestore.collectionGroup",arguments,1),Bf("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Rd(),new Xd(new Ol(au.k(),t),this,null)},t.prototype.runTransaction=function(t){var e=this;return Uf("Firestore.runTransaction",arguments,1),Bf("Firestore.runTransaction","function",1,t),this.Rd().transaction((function(n){return t(new Wd(e,n))}))},t.prototype.batch=function(){return this.Rd(),new zd(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(ja()){case ct.DEBUG:return"debug";case ct.ERROR:return"error";case ct.SILENT:return"silent";case ct.WARN:return"warn";case ct.INFO:return"info";case ct.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;Uf("Firestore.setLogLevel",arguments,1),Gf("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,Fa.setLogLevel(e)},t.prototype.kd=function(){return this.bd.timestampsInSnapshots},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t,e){var n=new Md({next:function(){e.next&&e.next()},error:function(t){throw Ba()}});return t.Q_(n),function(){n.ad(),t.W_(n)}}var Wd=function(){function t(t,e){this.xd=t,this.Md=e}return t.prototype.get=function(t){var e=this;Uf("Transaction.get",arguments,1);var n=iy("Transaction.get",t,this.xd);return this.Md.Mu([n.pa]).then((function(t){if(!t||1!==t.length)return Ba();var r=t[0];if(r instanceof Al)return new Yd(e.xd,n.pa,null,!1,!1,n.ba);if(r instanceof kl)return new Yd(e.xd,n.pa,r,!1,!1,n.ba);throw Ba()}))},t.prototype.set=function(t,e,n){qf("Transaction.set",arguments,2,3);var r=iy("Transaction.set",t,this.xd);n=ey("Transaction.set",n);var i=sy(r.ba,e,n),o=xp(this.xd.vd,"Transaction.set",r.pa,i,null!==r.ba,n);return this.Md.set(r.pa,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof ap?(Vf("Transaction.update",arguments,3),r=iy("Transaction.update",t,this.xd),i=kp(this.xd.vd,"Transaction.update",r.pa,e,n,o)):(Uf("Transaction.update",arguments,2),r=iy("Transaction.update",t,this.xd),i=Np(this.xd.vd,"Transaction.update",r.pa,e)),this.Md.update(r.pa,i),this},t.prototype.delete=function(t){Uf("Transaction.delete",arguments,1);var e=iy("Transaction.delete",t,this.xd);return this.Md.delete(e.pa),this},t}(),zd=function(){function t(t){this.xd=t,this.Od=[],this.Ld=!1}return t.prototype.set=function(t,e,n){qf("WriteBatch.set",arguments,2,3),this.Bd();var r=iy("WriteBatch.set",t,this.xd);n=ey("WriteBatch.set",n);var i=sy(r.ba,e,n),o=xp(this.xd.vd,"WriteBatch.set",r.pa,i,null!==r.ba,n);return this.Od=this.Od.concat(o.va(r.pa,cl.Qe())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Bd(),"string"==typeof e||e instanceof ap?(Vf("WriteBatch.update",arguments,3),r=iy("WriteBatch.update",t,this.xd),i=kp(this.xd.vd,"WriteBatch.update",r.pa,e,n,o)):(Uf("WriteBatch.update",arguments,2),r=iy("WriteBatch.update",t,this.xd),i=Np(this.xd.vd,"WriteBatch.update",r.pa,e)),this.Od=this.Od.concat(i.va(r.pa,cl.exists(!0))),this},t.prototype.delete=function(t){Uf("WriteBatch.delete",arguments,1),this.Bd();var e=iy("WriteBatch.delete",t,this.xd);return this.Od=this.Od.concat(new Tl(e.pa,cl.Qe())),this},t.prototype.commit=function(){return this.Bd(),this.Ld=!0,this.Od.length>0?this.xd.Rd().write(this.Od):Promise.resolve()},t.prototype.Bd=function(){if(this.Ld)throw new ru(nu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Hd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,e,r)||this).pa=e,i.firestore=n,i.ba=r,i.Pd=i.firestore.Rd(),i}return y(e,t),e.$d=function(t,n,r){if(t.length%2!=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new e(new lu(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ty(this.pa.path.p(),this.firestore,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.pa.path.N()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(Uf("DocumentReference.collection",arguments,1),Bf("DocumentReference.collection","non-empty string",1,t),!t)throw new ru(nu.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=au.$(t);return new ty(this.pa.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Zf("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.pa.isEqual(t.pa)&&this.ba===t.ba},e.prototype.set=function(t,e){qf("DocumentReference.set",arguments,1,2),e=ey("DocumentReference.set",e);var n=sy(this.ba,t,e),r=xp(this.firestore.vd,"DocumentReference.set",this.pa,n,null!==this.ba,e);return this.Pd.write(r.va(this.pa,cl.Qe()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof ap?(Vf("DocumentReference.update",arguments,2),n=kp(this.firestore.vd,"DocumentReference.update",this.pa,t,e,r)):(Uf("DocumentReference.update",arguments,1),n=Np(this.firestore.vd,"DocumentReference.update",this.pa,t)),this.Pd.write(n.va(this.pa,cl.exists(!0)))},e.prototype.delete=function(){return Uf("DocumentReference.delete",arguments,0),this.Pd.write([new Tl(this.pa,cl.Qe())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];qf("DocumentReference.onSnapshot",arguments,1,4);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Fd(i[a])||(Jf("DocumentReference.onSnapshot",s=i[a],["includeMetadataChanges"]),Hf("DocumentReference.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++);var u={includeMetadataChanges:s.includeMetadataChanges};if(Fd(i[a])){var c=i[a];i[a]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[a+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[a+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else Bf("DocumentReference.onSnapshot","function",a,i[a]),Wf("DocumentReference.onSnapshot","function",a+1,i[a+1]),Wf("DocumentReference.onSnapshot","function",a+2,i[a+2]);var l={next:function(t){i[a]&&i[a](r.qd(t))},error:i[a+1],complete:i[a+2]};return Qd(this.Pd,this.pa,u,l)},e.prototype.get=function(t){var e=this;return qf("DocumentReference.get",arguments,0,1),ry("DocumentReference.get",t),t&&"cache"===t.source?this.firestore.Rd().rd(this.pa).then((function(t){return new Yd(e.firestore,e.pa,t,!0,t instanceof kl&&t.Ge,e.ba)})):function(t,e,n){var r=new sh,i=Qd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i();var o=t.docs.has(e);!o&&t.fromCache?r.reject(new ru(nu.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&t.fromCache&&n&&"server"===n.source?r.reject(new ru(nu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(this.Pd,this.pa,t).then((function(t){return e.qd(t)}))},e.prototype.withConverter=function(t){return new e(this.pa,this.firestore,t)},e.prototype.qd=function(t){var e=t.docs.get(this.pa);return new Yd(this.firestore,this.pa,e,t.fromCache,t.hasPendingWrites,this.ba)},e}(wp);function Qd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Md({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(Ol.hn(e.path),o,n);return function(){o.ad(),t.Rc(s)}}var Gd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Yd=function(){function t(t,e,n,r,i,o){this.xd=t,this.pa=e,this.Ud=n,this.Qd=r,this.Wd=i,this.ba=o}return t.prototype.data=function(t){var e=this;if(qf("DocumentSnapshot.data",arguments,0,1),t=ny("DocumentSnapshot.data",t),this.Ud){if(this.ba){var n=new Kd(this.xd,this.pa,this.Ud,this.Qd,this.Wd,null);return this.ba.fromFirestore(n,t)}return new jd(this.xd.ya,this.xd.kd(),t.serverTimestamps||"none",(function(t){return new Hd(t,e.xd,null)}))._d(this.Ud.tn())}},t.prototype.get=function(t,e){var n=this;if(qf("DocumentSnapshot.get",arguments,1,2),e=ny("DocumentSnapshot.get",e),this.Ud){var r=this.Ud.data().field(Lp("DocumentSnapshot.get",t,this.pa));if(null!==r)return new jd(this.xd.ya,this.xd.kd(),e.serverTimestamps||"none",(function(t){return new Hd(t,n.xd,n.ba)}))._d(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.pa.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Hd(this.pa,this.xd,this.ba)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Ud},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Gd(this.Wd,this.Qd)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Zf("isEqual","DocumentSnapshot",1,e);return this.xd===e.xd&&this.Qd===e.Qd&&this.pa.isEqual(e.pa)&&(null===this.Ud?null===e.Ud:this.Ud.isEqual(e.Ud))&&this.ba===e.ba},t}(),Kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Yd);function $d(t){if(t.mn()&&0===t.en.length)throw new ru(nu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.ya,n.vd,e)||this).jd=e,i.firestore=n,i.ba=r,i}return y(e,t),e.prototype.where=function(t,n,r){Uf("Query.where",arguments,3),Xf("Query.where",3,r);var i=Gf("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=Lp("Query.where",t),s=this.Kd(o,i,r);return new e(this.jd.cn(s),this.firestore,this.ba)},e.prototype.orderBy=function(t,n){var r;if(qf("Query.orderBy",arguments,1,2),Wf("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new ru(nu.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Lp("Query.orderBy",t),o=this.Yd(i,r);return new e(this.jd.ln(o),this.firestore,this.ba)},e.prototype.limit=function(t){return Uf("Query.limit",arguments,1),Bf("Query.limit","number",1,t),tp("Query.limit",1,t),new e(this.jd._n(t),this.firestore,this.ba)},e.prototype.limitToLast=function(t){return Uf("Query.limitToLast",arguments,1),Bf("Query.limitToLast","number",1,t),tp("Query.limitToLast",1,t),new e(this.jd.fn(t),this.firestore,this.ba)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vf("Query.startAt",arguments,1);var i=this.ew("Query.startAt",t,n,!0);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vf("Query.startAfter",arguments,1);var i=this.ew("Query.startAfter",t,n,!1);return new e(this.jd.dn(i),this.firestore,this.ba)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vf("Query.endBefore",arguments,1);var i=this.ew("Query.endBefore",t,n,!0);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vf("Query.endAt",arguments,1);var i=this.ew("Query.endAt",t,n,!1);return new e(this.jd.wn(i),this.firestore,this.ba)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Zf("isEqual","Query",1,t);return this.firestore===t.firestore&&Rl(this.jd,t.jd)&&this.ba===t.ba},e.prototype.withConverter=function(t){return new e(this.jd,this.firestore,t)},e.prototype.ew=function(t,e,n,r){if(Xf(t,1,e),e instanceof Yd)return Uf(t,E([e],n),1),this.Xd(t,e.Ud,r);var i=[e].concat(n);return this.Zd(t,i,r)},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];qf("Query.onSnapshot",arguments,1,4);var s={},a=0;if("object"!=typeof i[a]||Fd(i[a])||(Jf("Query.onSnapshot",s=i[a],["includeMetadataChanges"]),Hf("Query.onSnapshot","boolean","includeMetadataChanges",s.includeMetadataChanges),a++),Fd(i[a])){var u=i[a];i[a]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[a+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[a+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else Bf("Query.onSnapshot","function",a,i[a]),Wf("Query.onSnapshot","function",a+1,i[a+1]),Wf("Query.onSnapshot","function",a+2,i[a+2]);var c={next:function(t){i[a]&&i[a](new Zd(r.firestore,r.jd,t,r.ba))},error:i[a+1],complete:i[a+2]};return $d(this.jd),Jd(this.firestore.Rd(),this.jd,s,c)},e.prototype.get=function(t){var e=this;qf("Query.get",arguments,0,1),ry("Query.get",t),$d(this.jd);var n=this.firestore.Rd();return(t&&"cache"===t.source?n.od(this.jd):function(t,e,n){var r=new sh,i=Jd(t,e,{includeMetadataChanges:!0,J_:!0},{next:function(t){i(),t.fromCache&&n&&"server"===n.source?r.reject(new ru(nu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(n,this.jd,t)).then((function(t){return new Zd(e.firestore,e.jd,t,e.ba)}))},e}(function(){function t(t,e,n){this.ya=t,this.vd=e,this.jd=n}return t.prototype.Kd=function(t,e,n){var r;if(t.O()){if("array-contains"===e||"array-contains-any"===e)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.Gd(n,e);for(var i=[],o=0,s=n;o<s.length;o++){var a=s[o];i.push(this.zd(a))}r={arrayValue:{values:i}}}else r=this.zd(n)}else"in"!==e&&"array-contains-any"!==e||this.Gd(n,e),r=Ap(this.vd,"Query.where",n,"in"===e);var u=jl.create(t,e,r);return this.Hd(u),u},t.prototype.Yd=function(t,e){if(null!==this.jd.startAt)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.jd.endAt)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new Yl(t,e);return this.Jd(n),n},t.prototype.Xd=function(t,e,n){if(!e)throw new ru(nu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.jd.orderBy;i<o.length;i++){var s=o[i];if(s.field.O())r.push(hc(this.ya,e.key));else{var a=e.field(s.field);if(Zu(a))throw new ru(nu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.N();throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new zl(r,n)},t.prototype.Zd=function(t,e,n){var r=this.jd.en;if(e.length>r.length)throw new ru(nu.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.O()){if("string"!=typeof s)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.jd.Vn()&&-1!==s.indexOf("/"))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.jd.path.child(au.$(s));if(!lu.W(a))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new lu(a);i.push(hc(this.ya,u))}else{var c=Ap(this.vd,t,s);i.push(c)}}return new zl(i,n)},t.prototype.zd=function(t){if("string"==typeof t){if(""===t)throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.jd.Vn()&&-1!==t.indexOf("/"))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.jd.path.child(au.$(t));if(!lu.W(e))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return hc(this.ya,new lu(e))}if(t instanceof wp)return hc(this.ya,t.pa);throw new ru(nu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+$f(t)+".")},t.prototype.Gd=function(t,e){if(!Array.isArray(t)||0===t.length)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new ru(nu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Hd=function(t){if(t instanceof jl){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.An()){var o=this.jd.an();if(null!==o&&!o.isEqual(t.field))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.jd.un();null!==s&&this.tw(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.jd.Rn(n)),null===a&&r&&(a=this.jd.Rn(e)),null!==a)throw a===t.op?new ru(nu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new ru(nu.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.Jd=function(t){if(null===this.jd.un()){var e=this.jd.an();null!==e&&this.tw(e,t.field)}},t.prototype.tw=function(t,e){if(!e.isEqual(t))throw new ru(nu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}());function Jd(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new Md({next:function(t){r.next&&r.next(t)},error:i}),s=t.listen(e,o,n);return function(){o.ad(),t.Rc(s)}}var Zd=function(){function t(t,e,n,r){this.xd=t,this.nw=e,this.sw=n,this.ba=r,this.iw=null,this.rw=null,this.metadata=new Gd(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.sw.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.sw.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;qf("QuerySnapshot.forEach",arguments,1,2),Bf("QuerySnapshot.forEach","function",1,t),this.sw.docs.forEach((function(r){t.call(e,n.ow(r,n.metadata.fromCache,n.sw.Lt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Xd(this.nw,this.xd,this.ba)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(Jf("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Hf("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.sw.qt)throw new ru(nu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.iw&&this.rw===e||(this.iw=function(t,e,n){if(t.Ot._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Lt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Ot;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Lt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:oy(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.sw,e,this.ow.bind(this)),this.rw=e),this.iw},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Zf("isEqual","QuerySnapshot",1,e);return this.xd===e.xd&&Rl(this.nw,e.nw)&&this.sw.isEqual(e.sw)&&this.ba===e.ba},t.prototype.ow=function(t,e,n){return new Kd(this.xd,t.key,t,e,n,this.ba)},t}(),ty=function(t){function e(e,n,r){var i=this;if((i=t.call(this,Ol.hn(e),n,r)||this).hw=e,e.length%2!=1)throw new ru(nu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.N()+" has "+e.length);return i}return y(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.jd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.jd.path.p();return t._()?null:new Hd(new lu(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.jd.path.N()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){qf("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Qa.t()),Bf("CollectionReference.doc","non-empty string",1,t);var e=au.$(t);return Hd.$d(this.jd.path.child(e),this.firestore,this.ba)},e.prototype.add=function(t){Uf("CollectionReference.add",arguments,1),Bf("CollectionReference.add","object",1,this.ba?this.ba.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.hw,this.firestore,t)},e}(Xd);function ey(t,e){if(void 0===e)return{merge:!1};if(Jf(t,e,["merge","mergeFields"]),Hf(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+$f(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new ru(nu.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+$f(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof ap}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new ru(nu.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ny(t,e){return void 0===e?{}:(Jf(t,e,["serverTimestamps"]),Qf(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function ry(t,e){Wf(t,"object",1,e),e&&(Jf(t,e,["source"]),Qf(t,0,"source",e.source,["default","server","cache"]))}function iy(t,e,n){if(e instanceof wp){if(e.firestore!==n)throw new ru(nu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Zf(t,"DocumentReference",1,e)}function oy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ba()}}function sy(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ay={Firestore:qd,GeoPoint:mp,Timestamp:iu,Blob:op,Transaction:Wd,WriteBatch:zd,DocumentReference:Hd,DocumentSnapshot:Yd,Query:Xd,QueryDocumentSnapshot:Kd,QuerySnapshot:Zd,CollectionReference:ty,FieldPath:ap,FieldValue:vp,setLogLevel:qd.setLogLevel,CACHE_SIZE_UNLIMITED:Ud};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){!function(t,e){t.INTERNAL.registerComponent(new it("firestore",(function(t){return function(t,e){return new qd(t,e,new Dd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},ay)))}(t),t.registerVersion("@firebase/firestore","1.16.0")}(kt);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
kt.registerVersion("firebase","7.16.0","app");n(2).applyChange;function uy(t){return"parent"in t}n(2).diff,n(2).applyChange,n(2).applyChange,n(9).decompressFromEncodedURIComponent,n(9).compressToEncodedURIComponent;function cy(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}1===(ly=cy).length&&(ly=function(t){return function(e,n){return cy(t(e),n)}}(ly));var ly,hy={value:function(){}};function fy(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new py(r)}function py(t){this._=t}function dy(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function yy(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function vy(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=hy,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}py.prototype=fy.prototype={constructor:py,on:function(t,e){var n,r=this._,i=dy(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=vy(r[n],t.name,e);else if(null==e)for(n in r)r[n]=vy(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=yy(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new py(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var gy,my,_y=0,by=0,wy=0,Ey=0,Ty=0,Cy=0,Sy="object"==typeof performance&&performance.now?performance:Date,Iy="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function xy(){return Ty||(Iy(Ny),Ty=Sy.now()+Cy)}function Ny(){Ty=0}function ky(){this._call=this._time=this._next=null}function Ay(t,e,n){var r=new ky;return r.restart(t,e,n),r}function Py(){Ty=(Ey=Sy.now())+Cy,_y=by=0;try{!function(){xy(),++_y;for(var t,e=gy;e;)(t=Ty-e._time)>=0&&e._call.call(null,t),e=e._next;--_y}()}finally{_y=0,function(){var t,e,n=gy,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:gy=e);my=t,Ry(r)}(),Ty=0}}function Oy(){var t=Sy.now(),e=t-Ey;e>1e3&&(Cy-=e,Ey=t)}function Ry(t){_y||(by&&(by=clearTimeout(by)),t-Ty>24?(t<1/0&&(by=setTimeout(Py,t-Sy.now()-Cy)),wy&&(wy=clearInterval(wy))):(wy||(Ey=Sy.now(),wy=setInterval(Oy,1e3)),_y=1,Iy(Py)))}function Dy(t,e,n){var r=new ky;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}ky.prototype=Ay.prototype={constructor:ky,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?xy():+n)+(null==e?0:+e),this._next||my===this||(my?my._next=this:gy=this,my=this),this._call=t,this._time=n,Ry()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ry())}};fy("start","end","cancel","interrupt");var Ly=Math.PI,My=2*Ly,Fy=My-1e-6;function jy(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Uy(){return new jy}jy.prototype=Uy.prototype={constructor:jy,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,a=n-t,u=r-e,c=o-t,l=s-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(l*a-u*c)>1e-6&&i){var f=n-o,p=r-s,d=a*a+u*u,y=f*f+p*p,v=Math.sqrt(d),g=Math.sqrt(h),m=i*Math.tan((Ly-Math.acos((d+h-y)/(2*v*g)))/2),_=m/g,b=m/v;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(e+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*p)+","+(this._x1=t+b*a)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(r),a=n*Math.sin(r),u=t+s,c=e+a,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%My+My),h>Fy?this._+="A"+n+","+n+",0,1,"+l+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=Ly)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Vy(){}function qy(t,e){var n=new Vy;if(t instanceof Vy)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}function By(){}Vy.prototype=qy.prototype={constructor:Vy,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Wy=qy.prototype;function zy(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Hy(t,e){var n,r,i,o,s,a=new Ky(t),u=+t.value&&(a.value=t.value),c=[a];for(null==e&&(e=Qy);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(s=i.length))for(n.children=new Array(s),o=s-1;o>=0;--o)c.push(r=n.children[o]=new Ky(i[o])),r.parent=n,r.depth=n.depth+1;return a.eachBefore(Yy)}function Qy(t){return t.children}function Gy(t){t.data=t.data.data}function Yy(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Ky(t){this.data=t,this.depth=this.height=0,this.parent=null}function $y(t){if("function"!=typeof t)throw new Error;return t}By.prototype=function(t,e){var n=new By;if(t instanceof By)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}.prototype={constructor:By,has:Wy.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Wy.remove,clear:Wy.clear,values:Wy.keys,size:Wy.size,empty:Wy.empty,each:Wy.each},Ky.prototype=Hy.prototype={constructor:Ky,count:function(){return this.eachAfter(zy)},each:function(t){var e,n,r,i,o=this,s=[o];do{for(e=s.reverse(),s=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)s.push(n[r])}while(s.length);return this},eachAfter:function(t){for(var e,n,r,i=this,o=[i],s=[];i=o.pop();)if(s.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=s.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Hy(this).eachBefore(Gy)}};var Xy={depth:-1},Jy={};function Zy(t){return t.id}function tv(t){return t.parentId}function ev(t){return function(){return t}}var nv=Math.PI,rv=2*nv,iv={draw:function(t,e){var n=Math.sqrt(e/nv);t.moveTo(n,0),t.arc(0,0,n,0,rv)}},ov={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},sv=Math.sqrt(1/3),av=2*sv,uv={draw:function(t,e){var n=Math.sqrt(e/av),r=n*sv;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},cv=Math.sin(nv/10)/Math.sin(7*nv/10),lv=Math.sin(rv/10)*cv,hv=-Math.cos(rv/10)*cv,fv={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=lv*n,i=hv*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var s=rv*o/5,a=Math.cos(s),u=Math.sin(s);t.lineTo(u*n,-a*n),t.lineTo(a*r-u*i,u*r+a*i)}t.closePath()}},pv={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},dv=Math.sqrt(3),yv={draw:function(t,e){var n=-Math.sqrt(e/(3*dv));t.moveTo(0,2*n),t.lineTo(-dv*n,-n),t.lineTo(dv*n,-n),t.closePath()}},vv=-.5,gv=Math.sqrt(3)/2,mv=1/Math.sqrt(12),_v=3*(mv/2+1),bv={draw:function(t,e){var n=Math.sqrt(e/_v),r=n/2,i=n*mv,o=r,s=n*mv+n,a=-o,u=s;t.moveTo(r,i),t.lineTo(o,s),t.lineTo(a,u),t.lineTo(vv*r-gv*i,gv*r+vv*i),t.lineTo(vv*o-gv*s,gv*o+vv*s),t.lineTo(vv*a-gv*u,gv*a+vv*u),t.lineTo(vv*r+gv*i,vv*i-gv*r),t.lineTo(vv*o+gv*s,vv*s-gv*o),t.lineTo(vv*a+gv*u,vv*u-gv*a),t.closePath()}};function wv(){var t=ev(iv),e=ev(64),n=null;function r(){var r;if(n||(n=r=Uy()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:ev(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:ev(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}function Ev(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cv(t,e,n){return e&&Tv(t.prototype,e),n&&Tv(t,n),t}function Sv(t,e){return(Sv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Iv(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sv(t,e)}function xv(t){return(xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kv(t,e){return!e||"object"!==xv(e)&&"function"!=typeof e?Nv(t):e}function Av(t){return(Av=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ov(t){return(Ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Rv=0;function Dv(t,e){for(var n in e)t[n]=e[n]}var Lv={delay:0,duration:250,ease:function(t){return+t}};var Mv=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.start=null,this.interrupt=null,this.end=null,e.events&&Object.keys(e.events).forEach((function(t){if("function"!=typeof e.events[t])throw new Error("Event handlers must be a function");n[t]=function(t){var e=!1;return function(){e||(e=!0,t.call(this))}}(e.events[t])}))};function Fv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){jv(t,e,n[e])}))}return t}function jv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=e||{}}var e,n,r;return e=t,(n=[{key:"transition",value:function(t){if(Array.isArray(t)){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.parse(s)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}else this.parse(t)}},{key:"isTransitioning",value:function(){return!!this.transitionData}},{key:"stopTransitions",value:function(){var t=this.transitionData;t&&Object.keys(t).forEach((function(e){t[e].timer.stop()}))}},{key:"setState",value:function(t){Dv(this.state,"function"==typeof t?t(this.state):t)}},{key:"parse",value:function(t){var e=this,n=Fv({},t),r=new Mv(n);n.events&&delete n.events;var i=Fv({},Lv,n.timing||{},{time:xy()});n.timing&&delete n.timing,Object.keys(n).forEach((function(t){var o,s,a=[],u=n[t];if("object"===Ov(s=u)&&!1===Array.isArray(s))Object.keys(u).forEach((function(n){var r=u[n];Array.isArray(r)?1===r.length?a.push(e.getTween(n,r[0],t)):(e.setState((function(e){var i,o;return(o={})[t]=Fv({},e[t],((i={})[n]=r[0],i)),o})),a.push(e.getTween(n,r[1],t))):"function"==typeof r?a.push((function(){return function(i){e.setState((function(e){var o,s;return(s={})[t]=Fv({},e[t],((o={})[n]=r(i),o)),s}))}})):(e.setState((function(e){var i,o;return(o={})[t]=Fv({},e[t],((i={})[n]=r,i)),o})),a.push(e.getTween(n,r,t)))}));else if(Array.isArray(u))1===u.length?a.push(e.getTween(t,u[0],null)):(e.setState(((o={})[t]=u[0],o)),a.push(e.getTween(t,u[1],null)));else if("function"==typeof u)a.push((function(){return function(n){var r;e.setState(((r={})[t]=u(n),r))}}));else{var c;e.setState(((c={})[t]=u,c)),a.push(e.getTween(t,u,null))}e.update({stateKey:t,timing:i,tweens:a,events:r,status:0})}))}},{key:"getTween",value:function(t,e,n){var r=this;return function(){var i=n?r.state[n][t]:r.state[t];if(i===e)return null;var o=r.getInterpolator(i,e,t,n);return null===n?function(e){var n;r.setState(((n={})[t]=o(e),n))}:function(e){r.setState((function(r){var i,s;return(s={})[n]=Fv({},r[n],((i={})[t]=o(e),i)),s}))}}}},{key:"update",value:function(t){this.transitionData||(this.transitionData={}),this.init(++Rv,t)}},{key:"init",value:function(t,e){var n=this,r=e.tweens.length,i=new Array(r);this.transitionData[t]=e,e.timer=Ay((function(t){e.status=1,e.timer.restart(o,e.timing.delay,e.timing.time),e.timing.delay<=t&&o(t-e.timing.delay)}),0,e.timing.time);var o=function o(u){if(1!==e.status)return a();for(var c in n.transitionData){var l=n.transitionData[c];if(l.stateKey===e.stateKey){if(3===l.status)return Dy(o);4===l.status?(l.status=6,l.timer.stop(),l.events.interrupt&&l.events.interrupt.call(n),delete n.transitionData[c]):+c<t&&(l.status=6,l.timer.stop(),delete n.transitionData[c])}}if(Dy((function(){3===e.status&&(e.status=4,e.timer.restart(s,e.timing.delay,e.timing.time),s(u))})),e.status=2,e.events.start&&e.events.start.call(n),2===e.status){e.status=3;for(var h=-1,f=0;f<r;++f){var p=e.tweens[f]();p&&(i[++h]=p)}i.length=h+1}},s=function(t){var r=1;t<e.timing.duration?r=e.timing.ease(t/e.timing.duration):(e.timer.restart(a),e.status=5);for(var o=-1;++o<i.length;)i[o](r);5===e.status&&(e.events.end&&e.events.end.call(n),a())},a=function(){for(var r in e.status=6,e.timer.stop(),delete n.transitionData[t],n.transitionData)return;delete n.transitionData}}}])&&Uv(e.prototype,n),r&&Uv(e,r),t}();function qv(t,e){var n=+t,r=+e-n;return function(t){return n+r*t}}function Bv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Av(t);if(e){var i=Av(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kv(this,n)}}var Wv=function(t){Iv(n,t);var e=Bv(n);function n(t){var r;Ev(this,n),Pv(Nv(r=e.call(this,t)),"animate",(function(){var t=r.state,e=t.nodeKeys,n=t.nodeHash;if(!r.unmounting){for(var i=!1,o=[],s=e.length,a=0;a<s;a++){var u=e[a],c=n[u],l=c.isTransitioning();l&&(i=!0),"LEAVE"!==c.type||l?o.push(u):delete n[u]}i||r.interval.stop(),r.setState((function(){return{nodeKeys:o,nodes:o.map((function(t){return n[t]}))}}))}})),Pv(Nv(r),"interval",null),Pv(Nv(r),"unmounting",!1);var i=t.interpolation,o=function(t){Iv(n,t);var e=Bv(n);function n(t,r){var o;return Ev(this,n),Pv(Nv(o=e.call(this)),"getInterpolator",i),o.key=t,o.data=r,o.type="ENTER",o}return n}(Vv);return r.state={Node:o,nodeKeys:[],nodeHash:{},nodes:[],data:null},r}return Cv(n,[{key:"componentDidMount",value:function(){this.startInterval()}},{key:"componentDidUpdate",value:function(t){t.data===this.props.data||this.unmounting||this.startInterval()}},{key:"startInterval",value:function(){this.interval?this.interval.restart(this.animate):this.interval=function(t,e,n){var r=new ky,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?xy():+n,r.restart((function o(s){s+=i,r.restart(o,i+=e,n),t(s)}),e,n),r)}(this.animate)}},{key:"componentWillUnmount",value:function(){var t=this.state,e=t.nodeKeys,n=t.nodeHash;this.unmounting=!0,this.interval&&this.interval.stop(),e.forEach((function(t){n[t].stopTransitions()}))}},{key:"render",value:function(){var t=this.props.children(this.state.nodes);return t&&o.a.Children.only(t)}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.data!==e.data){for(var n=t.data,r=t.keyAccessor,i=t.start,o=t.enter,s=t.update,a=t.leave,u=e.Node,c=e.nodeKeys,l=e.nodeHash,h={},f=0;f<c.length;f++)h[c[f]]=f;for(var p={},d=[],y=0;y<n.length;y++){var v=n[y],g=r(v,y);if(p[g]=y,d.push(g),void 0===h[g]){var m=new u;m.key=g,m.data=v,m.type="ENTER",l[g]=m}}for(var _=0;_<c.length;_++){var b=c[_],w=l[b];void 0!==p[b]?(w.data=n[p[b]],w.type="UPDATE"):w.type="LEAVE"}for(var E=function(t,e,n,r){for(var i=[],o=0;o<n.length;o++)i[o]=n[o];for(var s=0;s<t.length;s++)void 0===r[t[s]]&&i.push(t[s]);return i.sort((function(t,i){var o=r[t],s=r[i],a=e[t],u=e[i];if(null!=o&&null!=s)return r[t]-r[i];if(null!=a&&null!=u)return e[t]-e[i];if(null!=o){for(var c=0;c<n.length;c++){var l=n[c];if(e[l]){if(o<r[l]&&u>e[l])return-1;if(o>r[l]&&u<e[l])return 1}}return 1}for(var h=0;h<n.length;h++){var f=n[h];if(e[f]){if(s<r[f]&&a>e[f])return 1;if(s>r[f]&&a<e[f])return-1}}return-1}))}(c,h,d,p),T=0;T<E.length;T++){var C=E[T],S=l[C],I=S.data;"ENTER"===S.type?(S.setState(i(I,p[C])),S.transition(o(I,p[C]))):"LEAVE"===S.type?S.transition(a(I,h[C])):S.transition(s(I,p[C]))}return{data:n,nodes:E.map((function(t){return l[t]})),nodeHash:l,nodeKeys:E}}return null}}]),n}(i.Component);function zv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Av(t);if(e){var i=Av(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return kv(this,n)}}Wv.propTypes={},Wv.defaultProps={enter:function(){},update:function(){},leave:function(){},interpolation:qv};var Hv=function(){return"$$key$$"},Qv=function(t){Iv(n,t);var e=zv(n);function n(){return Ev(this,n),e.apply(this,arguments)}return Cv(n,[{key:"render",value:function(){var t=this.props,e=t.show,n=t.start,r=t.enter,i=t.update,s=t.leave,a=t.interpolation,u=t.children,c="function"==typeof n?n():n;return o.a.createElement(Wv,{data:e?[c]:[],start:function(){return c},keyAccessor:Hv,interpolation:a,enter:"function"==typeof r?r:function(){return r},update:"function"==typeof i?i:function(){return i},leave:"function"==typeof s?s:function(){return s}},(function(t){if(!t[0])return null;var e=u(t[0].state);return e&&o.a.Children.only(e)}))}}]),n}(i.Component);Qv.propTypes={},Qv.defaultProps={show:!0,interpolation:qv};var Gv=function(t,e){"function"!=typeof t?null!==t&&"object"===xv(t)&&(t.current=e):t(e)},Yv={current:null},Kv=new WeakMap,$v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function Xv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Jv(t,e){return t(e={exports:{}},e.exports),e.exports
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */}var Zv="function"==typeof Symbol&&Symbol.for,tg=Zv?Symbol.for("react.element"):60103,eg=Zv?Symbol.for("react.portal"):60106,ng=Zv?Symbol.for("react.fragment"):60107,rg=Zv?Symbol.for("react.strict_mode"):60108,ig=Zv?Symbol.for("react.profiler"):60114,og=Zv?Symbol.for("react.provider"):60109,sg=Zv?Symbol.for("react.context"):60110,ag=Zv?Symbol.for("react.async_mode"):60111,ug=Zv?Symbol.for("react.concurrent_mode"):60111,cg=Zv?Symbol.for("react.forward_ref"):60112,lg=Zv?Symbol.for("react.suspense"):60113,hg=Zv?Symbol.for("react.suspense_list"):60120,fg=Zv?Symbol.for("react.memo"):60115,pg=Zv?Symbol.for("react.lazy"):60116,dg=Zv?Symbol.for("react.block"):60121,yg=Zv?Symbol.for("react.fundamental"):60117,vg=Zv?Symbol.for("react.responder"):60118,gg=Zv?Symbol.for("react.scope"):60119;function mg(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case tg:switch(t=t.type){case ag:case ug:case ng:case ig:case rg:case lg:return t;default:switch(t=t&&t.$$typeof){case sg:case cg:case pg:case fg:case og:return t;default:return e}}case eg:return e}}}function _g(t){return mg(t)===ug}var bg={AsyncMode:ag,ConcurrentMode:ug,ContextConsumer:sg,ContextProvider:og,Element:tg,ForwardRef:cg,Fragment:ng,Lazy:pg,Memo:fg,Portal:eg,Profiler:ig,StrictMode:rg,Suspense:lg,isAsyncMode:function(t){return _g(t)||mg(t)===ag},isConcurrentMode:_g,isContextConsumer:function(t){return mg(t)===sg},isContextProvider:function(t){return mg(t)===og},isElement:function(t){return"object"==typeof t&&null!==t&&t.$$typeof===tg},isForwardRef:function(t){return mg(t)===cg},isFragment:function(t){return mg(t)===ng},isLazy:function(t){return mg(t)===pg},isMemo:function(t){return mg(t)===fg},isPortal:function(t){return mg(t)===eg},isProfiler:function(t){return mg(t)===ig},isStrictMode:function(t){return mg(t)===rg},isSuspense:function(t){return mg(t)===lg},isValidElementType:function(t){return"string"==typeof t||"function"==typeof t||t===ng||t===ug||t===ig||t===rg||t===lg||t===hg||"object"==typeof t&&null!==t&&(t.$$typeof===pg||t.$$typeof===fg||t.$$typeof===og||t.$$typeof===sg||t.$$typeof===cg||t.$$typeof===yg||t.$$typeof===vg||t.$$typeof===gg||t.$$typeof===dg)},typeOf:mg},wg=Jv((function(t,e){0})),Eg=(wg.AsyncMode,wg.ConcurrentMode,wg.ContextConsumer,wg.ContextProvider,wg.Element,wg.ForwardRef,wg.Fragment,wg.Lazy,wg.Memo,wg.Portal,wg.Profiler,wg.StrictMode,wg.Suspense,wg.isAsyncMode,wg.isConcurrentMode,wg.isContextConsumer,wg.isContextProvider,wg.isElement,wg.isForwardRef,wg.isFragment,wg.isLazy,wg.isMemo,wg.isPortal,wg.isProfiler,wg.isStrictMode,wg.isSuspense,wg.isValidElementType,wg.typeOf,Jv((function(t){t.exports=bg})),Object(s.oneOfType)([s.func,s.object]),function(t){function e(){var t,n;Ev(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Pv(Nv(n=kv(this,(t=Av(e)).call.apply(t,[this].concat(i)))),"prevNode",null),n}return Iv(e,t),Cv(e,[{key:"componentDidMount",value:function(){this.prevNode=Object(u.findDOMNode)(this),Gv(this.props.innerRef,this.prevNode)}},{key:"componentDidUpdate",value:function(t){var e=Object(u.findDOMNode)(this);this.prevNode!==e&&(this.prevNode=e,Gv(this.props.innerRef,e)),t.innerRef!==this.props.innerRef&&Gv(this.props.innerRef,e)}},{key:"componentWillUnmount",value:function(){Gv(this.props.innerRef,null)}},{key:"render",value:function(){return this.props.children}}]),e}(i.Component));Pv(Eg,"displayName","RefFindNode"),Pv(Eg,"propTypes",{});var Tg=function(t){function e(){var t,n;Ev(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return Pv(Nv(n=kv(this,(t=Av(e)).call.apply(t,[this].concat(i)))),"handleRefOverride",(function(t){var e=n.props,r=e.children,i=e.innerRef;Gv(r.ref,t),Gv(i,t)})),n}return Iv(e,t),Cv(e,[{key:"render",value:function(){var t=this.props.children;return Object(i.cloneElement)(t,{ref:this.handleRefOverride})}}]),e}(i.Component);Pv(Tg,"displayName","RefForward"),Pv(Tg,"propTypes",{});var Cg=function(t){var e=t.children,n=t.innerRef,r=i.Children.only(e),o=(void 0)(r)?Tg:Eg;return Object(i.createElement)(o,{innerRef:n},r)};Cg.displayName="Ref";var Sg=Jv((function(t){function e(){return t.exports=e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e.apply(this,arguments)}t.exports=e}));var Ig=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function xg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ng=function(t,e,n){return e&&xg(t.prototype,e),n&&xg(t,n),t},kg=Jv((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e}));var Ag=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t};var Pg=function(t,e){return!e||"object"!==kg(e)&&"function"!=typeof e?Ag(t):e},Og=Jv((function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e(n)}t.exports=e})),Rg=Jv((function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},e(n,r)}t.exports=e}));var Dg=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rg(t,e)};var Lg=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};Object.prototype.hasOwnProperty;var Mg=Array.isArray,Fg="object"==typeof $v&&$v&&$v.Object===Object&&$v,jg="object"==typeof self&&self&&self.Object===Object&&self,Ug=Fg||jg||Function("return this")(),Vg=Ug.Symbol,qg=Object.prototype,Bg=qg.hasOwnProperty,Wg=qg.toString,zg=Vg?Vg.toStringTag:void 0;var Hg=function(t){var e=Bg.call(t,zg),n=t[zg];try{t[zg]=void 0;var r=!0}catch(t){}var i=Wg.call(t);return r&&(e?t[zg]=n:delete t[zg]),i},Qg=Object.prototype.toString;var Gg=function(t){return Qg.call(t)},Yg=Vg?Vg.toStringTag:void 0;var Kg=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Yg&&Yg in Object(t)?Hg(t):Gg(t)};var $g=function(t){return null!=t&&"object"==typeof t};var Xg=function(t){return"symbol"==typeof t||$g(t)&&"[object Symbol]"==Kg(t)},Jg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zg=/^\w*$/;var tm=function(t,e){if(Mg(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Xg(t))||(Zg.test(t)||!Jg.test(t)||null!=e&&t in Object(e))};var em=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var nm,rm=function(t){if(!em(t))return!1;var e=Kg(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},im=Ug["__core-js_shared__"],om=(nm=/[^.]+$/.exec(im&&im.keys&&im.keys.IE_PROTO||""))?"Symbol(src)_1."+nm:"";var sm=function(t){return!!om&&om in t},am=Function.prototype.toString;var um=function(t){if(null!=t){try{return am.call(t)}catch(t){}try{return t+""}catch(t){}}return""},cm=/^\[object .+?Constructor\]$/,lm=Function.prototype,hm=Object.prototype,fm=lm.toString,pm=hm.hasOwnProperty,dm=RegExp("^"+fm.call(pm).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ym=function(t){return!(!em(t)||sm(t))&&(rm(t)?dm:cm).test(um(t))};var vm=function(t,e){return null==t?void 0:t[e]};var gm=function(t,e){var n=vm(t,e);return ym(n)?n:void 0},mm=gm(Object,"create");var _m=function(){this.__data__=mm?mm(null):{},this.size=0};var bm=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},wm=Object.prototype.hasOwnProperty;var Em=function(t){var e=this.__data__;if(mm){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return wm.call(e,t)?e[t]:void 0},Tm=Object.prototype.hasOwnProperty;var Cm=function(t){var e=this.__data__;return mm?void 0!==e[t]:Tm.call(e,t)};var Sm=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=mm&&void 0===e?"__lodash_hash_undefined__":e,this};function Im(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Im.prototype.clear=_m,Im.prototype.delete=bm,Im.prototype.get=Em,Im.prototype.has=Cm,Im.prototype.set=Sm;var xm=Im;var Nm=function(){this.__data__=[],this.size=0};var km=function(t,e){return t===e||t!=t&&e!=e};var Am=function(t,e){for(var n=t.length;n--;)if(km(t[n][0],e))return n;return-1},Pm=Array.prototype.splice;var Om=function(t){var e=this.__data__,n=Am(e,t);return!(n<0)&&(n==e.length-1?e.pop():Pm.call(e,n,1),--this.size,!0)};var Rm=function(t){var e=this.__data__,n=Am(e,t);return n<0?void 0:e[n][1]};var Dm=function(t){return Am(this.__data__,t)>-1};var Lm=function(t,e){var n=this.__data__,r=Am(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function Mm(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Mm.prototype.clear=Nm,Mm.prototype.delete=Om,Mm.prototype.get=Rm,Mm.prototype.has=Dm,Mm.prototype.set=Lm;var Fm=Mm,jm=gm(Ug,"Map");var Um=function(){this.size=0,this.__data__={hash:new xm,map:new(jm||Fm),string:new xm}};var Vm=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var qm=function(t,e){var n=t.__data__;return Vm(e)?n["string"==typeof e?"string":"hash"]:n.map};var Bm=function(t){var e=qm(this,t).delete(t);return this.size-=e?1:0,e};var Wm=function(t){return qm(this,t).get(t)};var zm=function(t){return qm(this,t).has(t)};var Hm=function(t,e){var n=qm(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Qm(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qm.prototype.clear=Um,Qm.prototype.delete=Bm,Qm.prototype.get=Wm,Qm.prototype.has=zm,Qm.prototype.set=Hm;var Gm=Qm;function Ym(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ym.Cache||Gm),n}Ym.Cache=Gm;var Km=Ym;var $m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xm=/\\(\\)?/g,Jm=function(t){var e=Km(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace($m,(function(t,n,r,i){e.push(r?i.replace(Xm,"$1"):n||t)})),e}));var Zm=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},t_=Vg?Vg.prototype:void 0,e_=t_?t_.toString:void 0;var n_=function t(e){if("string"==typeof e)return e;if(Mg(e))return Zm(e,t)+"";if(Xg(e))return e_?e_.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};var r_=function(t){return null==t?"":n_(t)};var i_=function(t,e){return Mg(t)?t:tm(t,e)?[t]:Jm(r_(t))};var o_=function(t){return $g(t)&&"[object Arguments]"==Kg(t)},s_=Object.prototype,a_=s_.hasOwnProperty,u_=s_.propertyIsEnumerable,c_=o_(function(){return arguments}())?o_:function(t){return $g(t)&&a_.call(t,"callee")&&!u_.call(t,"callee")},l_=/^(?:0|[1-9]\d*)$/;var h_=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&l_.test(t))&&t>-1&&t%1==0&&t<e};var f_=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var p_=function(t){if("string"==typeof t||Xg(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var d_=function(t,e,n){for(var r=-1,i=(e=i_(e,t)).length,o=!1;++r<i;){var s=p_(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&f_(i)&&h_(s,i)&&(Mg(t)||c_(t))};var y_=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var v_=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var g_=function(t,e){for(var n=0,r=(e=i_(e,t)).length;null!=t&&n<r;)t=t[p_(e[n++])];return n&&n==r?t:void 0};var m_=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o};var __=function(t,e){return e.length<2?t:g_(t,m_(e,0,-1))};var b_=function(t,e,n){e=i_(e,t);var r=null==(t=__(t,e))?t:t[p_(v_(e))];return null==r?void 0:y_(r,t,n)};var w_=function(t){return t},E_=Math.max;var T_=function(t,e,n){return e=E_(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=E_(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(s),y_(t,this,a)}};var C_=function(t){return function(){return t}},S_=function(){try{var t=gm(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),I_=S_?function(t,e){return S_(t,"toString",{configurable:!0,enumerable:!1,value:C_(e),writable:!0})}:w_,x_=Date.now;var N_=function(t){var e=0,n=0;return function(){var r=x_(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},k_=N_(I_);var A_=function(t,e){return k_(T_(t,e,w_),t+"")},P_=A_(b_);var O_=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Lg(t,e,n[e])}))}return t};var R_=function(t){return void 0===t};var D_=/^\s+|\s+$/g,L_=/^[-+]0x[0-9a-f]+$/i,M_=/^0b[01]+$/i,F_=/^0o[0-7]+$/i,j_=parseInt;var U_=function(t){if("number"==typeof t)return t;if(Xg(t))return NaN;if(em(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=em(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(D_,"");var n=M_.test(t);return n||F_.test(t)?j_(t.slice(2),n?2:8):L_.test(t)?NaN:+t};var V_=function(t){return t?(t=U_(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var q_=function(t){var e=V_(t),n=e%1;return e==e?n?e-n:e:0};var B_=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o};var W_=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}();var z_=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var H_=function(){return!1},Q_=Jv((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?Ug.Buffer:void 0,o=(i?i.isBuffer:void 0)||H_;t.exports=o})),G_={};G_["[object Float32Array]"]=G_["[object Float64Array]"]=G_["[object Int8Array]"]=G_["[object Int16Array]"]=G_["[object Int32Array]"]=G_["[object Uint8Array]"]=G_["[object Uint8ClampedArray]"]=G_["[object Uint16Array]"]=G_["[object Uint32Array]"]=!0,G_["[object Arguments]"]=G_["[object Array]"]=G_["[object ArrayBuffer]"]=G_["[object Boolean]"]=G_["[object DataView]"]=G_["[object Date]"]=G_["[object Error]"]=G_["[object Function]"]=G_["[object Map]"]=G_["[object Number]"]=G_["[object Object]"]=G_["[object RegExp]"]=G_["[object Set]"]=G_["[object String]"]=G_["[object WeakMap]"]=!1;var Y_=function(t){return $g(t)&&f_(t.length)&&!!G_[Kg(t)]};var K_=function(t){return function(e){return t(e)}},$_=Jv((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&Fg.process,o=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o})),X_=$_&&$_.isTypedArray,J_=X_?K_(X_):Y_,Z_=Object.prototype.hasOwnProperty;var tb=function(t,e){var n=Mg(t),r=!n&&c_(t),i=!n&&!r&&Q_(t),o=!n&&!r&&!i&&J_(t),s=n||r||i||o,a=s?z_(t.length,String):[],u=a.length;for(var c in t)!e&&!Z_.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||h_(c,u))||a.push(c);return a},eb=Object.prototype;var nb=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||eb)};var rb=function(t,e){return function(n){return t(e(n))}},ib=rb(Object.keys,Object),ob=Object.prototype.hasOwnProperty;var sb=function(t){if(!nb(t))return ib(t);var e=[];for(var n in Object(t))ob.call(t,n)&&"constructor"!=n&&e.push(n);return e};var ab=function(t){return null!=t&&f_(t.length)&&!rm(t)};var ub=function(t){return ab(t)?tb(t):sb(t)};var cb=function(t,e){return t&&W_(t,e,ub)};var lb=function(t,e){return function(n,r){if(null==n)return n;if(!ab(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=Object(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}(cb);var hb=function(){this.__data__=new Fm,this.size=0};var fb=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var pb=function(t){return this.__data__.get(t)};var db=function(t){return this.__data__.has(t)};var yb=function(t,e){var n=this.__data__;if(n instanceof Fm){var r=n.__data__;if(!jm||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Gm(r)}return n.set(t,e),this.size=n.size,this};function vb(t){var e=this.__data__=new Fm(t);this.size=e.size}vb.prototype.clear=hb,vb.prototype.delete=fb,vb.prototype.get=pb,vb.prototype.has=db,vb.prototype.set=yb;var gb=vb;var mb=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var _b=function(t){return this.__data__.has(t)};function bb(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Gm;++e<n;)this.add(t[e])}bb.prototype.add=bb.prototype.push=mb,bb.prototype.has=_b;var wb=bb;var Eb=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var Tb=function(t,e){return t.has(e)};var Cb=function(t,e,n,r,i,o){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,h=!0,f=2&n?new wb:void 0;for(o.set(t,e),o.set(e,t);++l<a;){var p=t[l],d=e[l];if(r)var y=s?r(d,p,l,e,t,o):r(p,d,l,t,e,o);if(void 0!==y){if(y)continue;h=!1;break}if(f){if(!Eb(e,(function(t,e){if(!Tb(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h},Sb=Ug.Uint8Array;var Ib=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var xb=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},Nb=Vg?Vg.prototype:void 0,kb=Nb?Nb.valueOf:void 0;var Ab=function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Sb(t),new Sb(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return km(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=Ib;case"[object Set]":var u=1&r;if(a||(a=xb),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var l=Cb(a(t),a(e),r,i,o,s);return s.delete(t),l;case"[object Symbol]":if(kb)return kb.call(t)==kb.call(e)}return!1};var Pb=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t};var Ob=function(t,e,n){var r=e(t);return Mg(t)?r:Pb(r,n(t))};var Rb=function(){return[]},Db=Object.prototype.propertyIsEnumerable,Lb=Object.getOwnPropertySymbols,Mb=Lb?function(t){return null==t?[]:(t=Object(t),B_(Lb(t),(function(e){return Db.call(t,e)})))}:Rb;var Fb=function(t){return Ob(t,ub,Mb)},jb=Object.prototype.hasOwnProperty;var Ub=function(t,e,n,r,i,o){var s=1&n,a=Fb(t),u=a.length;if(u!=Fb(e).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:jb.call(e,l)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=s;++c<u;){var d=t[l=a[c]],y=e[l];if(r)var v=s?r(y,d,l,e,t,o):r(d,y,l,t,e,o);if(!(void 0===v?d===y||i(d,y,n,r,o):v)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var g=t.constructor,m=e.constructor;g==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m||(f=!1)}return o.delete(t),o.delete(e),f},Vb=gm(Ug,"DataView"),qb=gm(Ug,"Promise"),Bb=gm(Ug,"Set"),Wb=gm(Ug,"WeakMap"),zb=um(Vb),Hb=um(jm),Qb=um(qb),Gb=um(Bb),Yb=um(Wb),Kb=Kg;(Vb&&"[object DataView]"!=Kb(new Vb(new ArrayBuffer(1)))||jm&&"[object Map]"!=Kb(new jm)||qb&&"[object Promise]"!=Kb(qb.resolve())||Bb&&"[object Set]"!=Kb(new Bb)||Wb&&"[object WeakMap]"!=Kb(new Wb))&&(Kb=function(t){var e=Kg(t),n="[object Object]"==e?t.constructor:void 0,r=n?um(n):"";if(r)switch(r){case zb:return"[object DataView]";case Hb:return"[object Map]";case Qb:return"[object Promise]";case Gb:return"[object Set]";case Yb:return"[object WeakMap]"}return e});var $b=Kb,Xb=Object.prototype.hasOwnProperty;var Jb=function(t,e,n,r,i,o){var s=Mg(t),a=Mg(e),u=s?"[object Array]":$b(t),c=a?"[object Array]":$b(e),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),h="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),f=u==c;if(f&&Q_(t)){if(!Q_(e))return!1;s=!0,l=!1}if(f&&!l)return o||(o=new gb),s||J_(t)?Cb(t,e,n,r,i,o):Ab(t,e,u,n,r,i,o);if(!(1&n)){var p=l&&Xb.call(t,"__wrapped__"),d=h&&Xb.call(e,"__wrapped__");if(p||d){var y=p?t.value():t,v=d?e.value():e;return o||(o=new gb),i(y,v,n,r,o)}}return!!f&&(o||(o=new gb),Ub(t,e,n,r,i,o))};var Zb=function t(e,n,r,i,o){return e===n||(null==e||null==n||!$g(e)&&!$g(n)?e!=e&&n!=n:Jb(e,n,r,i,t,o))};var tw=function(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=n[i])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var h=new gb;if(r)var f=r(c,l,u,t,e,h);if(!(void 0===f?Zb(l,c,3,r,h):f))return!1}}return!0};var ew=function(t){return t==t&&!em(t)};var nw=function(t){for(var e=ub(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ew(i)]}return e};var rw=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var iw=function(t){var e=nw(t);return 1==e.length&&e[0][2]?rw(e[0][0],e[0][1]):function(n){return n===t||tw(n,t,e)}};var ow=function(t,e,n){var r=null==t?void 0:g_(t,e);return void 0===r?n:r};var sw=function(t,e){return null!=t&&e in Object(t)};var aw=function(t,e){return null!=t&&d_(t,e,sw)};var uw=function(t,e){return tm(t)&&ew(e)?rw(p_(t),e):function(n){var r=ow(n,t);return void 0===r&&r===e?aw(n,t):Zb(e,r,3)}};var cw=function(t){return function(e){return null==e?void 0:e[t]}};var lw=function(t){return function(e){return g_(e,t)}};var hw=function(t){return tm(t)?cw(p_(t)):lw(t)};var fw=function(t){return"function"==typeof t?t:null==t?w_:"object"==typeof t?Mg(t)?uw(t[0],t[1]):iw(t):hw(t)};Object.prototype.hasOwnProperty;var pw=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var dw=function(t){return t!=t};var yw=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var vw=function(t,e,n){return e==e?yw(t,e,n):pw(t,dw,n)};var gw=function(t,e){return!!(null==t?0:t.length)&&vw(t,e,0)>-1};var mw=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1},_w=Math.min;var bw=function(t,e,n){for(var r=n?mw:gw,i=t[0].length,o=t.length,s=o,a=Array(o),u=1/0,c=[];s--;){var l=t[s];s&&e&&(l=Zm(l,K_(e))),u=_w(l.length,u),a[s]=!n&&(e||i>=120&&l.length>=120)?new wb(s&&l):void 0}l=t[0];var h=-1,f=a[0];t:for(;++h<i&&c.length<u;){var p=l[h],d=e?e(p):p;if(p=n||0!==p?p:0,!(f?Tb(f,d):r(c,d,n))){for(s=o;--s;){var y=a[s];if(!(y?Tb(y,d):r(t[s],d,n)))continue t}f&&f.push(d),c.push(p)}}return c};var ww=function(t){return $g(t)&&ab(t)};var Ew=function(t){return ww(t)?t:[]};A_((function(t){var e=Zm(t,Ew);return e.length&&e[0]===t[0]?bw(e):[]}));var Tw=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t};var Cw=function(t){return"default".concat(t[0].toUpperCase()+t.slice(1))},Sw=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=e[t];if(void 0!==i)return i;if(r){var o=e[Cw(t)];if(void 0!==o)return o;if(n){var s=n[t];if(void 0!==s)return s}}return"checked"!==t&&("value"===t?e.multiple?[]:"":void 0)},Iw=function(t){function e(){var t,n;Ig(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n=Pg(this,(t=Og(e)).call.apply(t,[this].concat(i))),Lg(Ag(n),"trySetState",(function(t,e){var r=Object.keys(t).reduce((function(e,r){return void 0!==n.props[r]||(e[r]=t[r]),e}),{});Object.keys(r).length>0&&n.setState(r,e)}));var s=n.constructor.autoControlledProps,a=P_(Ag(n),"getInitialAutoControlledState",n.props)||{},u=s.reduce((function(t,e){return t[e]=Sw(e,n.props,a,!0),t}),{});return n.state=O_({},a,u),n}return Dg(e,t),Ng(e,[{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=this.constructor.autoControlledProps.reduce((function(e,n){return!R_(t[n])&&(e[n]=t[n]),e}),{});Object.keys(e).length>0&&this.setState(e)}}]),e}(i.Component);var xw=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r};var Nw=function(t,e){if(t){if("string"==typeof t)return xw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xw(t,e):void 0}};var kw=function(t,e,n){"__proto__"==e&&S_?S_(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var Aw=function(t,e){var n;return lb(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n};var Pw=function(t,e,n){if(!em(n))return!1;var r=typeof e;return!!("number"==r?ab(n)&&h_(e,n.length):"string"==r&&e in n)&&km(n[e],t)};var Ow=function(t,e,n){var r=Mg(t)?Eb:Aw;return n&&Pw(t,e,n)&&(e=void 0),r(t,fw(e))},Rw=function(t){return null==t||Array.isArray(t)&&0===t.length},Dw={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"},Lw=function(t,e){return t&&e},Mw=function(t,e){return t&&(!0===t?e:"".concat(t," ").concat(e))};var Fw=function(t){if(Array.isArray(t))return xw(t)};var jw=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)};var Uw=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var Vw=function(t){return Fw(t)||jw(t)||Nw(t)||Uw()},qw=Jv((function(t,e){e.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},e.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},e.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},e.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},e.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},e.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},e.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},e.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},e.realToAlias=function(){var t=Object.prototype.hasOwnProperty,n=e.aliasToReal,r={};for(var i in n){var o=n[i];t.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),e.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},e.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},e.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}})),Bw=(qw.aliasToReal,qw.aryMethod,qw.aryRearg,qw.iterateeAry,qw.iterateeRearg,qw.methodRearg,qw.methodSpread,qw.mutate,qw.realToAlias,qw.remap,qw.skipFixed,qw.skipRearg,{}),Ww=Array.prototype.push;function zw(t,e){return 2==e?function(e,n){return t(e,n)}:function(e){return t(e)}}function Hw(t){for(var e=t?t.length:0,n=Array(e);e--;)n[e]=t[e];return n}function Qw(t,e){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=e.apply(void 0,r);return t.apply(void 0,r),i}}}var Gw=function t(e,n,r,i){var o="function"==typeof n,s=n===Object(n);if(s&&(i=r,r=n,n=void 0),null==r)throw new TypeError;i||(i={});var a=!("cap"in i)||i.cap,u=!("curry"in i)||i.curry,c=!("fixed"in i)||i.fixed,l=!("immutable"in i)||i.immutable,h=!("rearg"in i)||i.rearg,f=o?r:Bw,p="curry"in i&&i.curry,d="fixed"in i&&i.fixed,y="rearg"in i&&i.rearg,v=o?r.runInContext():void 0,g=o?r:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath},m=g.ary,_=g.assign,b=g.clone,w=g.curry,E=g.forEach,T=g.isArray,C=g.isError,S=g.isFunction,I=g.isWeakMap,x=g.keys,N=g.rearg,k=g.toInteger,A=g.toPath,P=x(qw.aryMethod),O={castArray:function(t){return function(){var e=arguments[0];return T(e)?t(Hw(e)):t.apply(void 0,arguments)}},iteratee:function(t){return function(){var e=arguments[0],n=arguments[1],r=t(e,n),i=r.length;return a&&"number"==typeof n?(n=n>2?n-2:1,i&&i<=n?r:zw(r,n)):r}},mixin:function(t){return function(e){var n=this;if(!S(n))return t(n,Object(e));var r=[];return E(x(e),(function(t){S(e[t])&&r.push([t,n.prototype[t]])})),t(n,Object(e)),E(r,(function(t){var e=t[1];S(e)?n.prototype[t[0]]=e:delete n.prototype[t[0]]})),n}},nthArg:function(t){return function(e){var n=e<0?1:k(e)+1;return w(t(e),n)}},rearg:function(t){return function(e,n){var r=n?n.length:0;return w(t(e,n),r)}},runInContext:function(n){return function(r){return t(e,n(r),i)}}};function R(t,e){if(a){var n=qw.iterateeRearg[t];if(n)return function(t,e){return j(t,(function(t){var n=e.length;return function(t,e){return 2==e?function(e,n){return t.apply(void 0,arguments)}:function(e){return t.apply(void 0,arguments)}}(N(zw(t,n),e),n)}))}(e,n);var r=!o&&qw.iterateeAry[t];if(r)return function(t,e){return j(t,(function(t){return"function"==typeof t?zw(t,e):t}))}(e,r)}return e}function D(t,e,n){if(c&&(d||!qw.skipFixed[t])){var r=qw.methodSpread[t],i=r&&r.start;return void 0===i?m(e,n):function(t,e){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var o=i[e],s=i.slice(0,e);return o&&Ww.apply(s,o),e!=r&&Ww.apply(s,i.slice(e+1)),t.apply(this,s)}}(e,i)}return e}function L(t,e,n){return h&&n>1&&(y||!qw.skipRearg[t])?N(e,qw.methodRearg[t]||qw.aryRearg[n]):e}function M(t,e){for(var n=-1,r=(e=A(e)).length,i=r-1,o=b(Object(t)),s=o;null!=s&&++n<r;){var a=e[n],u=s[a];null==u||S(u)||C(u)||I(u)||(s[a]=b(n==i?u:Object(u))),s=s[a]}return o}function F(e,n){var r=qw.aliasToReal[e]||e,s=qw.remap[r]||r,a=i;return function(e){var i=o?v:g,u=o?v[s]:n,c=_(_({},a),e);return t(i,r,u,c)}}function j(t,e){return function(){var n=arguments.length;if(!n)return t();for(var r=Array(n);n--;)r[n]=arguments[n];var i=h?0:n-1;return r[i]=e(r[i]),t.apply(void 0,r)}}function U(t,e,n){var r,i=qw.aliasToReal[t]||t,o=e,s=O[i];return s?o=s(e):l&&(qw.mutate.array[i]?o=Qw(e,Hw):qw.mutate.object[i]?o=Qw(e,function(t){return function(e){return t({},e)}}(e)):qw.mutate.set[i]&&(o=Qw(e,M))),E(P,(function(t){return E(qw.aryMethod[t],(function(e){if(i==e){var n=qw.methodSpread[i],s=n&&n.afterRearg;return r=s?D(i,L(i,o,t),t):L(i,D(i,o,t),t),r=function(t,e,n){return p||u&&n>1?w(e,n):e}(0,r=R(i,r),t),!1}})),!r})),r||(r=o),r==e&&(r=p?w(r,1):function(){return e.apply(this,arguments)}),r.convert=F(i,e),r.placeholder=e.placeholder=n,r}if(!s)return U(n,r,f);var V=r,q=[];return E(P,(function(t){E(qw.aryMethod[t],(function(t){var e=V[qw.remap[t]||t];e&&q.push([t,U(t,e,V)])}))})),E(x(V),(function(t){var e=V[t];if("function"==typeof e){for(var n=q.length;n--;)if(q[n][0]==t)return;e.convert=F(t,e),q.push([t,e])}})),E(q,(function(t){V[t[0]]=t[1]})),V.convert=function(t){return V.runInContext.convert(t)(void 0)},V.placeholder=V,E(x(V),(function(t){E(qw.realToAlias[t]||[],(function(e){V[e]=V[t]}))})),V},Yw=Wb&&new Wb,Kw=Yw?function(t,e){return Yw.set(t,e),t}:w_,$w=Object.create,Xw=function(){function t(){}return function(e){if(!em(e))return{};if($w)return $w(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var Jw=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Xw(t.prototype),r=t.apply(n,e);return em(r)?r:n}};var Zw=function(t,e,n){var r=1&e,i=Jw(t);return function e(){var o=this&&this!==Ug&&this instanceof e?i:t;return o.apply(r?n:this,arguments)}},tE=Math.max;var eE=function(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,u=e.length,c=tE(o-s,0),l=Array(u+c),h=!r;++a<u;)l[a]=e[a];for(;++i<s;)(h||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[a++]=t[i++];return l},nE=Math.max;var rE=function(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,u=-1,c=e.length,l=nE(o-a,0),h=Array(l+c),f=!r;++i<l;)h[i]=t[i];for(var p=i;++u<c;)h[p+u]=e[u];for(;++s<a;)(f||i<o)&&(h[p+n[s]]=t[i++]);return h};var iE=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r};var oE=function(){};function sE(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}sE.prototype=Xw(oE.prototype),sE.prototype.constructor=sE;var aE=sE;var uE=function(){},cE=Yw?function(t){return Yw.get(t)}:uE,lE={},hE=Object.prototype.hasOwnProperty;var fE=function(t){for(var e=t.name+"",n=lE[e],r=hE.call(lE,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e};function pE(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}pE.prototype=Xw(oE.prototype),pE.prototype.constructor=pE;var dE=pE;var yE=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var vE=function(t){if(t instanceof aE)return t.clone();var e=new dE(t.__wrapped__,t.__chain__);return e.__actions__=yE(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e},gE=Object.prototype.hasOwnProperty;function mE(t){if($g(t)&&!Mg(t)&&!(t instanceof aE)){if(t instanceof dE)return t;if(gE.call(t,"__wrapped__"))return vE(t)}return new dE(t)}mE.prototype=oE.prototype,mE.prototype.constructor=mE;var _E=mE;var bE=function(t){var e=fE(t),n=_E[e];if("function"!=typeof n||!(e in aE.prototype))return!1;if(t===n)return!0;var r=cE(n);return!!r&&t===r[0]},wE=N_(Kw),EE=/\{\n\/\* \[wrapped with (.+)\] \*/,TE=/,? & /;var CE=function(t){var e=t.match(EE);return e?e[1].split(TE):[]},SE=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var IE=function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(SE,"{\n/* [wrapped with "+e+"] */\n")},xE=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var NE=function(t,e){return Tw(xE,(function(n){var r="_."+n[0];e&n[1]&&!gw(t,r)&&t.push(r)})),t.sort()};var kE=function(t,e,n){var r=e+"";return k_(t,IE(r,NE(CE(r),n)))};var AE=function(t,e,n,r,i,o,s,a,u,c){var l=8&e;e|=l?32:64,4&(e&=~(l?64:32))||(e&=-4);var h=[t,e,i,l?o:void 0,l?s:void 0,l?void 0:o,l?void 0:s,a,u,c],f=n.apply(void 0,h);return bE(t)&&wE(f,h),f.placeholder=r,kE(f,t,e)};var PE=function(t){return t.placeholder},OE=Math.min;var RE=function(t,e){for(var n=t.length,r=OE(e.length,n),i=yE(t);r--;){var o=e[r];t[r]=h_(o,n)?i[o]:void 0}return t};var DE=function(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&"__lodash_placeholder__"!==s||(t[n]="__lodash_placeholder__",o[i++]=n)}return o};var LE=function t(e,n,r,i,o,s,a,u,c,l){var h=128&n,f=1&n,p=2&n,d=24&n,y=512&n,v=p?void 0:Jw(e);return function g(){for(var m=arguments.length,_=Array(m),b=m;b--;)_[b]=arguments[b];if(d)var w=PE(g),E=iE(_,w);if(i&&(_=eE(_,i,o,d)),s&&(_=rE(_,s,a,d)),m-=E,d&&m<l){var T=DE(_,w);return AE(e,n,t,g.placeholder,r,_,T,u,c,l-m)}var C=f?r:this,S=p?C[e]:e;return m=_.length,u?_=RE(_,u):y&&m>1&&_.reverse(),h&&c<m&&(_.length=c),this&&this!==Ug&&this instanceof g&&(S=v||Jw(S)),S.apply(C,_)}};var ME=function(t,e,n){var r=Jw(t);return function i(){for(var o=arguments.length,s=Array(o),a=o,u=PE(i);a--;)s[a]=arguments[a];var c=o<3&&s[0]!==u&&s[o-1]!==u?[]:DE(s,u);if((o-=c.length)<n)return AE(t,e,LE,i.placeholder,void 0,s,c,void 0,void 0,n-o);var l=this&&this!==Ug&&this instanceof i?r:t;return y_(l,this,s)}};var FE=function(t,e,n,r){var i=1&e,o=Jw(t);return function e(){for(var s=-1,a=arguments.length,u=-1,c=r.length,l=Array(c+a),h=this&&this!==Ug&&this instanceof e?o:t;++u<c;)l[u]=r[u];for(;a--;)l[u++]=arguments[++s];return y_(h,i?n:this,l)}},jE=Math.min;var UE=function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var a=e[3];if(a){var u=t[3];t[3]=u?eE(u,a,e[4]):a,t[4]=u?DE(t[3],"__lodash_placeholder__"):e[4]}return(a=e[5])&&(u=t[5],t[5]=u?rE(u,a,e[6]):a,t[6]=u?DE(t[5],"__lodash_placeholder__"):e[6]),(a=e[7])&&(t[7]=a),128&r&&(t[8]=null==t[8]?e[8]:jE(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t},VE=Math.max;var qE=function(t,e,n,r,i,o,s,a){var u=2&e;if(!u&&"function"!=typeof t)throw new TypeError("Expected a function");var c=r?r.length:0;if(c||(e&=-97,r=i=void 0),s=void 0===s?s:VE(q_(s),0),a=void 0===a?a:q_(a),c-=i?i.length:0,64&e){var l=r,h=i;r=i=void 0}var f=u?void 0:cE(t),p=[t,e,n,r,i,l,h,o,s,a];if(f&&UE(p,f),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],!(a=p[9]=void 0===p[9]?u?0:t.length:VE(p[9]-c,0))&&24&e&&(e&=-25),e&&1!=e)d=8==e||16==e?ME(t,e,a):32!=e&&33!=e||i.length?LE.apply(void 0,p):FE(t,e,n,r);else var d=Zw(t,e,n);return kE((f?Kw:wE)(d,p),t,e)};var BE=function(t,e,n){return e=n?void 0:e,e=t&&null==e?t.length:e,qE(t,128,void 0,void 0,void 0,void 0,e)},WE=Object.prototype.hasOwnProperty;var zE=function(t,e,n){var r=t[e];WE.call(t,e)&&km(r,n)&&(void 0!==n||e in t)||kw(t,e,n)};var HE=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),i?kw(n,a,u):zE(n,a,u)}return n};var QE=function(t,e){return t&&HE(e,ub(e),t)};var GE=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},YE=Object.prototype.hasOwnProperty;var KE=function(t){if(!em(t))return GE(t);var e=nb(t),n=[];for(var r in t)("constructor"!=r||!e&&YE.call(t,r))&&n.push(r);return n};var $E=function(t){return ab(t)?tb(t,!0):KE(t)};var XE=function(t,e){return t&&HE(e,$E(e),t)},JE=Jv((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?Ug.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}}));var ZE=function(t,e){return HE(t,Mb(t),e)},tT=rb(Object.getPrototypeOf,Object),eT=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Pb(e,Mb(t)),t=tT(t);return e}:Rb;var nT=function(t,e){return HE(t,eT(t),e)};var rT=function(t){return Ob(t,$E,eT)},iT=Object.prototype.hasOwnProperty;var oT=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&iT.call(t,"index")&&(n.index=t.index,n.input=t.input),n};var sT=function(t){var e=new t.constructor(t.byteLength);return new Sb(e).set(new Sb(t)),e};var aT=function(t,e){var n=e?sT(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},uT=/\w*$/;var cT=function(t){var e=new t.constructor(t.source,uT.exec(t));return e.lastIndex=t.lastIndex,e},lT=Vg?Vg.prototype:void 0,hT=lT?lT.valueOf:void 0;var fT=function(t){return hT?Object(hT.call(t)):{}};var pT=function(t,e){var n=e?sT(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var dT=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return sT(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return aT(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return pT(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return cT(t);case"[object Set]":return new r;case"[object Symbol]":return fT(t)}};var yT=function(t){return"function"!=typeof t.constructor||nb(t)?{}:Xw(tT(t))};var vT=function(t){return $g(t)&&"[object Map]"==$b(t)},gT=$_&&$_.isMap,mT=gT?K_(gT):vT;var _T=function(t){return $g(t)&&"[object Set]"==$b(t)},bT=$_&&$_.isSet,wT=bT?K_(bT):_T,ET={};ET["[object Arguments]"]=ET["[object Array]"]=ET["[object ArrayBuffer]"]=ET["[object DataView]"]=ET["[object Boolean]"]=ET["[object Date]"]=ET["[object Float32Array]"]=ET["[object Float64Array]"]=ET["[object Int8Array]"]=ET["[object Int16Array]"]=ET["[object Int32Array]"]=ET["[object Map]"]=ET["[object Number]"]=ET["[object Object]"]=ET["[object RegExp]"]=ET["[object Set]"]=ET["[object String]"]=ET["[object Symbol]"]=ET["[object Uint8Array]"]=ET["[object Uint8ClampedArray]"]=ET["[object Uint16Array]"]=ET["[object Uint32Array]"]=!0,ET["[object Error]"]=ET["[object Function]"]=ET["[object WeakMap]"]=!1;var TT=function t(e,n,r,i,o,s){var a,u=1&n,c=2&n,l=4&n;if(r&&(a=o?r(e,i,o,s):r(e)),void 0!==a)return a;if(!em(e))return e;var h=Mg(e);if(h){if(a=oT(e),!u)return yE(e,a)}else{var f=$b(e),p="[object Function]"==f||"[object GeneratorFunction]"==f;if(Q_(e))return JE(e,u);if("[object Object]"==f||"[object Arguments]"==f||p&&!o){if(a=c||p?{}:yT(e),!u)return c?nT(e,XE(a,e)):ZE(e,QE(a,e))}else{if(!ET[f])return o?e:{};a=dT(e,f,u)}}s||(s=new gb);var d=s.get(e);if(d)return d;s.set(e,a),wT(e)?e.forEach((function(i){a.add(t(i,n,r,i,e,s))})):mT(e)&&e.forEach((function(i,o){a.set(o,t(i,n,r,o,e,s))}));var y=l?c?rT:Fb:c?keysIn:ub,v=h?void 0:y(e);return Tw(v||e,(function(i,o){v&&(i=e[o=i]),zE(a,o,t(i,n,r,o,e,s))})),a};var CT=function(t){return TT(t,4)};function ST(t,e,n){var r=qE(t,8,void 0,void 0,void 0,void 0,void 0,e=n?void 0:e);return r.placeholder=ST.placeholder,r}ST.placeholder={};var IT=ST,xT=Function.prototype,NT=Object.prototype,kT=xT.toString,AT=NT.hasOwnProperty,PT=kT.call(Object);var OT=function(t){if(!$g(t)||"[object Object]"!=Kg(t))return!1;var e=tT(t);if(null===e)return!0;var n=AT.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&kT.call(n)==PT};var RT=function(t){if(!$g(t))return!1;var e=Kg(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!OT(t)};var DT=function(t){return $g(t)&&"[object WeakMap]"==$b(t)};var LT=function(t){return fw("function"==typeof t?t:TT(t,1))},MT=Vg?Vg.isConcatSpreadable:void 0;var FT=function(t){return Mg(t)||c_(t)||!!(MT&&t&&t[MT])};var jT=function t(e,n,r,i,o){var s=-1,a=e.length;for(r||(r=FT),o||(o=[]);++s<a;){var u=e[s];n>0&&r(u)?n>1?t(u,n-1,r,i,o):Pb(o,u):i||(o[o.length]=u)}return o};var UT=function(t){return(null==t?0:t.length)?jT(t,1):[]};var VT=function(t){return k_(T_(t,void 0,UT),t+"")},qT=VT((function(t,e){return qE(t,256,void 0,void 0,void 0,e)}));var BT=function(t){return Mg(t)?Zm(t,p_):Xg(t)?[t]:yE(Jm(r_(t)))},WT={ary:BE,assign:QE,clone:CT,curry:IT,forEach:Tw,isArray:Mg,isError:RT,isFunction:rm,isWeakMap:DT,iteratee:LT,keys:sb,rearg:qT,toInteger:q_,toPath:BT};var zT=function(t,e,n){return Gw(WT,t,e,n)};var HT=function(t,e,n,r){var i=-1,o=gw,s=!0,a=t.length,u=[],c=e.length;if(!a)return u;n&&(e=Zm(e,K_(n))),r?(o=mw,s=!1):e.length>=200&&(o=Tb,s=!1,e=new wb(e));t:for(;++i<a;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,s&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u};zT("difference",A_((function(t,e){return ww(t)?HT(t,jT(e,1,ww,!0)):[]}))).placeholder=Bw;var QT=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:m_(t,e,n)};var GT=function(t,e){for(var n=t.length;n--&&vw(e,t[n],0)>-1;);return n};var YT=function(t,e){for(var n=-1,r=t.length;++n<r&&vw(e,t[n],0)>-1;);return n};var KT=function(t){return t.split("")},$T=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var XT=function(t){return $T.test(t)},JT="[\\ud800-\\udfff]",ZT="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",tC="\\ud83c[\\udffb-\\udfff]",eC="[^\\ud800-\\udfff]",nC="(?:\\ud83c[\\udde6-\\uddff]){2}",rC="[\\ud800-\\udbff][\\udc00-\\udfff]",iC="(?:"+ZT+"|"+tC+")"+"?",oC="[\\ufe0e\\ufe0f]?"+iC+("(?:\\u200d(?:"+[eC,nC,rC].join("|")+")[\\ufe0e\\ufe0f]?"+iC+")*"),sC="(?:"+[eC+ZT+"?",ZT,nC,rC,JT].join("|")+")",aC=RegExp(tC+"(?="+tC+")|"+sC+oC,"g");var uC=function(t){return t.match(aC)||[]};var cC=function(t){return XT(t)?uC(t):KT(t)},lC=/^\s+|\s+$/g;zT("trim",(function(t,e,n){if((t=r_(t))&&(n||void 0===e))return t.replace(lC,"");if(!t||!(e=n_(e)))return t;var r=cC(t),i=cC(e),o=YT(r,i),s=GT(r,i)+1;return QT(r,o,s).join("")})).placeholder=Bw;var hC={cap:!1,curry:!1,fixed:!1,immutable:!1,rearg:!1};zT("isObject",em,hC).placeholder=Bw;var fC=function(t,e,n,r){if(!em(t))return t;for(var i=-1,o=(e=i_(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var u=p_(e[i]),c=n;if(i!=s){var l=a[u];void 0===(c=r?r(l,u,a):void 0)&&(c=em(l)?l:h_(e[i+1])?[]:{})}zE(a,u,c),a=a[u]}return t};var pC=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=g_(t,s);n(a,s)&&fC(o,i_(s,t),a)}return o};var dC=function(t,e){return pC(t,e,(function(e,n){return aw(t,n)}))},yC=VT((function(t,e){return null==t?{}:dC(t,e)}));zT("pick",yC).placeholder=Bw,zT("keys",ub,hC).placeholder=Bw,zT("isPlainObject",OT,hC).placeholder=Bw,zT("isFunction",rm,hC).placeholder=Bw;var vC=zT("compact",(function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}),hC);vC.placeholder=Bw;var gC=function(t){return null==t},mC=zT("isNil",gC,hC);mC.placeholder=Bw;zT("take",(function(t,e,n){return t&&t.length?(e=n||void 0===e?1:q_(e),m_(t,0,e<0?0:e)):[]})).placeholder=Bw;var _C=function(t,e){var n=-1,r=ab(t)?Array(t.length):[];return lb(t,(function(t,i,o){r[++n]=e(t,i,o)})),r};var bC=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var wC=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Xg(t),s=void 0!==e,a=null===e,u=e==e,c=Xg(e);if(!a&&!c&&!o&&t>e||o&&s&&u&&!a&&!c||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0};var EC=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=wC(i[r],o[r]);if(u)return r>=a?u:u*("desc"==n[r]?-1:1)}return t.index-e.index};var TC=function(t,e,n){var r=-1;e=Zm(e.length?e:[w_],K_(fw));var i=_C(t,(function(t,n,i){return{criteria:Zm(e,(function(e){return e(t)})),index:++r,value:t}}));return bC(i,(function(t,e){return EC(t,e,n)}))};zT("sortBy",A_((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Pw(t,e[0],e[1])?e=[]:n>2&&Pw(e[0],e[1],e[2])&&(e=[e[0]]),TC(t,jT(e,1),[])}))).placeholder=Bw;var CC=function(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n};zT("sum",(function(t){return t&&t.length?CC(t,w_):0}),hC).placeholder=Bw;var SC=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],s=e(o);if(null!=s&&(void 0===a?s==s&&!Xg(s):n(s,a)))var a=s,u=o}return u};var IC=function(t,e){return t<e};zT("min",(function(t){return t&&t.length?SC(t,w_,IC):void 0}),hC).placeholder=Bw;var xC=zT("map",(function(t,e){return(Mg(t)?Zm:_C)(t,fw(e))}));xC.placeholder=Bw;var NC=zT("flow",function(t){return VT((function(e){var n=e.length,r=n,i=dE.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new TypeError("Expected a function");if(i&&!s&&"wrapper"==fE(o))var s=new dE([],!0)}for(r=s?r:n;++r<n;){o=e[r];var a=fE(o),u="wrapper"==a?cE(o):void 0;s=u&&bE(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?s[fE(u[0])].apply(s,u[3]):1==o.length&&bE(o)?s[a]():s.thru(o)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Mg(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}());NC.placeholder=Bw;zT("memoize",Km).placeholder=Bw;var kC=a.a.shape({current:a.a.object}),AC=(a.a.oneOfType([a.a.func,kC]),Jv((function(t){
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/var e,n;e=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen},t.exports?t.exports=n:window.ExecutionEnvironment=n}))),PC=Jv((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(e){r(this,t),a(this,"handlers",void 0),this.handlers=e.slice(0)}return s(t,[{key:"addHandlers",value:function(e){for(var n=this.handlers.slice(0),r=e.length,i=0;i<r;i+=1)n.push(e[i]);return new t(n)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlers.length-1;if(e){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](t));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(t)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(e){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===e.indexOf(o)&&n.push(o)}return new t(n)}}]),t}();function f(t){var e=new Map;return t.forEach((function(t,n){e.set(n,t)})),e}function p(t){return Array.isArray(t)?t:[t]}function d(t){return"document"===t?document:"window"===t?window:function(t){return null!==t&&"object"===n(t)&&t.hasOwnProperty("current")}(t)?t.current||document:t||document}var y=function(){function t(e,n){r(this,t),a(this,"handlerSets",void 0),a(this,"poolName",void 0),this.handlerSets=n,this.poolName=e}return s(t,[{key:"addHandlers",value:function(e,n){var r=f(this.handlerSets);if(r.has(e)){var i=r.get(e);r.set(e,i.addHandlers(n))}else r.set(e,new h(n));return new t(this.poolName,r)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlerSets.get(t),r="default"===this.poolName;n&&n.dispatchEvent(e,r)}},{key:"hasHandlers",value:function(t){if(!t)return this.handlerSets.size>0;var e=this.handlerSets.get(t);return!!e&&e.hasHandlers()}},{key:"removeHandlers",value:function(e,n){var r=f(this.handlerSets);if(!r.has(e))return new t(this.poolName,r);var i=r.get(e).removeHandlers(n);return i.hasHandlers()?r.set(e,i):r.delete(e),new t(this.poolName,r)}}]),t}();a(y,"createByType",(function(t,e,n){var r=new Map;return r.set(e,new h(n)),new y(t,r)}));var v=function(){function t(e){var n=this;r(this,t),a(this,"handlers",new Map),a(this,"pools",new Map),a(this,"target",void 0),a(this,"createEmitter",(function(t){return function(e){n.pools.forEach((function(n){n.dispatchEvent(t,e)}))}})),this.target=e}return s(t,[{key:"addHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t);this.pools.set(t,r.addHandlers(e,n))}else this.pools.set(t,y.createByType(t,e,n));this.handlers.has(e)||this.addTargetHandler(e)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t).removeHandlers(e,n);r.hasHandlers()?this.pools.set(t,r):this.pools.delete(t);var i=!1;this.pools.forEach((function(t){return i=i||t.hasHandlers(e)})),i||this.removeTargetHandler(e)}}},{key:"addTargetHandler",value:function(t){var e=this.createEmitter(t);this.handlers.set(t,e),this.target.addEventListener(t,e,!0)}},{key:"removeTargetHandler",value:function(t){this.handlers.has(t)&&(this.target.removeEventListener(t,this.handlers.get(t),!0),this.handlers.delete(t))}}]),t}(),g=new(function(){function t(){var e=this;r(this,t),a(this,"targets",new Map),a(this,"getTarget",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=d(t);if(e.targets.has(r))return e.targets.get(r);if(!n)return null;var i=new v(r);return e.targets.set(r,i),i})),a(this,"removeTarget",(function(t){e.targets.delete(d(t))}))}return s(t,[{key:"sub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(AC.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,s=void 0===o?"default":o;this.getTarget(i).addHandlers(s,t,p(e))}}},{key:"unsub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(AC.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,s=void 0===o?"default":o,a=this.getTarget(i,!1);a&&(a.removeHandlers(s,t,p(e)),a.hasHandlers()||this.removeTarget(i))}}}]),t}()),m=function(t){function e(){return r(this,e),l(this,c(e).apply(this,arguments))}return u(e,o.a.PureComponent),s(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(t){this.unsubscribe(t),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;g.sub(e,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;g.unsub(e,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),e}();a(m,"defaultProps",{pool:"default",target:"document"}),m.propTypes={},e.instance=g,e.default=m}));Xv(PC);PC.instance;var OC=Jv((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function t(e){r(this,t),u(this,"handlers",void 0),this.handlers=e.slice(0)}return s(t,[{key:"addHandlers",value:function(e){for(var n=this.handlers.slice(0),r=e.length,i=0;i<r;i+=1)n.push(e[i]);return new t(n)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlers.length-1;if(e){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](t));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else{(0,this.handlers[n])(t)}}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(e){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var o=this.handlers[i];-1===e.indexOf(o)&&n.push(o)}return new t(n)}}]),t}();function p(t){var e=new Map;return t.forEach((function(t,n){e.set(n,t)})),e}function d(t){return Array.isArray(t)?t:[t]}function y(t){return"document"===t?document:"window"===t?window:function(t){return null!==t&&"object"===n(t)&&t.hasOwnProperty("current")}(t)?t.current||document:t||document}var v=function(){function t(e,n){r(this,t),u(this,"handlerSets",void 0),u(this,"poolName",void 0),this.handlerSets=n,this.poolName=e}return s(t,[{key:"addHandlers",value:function(e,n){var r=p(this.handlerSets);if(r.has(e)){var i=r.get(e);r.set(e,i.addHandlers(n))}else r.set(e,new f(n));return new t(this.poolName,r)}},{key:"dispatchEvent",value:function(t,e){var n=this.handlerSets.get(t),r="default"===this.poolName;n&&n.dispatchEvent(e,r)}},{key:"hasHandlers",value:function(t){if(!t)return this.handlerSets.size>0;var e=this.handlerSets.get(t);return!!e&&e.hasHandlers()}},{key:"removeHandlers",value:function(e,n){var r=p(this.handlerSets);if(!r.has(e))return new t(this.poolName,r);var i=r.get(e).removeHandlers(n);return i.hasHandlers()?r.set(e,i):r.delete(e),new t(this.poolName,r)}}]),t}();u(v,"createByType",(function(t,e,n){var r=new Map;return r.set(e,new f(n)),new v(t,r)}));var g=function(){function t(e){var n=this;r(this,t),u(this,"handlers",new Map),u(this,"pools",new Map),u(this,"target",void 0),u(this,"createEmitter",(function(t){return function(e){n.pools.forEach((function(n){n.dispatchEvent(t,e)}))}})),this.target=e}return s(t,[{key:"addHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t);this.pools.set(t,r.addHandlers(e,n))}else this.pools.set(t,v.createByType(t,e,n));this.handlers.has(e)||this.addTargetHandler(e)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(t,e,n){if(this.pools.has(t)){var r=this.pools.get(t).removeHandlers(e,n);r.hasHandlers()?this.pools.set(t,r):this.pools.delete(t);var i=!1;this.pools.forEach((function(t){return i=i||t.hasHandlers(e)})),i||this.removeTargetHandler(e)}}},{key:"addTargetHandler",value:function(t){var e=this.createEmitter(t);this.handlers.set(t,e),this.target.addEventListener(t,e,!0)}},{key:"removeTargetHandler",value:function(t){this.handlers.has(t)&&(this.target.removeEventListener(t,this.handlers.get(t),!0),this.handlers.delete(t))}}]),t}(),m=new(function(){function t(){var e=this;r(this,t),u(this,"targets",new Map),u(this,"getTarget",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=y(t);if(e.targets.has(r))return e.targets.get(r);if(!n)return null;var i=new g(r);return e.targets.set(r,i),i})),u(this,"removeTarget",(function(t){e.targets.delete(y(t))}))}return s(t,[{key:"sub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(AC.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,s=void 0===o?"default":o,a=this.getTarget(i);a.addHandlers(s,t,d(e))}}},{key:"unsub",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(AC.canUseDOM){var r=n.target,i=void 0===r?document:r,o=n.pool,s=void 0===o?"default":o,a=this.getTarget(i,!1);a&&(a.removeHandlers(s,t,d(e)),a.hasHandlers()||this.removeTarget(i))}}}]),t}()),_=function(t){function e(){return r(this,e),h(this,c(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),s(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(t){this.unsubscribe(t),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;m.sub(e,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(t){var e=t.name,n=t.on,r=t.pool,i=t.target;m.unsub(e,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),e}(o.a.PureComponent);u(_,"defaultProps",{pool:"default",target:"document"}),_.propTypes={name:a.a.string.isRequired,on:a.a.oneOfType([a.a.func,a.a.arrayOf(a.a.func)]).isRequired,pool:a.a.string,target:a.a.oneOfType([a.a.oneOf(["document","window"]),a.a.instanceOf(AC.canUseDOM?HTMLElement:Object),a.a.shape({current:a.a.object})])},e.instance=m,e.default=_}));Xv(OC);OC.instance;var RC,DC=(RC=PC).default,LC=RC.instance;DC.instance=LC;var MC=Bb&&1/xb(new Bb([,-0]))[1]==1/0?function(t){return new Bb(t)}:uE;var FC=function(t,e,n){var r=-1,i=gw,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=mw;else if(o>=200){var c=e?null:MC(t);if(c)return xb(c);s=!1,i=Tb,u=new wb}else u=e?[]:a;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(l)}else i(u,h,n)||(u!==a&&u.push(h),a.push(l))}return a};var jC=function(t){return t&&t.length?FC(t):[]};var UC=function(t){return"number"==typeof t||$g(t)&&"[object Number]"==Kg(t)};var VC=function(t){return"string"==typeof t||!Mg(t)&&$g(t)&&"[object String]"==Kg(t)};var qC=function(t){return!0===t||!1===t||$g(t)&&"[object Boolean]"==Kg(t)},BC=Jv((function(t){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){var e={}.hasOwnProperty;function n(){for(var t=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)t.push(i);else if(Array.isArray(i)&&i.length){var s=n.apply(null,i);s&&t.push(s)}else if("object"===o)for(var a in i)e.call(i,a)&&i[a]&&t.push(a)}}return t.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n}()}));function WC(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("function"!=typeof t&&"string"!=typeof t)throw new Error("createShorthand() Component must be a string or function.");if(gC(n)||qC(n))return null;var s=VC(n),a=UC(n),u=rm(n),c=Object(i.isValidElement)(n),l=OT(n),h=s||a||Mg(n);if(!(u||c||l||h))return null;var f=r.defaultProps,p=void 0===f?{}:f,d=c&&n.props||l&&n||h&&e(n),y=r.overrideProps,v=void 0===y?{}:y;v=rm(v)?v(O_({},p,d)):v;var g=O_({},p,d,v);if(p.className||v.className||d.className){var m=BC(p.className,v.className,d.className);g.className=jC(m.split(" ")).join(" ")}if((p.style||v.style||d.style)&&(g.style=O_({},p.style,d.style,v.style)),gC(g.key)){var _=g.childKey,b=r.autoGenerateKey,w=void 0===b||b;gC(_)?w&&(s||a)&&(g.key=n):(g.key="function"==typeof _?_(g):_,delete g.childKey)}return c?Object(i.cloneElement)(n,g):h||l?o.a.createElement(t,g):u?n(t,g,g.children):void 0}function zC(t,e){if("function"!=typeof t&&"string"!=typeof t)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return WC(t,e,n,r)}}WC.handledProps=[];zC("div",(function(t){return{children:t}})),zC("iframe",(function(t){return{src:t}})),zC("img",(function(t){return{src:t}})),zC("input",(function(t){return{type:t}})),zC("label",(function(t){return{children:t}})),zC("p",(function(t){return{children:t}}));var HC=function(t,e){var n=t.handledProps,r=void 0===n?[]:n;return Object.keys(e).reduce((function(t,n){return"childKey"===n||-1===r.indexOf(n)&&(t[n]=e[n]),t}),{})};function QC(t,e,n){var r=t.defaultProps,i=void 0===r?{}:r;if(e.as&&e.as!==i.as)return e.as;if(n){var o=n();if(o)return o}return e.href?"a":i.as||"div"}var GC=function(t,e){return Zm(e,(function(e){return t[e]}))};var YC=function(t){return null==t?[]:GC(t,ub(t))},KC=Math.max;var $C=function(t,e,n,r){t=ab(t)?t:YC(t),n=n&&!r?q_(n):0;var i=t.length;return n<0&&(n=KC(i+n,0)),VC(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&vw(t,e,n)>-1},XC="object"===("undefined"==typeof document?"undefined":kg(document))&&null!==document,JC="object"===("undefined"==typeof window?"undefined":kg(window))&&null!==window&&window.self===window,ZC=Math.max,tS=Math.min;var eS=function(t,e,n){return t>=tS(e,n)&&t<ZC(e,n)};var nS=function(t,e,n){return e=V_(e),void 0===n?(n=e,e=0):n=V_(n),t=U_(t),eS(t,e,n)};for(var rS=function(t){return t&&t.length?t[0]:void 0},iS=function(t,e){if(Ow([e,t],gC))return!1;if(e.target&&(P_(e.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return P_(e.target,"removeAttribute","data-suir-click-target"),t.contains(e.target);var n=e.clientX,r=e.clientY;if(Ow([n,r],gC))return!1;var i=t.getClientRects();if(!(t.offsetWidth&&t.offsetHeight&&i&&i.length))return!1;var o=rS(i),s=o.top,a=o.bottom,u=o.left,c=o.right;return!Ow([s,a,u,c],gC)&&(nS(r,s,a+.001)&&nS(n,u,c+.001))},oS=([].concat(Vw(ub(Dw)),Vw(ub(Dw).map(Number)),Vw(YC(Dw))),jC([].concat(["american sign language interpreting","assistive listening systems","audio description","blind","braille","closed captioning","closed captioning outline","deaf","low vision","phone volume","question circle","question circle outline","sign language","tty","universal access","wheelchair"],["angle double down","angle double left","angle double right","angle double up","angle down","angle left","angle right","angle up","arrow alternate circle down","arrow alternate circle down outline","arrow alternate circle left","arrow alternate circle left outline","arrow alternate circle right","arrow alternate circle right outline","arrow alternate circle up","arrow alternate circle up outline","arrow circle down","arrow circle left","arrow circle right","arrow circle up","arrow down","arrow left","arrow right","arrow up","arrows alternate","arrows alternate horizontal","arrows alternate vertical","caret down","caret left","caret right","caret square down","caret square down outline","caret square left","caret square left outline","caret square right","caret square right outline","caret square up","caret square up outline","caret up","cart arrow down","chart line","chevron circle down","chevron circle left","chevron circle right","chevron circle up","chevron down","chevron left","chevron right","chevron up","cloud download","cloud upload","download","exchange","expand arrows alternate","external alternate","external square alternate","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","history","level down alternate","level up alternate","location arrow","long arrow alternate down","long arrow alternate left","long arrow alternate right","long arrow alternate up","mouse pointer","play","random","recycle","redo","redo alternate","reply","reply all","retweet","share","share square","share square outline","sign-in","sign-out","sign-in alternate","sign-out alternate","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","sync","sync alternate","text height","text width","undo","undo alternate","upload","zoom-in","zoom-out"],["audio description","backward","circle","circle outline","closed captioning","closed captioning outline","compress","eject","expand","expand arrows alternate","fast backward","fast forward","file audio","file audio outline","file video","file video outline","film","forward","headphones","microphone","microphone slash","music","pause","pause circle","pause circle outline","phone volume","play","play circle","play circle outline","podcast","random","redo","redo alternate","rss","rss square","step backward","step forward","stop","stop circle","stop circle outline","sync","sync alternate","undo","undo alternate","video","volume down","volume off","volume up"],["address book","address book outline","address card","address card outline","archive","balance scale","birthday cake","book","briefcase","building","building outline","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","certificate","chart area","chart bar","chart bar outline","chart line","chart pie","clipboard","clipboard outline","coffee","columns","compass","compass outline","copy","copy outline","copyright","copyright outline","cut","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","eraser","fax","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","globe","industry","paperclip","paste","pen square","pencil alternate","percent","phone","phone square","phone volume","registered","registered outline","save","save outline","sitemap","sticky note","sticky note outline","suitcase","table","tag","tags","tasks","thumbtack","trademark"],["chess","chess bishop","chess board","chess king","chess knight","chess pawn","chess queen","chess rook","square full"],["archive","barcode","bath","bug","code","code branch","coffee","file","file outline","file alternate","file alternate outline","file code","file code outline","filter","fire extinguisher","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","microchip","qrcode","shield alternate","sitemap","terminal","user secret","window close","window close outline","window maximize","window maximize outline","window minimize","window minimize outline","window restore","window restore outline"],["address book","address book outline","address card","address card outline","american sign language interpreting","assistive listening systems","at","bell","bell outline","bell slash","bell slash outline","bullhorn","comment","comment outline","comment alternate","comment alternate outline","comments","comments outline","envelope","envelope outline","envelope open","envelope open outline","envelope square","fax","inbox","language","microphone","microphone slash","mobile","mobile alternate","paper plane","paper plane outline","phone","phone square","phone volume","rss","rss square","tty","wifi"],["desktop","download","hdd","hdd outline","headphones","keyboard","keyboard outline","laptop","microchip","mobile","mobile alternate","plug","power off","print","save","save outline","server","tablet","tablet alternate","tv","upload"],["dollar sign","euro sign","lira sign","money bill alternate","money bill alternate outline","pound sign","ruble sign","rupee sign","shekel sign","won sign","yen sign"],["bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","clock","clock outline","hourglass","hourglass outline","hourglass end","hourglass half","hourglass start","stopwatch"],["adjust","clone","clone outline","copy","copy outline","crop","crosshairs","cut","edit","edit outline","eraser","eye","eye dropper","eye slash","eye slash outline","object group","object group outline","object ungroup","object ungroup outline","paint brush","paste","pencil alternate","save","save outline","tint"],["align center","align justify","align left","align right","bold","clipboard","clipboard outline","clone","clone outline","columns","copy","copy outline","cut","edit","edit outline","eraser","file","file outline","file alternate","file alternate outline","font","heading","i cursor","indent","italic","linkify","list","list alternate","list alternate outline","list ol","list ul","outdent","paper plane","paper plane outline","paperclip","paragraph","paste","pencil alternate","print","quote left","quote right","redo","redo alternate","reply","reply all","share","strikethrough","subscript","superscript","sync","sync alternate","table","tasks","text height","text width","th","th large","th list","trash","trash alternate","trash alternate outline","underline","undo","undo alternate","unlink"],["archive","clone","clone outline","copy","copy outline","cut","file","file outline","file alternate","file alternate outline","file archive","file archive outline","file audio","file audio outline","file code","file code outline","file excel","file excel outline","file image","file image outline","file pdf","file pdf outline","file powerpoint","file powerpoint outline","file video","file video outline","file word","file word outline","folder","folder outline","folder open","folder open outline","paste","save","save outline","sticky note","sticky note outline"],["genderless","mars","mars double","mars stroke","mars stroke horizontal","mars stroke vertical","mercury","neuter","transgender","transgender alternate","venus","venus double","venus mars"],["hand lizard","hand lizard outline","hand paper","hand paper outline","hand peace","hand peace outline","hand point down","hand point down outline","hand point left","hand point left outline","hand point right","hand point right outline","hand point up","hand point up outline","hand pointer","hand pointer outline","hand rock","hand rock outline","hand scissors","hand scissors outline","hand spock","hand spock outline","handshake","handshake outline","thumbs down","thumbs down outline","thumbs up","thumbs up outline"],["ambulance","h square","heart","heart outline","heartbeat","hospital","hospital outline","medkit","plus square","plus square outline","stethoscope","user md","wheelchair"],["adjust","bolt","camera","camera retro","clone","clone outline","compress","expand","eye","eye dropper","eye slash","eye slash outline","file image","file image outline","film","id badge","id badge outline","id card","id card outline","image","image outline","images","images outline","sliders horizontal","tint"],["ban","barcode","bars","beer","bell","bell outline","bell slash","bell slash outline","bug","bullhorn","bullseye","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","certificate","check","check circle","check circle outline","check square","check square outline","circle","circle outline","clipboard","clipboard outline","clone","clone outline","cloud","cloud download","cloud upload","coffee","cog","cogs","copy","copy outline","cut","database","dot circle","dot circle outline","download","edit","edit outline","ellipsis horizontal","ellipsis vertical","envelope","envelope outline","envelope open","envelope open outline","eraser","exclamation","exclamation circle","exclamation triangle","external alternate","external square alternate","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","filter","flag","flag outline","flag checkered","folder","folder outline","folder open","folder open outline","frown","frown outline","hashtag","heart","heart outline","history","home","i cursor","info","info circle","language","magic","meh","meh outline","microphone","microphone slash","minus","minus circle","minus square","minus square outline","paste","pencil alternate","plus","plus circle","plus square","plus square outline","qrcode","question","question circle","question circle outline","quote left","quote right","redo","redo alternate","reply","reply all","rss","rss square","save","save outline","search","search minus","search plus","share","share alternate","share alternate square","share square","share square outline","shield alternate","sign-in","sign-out","signal","sitemap","sliders horizontal","smile","smile outline","sort","sort alphabet down","sort alphabet up","sort amount down","sort amount up","sort down","sort numeric down","sort numeric up","sort up","star","star outline","star half","star half outline","sync","sync alternate","thumbs down","thumbs down outline","thumbs up","thumbs up outline","times","times circle","times circle outline","toggle off","toggle on","trash","trash alternate","trash alternate outline","trophy","undo","undo alternate","upload","user","user outline","user circle","user circle outline","wifi"],["box","boxes","clipboard check","clipboard list","dolly","dolly flatbed","pallet","shipping fast","truck","warehouse"],["ambulance","anchor","balance scale","bath","bed","beer","bell","bell outline","bell slash","bell slash outline","bicycle","binoculars","birthday cake","blind","bomb","book","bookmark","bookmark outline","briefcase","building","building outline","car","coffee","crosshairs","dollar sign","eye","eye slash","eye slash outline","fighter jet","fire","fire extinguisher","flag","flag outline","flag checkered","flask","gamepad","gavel","gift","glass martini","globe","graduation cap","h square","heart","heart outline","heartbeat","home","hospital","hospital outline","image","image outline","images","images outline","industry","info","info circle","key","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","location arrow","low vision","magnet","male","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","money bill alternate","money bill alternate outline","motorcycle","music","newspaper","newspaper outline","paw","phone","phone square","phone volume","plane","plug","plus","plus square","plus square outline","print","recycle","road","rocket","search","search minus","search plus","ship","shopping bag","shopping basket","shopping cart","shower","street view","subway","suitcase","tag","tags","taxi","thumbtack","ticket alternate","tint","train","tree","trophy","truck","tty","umbrella","university","utensil spoon","utensils","wheelchair","wifi","wrench"],["ambulance","band aid","dna","first aid","heart","heart outline","heartbeat","hospital","hospital outline","hospital symbol","pills","plus","stethoscope","syringe","thermometer","user md","weight"],["ambulance","anchor","archive","balance scale","bath","bed","beer","bell","bell outline","bicycle","binoculars","birthday cake","bomb","book","bookmark","bookmark outline","briefcase","bug","building","building outline","bullhorn","bullseye","bus","calculator","calendar","calendar outline","calendar alternate","calendar alternate outline","camera","camera retro","car","clipboard","clipboard outline","cloud","coffee","cog","cogs","compass","compass outline","copy","copy outline","cube","cubes","cut","envelope","envelope outline","envelope open","envelope open outline","eraser","eye","eye dropper","fax","fighter jet","file","file outline","file alternate","file alternate outline","film","fire","fire extinguisher","flag","flag outline","flag checkered","flask","futbol","futbol outline","gamepad","gavel","gem","gem outline","gift","glass martini","globe","graduation cap","hdd","hdd outline","headphones","heart","heart outline","home","hospital","hospital outline","hourglass","hourglass outline","image","image outline","images","images outline","industry","key","keyboard","keyboard outline","laptop","leaf","lemon","lemon outline","life ring","life ring outline","lightbulb","lightbulb outline","lock","lock open","magic","magnet","map","map outline","map marker","map marker alternate","map pin","map signs","medkit","microchip","microphone","mobile","mobile alternate","money bill alternate","money bill alternate outline","moon","moon outline","motorcycle","newspaper","newspaper outline","paint brush","paper plane","paper plane outline","paperclip","paste","paw","pencil alternate","phone","plane","plug","print","puzzle piece","road","rocket","save","save outline","search","shield alternate","shopping bag","shopping basket","shopping cart","shower","snowflake","snowflake outline","space shuttle","star","star outline","sticky note","sticky note outline","stopwatch","subway","suitcase","sun","sun outline","tablet","tablet alternate","tachometer alternate","tag","tags","taxi","thumbtack","ticket alternate","train","trash","trash alternate","trash alternate outline","tree","trophy","truck","tv","umbrella","university","unlock","unlock alternate","utensil spoon","utensils","wheelchair","wrench"],["bell","bell outline","bookmark","bookmark outline","bullhorn","camera","camera retro","cart arrow down","cart plus","certificate","credit card","credit card outline","gem","gem outline","gift","handshake","handshake outline","heart","heart outline","key","shopping bag","shopping basket","shopping cart","star","star outline","tag","tags","thumbs down","thumbs down outline","thumbs up","thumbs up outline","trophy"],["bookmark","bookmark outline","calendar","calendar outline","certificate","circle","circle outline","cloud","comment","comment outline","file","file outline","folder","folder outline","heart","heart outline","map marker","play","square","square outline","star","star outline"],["asterisk","certificate","circle notch","cog","compass","compass outline","crosshairs","life ring","life ring outline","snowflake","snowflake outline","spinner","sun","sun outline","sync"],["baseball ball","basketball ball","bowling ball","football ball","futbol","futbol outline","golf ball","hockey puck","quidditch","table tennis","volleyball ball"],["ban","battery empty","battery full","battery half","battery quarter","battery three quarters","bell","bell outline","bell slash","bell slash outline","calendar","calendar outline","calendar alternate","calendar alternate outline","calendar check","calendar check outline","calendar minus","calendar minus outline","calendar plus","calendar plus outline","calendar times","calendar times outline","cart arrow down","cart plus","exclamation","exclamation circle","exclamation triangle","eye","eye slash","eye slash outline","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","info","info circle","lock","lock open","minus","minus circle","minus square","minus square outline","plus","plus circle","plus square","plus square outline","question","question circle","question circle outline","shield alternate","shopping cart","sign in alternate","sign out alternate","thermometer empty","thermometer full","thermometer half","thermometer quarter","thermometer three quarters","thumbs down","thumbs down outline","thumbs up","thumbs up outline","toggle off","toggle on","unlock","unlock alternate"],["address book","address book outline","address card","address card outline","bed","blind","child","female","frown","frown outline","id badge","id badge outline","id card","id card outline","male","meh","meh outline","power off","smile","smile outline","street view","user","user outline","user circle","user circle outline","user md","user plus","user secret","user times","users","wheelchair"],["ambulance","bicycle","bus","car","fighter jet","motorcycle","paper plane","paper plane outline","plane","rocket","ship","shopping cart","space shuttle","subway","taxi","train","truck","wheelchair"],["archive","book","bookmark","bookmark outline","edit","edit outline","envelope","envelope outline","envelope open","envelope open outline","eraser","file","file outline","file alternate","file alternate outline","folder","folder outline","folder open","folder open outline","keyboard","keyboard outline","newspaper","newspaper outline","paper plane","paper plane outline","paperclip","paragraph","pen square","pencil alternate","quote left","quote right","sticky note","sticky note outline","thumbtack"],["500px","accessible","accusoft","adn","adversal","affiliatetheme","algolia","amazon","amazon pay","amilia","android","angellist","angrycreative","angular","app store","app store ios","apper","apple","apple pay","asymmetrik","audible","autoprefixer","avianex","aviato","aws","bandcamp","behance","behance square","bimobject","bitbucket","bitcoin","bity","black tie","blackberry","blogger","blogger b","bluetooth","bluetooth b","btc","buromobelexperte","buysellads","cc amazon pay","cc amex","cc apple pay","cc diners club","cc discover","cc jcb","cc mastercard","cc paypal","cc stripe","cc visa","centercode","chrome","cloudscale","cloudsmith","cloudversify","codepen","codiepie","connectdevelop","contao","cpanel","creative commons","css3","css3 alternate","cuttlefish","d and d","dashcube","delicious","deploydog","deskpro","deviantart","digg","digital ocean","discord","discourse","dochub","docker","draft2digital","dribbble","dribbble square","dropbox","drupal","dyalog","earlybirds","edge","elementor","ember","empire","envira","erlang","ethereum","etsy","expeditedssl","facebook","facebook f","facebook messenger","facebook square","firefox","first order","firstdraft","flickr","flipboard","fly","font awesome","font awesome alternate","font awesome flag","fonticons","fonticons fi","fort awesome","fort awesome alternate","forumbee","foursquare","free code camp","freebsd","get pocket","gg","gg circle","git","git square","github","github alternate","github square","gitkraken","gitlab","gitter","glide","glide g","gofore","goodreads","goodreads g","google","google drive","google play","google plus","google plus g","google plus square","google wallet","gratipay","grav","gripfire","grunt","gulp","hacker news","hacker news square","hips","hire a helper","hooli","hotjar","houzz","html5","hubspot","imdb","instagram","internet explorer","ioxhost","itunes","itunes note","jenkins","joget","joomla","js","js square","jsfiddle","keycdn","kickstarter","kickstarter k","korvue","laravel","lastfm","lastfm square","leanpub","less","linechat","linkedin","linkedin alternate","linode","linux","lyft","magento","maxcdn","medapps","medium","medium m","medrt","meetup","microsoft","mix","mixcloud","mizuni","modx","monero","napster","nintendo switch","node","node js","npm","ns8","nutritionix","odnoklassniki","odnoklassniki square","opencart","openid","opera","optin monster","osi","page4","pagelines","palfed","patreon","paypal","periscope","phabricator","phoenix framework","php","pied piper","pied piper alternate","pied piper pp","pinterest","pinterest p","pinterest square","playstation","product hunt","pushed","python","qq","quinscape","quora","ravelry","react","rebel","redriver","reddit","reddit alien","reddit square","rendact","renren","replyd","resolving","rocketchat","rockrms","safari","sass","schlix","scribd","searchengin","sellcast","sellsy","servicestack","shirtsinbulk","simplybuilt","sistrix","skyatlas","skype","slack","slack hash","slideshare","snapchat","snapchat ghost","snapchat square","soundcloud","speakap","spotify","stack exchange","stack overflow","staylinked","steam","steam square","steam symbol","sticker mule","strava","stripe","stripe s","studiovinari","stumbleupon","stumbleupon circle","superpowers","supple","telegram","telegram plane","tencent weibo","themeisle","trello","tripadvisor","tumblr","tumblr square","twitch","twitter","twitter square","typo3","uber","uikit","uniregistry","untappd","usb","ussunnah","vaadin","viacoin","viadeo","viadeo square","viber","vimeo","vimeo square","vimeo v","vine","vk","vnv","vuejs","wechat","weibo","weixin","whatsapp","whatsapp square","whmcs","wikipedia w","windows","wordpress","wordpress simple","wpbeginner","wpexplorer","wpforms","xbox","xing","xing square","y combinator","yahoo","yandex","yandex international","yelp","yoast","youtube","youtube square"]))),sS=jC([].concat(Vw(oS),["chess rock","ordered list","unordered list","user doctor","shield","puzzle","add circle","add square","add to calendar","add to cart","add user","add","alarm mute","alarm","ald","als","announcement","area chart","area graph","arrow down cart","asexual","asl interpreting","asl","assistive listening devices","attach","attention","balance","bar","bathtub","battery four","battery high","battery low","battery one","battery three","battery two","battery zero","birthday","block layout","bluetooth alternative","broken chain","browser","call square","call","cancel","cart","cc","chain","chat","checked calendar","checkmark","circle notched","close","cny","cocktail","commenting","computer","configure","content","deafness","delete calendar","delete","detective","discussions","doctor","dollar","dont","drivers license","dropdown","emergency","envira gallery","erase","eur","euro","eyedropper","factory","favorite","feed","female homosexual","file text","file text outline","find","first aid","fork","game","gay","gbp","google plus circle","google plus official","grab","graduation","grid layout","group","h","hand victory","handicap","hard of hearing","header","help circle","help","heterosexual","hide","hotel","hourglass four","hourglass full","hourglass one","hourglass three","hourglass two","idea","ils","in cart","inr","intergender","intersex","jpy","krw","lab","law","legal","lesbian","lightning","like","line graph","linkedin square","linkify","lira","list layout","magnify","mail forward","mail outline","mail square","mail","male homosexual","man","marker","mars alternate","mars horizontal","mars vertical","microsoft edge","military","ms edge","mute","new pied piper","non binary transgender","numbered list","options","other gender horizontal","other gender vertical","other gender","payment","paypal card","pencil square","photo","picture","pie chart","pie graph","pied piper hat","pin","plus cart","point","pointing down","pointing left","pointing right","pointing up","pound","power cord","power","privacy","r circle","rain","record","refresh","remove circle","remove from calendar","remove user","remove","repeat","rmb","rouble","rub","ruble","rupee","s15","selected radio","send","setting","settings","shekel","sheqel","shipping","shop","shuffle","shutdown","sidebar","signing","signup","sliders","soccer","sort alphabet ascending","sort alphabet descending","sort ascending","sort content ascending","sort content descending","sort descending","sort numeric ascending","sort numeric descending","sound","spy","stripe card","student","talk","target","teletype","television","text cursor","text telephone","theme","thermometer","thumb tack","time","tm","toggle down","toggle left","toggle right","toggle up","translate","travel","treatment","triangle down","triangle left","triangle right","triangle up","try","unhide","unlinkify","unmute","usd","user cancel","user close","user delete","user x","vcard","video camera","video play","volume control phone","wait","warning circle","warning sign","warning","wi-fi","winner","wizard","woman","won","wordpress beginner","wordpress forms","world","write square","x","yen","zip","zoom in","zoom out","zoom","bitbucket square","checkmark box","circle thin","cloud download","cloud upload","compose","conversation","credit card alternative","currency","dashboard","diamond","disk","exchange","external share","external square","external","facebook official","food","hourglass zero","level down","level up","log out","meanpath","money","move","pencil","protect","radio","remove bookmark","resize horizontal","resize vertical","sign in","sign out","spoon","star half empty","star half full","ticket","times rectangle","write","youtube play"])),aS=(jC([].concat(Vw(sS),["left dropdown"])),A_((function(t,e){return ww(t)?HT(t,e):[]})),function(t){return null!==t&&!Array.isArray(t)&&"object"==typeof t}),uS={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},cS=0;cS<24;cS+=1)uS[112+cS]="F"+(cS+1);for(var lS=0;lS<26;lS+=1){var hS=lS+65;uS[hS]=[String.fromCharCode(hS+32),String.fromCharCode(hS)]}var fS={codes:uS,getCode:function(t){return aS(t)?t.keyCode||t.which||this[t.key]:this[t]},getKey:function(t){var e=aS(t);if(e&&t.key)return t.key;var n=uS[e?t.keyCode||t.which:t];return Array.isArray(n)&&(n=e?n[t.shiftKey?1:0]:n[0]),n},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};fS.Spacebar=fS[" "],fS.Digit0=fS[0],fS.Digit1=fS[1],fS.Digit2=fS[2],fS.Digit3=fS[3],fS.Digit4=fS[4],fS.Digit5=fS[5],fS.Digit6=fS[6],fS.Digit7=fS[7],fS.Digit8=fS[8],fS.Digit9=fS[9],fS.Tilde=fS["~"],fS.GraveAccent=fS["`"],fS.ExclamationPoint=fS["!"],fS.AtSign=fS["@"],fS.PoundSign=fS["#"],fS.PercentSign=fS["%"],fS.Caret=fS["^"],fS.Ampersand=fS["&"],fS.PlusSign=fS["+"],fS.MinusSign=fS["-"],fS.EqualsSign=fS["="],fS.DivisionSign=fS["/"],fS.MultiplicationSign=fS["*"],fS.Comma=fS[","],fS.Decimal=fS["."],fS.Colon=fS[":"],fS.Semicolon=fS[";"],fS.Pipe=fS["|"],fS.BackSlash=fS["\\"],fS.QuestionMark=fS["?"],fS.SingleQuote=fS["'"],fS.DoubleQuote=fS['"'],fS.LeftCurlyBrace=fS["{"],fS.RightCurlyBrace=fS["}"],fS.LeftParenthesis=fS["("],fS.RightParenthesis=fS[")"],fS.LeftAngleBracket=fS["<"],fS.RightAngleBracket=fS[">"],fS.LeftSquareBracket=fS["["],fS.RightSquareBracket=fS["]"];var pS=fS,dS=function(t){function e(){var t,n;Ig(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Pg(this,(t=Og(e)).call.apply(t,[this].concat(i))),Lg(Ag(n),"handleRef",(function(t){Gv(n.props.innerRef,t)})),n}return Dg(e,t),Ng(e,[{key:"componentDidMount",value:function(){P_(this.props,"onMount",null,this.props)}},{key:"componentWillUnmount",value:function(){P_(this.props,"onUnmount",null,this.props)}},{key:"render",value:function(){if(!function t(){return gC(t.override)?XC&&JC:t.override}())return null;var t=this.props,e=t.children,n=t.mountNode,r=void 0===n?document.body:n;return Object(u.createPortal)(o.a.createElement(Cg,{innerRef:this.handleRef},e),r)}}]),e}(i.Component);Lg(dS,"handledProps",["children","innerRef","mountNode","onMount","onUnmount"]),dS.propTypes={};var yS=function(t){function e(){var t,n;Ig(this,e);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=Pg(this,(t=Og(e)).call.apply(t,[this].concat(o))),Lg(Ag(n),"contentRef",Object(i.createRef)()),Lg(Ag(n),"triggerRef",Object(i.createRef)()),Lg(Ag(n),"latestDocumentMouseDownEvent",null),Lg(Ag(n),"handleDocumentMouseDown",(function(t){n.latestDocumentMouseDownEvent=t})),Lg(Ag(n),"handleDocumentClick",(function(t){var e=n.props.closeOnDocumentClick,r=n.latestDocumentMouseDownEvent;n.latestDocumentMouseDownEvent=null,!n.contentRef.current||iS(n.triggerRef.current,t)||r&&iS(n.contentRef.current,r)||iS(n.contentRef.current,t)||e&&n.close(t)})),Lg(Ag(n),"handleEscape",(function(t){n.props.closeOnEscape&&pS.getCode(t)===pS.Escape&&n.close(t)})),Lg(Ag(n),"handlePortalMouseLeave",(function(t){var e=n.props,r=e.closeOnPortalMouseLeave,i=e.mouseLeaveDelay;r&&t.target===n.contentRef.current&&(n.mouseLeaveTimer=n.closeWithTimeout(t,i))})),Lg(Ag(n),"handlePortalMouseEnter",(function(){n.props.closeOnPortalMouseLeave&&clearTimeout(n.mouseLeaveTimer)})),Lg(Ag(n),"handleTriggerBlur",(function(t){for(var e=n.props,r=e.trigger,i=e.closeOnTriggerBlur,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];P_.apply(void 0,[r,"props.onBlur",t].concat(s));var u=t.relatedTarget||document.activeElement,c=P_(n.contentRef.current,"contains",u);i&&!c&&n.close(t)})),Lg(Ag(n),"handleTriggerClick",(function(t){for(var e=n.props,r=e.trigger,i=e.closeOnTriggerClick,o=e.openOnTriggerClick,s=n.state.open,a=arguments.length,u=new Array(a>1?a-1:0),c=1;c<a;c++)u[c-1]=arguments[c];P_.apply(void 0,[r,"props.onClick",t].concat(u)),s&&i?n.close(t):!s&&o&&n.open(t)})),Lg(Ag(n),"handleTriggerFocus",(function(t){for(var e=n.props,r=e.trigger,i=e.openOnTriggerFocus,o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];P_.apply(void 0,[r,"props.onFocus",t].concat(s)),i&&n.open(t)})),Lg(Ag(n),"handleTriggerMouseLeave",(function(t){clearTimeout(n.mouseEnterTimer);for(var e=n.props,r=e.trigger,i=e.closeOnTriggerMouseLeave,o=e.mouseLeaveDelay,s=arguments.length,a=new Array(s>1?s-1:0),u=1;u<s;u++)a[u-1]=arguments[u];P_.apply(void 0,[r,"props.onMouseLeave",t].concat(a)),i&&(n.mouseLeaveTimer=n.closeWithTimeout(t,o))})),Lg(Ag(n),"handleTriggerMouseEnter",(function(t){clearTimeout(n.mouseLeaveTimer);for(var e=n.props,r=e.trigger,i=e.mouseEnterDelay,o=e.openOnTriggerMouseEnter,s=arguments.length,a=new Array(s>1?s-1:0),u=1;u<s;u++)a[u-1]=arguments[u];P_.apply(void 0,[r,"props.onMouseEnter",t].concat(a)),o&&(n.mouseEnterTimer=n.openWithTimeout(t,i))})),Lg(Ag(n),"open",(function(t){var e=n.props.onOpen;e&&e(t,n.props),n.trySetState({open:!0})})),Lg(Ag(n),"openWithTimeout",(function(t,e){var r=O_({},t);return setTimeout((function(){return n.open(r)}),e||0)})),Lg(Ag(n),"close",(function(t){var e=n.props.onClose;e&&e(t,n.props),n.trySetState({open:!1})})),Lg(Ag(n),"closeWithTimeout",(function(t,e){var r=O_({},t);return setTimeout((function(){return n.close(r)}),e||0)})),Lg(Ag(n),"handleMount",(function(){P_(n.props,"onMount",null,n.props)})),Lg(Ag(n),"handleUnmount",(function(){P_(n.props,"onUnmount",null,n.props)})),Lg(Ag(n),"handleTriggerRef",(function(t){n.triggerRef.current=t,Gv(n.props.triggerRef,t)})),n}return Dg(e,t),Ng(e,[{key:"componentWillUnmount",value:function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)}},{key:"render",value:function(){var t=this.props,e=t.children,n=t.eventPool,r=t.mountNode,s=t.trigger,a=this.state.open;return o.a.createElement(i.Fragment,null,a&&o.a.createElement(i.Fragment,null,o.a.createElement(dS,{innerRef:this.contentRef,mountNode:r,onMount:this.handleMount,onUnmount:this.handleUnmount},e),o.a.createElement(DC,{name:"mouseleave",on:this.handlePortalMouseLeave,pool:n,target:this.contentRef}),o.a.createElement(DC,{name:"mouseenter",on:this.handlePortalMouseEnter,pool:n,target:this.contentRef}),o.a.createElement(DC,{name:"mousedown",on:this.handleDocumentMouseDown,pool:n}),o.a.createElement(DC,{name:"click",on:this.handleDocumentClick,pool:n}),o.a.createElement(DC,{name:"keydown",on:this.handleEscape,pool:n})),s&&o.a.createElement(Cg,{innerRef:this.handleTriggerRef},Object(i.cloneElement)(s,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))}}]),e}(Iw);Lg(yS,"defaultProps",{closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0}),Lg(yS,"autoControlledProps",["open"]),Lg(yS,"Inner",dS),Lg(yS,"handledProps",["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"]),yS.propTypes={};var vS=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};var gS=function(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n};var mS=function(t,e,n){var r=Mg(t)?vS:gS,i=arguments.length<3;return r(t,fw(e),n,i,lb)};var _S=function(t,e,n){(void 0!==n&&!km(t[e],n)||void 0===n&&!(e in t))&&kw(t,e,n)};var bS=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var wS=function(t){return HE(t,$E(t))};var ES=function(t,e,n,r,i,o,s){var a=bS(t,n),u=bS(e,n),c=s.get(u);if(c)_S(t,n,c);else{var l=o?o(a,u,n+"",t,e,s):void 0,h=void 0===l;if(h){var f=Mg(u),p=!f&&Q_(u),d=!f&&!p&&J_(u);l=u,f||p||d?Mg(a)?l=a:ww(a)?l=yE(a):p?(h=!1,l=JE(u,!0)):d?(h=!1,l=pT(u,!0)):l=[]:OT(u)||c_(u)?(l=a,c_(a)?l=wS(a):em(a)&&!rm(a)||(l=yT(u))):h=!1}h&&(s.set(u,l),i(l,u,r,o,s),s.delete(u)),_S(t,n,l)}};var TS=function t(e,n,r,i,o){e!==n&&W_(n,(function(s,a){if(o||(o=new gb),em(s))ES(e,n,a,r,t,i,o);else{var u=i?i(bS(e,a),s,a+"",e,n,o):void 0;void 0===u&&(u=s),_S(e,a,u)}}),$E)};var CS=function(t){return A_((function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,s&&Pw(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=n[r];a&&t(e,a,r,o)}return e}))}((function(t,e,n){TS(t,e,n)}));var SS=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i};var IS,xS=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e},NS=Object.prototype.toString,kS=function(t){var e=NS.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===NS.call(t.callee)),n};if(!Object.keys){var AS=Object.prototype.hasOwnProperty,PS=Object.prototype.toString,OS=kS,RS=Object.prototype.propertyIsEnumerable,DS=!RS.call({toString:null},"toString"),LS=RS.call((function(){}),"prototype"),MS=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],FS=function(t){var e=t.constructor;return e&&e.prototype===t},jS={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},US=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!jS["$"+t]&&AS.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{FS(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();IS=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===PS.call(t),r=OS(t),i=e&&"[object String]"===PS.call(t),o=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var s=LS&&n;if(i&&t.length>0&&!AS.call(t,0))for(var a=0;a<t.length;++a)o.push(String(a));if(r&&t.length>0)for(var u=0;u<t.length;++u)o.push(String(u));else for(var c in t)s&&"prototype"===c||!AS.call(t,c)||o.push(String(c));if(DS)for(var l=function(t){if("undefined"==typeof window||!US)return FS(t);try{return FS(t)}catch(t){return!1}}(t),h=0;h<MS.length;++h)l&&"constructor"===MS[h]||!AS.call(t,MS[h])||o.push(MS[h]);return o}}var VS=IS,qS=Array.prototype.slice,BS=Object.keys,WS=BS?function(t){return BS(t)}:VS,zS=Object.keys;WS.shim=function(){Object.keys?function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2)||(Object.keys=function(t){return kS(t)?zS(qS.call(t)):zS(t)}):Object.keys=WS;return Object.keys||WS};var HS=WS,QS="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,GS=Object.prototype.toString,YS=function(t){return!(QS&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===GS.call(t)},KS=function(t){return!!YS(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==GS.call(t)&&"[object Function]"===GS.call(t.callee)},$S=function(){return YS(arguments)}();YS.isLegacyArguments=KS;var XS=$S?YS:KS,JS="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),ZS=Object.prototype.toString,tI=Array.prototype.concat,eI=Object.defineProperty,nI=eI&&function(){var t={};try{for(var e in eI(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),rI=function(t,e,n,r){(!(e in t)||function(t){return"function"==typeof t&&"[object Function]"===ZS.call(t)}(r)&&r())&&(nI?eI(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},iI=function(t,e){var n=arguments.length>2?arguments[2]:{},r=HS(e);JS&&(r=tI.call(r,Object.getOwnPropertySymbols(e)));for(var i=0;i<r.length;i+=1)rI(t,r[i],e[r[i]],n[r[i]])};iI.supportsDescriptors=!!nI;var oI=iI,sI="Function.prototype.bind called on incompatible ",aI=Array.prototype.slice,uI=Object.prototype.toString,cI=Function.prototype.bind||function(t){var e=this;if("function"!=typeof e||"[object Function]"!==uI.call(e))throw new TypeError(sI+e);for(var n,r=aI.call(arguments,1),i=function(){if(this instanceof n){var i=e.apply(this,r.concat(aI.call(arguments)));return Object(i)===i?i:this}return e.apply(t,r.concat(aI.call(arguments)))},o=Math.max(0,e.length-r.length),s=[],a=0;a<o;a++)s.push("$"+a);if(n=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var u=function(){};u.prototype=e.prototype,n.prototype=new u,u.prototype=null}return n},lI=$v.Symbol,hI=function(){return"function"==typeof lI&&("function"==typeof Symbol&&("symbol"==typeof lI("foo")&&("symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}())))},fI=TypeError,pI=Object.getOwnPropertyDescriptor;if(pI)try{pI({},"")}catch(ng){pI=null}var dI=function(){throw new fI},yI=pI?function(){try{return dI}catch(t){try{return pI(arguments,"callee").get}catch(t){return dI}}}():dI,vI=hI(),gI=Object.getPrototypeOf||function(t){return t.__proto__},mI="undefined"==typeof Uint8Array?void 0:gI(Uint8Array),_I={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":vI?gI([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":vI?gI(gI([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&vI?gI((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&vI?gI((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":vI?gI(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":vI?Symbol:void 0,"%SymbolPrototype%":vI?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":yI,"%TypedArray%":mI,"%TypedArrayPrototype%":mI?mI.prototype:void 0,"%TypeError%":fI,"%TypeErrorPrototype%":fI.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},bI=cI.call(Function.call,String.prototype.replace),wI=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,EI=/\\(\\)?/g,TI=function(t){var e=[];return bI(t,wI,(function(t,n,r,i){e[e.length]=r?bI(i,EI,"$1"):n||t})),e},CI=function(t,e){if(!(t in _I))throw new SyntaxError("intrinsic "+t+" does not exist!");if(void 0===_I[t]&&!e)throw new fI("intrinsic "+t+" exists, but is not available. Please file an issue!");return _I[t]},SI=function(t,e){if("string"!=typeof t||0===t.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new TypeError('"allowMissing" argument must be a boolean');for(var n=TI(t),r=CI("%"+(n.length>0?n[0]:"")+"%",e),i=1;i<n.length;i+=1)if(null!=r)if(pI&&i+1>=n.length){var o=pI(r,n[i]);if(!e&&!(n[i]in r))throw new fI("base intrinsic for "+t+" exists, but the property is not available.");r=o?o.get||o.value:r[n[i]]}else r=r[n[i]];return r},II=SI("%Function.prototype.apply%"),xI=SI("%Function.prototype.call%"),NI=SI("%Reflect.apply%",!0)||cI.call(xI,II),kI=function(){return NI(cI,xI,arguments)};kI.apply=function(){return NI(cI,II,arguments)};var AI=function(t){return t!=t},PI=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!AI(t)||!AI(e))},OI=function(){return"function"==typeof Object.is?Object.is:PI},RI=kI(OI(),Object);oI(RI,{getPolyfill:OI,implementation:PI,shim:function(){var t=OI();return oI(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var DI,LI,MI,FI=RI,jI=hI()&&"symbol"==typeof Symbol.toStringTag;if(jI){DI=Function.call.bind(RegExp.prototype.exec),LI={};var UI=function(){throw LI};MI={toString:UI,valueOf:UI},"symbol"==typeof Symbol.toPrimitive&&(MI[Symbol.toPrimitive]=UI)}var VI=Object.prototype.toString,qI=jI?function(t){if(!t||"object"!=typeof t)return!1;try{DI(t,MI)}catch(t){return t===LI}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===VI.call(t)},BI=Object,WI=TypeError,zI=function(){if(null!=this&&this!==BI(this))throw new WI("RegExp.prototype.flags getter called on non-object");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t},HI=oI.supportsDescriptors,QI=Object.getOwnPropertyDescriptor,GI=TypeError,YI=function(){if(!HI)throw new GI("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var t=QI(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof/a/.dotAll)return t.get}return zI},KI=oI.supportsDescriptors,$I=Object.getOwnPropertyDescriptor,XI=Object.defineProperty,JI=TypeError,ZI=Object.getPrototypeOf,tx=/a/,ex=kI(zI);oI(ex,{getPolyfill:YI,implementation:zI,shim:function(){if(!KI||!ZI)throw new JI("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=YI(),e=ZI(tx),n=$I(e,"flags");return n&&n.get===t||XI(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var nx=ex,rx=Date.prototype.getDay,ix=Object.prototype.toString,ox="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,sx=function(t){return"object"==typeof t&&null!==t&&(ox?function(t){try{return rx.call(t),!0}catch(t){return!1}}(t):"[object Date]"===ix.call(t))},ax=Date.prototype.getTime;function ux(t,e,n){var r=n||{};return!!(r.strict?FI(t,e):t===e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?r.strict?FI(t,e):t==e:function(t,e,n){var r,i;if(typeof t!=typeof e)return!1;if(cx(t)||cx(e))return!1;if(t.prototype!==e.prototype)return!1;if(XS(t)!==XS(e))return!1;var o=qI(t),s=qI(e);if(o!==s)return!1;if(o||s)return t.source===e.source&&nx(t)===nx(e);if(sx(t)&&sx(e))return ax.call(t)===ax.call(e);var a=lx(t),u=lx(e);if(a!==u)return!1;if(a||u){if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}if(typeof t!=typeof e)return!1;try{var c=HS(t),l=HS(e)}catch(t){return!1}if(c.length!==l.length)return!1;for(c.sort(),l.sort(),r=c.length-1;r>=0;r--)if(c[r]!=l[r])return!1;for(r=c.length-1;r>=0;r--)if(i=c[r],!ux(t[i],e[i],n))return!1;return!0}(t,e,r))}function cx(t){return null==t}function lx(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}var hx=ux,fx="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,px=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(fx&&navigator.userAgent.indexOf(t[e])>=0)return 1;return 0}();
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.16.1
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var dx=fx&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then((function(){e=!1,t()})))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout((function(){e=!1,t()}),px))}};function yx(t){return t&&"[object Function]"==={}.toString.call(t)}function vx(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function gx(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function mx(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=vx(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?t:mx(gx(t))}function _x(t){return t&&t.referenceNode?t.referenceNode:t}var bx=fx&&!(!window.MSInputMethodContext||!document.documentMode),wx=fx&&/MSIE 10/.test(navigator.userAgent);function Ex(t){return 11===t?bx:10===t?wx:bx||wx}function Tx(t){if(!t)return document.documentElement;for(var e=Ex(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===vx(n,"position")?Tx(n):n:t?t.ownerDocument.documentElement:document.documentElement}function Cx(t){return null!==t.parentNode?Cx(t.parentNode):t}function Sx(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var s,a,u=o.commonAncestorContainer;if(t!==u&&e!==u||r.contains(i))return"BODY"===(a=(s=u).nodeName)||"HTML"!==a&&Tx(s.firstElementChild)!==s?Tx(u):u;var c=Cx(t);return c.host?Sx(c.host,e):Sx(t,Cx(e).host)}function Ix(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){var i=t.ownerDocument.documentElement,o=t.ownerDocument.scrollingElement||i;return o[n]}return t[n]}function xx(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ix(e,"top"),i=Ix(e,"left"),o=n?-1:1;return t.top+=r*o,t.bottom+=r*o,t.left+=i*o,t.right+=i*o,t}function Nx(t,e){var n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"])+parseFloat(t["border"+r+"Width"])}function kx(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],Ex(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function Ax(t){var e=t.body,n=t.documentElement,r=Ex(10)&&getComputedStyle(n);return{height:kx("Height",e,n,r),width:kx("Width",e,n,r)}}var Px=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Ox=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Rx=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},Dx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function Lx(t){return Dx({},t,{right:t.left+t.width,bottom:t.top+t.height})}function Mx(t){var e={};try{if(Ex(10)){e=t.getBoundingClientRect();var n=Ix(t,"top"),r=Ix(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(t){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?Ax(t.ownerDocument):{},s=o.width||t.clientWidth||i.width,a=o.height||t.clientHeight||i.height,u=t.offsetWidth-s,c=t.offsetHeight-a;if(u||c){var l=vx(t);u-=Nx(l,"x"),c-=Nx(l,"y"),i.width-=u,i.height-=c}return Lx(i)}function Fx(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Ex(10),i="HTML"===e.nodeName,o=Mx(t),s=Mx(e),a=mx(t),u=vx(e),c=parseFloat(u.borderTopWidth),l=parseFloat(u.borderLeftWidth);n&&i&&(s.top=Math.max(s.top,0),s.left=Math.max(s.left,0));var h=Lx({top:o.top-s.top-c,left:o.left-s.left-l,width:o.width,height:o.height});if(h.marginTop=0,h.marginLeft=0,!r&&i){var f=parseFloat(u.marginTop),p=parseFloat(u.marginLeft);h.top-=c-f,h.bottom-=c-f,h.left-=l-p,h.right-=l-p,h.marginTop=f,h.marginLeft=p}return(r&&!n?e.contains(a):e===a&&"BODY"!==a.nodeName)&&(h=xx(h,e)),h}function jx(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.ownerDocument.documentElement,r=Fx(t,n),i=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),s=e?0:Ix(n),a=e?0:Ix(n,"left"),u={top:s-r.top+r.marginTop,left:a-r.left+r.marginLeft,width:i,height:o};return Lx(u)}function Ux(t){var e=t.nodeName;if("BODY"===e||"HTML"===e)return!1;if("fixed"===vx(t,"position"))return!0;var n=gx(t);return!!n&&Ux(n)}function Vx(t){if(!t||!t.parentElement||Ex())return document.documentElement;for(var e=t.parentElement;e&&"none"===vx(e,"transform");)e=e.parentElement;return e||document.documentElement}function qx(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},s=i?Vx(t):Sx(t,_x(e));if("viewport"===r)o=jx(s,i);else{var a=void 0;"scrollParent"===r?"BODY"===(a=mx(gx(e))).nodeName&&(a=t.ownerDocument.documentElement):a="window"===r?t.ownerDocument.documentElement:r;var u=Fx(a,s,i);if("HTML"!==a.nodeName||Ux(s))o=u;else{var c=Ax(t.ownerDocument),l=c.height,h=c.width;o.top+=u.top-u.marginTop,o.bottom=l+u.top,o.left+=u.left-u.marginLeft,o.right=h+u.left}}var f="number"==typeof(n=n||0);return o.left+=f?n:n.left||0,o.top+=f?n:n.top||0,o.right-=f?n:n.right||0,o.bottom-=f?n:n.bottom||0,o}function Bx(t){return t.width*t.height}function Wx(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var s=qx(n,r,o,i),a={top:{width:s.width,height:e.top-s.top},right:{width:s.right-e.right,height:s.height},bottom:{width:s.width,height:s.bottom-e.bottom},left:{width:e.left-s.left,height:s.height}},u=Object.keys(a).map((function(t){return Dx({key:t},a[t],{area:Bx(a[t])})})).sort((function(t,e){return e.area-t.area})),c=u.filter((function(t){var e=t.width,r=t.height;return e>=n.clientWidth&&r>=n.clientHeight})),l=c.length>0?c[0].key:u[0].key,h=t.split("-")[1];return l+(h?"-"+h:"")}function zx(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=r?Vx(e):Sx(e,_x(n));return Fx(n,i,r)}function Hx(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function Qx(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function Gx(t,e,n){n=n.split("-")[0];var r=Hx(t),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),s=o?"top":"left",a=o?"left":"top",u=o?"height":"width",c=o?"width":"height";return i[s]=e[s]+e[u]/2-r[u]/2,i[a]=n===a?e[a]-r[c]:e[Qx(a)],i}function Yx(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function Kx(t,e,n){return(void 0===n?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex((function(t){return t[e]===n}));var r=Yx(t,(function(t){return t[e]===n}));return t.indexOf(r)}(t,"name",n))).forEach((function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=t.function||t.fn;t.enabled&&yx(n)&&(e.offsets.popper=Lx(e.offsets.popper),e.offsets.reference=Lx(e.offsets.reference),e=n(e,t))})),e}function $x(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=zx(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=Wx(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=Gx(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=Kx(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function Xx(t,e){return t.some((function(t){var n=t.name;return t.enabled&&n===e}))}function Jx(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+n:t;if(void 0!==document.body.style[o])return o}return null}function Zx(){return this.state.isDestroyed=!0,Xx(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[Jx("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function tN(t){var e=t.ownerDocument;return e?e.defaultView:window}function eN(t,e,n,r){n.updateBound=r,tN(t).addEventListener("resize",n.updateBound,{passive:!0});var i=mx(t);return function t(e,n,r,i){var o="BODY"===e.nodeName,s=o?e.ownerDocument.defaultView:e;s.addEventListener(n,r,{passive:!0}),o||t(mx(s.parentNode),n,r,i),i.push(s)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function nN(){this.state.eventsEnabled||(this.state=eN(this.reference,this.options,this.state,this.scheduleUpdate))}function rN(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,tN(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach((function(t){t.removeEventListener("scroll",e.updateBound)})),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function iN(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function oN(t,e){Object.keys(e).forEach((function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&iN(e[n])&&(r="px"),t.style[n]=e[n]+r}))}var sN=fx&&/Firefox/i.test(navigator.userAgent);function aN(t,e,n){var r=Yx(t,(function(t){return t.name===e})),i=!!r&&t.some((function(t){return t.name===n&&t.enabled&&t.order<r.order}));if(!i){var o="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}var uN=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],cN=uN.slice(3);function lN(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=cN.indexOf(t),r=cN.slice(n+1).concat(cN.slice(0,n));return e?r.reverse():r}var hN="flip",fN="clockwise",pN="counterclockwise";function dN(t,e,n,r){var i=[0,0],o=-1!==["right","left"].indexOf(r),s=t.split(/(\+|\-)/).map((function(t){return t.trim()})),a=s.indexOf(Yx(s,(function(t){return-1!==t.search(/,|\s/)})));s[a]&&-1===s[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,c=-1!==a?[s.slice(0,a).concat([s[a].split(u)[0]]),[s[a].split(u)[1]].concat(s.slice(a+1))]:[s];return(c=c.map((function(t,r){var i=(1===r?!o:o)?"height":"width",s=!1;return t.reduce((function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,s=!0,t):s?(t[t.length-1]+=e,s=!1,t):t.concat(e)}),[]).map((function(t){return function(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],s=i[2];if(!o)return t;if(0===s.indexOf("%")){var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=r}return Lx(a)[e]/100*o}if("vh"===s||"vw"===s){return("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o}return o}(t,i,e,n)}))}))).forEach((function(t,e){t.forEach((function(n,r){iN(n)&&(i[e]+=n*("-"===t[r-1]?-1:1))}))})),i}var yN={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,o=i.reference,s=i.popper,a=-1!==["bottom","top"].indexOf(n),u=a?"left":"top",c=a?"width":"height",l={start:Rx({},u,o[u]),end:Rx({},u,o[u]+o[c]-s[c])};t.offsets.popper=Dx({},s,l[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,r=t.placement,i=t.offsets,o=i.popper,s=i.reference,a=r.split("-")[0],u=void 0;return u=iN(+n)?[+n,0]:dN(n,o,s,a),"left"===a?(o.top+=u[0],o.left-=u[1]):"right"===a?(o.top+=u[0],o.left+=u[1]):"top"===a?(o.left+=u[0],o.top-=u[1]):"bottom"===a&&(o.left+=u[0],o.top+=u[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||Tx(t.instance.popper);t.instance.reference===n&&(n=Tx(n));var r=Jx("transform"),i=t.instance.popper.style,o=i.top,s=i.left,a=i[r];i.top="",i.left="",i[r]="";var u=qx(t.instance.popper,t.instance.reference,e.padding,n,t.positionFixed);i.top=o,i.left=s,i[r]=a,e.boundaries=u;var c=e.priority,l=t.offsets.popper,h={primary:function(t){var n=l[t];return l[t]<u[t]&&!e.escapeWithReference&&(n=Math.max(l[t],u[t])),Rx({},t,n)},secondary:function(t){var n="right"===t?"left":"top",r=l[n];return l[t]>u[t]&&!e.escapeWithReference&&(r=Math.min(l[n],u[t]-("right"===t?l.width:l.height))),Rx({},n,r)}};return c.forEach((function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";l=Dx({},l,h[e](t))})),t.offsets.popper=l,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],o=Math.floor,s=-1!==["top","bottom"].indexOf(i),a=s?"right":"bottom",u=s?"left":"top",c=s?"width":"height";return n[a]<o(r[u])&&(t.offsets.popper[u]=o(r[u])-n[c]),n[u]>o(r[a])&&(t.offsets.popper[u]=o(r[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!aN(t.instance.modifiers,"arrow","keepTogether"))return t;var r=e.element;if("string"==typeof r){if(!(r=t.instance.popper.querySelector(r)))return t}else if(!t.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],o=t.offsets,s=o.popper,a=o.reference,u=-1!==["left","right"].indexOf(i),c=u?"height":"width",l=u?"Top":"Left",h=l.toLowerCase(),f=u?"left":"top",p=u?"bottom":"right",d=Hx(r)[c];a[p]-d<s[h]&&(t.offsets.popper[h]-=s[h]-(a[p]-d)),a[h]+d>s[p]&&(t.offsets.popper[h]+=a[h]+d-s[p]),t.offsets.popper=Lx(t.offsets.popper);var y=a[h]+a[c]/2-d/2,v=vx(t.instance.popper),g=parseFloat(v["margin"+l]),m=parseFloat(v["border"+l+"Width"]),_=y-t.offsets.popper[h]-g-m;return _=Math.max(Math.min(s[c]-d,_),0),t.arrowElement=r,t.offsets.arrow=(Rx(n={},h,Math.round(_)),Rx(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(Xx(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=qx(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],i=Qx(r),o=t.placement.split("-")[1]||"",s=[];switch(e.behavior){case hN:s=[r,i];break;case fN:s=lN(r);break;case pN:s=lN(r,!0);break;default:s=e.behavior}return s.forEach((function(a,u){if(r!==a||s.length===u+1)return t;r=t.placement.split("-")[0],i=Qx(r);var c=t.offsets.popper,l=t.offsets.reference,h=Math.floor,f="left"===r&&h(c.right)>h(l.left)||"right"===r&&h(c.left)<h(l.right)||"top"===r&&h(c.bottom)>h(l.top)||"bottom"===r&&h(c.top)<h(l.bottom),p=h(c.left)<h(n.left),d=h(c.right)>h(n.right),y=h(c.top)<h(n.top),v=h(c.bottom)>h(n.bottom),g="left"===r&&p||"right"===r&&d||"top"===r&&y||"bottom"===r&&v,m=-1!==["top","bottom"].indexOf(r),_=!!e.flipVariations&&(m&&"start"===o&&p||m&&"end"===o&&d||!m&&"start"===o&&y||!m&&"end"===o&&v),b=!!e.flipVariationsByContent&&(m&&"start"===o&&d||m&&"end"===o&&p||!m&&"start"===o&&v||!m&&"end"===o&&y),w=_||b;(f||g||w)&&(t.flipped=!0,(f||g)&&(r=s[u+1]),w&&(o=function(t){return"end"===t?"start":"start"===t?"end":t}(o)),t.placement=r+(o?"-"+o:""),t.offsets.popper=Dx({},t.offsets.popper,Gx(t.instance.popper,t.offsets.reference,t.placement)),t=Kx(t.instance.modifiers,t,"flip"))})),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,o=r.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return i[s?"left":"top"]=o[n]-(a?i[s?"width":"height"]:0),t.placement=Qx(e),t.offsets.popper=Lx(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!aN(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=Yx(t.instance.modifiers,(function(t){return"preventOverflow"===t.name})).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,i=t.offsets.popper,o=Yx(t.instance.modifiers,(function(t){return"applyStyle"===t.name})).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==o?o:e.gpuAcceleration,a=Tx(t.instance.popper),u=Mx(a),c={position:i.position},l=function(t,e){var n=t.offsets,r=n.popper,i=n.reference,o=Math.round,s=Math.floor,a=function(t){return t},u=o(i.width),c=o(r.width),l=-1!==["left","right"].indexOf(t.placement),h=-1!==t.placement.indexOf("-"),f=e?l||h||u%2==c%2?o:s:a,p=e?o:a;return{left:f(u%2==1&&c%2==1&&!h&&e?r.left-1:r.left),top:p(r.top),bottom:p(r.bottom),right:f(r.right)}}(t,window.devicePixelRatio<2||!sN),h="bottom"===n?"top":"bottom",f="right"===r?"left":"right",p=Jx("transform"),d=void 0,y=void 0;if(y="bottom"===h?"HTML"===a.nodeName?-a.clientHeight+l.bottom:-u.height+l.bottom:l.top,d="right"===f?"HTML"===a.nodeName?-a.clientWidth+l.right:-u.width+l.right:l.left,s&&p)c[p]="translate3d("+d+"px, "+y+"px, 0)",c[h]=0,c[f]=0,c.willChange="transform";else{var v="bottom"===h?-1:1,g="right"===f?-1:1;c[h]=y*v,c[f]=d*g,c.willChange=h+", "+f}var m={"x-placement":t.placement};return t.attributes=Dx({},m,t.attributes),t.styles=Dx({},c,t.styles),t.arrowStyles=Dx({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return oN(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach((function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)})),t.arrowElement&&Object.keys(t.arrowStyles).length&&oN(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,i){var o=zx(i,e,t,n.positionFixed),s=Wx(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),oN(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},vN=function(){function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Px(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=dx(this.update.bind(this)),this.options=Dx({},t.Defaults,i),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(Dx({},t.Defaults.modifiers,i.modifiers)).forEach((function(e){r.options.modifiers[e]=Dx({},t.Defaults.modifiers[e]||{},i.modifiers?i.modifiers[e]:{})})),this.modifiers=Object.keys(this.options.modifiers).map((function(t){return Dx({name:t},r.options.modifiers[t])})).sort((function(t,e){return t.order-e.order})),this.modifiers.forEach((function(t){t.enabled&&yx(t.onLoad)&&t.onLoad(r.reference,r.popper,r.options,t,r.state)})),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return Ox(t,[{key:"update",value:function(){return $x.call(this)}},{key:"destroy",value:function(){return Zx.call(this)}},{key:"enableEventListeners",value:function(){return nN.call(this)}},{key:"disableEventListeners",value:function(){return rN.call(this)}}]),t}();vN.Utils=("undefined"!=typeof window?window:t).PopperUtils,vN.placements=uN,vN.Defaults=yN;var gN="__global_unique_id__",mN=function(){return $v[gN]=($v[gN]||0)+1},_N=function(){},bN=_N,wN=Jv((function(t,e){e.__esModule=!0;i(o.a);var n=i(a.a),r=i(mN);i(bN);function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}e.default=function(t,e){var i,a,h="__create-react-context-"+(0,r.default)()+"__",f=function(t){function n(){var e,r;s(this,n);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=r=u(this,t.call.apply(t,[this].concat(o))),r.emitter=l(r.props.value),u(r,e)}return c(n,t),n.prototype.getChildContext=function(){var t;return(t={})[h]=this.emitter,t},n.prototype.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n=this.props.value,r=t.value,i=void 0;!function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(n,r)?(i="function"==typeof e?e(n,r):1073741823,0!==(i|=0)&&this.emitter.set(t.value,i)):i=0}},n.prototype.render=function(){return this.props.children},n}(o.a.Component);f.childContextTypes=((i={})[h]=n.default.object.isRequired,i);var p=function(e){function n(){var t,r;s(this,n);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=r=u(this,e.call.apply(e,[this].concat(o))),r.state={value:r.getValue()},r.onUpdate=function(t,e){0!=((0|r.observedBits)&e)&&r.setState({value:r.getValue()})},u(r,t)}return c(n,e),n.prototype.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=null==e?1073741823:e},n.prototype.componentDidMount=function(){this.context[h]&&this.context[h].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=null==t?1073741823:t},n.prototype.componentWillUnmount=function(){this.context[h]&&this.context[h].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[h]?this.context[h].get():t},n.prototype.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},n}(o.a.Component);return p.contextTypes=((a={})[h]=n.default.object,a),{Provider:f,Consumer:p}},t.exports=e.default}));Xv(wN);var EN=Xv(Jv((function(t,e){e.__esModule=!0;var n=i(o.a),r=i(wN);function i(t){return t&&t.__esModule?t:{default:t}}e.default=n.default.createContext||r.default,t.exports=e.default}))),TN=EN(),CN=(EN(),function(t,e){if("function"==typeof t)return function(t){if("function"==typeof t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,n)}}(t,e);null!=t&&(t.current=e)}),SN={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},IN={},xN=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,Lg(Ag(e),"state",{data:void 0,placement:void 0}),Lg(Ag(e),"popperInstance",void 0),Lg(Ag(e),"popperNode",null),Lg(Ag(e),"arrowNode",null),Lg(Ag(e),"setPopperNode",(function(t){t&&e.popperNode!==t&&(CN(e.props.innerRef,t),e.popperNode=t,e.updatePopperInstance())})),Lg(Ag(e),"setArrowNode",(function(t){e.arrowNode=t})),Lg(Ag(e),"updateStateModifier",{enabled:!0,order:900,fn:function(t){var n=t.placement;return e.setState({data:t,placement:n}),t}}),Lg(Ag(e),"getOptions",(function(){return{placement:e.props.placement,eventsEnabled:e.props.eventsEnabled,positionFixed:e.props.positionFixed,modifiers:Sg({},e.props.modifiers,{arrow:Sg({},e.props.modifiers&&e.props.modifiers.arrow,{enabled:!!e.arrowNode,element:e.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:e.updateStateModifier})}})),Lg(Ag(e),"getPopperStyle",(function(){return e.popperNode&&e.state.data?Sg({position:e.state.data.offsets.popper.position},e.state.data.styles):SN})),Lg(Ag(e),"getPopperPlacement",(function(){return e.state.data?e.state.placement:void 0})),Lg(Ag(e),"getArrowStyle",(function(){return e.arrowNode&&e.state.data?e.state.data.arrowStyles:IN})),Lg(Ag(e),"getOutOfBoundariesState",(function(){return e.state.data?e.state.data.hide:void 0})),Lg(Ag(e),"destroyPopperInstance",(function(){e.popperInstance&&(e.popperInstance.destroy(),e.popperInstance=null)})),Lg(Ag(e),"updatePopperInstance",(function(){e.destroyPopperInstance();var t=Ag(e).popperNode,n=e.props.referenceElement;n&&t&&(e.popperInstance=new vN(n,t,e.getOptions()))})),Lg(Ag(e),"scheduleUpdate",(function(){e.popperInstance&&e.popperInstance.scheduleUpdate()})),e}xS(e,t);var n=e.prototype;return n.componentDidUpdate=function(t,e){this.props.placement===t.placement&&this.props.referenceElement===t.referenceElement&&this.props.positionFixed===t.positionFixed&&hx(this.props.modifiers,t.modifiers,{strict:!0})?this.props.eventsEnabled!==t.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()):this.updatePopperInstance(),e.placement!==this.state.placement&&this.scheduleUpdate()},n.componentWillUnmount=function(){CN(this.props.innerRef,null),this.destroyPopperInstance()},n.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}});var t},e}(i.Component);function NN(t){var e=t.referenceElement,n=SS(t,["referenceElement"]);return Object(i.createElement)(TN.Consumer,null,(function(t){return Object(i.createElement)(xN,Sg({referenceElement:void 0!==e?e:t},n))}))}Lg(xN,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});var kN=function(t,e,n,r){return cb(t,(function(t,i,o){e(r,n(t),i,o)})),r};var AN=function(t,e){return function(n,r){return kN(n,t,e(r),{})}},PN=Object.prototype.toString,ON=AN((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=PN.call(e)),t[e]=n}),C_(w_)),RN={"top center":"top","top left":"top-start","top right":"top-end","bottom center":"bottom","bottom left":"bottom-start","bottom right":"bottom-end","right center":"right","left center":"left"},DN=(ub(RN),ON(RN)),LN=function(){function t(e){Ig(this,t),this.ref=e}return Ng(t,[{key:"getBoundingClientRect",value:function(){return P_(this.ref.current,"getBoundingClientRect",{})}},{key:"clientWidth",get:function(){return this.getBoundingClientRect().width}},{key:"clientHeight",get:function(){return this.getBoundingClientRect().height}},{key:"parentNode",get:function(){return this.ref.current?this.ref.current.parentNode:void 0}}]),t}(),MN=Km((function(t){return new LN(function(t){return null!==t&&"object"===xv(t)&&t.hasOwnProperty("current")}(t)?t:function(t){if(null===t)return Yv;if(Kv.has(t))return Kv.get(t);var e={current:t};return Kv.set(t,e),e}(t))}));function FN(t){var e=t.children,n=t.className,r=t.content,i=BC("content",n),s=HC(FN,t),a=QC(FN,t);return o.a.createElement(a,Sg({},s,{className:i}),Rw(e)?r:e)}function jN(t){var e=t.children,n=t.className,r=t.content,i=BC("header",n),s=HC(jN,t),a=QC(jN,t);return o.a.createElement(a,Sg({},s,{className:i}),Rw(e)?r:e)}FN.handledProps=["as","children","className","content"],FN.propTypes={},FN.create=zC(FN,(function(t){return{children:t}})),jN.handledProps=["as","children","className","content"],jN.propTypes={},jN.create=zC(jN,(function(t){return{children:t}}));var UN=function(t){function e(){var t,n;Ig(this,e);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=Pg(this,(t=Og(e)).call.apply(t,[this].concat(s))),Lg(Ag(n),"state",{}),Lg(Ag(n),"open",!1),Lg(Ag(n),"triggerRef",Object(i.createRef)()),Lg(Ag(n),"getPortalProps",(function(){var t={},e=n.props,r=e.on,i=e.hoverable,o=Mg(r)?r:[r];return i&&(t.closeOnPortalMouseLeave=!0,t.mouseLeaveDelay=300),$C(o,"hover")&&(t.openOnTriggerClick=!1,t.closeOnTriggerClick=!1,t.openOnTriggerMouseEnter=!0,t.closeOnTriggerMouseLeave=!0,t.mouseLeaveDelay=70,t.mouseEnterDelay=50),$C(o,"click")&&(t.openOnTriggerClick=!0,t.closeOnTriggerClick=!0,t.closeOnDocumentClick=!0),$C(o,"focus")&&(t.openOnTriggerFocus=!0,t.closeOnTriggerBlur=!0),t})),Lg(Ag(n),"hideOnScroll",(function(t){n.setState({closed:!0}),LC.unsub("scroll",n.hideOnScroll,{target:window}),n.timeoutId=setTimeout((function(){n.setState({closed:!1})}),50),n.handleClose(t)})),Lg(Ag(n),"handleClose",(function(t){P_(n.props,"onClose",t,n.props)})),Lg(Ag(n),"handleOpen",(function(t){P_(n.props,"onOpen",t,n.props)})),Lg(Ag(n),"handlePortalMount",(function(t){P_(n.props,"onMount",t,n.props)})),Lg(Ag(n),"handlePortalUnmount",(function(t){n.positionUpdate=null,P_(n.props,"onUnmount",t,n.props)})),Lg(Ag(n),"renderContent",(function(t){var r=t.placement,i=t.ref,s=t.scheduleUpdate,a=t.style,u=n.props,c=u.basic,l=u.children,h=u.className,f=u.content,p=u.hideOnScroll,d=u.flowing,y=u.header,v=u.inverted,g=u.size,m=u.style,_=u.wide,b=n.state.contentRestProps;n.positionUpdate=s;var w=BC("ui",DN[r],g,Mw(_,"wide"),Lw(c,"basic"),Lw(d,"flowing"),Lw(v,"inverted"),"popup transition visible",h),E=QC(e,n.props),T=O_({left:"auto",right:"auto"},a,m);return o.a.createElement(Cg,{innerRef:i},o.a.createElement(E,Sg({},b,{className:w,style:T}),Rw(l)?o.a.createElement(o.a.Fragment,null,jN.create(y,{autoGenerateKey:!1}),FN.create(f,{autoGenerateKey:!1})):l,p&&o.a.createElement(DC,{on:n.hideOnScroll,name:"scroll",target:"window"})))})),n}return Dg(e,t),Ng(e,[{key:"componentDidUpdate",value:function(t){(function(t,e,n,r){var i=n?n.call(r,t,e):void 0;if(void 0!==i)return!!i;if(t===e)return!0;if("object"!=typeof t||!t||"object"!=typeof e||!e)return!1;var o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(e),u=0;u<o.length;u++){var c=o[u];if(!a(c))return!1;var l=t[c],h=e[c];if(!1===(i=n?n.call(r,l,h,c):void 0)||void 0===i&&l!==h)return!1}return!0})(this.props.popperDependencies,t.popperDependencies)||this.handleUpdate()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutId)}},{key:"handleUpdate",value:function(){this.positionUpdate&&this.positionUpdate()}},{key:"render",value:function(){var t=this.props,e=t.context,n=t.disabled,r=t.eventsEnabled,i=t.offset,s=t.pinned,a=t.popperModifiers,u=t.position,c=t.positionFixed,l=t.trigger,h=this.state,f=h.closed,p=h.portalRestProps;if(f||n)return l;var d=CS({arrow:{enabled:!1},flip:{enabled:!s},keepTogether:{enabled:!!i},offset:{offset:i}},a),y=MN(gC(e)?this.triggerRef:e),v=O_({},this.getPortalProps(),p);return o.a.createElement(yS,Sg({},v,{onClose:this.handleClose,onMount:this.handlePortalMount,onOpen:this.handleOpen,onUnmount:this.handlePortalUnmount,trigger:l,triggerRef:this.triggerRef}),o.a.createElement(NN,{eventsEnabled:r,modifiers:d,placement:RN[u],positionFixed:c,referenceElement:y},this.renderContent))}}],[{key:"getDerivedStateFromProps",value:function(t,n){if(n.closed||n.disabled)return{};var r=HC(e,t);return{contentRestProps:mS(r,(function(t,e,n){return $C(yS.handledProps,n)||(t[n]=e),t}),{}),portalRestProps:yC(r,yS.handledProps)}}}]),e}(i.Component);Lg(UN,"defaultProps",{disabled:!1,eventsEnabled:!0,offset:0,on:["click","hover"],pinned:!1,position:"top left"}),Lg(UN,"Content",FN),Lg(UN,"Header",jN),Lg(UN,"handledProps",["as","basic","children","className","content","context","disabled","eventsEnabled","flowing","header","hideOnScroll","hoverable","inverted","offset","on","onClose","onMount","onOpen","onUnmount","pinned","popperDependencies","popperModifiers","position","positionFixed","size","style","trigger","wide"]),UN.propTypes={};let VN=0;const qN=Object.create(null),BN=["animation-iteration-count","border-image-outset","border-image-slice","border-image-width","box-flex","box-flex-group","box-ordinal-group","column-count","columns","counter-increment","counter-reset","flex","flex-grow","flex-positive","flex-shrink","flex-negative","flex-order","font-weight","grid-area","grid-column","grid-column-end","grid-column-span","grid-column-start","grid-row","grid-row-end","grid-row-span","grid-row-start","line-clamp","line-height","opacity","order","orphans","tab-size","widows","z-index","zoom","fill-opacity","flood-opacity","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-miterlimit","stroke-opacity","stroke-width"];for(const t of BN)for(const e of["-webkit-","-ms-","-moz-","-o-",""])qN[e+t]=!0;function WN(t,e){return e&&"number"==typeof e&&!qN[t]?`${t}:${e}px`:`${t}:${e}`}function zN(t){return t.sort((t,e)=>t[0]>e[0]?1:-1)}function HN(t){return t.map(([t,e])=>Array.isArray(e)?e.map(e=>WN(t,e)).join(";"):WN(t,e)).join(";")}function QN(t,e){return-1===t.indexOf("&")?`${e} ${t}`:t.replace(/&/g,e)}function GN(t,e,n,r,i){const{style:o,nested:s,isUnique:a}=function(t,e){const n=[],r=[];for(const e of Object.keys(t)){const o=e.trim(),s=t[e];36!==o.charCodeAt(0)&&null!=s&&("object"!=typeof s||Array.isArray(s)?n.push([(i=o,i.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()).replace(/^ms-/,"-ms-")),s]):r.push([o,s]))}var i;return{style:HN(zN(n)),nested:e?r:zN(r),isUnique:!!t.$unique}}(e,""!==t);let u=o;if(64===t.charCodeAt(0)){const e={selector:t,styles:[],rules:[],style:i?"":o};n.push(e),o&&i&&e.styles.push({selector:i,style:o,isUnique:a});for(const[t,n]of s)u+=t+GN(t,n,e.rules,e.styles,i)}else{const e=i?QN(t,i):t;o&&r.push({selector:e,style:o,isUnique:a});for(const[t,i]of s)u+=t+GN(t,i,n,r,e)}return u}function YN(t,e,n,r,i,o){for(const{selector:n,style:s,isUnique:a}of r){const r=o?QN(n,i):n,u=a?"u\0"+(++VN).toString(36):`s\0${e}\0${s}`,c=new ZN(s,u);c.add(new JN(r,`k\0${e}\0${r}`)),t.add(c)}for(const{selector:r,style:s,rules:a,styles:u}of n){const n=new tk(r,s,`r\0${e}\0${r}\0${s}`);YN(n,e,a,u,i,o),t.add(n)}}function KN(t){let e="";for(let n=0;n<t.length;n++)e+=t[n];return e}const $N={add:()=>{},change:()=>{},remove:()=>{}};class XN{constructor(t=$N){this.changes=t,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}add(t){const e=this._counters[t.id]||0,n=this._children[t.id]||t.clone();if(this._counters[t.id]=e+1,0===e)this._children[n.id]=n,this._keys.push(n.id),this.sheet.push(n.getStyles()),this.changeId++,this.changes.add(n,this._keys.length-1);else if(n instanceof XN&&t instanceof XN){const e=this._keys.indexOf(t.id),r=n.changeId;n.merge(t),n.changeId!==r&&(this.sheet.splice(e,1,n.getStyles()),this.changeId++,this.changes.change(n,e,e))}}remove(t){const e=this._counters[t.id];if(e){this._counters[t.id]=e-1;const n=this._children[t.id],r=this._keys.indexOf(n.id);if(1===e)delete this._counters[t.id],delete this._children[t.id],this._keys.splice(r,1),this.sheet.splice(r,1),this.changeId++,this.changes.remove(n,r);else if(n instanceof XN&&t instanceof XN){const e=n.changeId;n.unmerge(t),n.changeId!==e&&(this.sheet.splice(r,1,n.getStyles()),this.changeId++,this.changes.change(n,r,r))}}}values(){return this._keys.map(t=>this._children[t])}merge(t){for(const e of t.values())this.add(e);return this}unmerge(t){for(const e of t.values())this.remove(e);return this}clone(){return(new XN).merge(this)}}class JN{constructor(t,e){this.selector=t,this.id=e}getStyles(){return this.selector}clone(){return this}}class ZN extends XN{constructor(t,e){super(),this.style=t,this.id=e}getStyles(){return`${this.sheet.join(",")}{${this.style}}`}clone(){return new ZN(this.style,this.id).merge(this)}}class tk extends XN{constructor(t,e,n){super(),this.rule=t,this.style=e,this.id=n}getStyles(){return`${this.rule}{${this.style}${KN(this.sheet)}}`}clone(){return new tk(this.rule,this.style,this.id).merge(this)}}function ek(t,e){const n="f"+function(t){let e=5381,n=t.length;for(;n--;)e=33*e^t.charCodeAt(n);return(e>>>0).toString(36)}(t);return n}class nk extends XN{constructor(t,e){super(e),this.id=t}registerStyle(t){const e=[],n=[],r=GN("&",t,e,n),i=ek(r);return YN(this,r,e,n,"."+i,!0),i}registerKeyframes(t){return this.registerHashRule("@keyframes",t)}registerHashRule(t,e){const n=[],r=[],i=GN("",e,n,r),o=ek(i),s=new tk(`${t} ${o}`,"",`h\0${i}\0${t}`);return YN(s,i,n,r,"",!1),this.add(s),o}registerRule(t,e){const n=[],r=[];YN(this,GN(t,e,n,r),n,r,"",!1)}registerCss(t){return this.registerRule("",t)}getStyles(){return KN(this.sheet)}clone(){return new nk(this.id,this.changes).merge(this)}}function rk(t){var e={};for(var n in t){var r=t[n];if("$nest"===n){var i=r;for(var o in i){var s=i[o];e[o]=rk(s)}}else"$debugName"===n?e.$displayName=r:e[n]=r}return e}var ik="undefined"==typeof requestAnimationFrame?function(t){return setTimeout(t)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window);function ok(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];if(null!=o&&!1!==o)for(var s in o){var a=o[s];(a||0===a)&&("$nest"===s&&a?n[s]=n.$nest?ok(n.$nest,a):a:-1!==s.indexOf("&")||0===s.indexOf("@media")?n[s]=n[s]?ok(n[s],a):a:n[s]=a)}}return n}var sk=function(){return new nk("f"+(++VN).toString(36),t);var t},ak=new(function(){function t(t){var e=this,n=t.autoGenerateTag;this.cssRaw=function(t){t&&(e._raw+=t||"",e._pendingRawChange=!0,e._styleUpdated())},this.cssRule=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=rk(ok.apply(void 0,n));e._freeStyle.registerRule(t,i),e._styleUpdated()},this.forceRenderStyles=function(){var t=e._getTag();t&&(t.textContent=e.getStyles())},this.fontFace=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=e._freeStyle,i=0,o=t;i<o.length;i++){var s=o[i];r.registerRule("@font-face",s)}e._styleUpdated()},this.getStyles=function(){return(e._raw||"")+e._freeStyle.getStyles()},this.keyframes=function(t){var n=function(t){var e={};for(var n in t)"$debugName"!==n&&(e[n]=t[n]);return t.$debugName&&(e.$displayName=t.$debugName),e}(t),r=e._freeStyle.registerKeyframes(n);return e._styleUpdated(),r},this.reinit=function(){var t=sk();e._freeStyle=t,e._lastFreeStyleChangeId=t.changeId,e._raw="",e._pendingRawChange=!1;var n=e._getTag();n&&(n.textContent="")},this.setStylesTarget=function(t){e._tag&&(e._tag.textContent=""),e._tag=t,e.forceRenderStyles()},this.stylesheet=function(t){for(var n={},r=0,i=Object.getOwnPropertyNames(t);r<i.length;r++){var o=i[r],s=t[o];s&&(s.$debugName=o,n[o]=e.style(s))}return n};var r=sk();this._autoGenerateTag=n,this._freeStyle=r,this._lastFreeStyleChangeId=r.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return t.prototype._afterAllSync=function(t){var e=this;this._pending++;var n=this._pending;ik((function(){n===e._pending&&t()}))},t.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var t="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(t),this._tag=t,t}},t.prototype._styleUpdated=function(){var t=this,e=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||e!==n)&&(this._lastFreeStyleChangeId=e,this._pendingRawChange=!1,this._afterAllSync((function(){return t.forceRenderStyles()})))},t.prototype.style=function(){var t=this._freeStyle.registerStyle(rk(ok.apply(void 0,arguments)));return this._styleUpdated(),t},t}())({autoGenerateTag:!0}).style;function uk(t,e){var n=[];for(var r in e)e[r].bunchedNodes.includes(t)&&n.push(r);return n}function ck(t,e){return"translate("+t+", "+e+")"}function lk(t){var e=t.graph,n=t.undoCallback,r=t.redoCallback;if(void 0===e)return null;var i=e.root===e.current,s=0===e.nodes[e.current].children.length,a={marginRight:"3px"};return o.a.createElement("div",null,o.a.createElement("button",{className:hk,disabled:i,onClick:n},o.a.createElement("i",{style:a,className:"fas fa-undo marginRight"}),"Undo"),o.a.createElement("button",{className:fk,disabled:s,onClick:r},o.a.createElement("i",{style:a,className:"fas fa-redo marginRight"}),"Redo"))}var hk=ak({backgroundColor:"#768d87",borderRadius:"2px",border:"none",display:"inline-block",cursor:"pointer",color:"#ffffff",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontSize:"14px",padding:"5px 15px",marginRight:"1px",marginLeft:"10px",$nest:{"&:hover":{backgroundColor:"#6c7c7c"},"&:disabled":{backgroundColor:"#a8b3b0"},"&:active":{backgroundColor:"#6c7c7c"}}}),fk=(ak({marginRight:"3px"}),ak({backgroundColor:"#768d87",borderRadius:"2px",border:"none",display:"inline-block",cursor:"pointer",color:"#ffffff",fontFamily:"Lato,Helvetica Neue,Arial,Helvetica,sans-serif",fontSize:"14px",padding:"5px 15px",$nest:{"&:hover":{backgroundColor:"#6c7c7c"},"&:disabled":{backgroundColor:"#a8b3b0"},"&:active":{backgroundColor:"#6c7c7c"}}}));function pk(t,e,n){var r=function(t,e,n){var r=[];return function t(e,n,r,i){var o,s;if(!e[n])return!1;if(n===r)return i.push(n),!0;var a=e[n].children||[];try{for(var u=h(a),c=u.next();!c.done;c=u.next()){var l=c.value;if(t(e,l.id,r,i))return i.push(l.id),!0}}catch(t){o={error:t}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}return!1}(t,e,n,r),p([e],r.reverse())}(t,n,e);return function(t,e,n,r){var i=new Set,o=[],s=0;o.push(t[e]);for(;o.length>0;){var a=o.pop();i.has(a.id)?a.width=n[a.id]:(a.width=s,n[a.id]=a.width,i.add(a.id)),a.children?o.push.apply(o,p(a.children.sort((function(t,e){return(r.includes(t.id)?1:0)-(r.includes(e.id)?1:0)})))):s++}}(t,n,{},r),r}var dk=function(t){return ak({fill:t?"rgb(33, 133, 208)":"white",stroke:"rgb(33, 133, 208)"})};function yk(t){var e=t.prov,n=t.first,r=t.iconOnly,i=t.current,s=t.node,a=t.duration,u=t.radius,c=t.strokeWidth,l=t.textSize,h=t.nodeMap,f=t.annotationOpen,p=t.setBookmark,d=t.bookmark,y=t.setAnnotationOpen,v=t.exemptList,g=t.setExemptList,m=t.bundleMap,_=(t.clusterLabels,t.eventConfig),b=t.popupContent,w=t.editAnnotations,E=t.annotationContent,T=t.expandedClusterList,C={cursor:"pointer"},S=o.a.createElement("circle",{style:C,className:dk(i),r:u,strokeWidth:c}),I=!1;if(_){var x=s.metadata.type;if(x&&x in _&&"Root"!==x){var N=_[x],k=N.bundleGlyph,A=N.currentGlyph,P=N.backboneGlyph;m&&Object.keys(m).includes(s.id)&&(I=!0,S=o.a.createElement("g",{style:C,fontWeight:"none"},k)),i?S=o.a.createElement("g",{style:C,fontWeight:"none"},A):I||(S=o.a.createElement("g",{style:C,fontWeight:"none"},P))}}var O="",R="";if(O=m&&Object.keys(m).includes(s.id)&&s.ephemeral&&T&&!T.includes(s.id)?s.metadata&&s.metadata.type?"["+m[s.id].bunchedNodes.length+"] "+s.metadata.type:"["+m[s.id].bunchedNodes.length+"]":s.label,s.artifacts&&s.artifacts.annotation&&s.artifacts.annotation.length>0&&(R=s.artifacts.annotation),!h[s.id])return null;R.length>20&&(R=R.substr(0,20)+".."),O.length>20&&(O=O.substr(0,20)+"..");var D=o.a.createElement("g",{style:{opacity:1},transform:ck(15,0)},r?o.a.createElement("g",null,I?o.a.createElement("text",{style:C,onClick:function(t){return M(s,t)},fontSize:17,fill:"rgb(248, 191, 132)",textAnchor:"middle",alignmentBaseline:"middle",x:1,y:0,fontFamily:"FontAwesome"},T&&T.includes(s.id)?"":""):o.a.createElement("g",null)):o.a.createElement("g",null,I?o.a.createElement("text",{style:C,onClick:function(t){return M(s,t)},fontSize:17,fill:"rgb(248, 191, 132)",textAnchor:"middle",alignmentBaseline:"middle",x:1,y:0,fontFamily:"FontAwesome"},T&&T.includes(s.id)?"":""):o.a.createElement("g",null),w?o.a.createElement("button",null,o.a.createElement("i",{className:"fas fa-undo marginRight"}),"Undo"):o.a.createElement("g",null),o.a.createElement("text",{y:0===R.length?0:-7,x:I?10:0,dominantBaseline:"middle",textAnchor:"start",fontSize:l,fontWeight:"bold",onClick:function(){return L(s)}},O),",",o.a.createElement("text",{y:7,x:I?10:0,dominantBaseline:"middle",textAnchor:"start",fontSize:l,fontWeight:"regular",onClick:function(){return L(s)}},R),",",o.a.createElement("text",{style:C,onClick:function(t){e&&(e.setBookmark(s.id,!e.getBookmark(s.id)),p(!d)),t.stopPropagation()},fontSize:17,fill:e&&e.getBookmark(s.id)?"#2185d0":"#cccccc",textAnchor:"middle",alignmentBaseline:"middle",x:175,y:0,fontFamily:"FontAwesome"},"")),-1!==f&&h[s.id].depth===f&&E?o.a.createElement("g",null,E(h[s.id])):o.a.createElement("g",null));return o.a.createElement(Qv,{start:{opacity:0},enter:{opacity:[1],timing:{duration:100,delay:n?0:a}}},(function(t){return o.a.createElement(o.a.Fragment,null,void 0!==b&&h[s.id].depth>0?o.a.createElement(UN,{content:b(s),trigger:S}):S,void 0!==b&&h[s.id].depth>0?o.a.createElement(UN,{content:b(s),trigger:D}):D)}));function L(t){E&&(f===h[t.id].depth?y(-1):y(h[t.id].depth))}function M(t,e){if(m&&Object.keys(m).includes(t.id)){var n=Array.from(v);n.includes(t.id)?n.splice(n.findIndex((function(e){return e===t.id})),1):n.push(t.id),g(n)}e.stopPropagation()}}function vk(t,e,n){return t>1?(e+n)*t-n:(e+n)*t}var gk=function(t){return o.a.createElement("line",l({},t))};function mk(t){var e,n,r=t.nodeMap,s=t.root,a=t.current,u=t.changeCurrent,c=t.width,p=void 0===c?1500:c,d=t.height,y=void 0===d?2e3:d,v=t.iconOnly,g=void 0!==v&&v,m=t.gutter,_=void 0===m?15:m,b=t.backboneGutter,w=void 0===b?20:b,E=t.verticalSpace,T=void 0===E?50:E,C=t.annotationHeight,S=void 0===C?100:C,I=t.clusterVerticalSpace,x=void 0===I?50:I,N=t.regularCircleRadius,k=void 0===N?4:N,A=t.backboneCircleRadius,P=void 0===A?5:A,O=t.regularCircleStroke,R=void 0===O?3:O,D=t.backboneCircleStroke,L=void 0===D?3:D,M=t.sideOffset,F=void 0===M?200:M,j=t.topOffset,U=void 0===j?30:j,V=t.textSize,q=void 0===V?15:V,B=t.linkWidth,W=void 0===B?4:B,z=t.duration,H=void 0===z?600:z,Q=t.clusterLabels,G=void 0===Q||Q,Y=t.bundleMap,K=void 0===Y?{}:Y,$=t.eventConfig,X=t.popupContent,J=t.annotationContent,Z=t.editAnnotations,tt=void 0!==Z&&Z,et=(t.undoRedoButtons,t.prov),nt=t.ephemeralUndo,rt=void 0!==nt&&nt,it=f(Object(i.useState)(!0),2),ot=it[0],st=it[1],at=f(Object(i.useState)(!1),2),ut=at[0],ct=at[1],lt=f(Object(i.useState)(-1),2),ht=lt[0],ft=lt[1],pt=[],dt=new Set;for(var yt in r){var vt=r[yt];if(uy(vt)&&(vt.metadata.type&&dt.add(vt.metadata.type),vt.ephemeral&&1==vt.children.length&&(!r[vt.parent].ephemeral||r[vt.parent].children.length>1))){for(var gt=[],mt=vt;mt.ephemeral&&(gt.push(mt.id),1===mt.children.length&&r[mt.children[0]].ephemeral);)mt=r[mt.children[0]];K[vt.id]={metadata:"",bundleLabel:"",bunchedNodes:gt}}}K&&(pt=pt.concat(Object.keys(K)));var _t=f(Object(i.useState)(Object.keys(K)),2),bt=_t[0],wt=_t[1];!$&&dt.size>0&&dt.size<8&&($=function(t){var e,n,r=[wv().type(fv).size(50),wv().type(uv),wv().type(yv),wv().type(iv),wv().type(ov),wv().type(pv),wv().type(bv)],i={},s=0;try{for(var a=h(t),u=a.next();!u.done;u=a.next()){var c=u.value;i[c]={},i[c].backboneGlyph=o.a.createElement("path",{strokeWidth:2,className:dk(!1),d:r[s]()}),i[c].bundleGlyph=o.a.createElement("path",{strokeWidth:2,className:dk(!1),d:r[s]()}),i[c].currentGlyph=o.a.createElement("path",{strokeWidth:2,className:dk(!0),d:r[s]()}),i[c].regularGlyph=o.a.createElement("path",{strokeWidth:2,className:dk(!1),d:r[s]()}),s++}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i}(dt)),Object(i.useEffect)((function(){st(!1)}),[]);var Et=Object.values(r).filter((function(t){return!0})),Tt=Array.from(Et),Ct=K?Object.keys(K):[],St=[];if(K)try{for(var It=h(Ct),xt=It.next();!xt.done;xt=It.next()){var Nt=xt.value;(St=St.concat(K[Nt].bunchedNodes)).push(Nt)}}catch(t){e={error:t}}finally{try{xt&&!xt.done&&(n=It.return)&&n.call(It)}finally{if(e)throw e.error}}for(var kt=function(){var t=Zy,e=tv;function n(n){var r,i,o,s,a,u,c,l=n.length,h=new Array(l),f={};for(i=0;i<l;++i)r=n[i],a=h[i]=new Ky(r),null!=(u=t(r,i,n))&&(u+="")&&(f[c="$"+(a.id=u)]=c in f?Jy:a);for(i=0;i<l;++i)if(a=h[i],null!=(u=e(n[i],i,n))&&(u+="")){if(!(s=f["$"+u]))throw new Error("missing: "+u);if(s===Jy)throw new Error("ambiguous: "+u);s.children?s.children.push(a):s.children=[a],a.parent=s}else{if(o)throw new Error("multiple roots");o=a}if(!o)throw new Error("no root");if(o.parent=Xy,o.eachBefore((function(t){t.depth=t.parent.depth+1,--l})).eachBefore(Yy),o.parent=null,l>0)throw new Error("cycle");return o}return n.id=function(e){return arguments.length?(t=$y(e),n):t},n.parentId=function(t){return arguments.length?(e=$y(t),n):e},n}().id((function(t){return t.id})).parentId((function(t){if(t.id===s)return null;if(uy(t)){if(K&&Object.keys(K).includes(t.id)&&!bt.includes(t.id))for(var e=t,n=function(){var t=e;if(!St.includes(t.parent)||Object.keys(K).includes(t.parent))return{value:t.parent};var n=Tt.filter((function(e){return e.id===t.parent}))[0];uy(n)&&(e=n)};;){var r=n();if("object"==typeof r)return r.value}var i=uk(t.parent,K),o=void 0,a=!0;for(var u in i)if(!bt.includes(i[u])){a=!1,o=i[u];break}return St.includes(t.parent)&&K&&!Object.keys(K).includes(t.parent)&&!a?o:t.parent}return null})),At=0;At<Et.length;At++){var Pt=uk(Et[At].id,K),Ot=!0;for(var yt in Pt)if(!bt.includes(Pt[yt])){Ot=!1;break}St.includes(Et[At].id)&&!Ot&&K&&!Object.keys(K).includes(Et[At].id)&&(Et.splice(At,1),At--)}var Rt=kt(Et),Dt=Rt.descendants(),Lt={};Dt.forEach((function(t){return Lt[t.id]=t})),pk(Lt,a,s);var Mt=0,Ft=0;for(var yt in Dt)Dt[yt].depth>Mt&&(Mt=Dt[yt].depth),Dt[yt].width>Ft&&(Ft=Dt[yt].width);var jt=Rt.links(),Ut=_,Vt=T;function qt(t){if($){var e=t.metadata.type;if(e&&e in $&&"Root"!==e&&$[e].regularGlyph)return $[e].regularGlyph}return o.a.createElement("circle",{r:k,strokeWidth:R,className:dk(!1)})}function Bt(t){if($){var e=t.metadata.type;if(e&&e in $&&"Root"!==e)return $[e].bundleGlyph}return o.a.createElement("circle",{r:k,strokeWidth:R,className:dk(!1)})}var Wt=0;0===Ft?Wt=30:1===Ft?Wt=52:Ft>1&&(Wt=74);var zt=p;return o.a.createElement("div",{style:{overflowX:"auto",overflowY:"auto"},className:_k,id:"prov-vis"},o.a.createElement("div",{id:"undoRedoDiv"},o.a.createElement(lk,{graph:et?et.graph():void 0,undoCallback:function(){et&&(rt?et.goBackToNonEphemeral():et.goBackOneStep())},redoCallback:function(){et&&(rt?et.goForwardToNonEphemeral():et.goForwardOneStep())}})),o.a.createElement("svg",{style:{overflow:"visible"},id:"topSvg",height:Mt<y?y:Mt,width:zt},o.a.createElement("rect",{height:y,width:p,fill:"none",stroke:"none"}),o.a.createElement("g",{id:"globalG",transform:ck(Wt,U)},o.a.createElement(Wv,l({data:jt,keyAccessor:function(t){return""+t.source.id+t.target.id}},function(t,e,n,r,i,o,s,a,u,c){void 0===i&&(i=500),t=-t,r=-r;var l=function(){return{x1:0,x2:0,y1:0,y2:0,opacity:0}};return{enter:function(o){var s=0;s=0===s?s:s-1;var c=o.source,l=o.target,h=vk(c.width,t,r),f=vk(l.width,t,r),p=e*c.depth-(e-n)*s,d=e*l.depth-(e-n)*s;return-1!==a&&c.depth>a&&0===c.width&&(p+=u),-1!==a&&l.depth>a&&0===l.width&&(d+=u),{x1:h,x2:f,y1:p,y2:d,opacity:1,timing:{duration:i}}},leave:l,update:function(o){var s=0;s=0===s?s:s-1;var c=o.source,l=o.target,h=vk(c.width,t,r),f=vk(l.width,t,r),p=e*c.depth-(e-n)*s,d=e*l.depth-(e-n)*s;return-1!==a&&c.depth>a&&0===c.width&&(p+=u),-1!==a&&l.depth>a&&0===l.width&&(d+=u),{x1:[h],y1:[p],x2:[f],y2:[d],opacity:1,timing:{duration:i}}},start:l}}(Ut,Vt,x,w-_,H,0,0,ht,S)),(function(t){return o.a.createElement(o.a.Fragment,null,t.map((function(t){var e=t.key,n=t.state;return o.a.createElement("g",{key:e},o.a.createElement(gk,l({},n,{fill:"#ccc",stroke:"#ccc",strokeWidth:W})))})))})),o.a.createElement(Wv,l({data:Dt,keyAccessor:function(t){return t.id}},function(t,e,n,r,i,o,s,a,u,c){void 0===i&&(i=500),t=-t,r=-r;var l=function(i){var o=0,l=vk(i.width,t,r),h=void 0,f=uk(i.id,c).filter((function(t){return 0===s[t].width}));f.length>0&&(h=f[0]),o=0===o?o:o-1;var p=e*i.depth-(e-n)*o;return void 0!==h&&c&&!Object.keys(c).includes(i.id)&&(p=e*(s[h].depth-c[h].bunchedNodes.length+2)-(e-n)*o),-1!==a&&i.depth>a&&0===i.width&&(p+=u),{x:l,y:p-e,opacity:0}};return{enter:function(o){var s=0,c=vk(o.width,t,r);s=0===s?s:s-1;var l=e*o.depth-(e-n)*s;return-1!==a&&o.depth>a&&0===o.width&&(l+=u),{x:[c],y:[l],opactiy:1,timing:{duration:i}}},leave:l,update:function(o){var s=0,c=vk(o.width,t,r);s=0===s?s:s-1;var l=e*o.depth-(e-n)*s;return-1!==a&&o.depth>a&&0===o.width&&(l+=u),{x:[c],y:[l],opactiy:1,timing:{duration:i}}},start:l}}(Ut,Vt,x,w-_,H,0,Lt,ht,S,K)),(function(t){return o.a.createElement(o.a.Fragment,null,t.map((function(t){var e=t.data,n=t.key,r=t.state;return o.a.createElement("g",{key:n,onClick:function(){u&&u(e.id)},transform:(e.width,ck(r.x,r.y))},0===e.width?o.a.createElement(yk,{prov:et,textSize:q,iconOnly:g,radius:P,strokeWidth:L,duration:H,first:ot,current:a===e.id,node:e.data,setBookmark:ct,bookmark:ut,bundleMap:K,nodeMap:Lt,clusterLabels:G,annotationOpen:ht,setAnnotationOpen:ft,exemptList:bt,editAnnotations:tt,setExemptList:wt,eventConfig:$,annotationContent:J,popupContent:X,expandedClusterList:bt}):void 0!==X?o.a.createElement(UN,{content:X(e.data),trigger:o.a.createElement("g",{onClick:function(){ft(-1)}},Ct.includes(e.id)?Bt(e.data):qt(e.data))}):o.a.createElement("g",{onClick:function(){ft(-1)}},qt(e.data)))})))})),o.a.createElement(Wv,l({data:Ct,keyAccessor:function(t){return""+t}},function(t,e,n,r,i,o,s,a,u,c,l){void 0===i&&(i=500),t=-t,r=-r;var h=function(){return{x:0,y:0,opacity:0}};return{enter:function(a){var h=vk(s[a].width,t,r),f=s[a].depth,p=s[a].depth;if(l&&o.includes(a))for(var d=0;d<l[a].bunchedNodes.length;d++)s[l[a].bunchedNodes[d]]&&s[l[a].bunchedNodes[d]].depth<f&&(f=s[l[a].bunchedNodes[d]].depth),s[l[a].bunchedNodes[d]]&&s[l[a].bunchedNodes[d]].depth>p&&(p=s[l[a].bunchedNodes[d]].depth);var y=e*f;-1!==u&&f>u&&(y+=c);var v=0;for(var g in l[a].bunchedNodes)s[l[a].bunchedNodes[g]]&&v++;return v*=n,o.includes(a)||(v=10),-1!==u&&u>=f&&u<=p&&(v+=c),{x:[h],y:[y],opacity:[o.includes(a)?1:0],timing:{duration:i},validity:!0,height:v}},leave:h,update:function(a){var h=vk(s[a].width,t,r),f=s[a].depth,p=s[a].depth;if(l&&o.includes(a))for(var d=0;d<l[a].bunchedNodes.length;d++)s[l[a].bunchedNodes[d]]&&s[l[a].bunchedNodes[d]].depth<f&&(f=s[l[a].bunchedNodes[d]].depth),s[l[a].bunchedNodes[d]]&&s[l[a].bunchedNodes[d]].depth>p&&(p=s[l[a].bunchedNodes[d]].depth);var y=e*f;-1!==u&&f>u&&(y+=c);var v=0;for(var g in l[a].bunchedNodes)s[l[a].bunchedNodes[g]]&&v++;return v*=n,o.includes(a)||(v=10),-1!==u&&u>=f&&u<=p&&(v+=c),{x:[h],y:[y],opacity:[o.includes(a)?1:0],timing:{duration:i},validity:!0,height:[v]}},start:h}}(Ut,T,x,w-_,H,bt,Lt,0,ht,S,K)),(function(t){return o.a.createElement(o.a.Fragment,null,t.map((function(t){var e=t.key,n=t.state;return void 0===K||0!==Lt[t.key].width||!1===n.validity?null:o.a.createElement("g",{key:e,transform:ck(n.x-_+5,n.y-x/2)},o.a.createElement("rect",{style:{opacity:n.opacity},width:g?42:F-15,height:n.height,rx:"10",ry:"10",fill:"none",strokeWidth:"2px",stroke:"rgb(248, 191, 132)"}))})))})))))}var _k=ak({alignItems:"center",justifyContent:"center",overflow:"auto"});function bk(t,e,n,r,i,s,a){void 0===i&&(i=!1),void 0===s&&(s=e.graph().root),void 0===a&&(a={}),c.a.render(o.a.createElement(mk,l({},a,{root:s,changeCurrent:n,current:e.graph().current,nodeMap:e.graph().nodes,prov:e,undoRedoButtons:!0,ephemeralUndo:i})),t)}}).call(this,n(18),n(19))},,,,,,,,,,,,,,function(t,e,n){"use strict";
/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(20),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,v="function"==typeof Symbol&&Symbol.iterator;function g(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function b(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||m}function w(){}function E(t,e,n){this.props=t,this.context=e,this.refs=_,this.updater=n||m}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(g(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},w.prototype=b.prototype;var T=E.prototype=new w;T.constructor=E,r(T,b.prototype),T.isPureReactComponent=!0;var C={current:null},S=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function x(t,e,n){var r,i={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)S.call(e,r)&&!I.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:s,ref:a,props:i,_owner:C.current}}function N(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var k=/\/+/g,A=[];function P(t,e,n,r){if(A.length){var i=A.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>A.length&&A.push(t)}function R(t,e,n){return null==t?0:function t(e,n,r,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case s:u=!0}}if(u)return r(i,e,""===n?"."+D(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=n+D(a=e[c],c);u+=t(a,l,r,i)}else if(null===e||"object"!=typeof e?l=null:l="function"==typeof(l=v&&e[v]||e["@@iterator"])?l:null,"function"==typeof l)for(e=l.call(e),c=0;!(a=e.next()).done;)u+=t(a=a.value,l=n+D(a,c++),r,i);else if("object"===a)throw r=""+e,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function D(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function L(t,e){t.func.call(t.context,e,t.count++)}function M(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?F(t,r,n,(function(t){return t})):null!=t&&(N(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(k,"$&/")+"/")+n)),r.push(t))}function F(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(k,"$&/")+"/"),R(t,M,e=P(e,o,r,i)),O(e)}var j={current:null};function U(){var t=j.current;if(null===t)throw Error(g(321));return t}var V={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return F(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;R(t,L,e=P(null,null,e,n)),O(e)},count:function(t){return R(t,(function(){return null}),null)},toArray:function(t){var e=[];return F(t,e,null,(function(t){return t})),e},only:function(t){if(!N(t))throw Error(g(143));return t}},e.Component=b,e.Fragment=a,e.Profiler=c,e.PureComponent=E,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,e.cloneElement=function(t,e,n){if(null==t)throw Error(g(267,t));var i=r({},t.props),s=t.key,a=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,u=C.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)S.call(e,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:t.type,key:s,ref:a,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=x,e.createFactory=function(t){var e=x.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:f,render:t}},e.isValidElement=N,e.lazy=function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return U().useCallback(t,e)},e.useContext=function(t,e){return U().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return U().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return U().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return U().useLayoutEffect(t,e)},e.useMemo=function(t,e){return U().useMemo(t,e)},e.useReducer=function(t,e,n){return U().useReducer(t,e,n)},e.useRef=function(t){return U().useRef(t)},e.useState=function(t){return U().useState(t)},e.version="16.13.1"},function(t,e,n){"use strict";var r=n(38);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";
/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(0),i=n(20),o=n(40);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));function a(t,e,n,r,i,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(t){this.onError(t)}}var u=!1,c=null,l=!1,h=null,f={onError:function(t){u=!0,c=t}};function p(t,e,n,r,i,o,s,l,h){u=!1,c=null,a.apply(f,arguments)}var d=null,y=null,v=null;function g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=v(n),function(t,e,n,r,i,o,a,f,d){if(p.apply(this,arguments),u){if(!u)throw Error(s(198));var y=c;u=!1,c=null,l||(l=!0,h=y)}}(r,e,void 0,t),t.currentTarget=null}var m=null,_={};function b(){if(m)for(var t in _){var e=_[t],n=m.indexOf(t);if(!(-1<n))throw Error(s(96,t));if(!E[n]){if(!e.extractEvents)throw Error(s(97,t));for(var r in E[n]=e,n=e.eventTypes){var i=void 0,o=n[r],a=e,u=r;if(T.hasOwnProperty(u))throw Error(s(99,u));T[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&w(c[i],a,u);i=!0}else o.registrationName?(w(o.registrationName,a,u),i=!0):i=!1;if(!i)throw Error(s(98,r,t))}}}}function w(t,e,n){if(C[t])throw Error(s(100,t));C[t]=e,S[t]=e.eventTypes[n].dependencies}var E=[],T={},C={},S={};function I(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!_.hasOwnProperty(e)||_[e]!==r){if(_[e])throw Error(s(102,e));_[e]=r,n=!0}}n&&b()}var x=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),N=null,k=null,A=null;function P(t){if(t=y(t)){if("function"!=typeof N)throw Error(s(280));var e=t.stateNode;e&&(e=d(e),N(t.stateNode,t.type,e))}}function O(t){k?A?A.push(t):A=[t]:k=t}function R(){if(k){var t=k,e=A;if(A=k=null,P(t),e)for(t=0;t<e.length;t++)P(e[t])}}function D(t,e){return t(e)}function L(t,e,n,r,i){return t(e,n,r,i)}function M(){}var F=D,j=!1,U=!1;function V(){null===k&&null===A||(M(),R())}function q(t,e,n){if(U)return t(e,n);U=!0;try{return F(t,e,n)}finally{U=!1,V()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,W=Object.prototype.hasOwnProperty,z={},H={};function Q(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){G[t]=new Q(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];G[e]=new Q(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){G[t]=new Q(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){G[t]=new Q(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){G[t]=new Q(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){G[t]=new Q(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){G[t]=new Q(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){G[t]=new Q(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){G[t]=new Q(t,5,!1,t.toLowerCase(),null,!1)}));var Y=/[\-:]([a-z])/g;function K(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(Y,K);G[e]=new Q(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(Y,K);G[e]=new Q(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(Y,K);G[e]=new Q(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){G[t]=new Q(t,1,!1,t.toLowerCase(),null,!1)})),G.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){G[t]=new Q(t,1,!1,t.toLowerCase(),null,!0)}));var $=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(t,e,n,r){var i=G.hasOwnProperty(e)?G[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!W.call(H,t)||!W.call(z,t)&&(B.test(t)?H[t]=!0:(z[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"==typeof Symbol&&Symbol.for,tt=Z?Symbol.for("react.element"):60103,et=Z?Symbol.for("react.portal"):60106,nt=Z?Symbol.for("react.fragment"):60107,rt=Z?Symbol.for("react.strict_mode"):60108,it=Z?Symbol.for("react.profiler"):60114,ot=Z?Symbol.for("react.provider"):60109,st=Z?Symbol.for("react.context"):60110,at=Z?Symbol.for("react.concurrent_mode"):60111,ut=Z?Symbol.for("react.forward_ref"):60112,ct=Z?Symbol.for("react.suspense"):60113,lt=Z?Symbol.for("react.suspense_list"):60120,ht=Z?Symbol.for("react.memo"):60115,ft=Z?Symbol.for("react.lazy"):60116,pt=Z?Symbol.for("react.block"):60121,dt="function"==typeof Symbol&&Symbol.iterator;function yt(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function vt(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case ct:return"Suspense";case lt:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case st:return"Context.Consumer";case ot:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return vt(t.type);case pt:return vt(t.render);case ft:if(t=1===t._status?t._result:null)return vt(t)}return null}function gt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=vt(t.type);n=null,r&&(n=vt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function mt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function _t(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function bt(t){t._valueTracker||(t._valueTracker=function(t){var e=_t(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function wt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_t(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Et(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=mt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Ct(t,e){null!=(e=e.checked)&&X(t,"checked",e,!1)}function St(t,e){Ct(t,e);var n=mt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?xt(t,e.type,n):e.hasOwnProperty("defaultValue")&&xt(t,e.type,mt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function It(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function xt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Nt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function kt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function At(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:mt(n)}}function Ot(t,e){var n=mt(e.value),r=mt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Rt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Dt="http://www.w3.org/1999/xhtml",Lt="http://www.w3.org/2000/svg";function Mt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Mt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var jt,Ut=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Lt||"innerHTML"in t)t.innerHTML=e;else{for((jt=jt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Vt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function qt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bt={animationend:qt("Animation","AnimationEnd"),animationiteration:qt("Animation","AnimationIteration"),animationstart:qt("Animation","AnimationStart"),transitionend:qt("Transition","TransitionEnd")},Wt={},zt={};function Ht(t){if(Wt[t])return Wt[t];if(!Bt[t])return t;var e,n=Bt[t];for(e in n)if(n.hasOwnProperty(e)&&e in zt)return Wt[t]=n[e];return t}x&&(zt=document.createElement("div").style,"AnimationEvent"in window||(delete Bt.animationend.animation,delete Bt.animationiteration.animation,delete Bt.animationstart.animation),"TransitionEvent"in window||delete Bt.transitionend.transition);var Qt=Ht("animationend"),Gt=Ht("animationiteration"),Yt=Ht("animationstart"),Kt=Ht("transitionend"),$t="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xt=new("function"==typeof WeakMap?WeakMap:Map);function Jt(t){var e=Xt.get(t);return void 0===e&&(e=new Map,Xt.set(t,e)),e}function Zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if(Zt(t)!==t)throw Error(s(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Zt(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ee(i),t;if(o===r)return ee(i),e;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function re(t,e){if(null==e)throw Error(s(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ie(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var oe=null;function se(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)g(t,e[r],n[r]);else e&&g(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function ae(t){if(null!==t&&(oe=re(oe,t)),t=oe,oe=null,t){if(ie(t,se),oe)throw Error(s(95));if(l)throw t=h,l=!1,h=null,t}}function ue(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ce(t){if(!x)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var le=[];function he(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>le.length&&le.push(t)}function fe(t,e,n,r){if(le.length){var i=le.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function pe(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=xn(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ue(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,s=t.eventSystemFlags;0===n&&(s|=64);for(var a=null,u=0;u<E.length;u++){var c=E[u];c&&(c=c.extractEvents(r,e,o,i,s))&&(a=re(a,c))}ae(a)}}function de(t,e,n){if(!n.has(t)){switch(t){case"scroll":Ye(e,"scroll",!0);break;case"focus":case"blur":Ye(e,"focus",!0),Ye(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ce(t)&&Ye(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$t.indexOf(t)&&Ge(t,e)}n.set(t,null)}}var ye,ve,ge,me=!1,_e=[],be=null,we=null,Ee=null,Te=new Map,Ce=new Map,Se=[],Ie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),xe="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ne(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function ke(t,e){switch(t){case"focus":case"blur":be=null;break;case"dragenter":case"dragleave":we=null;break;case"mouseover":case"mouseout":Ee=null;break;case"pointerover":case"pointerout":Te.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ce.delete(e.pointerId)}}function Ae(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ne(e,n,r,i,o),null!==e&&(null!==(e=Nn(e))&&ve(e)),t):(t.eventSystemFlags|=r,t)}function Pe(t){var e=xn(t.target);if(null!==e){var n=Zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){ge(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Oe(t){if(null!==t.blockedOn)return!1;var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=Nn(e);return null!==n&&ve(n),t.blockedOn=e,!1}return!0}function Re(t,e,n){Oe(t)&&n.delete(e)}function De(){for(me=!1;0<_e.length;){var t=_e[0];if(null!==t.blockedOn){null!==(t=Nn(t.blockedOn))&&ye(t);break}var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:_e.shift()}null!==be&&Oe(be)&&(be=null),null!==we&&Oe(we)&&(we=null),null!==Ee&&Oe(Ee)&&(Ee=null),Te.forEach(Re),Ce.forEach(Re)}function Le(t,e){t.blockedOn===e&&(t.blockedOn=null,me||(me=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,De)))}function Me(t){function e(e){return Le(e,t)}if(0<_e.length){Le(_e[0],t);for(var n=1;n<_e.length;n++){var r=_e[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==be&&Le(be,t),null!==we&&Le(we,t),null!==Ee&&Le(Ee,t),Te.forEach(e),Ce.forEach(e),n=0;n<Se.length;n++)(r=Se[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Se.length&&null===(n=Se[0]).blockedOn;)Pe(n),null===n.blockedOn&&Se.shift()}var Fe={},je=new Map,Ue=new Map,Ve=["abort","abort",Qt,"animationEnd",Gt,"animationIteration",Yt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Kt,"transitionEnd","waiting","waiting"];function qe(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},Ue.set(r,e),je.set(r,o),Fe[i]=o}}qe("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qe(Ve,2);for(var Be="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Be.length;We++)Ue.set(Be[We],0);var ze=o.unstable_UserBlockingPriority,He=o.unstable_runWithPriority,Qe=!0;function Ge(t,e){Ye(e,t,!1)}function Ye(t,e,n){var r=Ue.get(e);switch(void 0===r?2:r){case 0:r=Ke.bind(null,e,1,t);break;case 1:r=$e.bind(null,e,1,t);break;default:r=Xe.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ke(t,e,n,r){j||M();var i=Xe,o=j;j=!0;try{L(i,t,e,n,r)}finally{(j=o)||V()}}function $e(t,e,n,r){He(ze,Xe.bind(null,t,e,n,r))}function Xe(t,e,n,r){if(Qe)if(0<_e.length&&-1<Ie.indexOf(t))t=Ne(null,t,e,n,r),_e.push(t);else{var i=Je(t,e,n,r);if(null===i)ke(t,r);else if(-1<Ie.indexOf(t))t=Ne(i,t,e,n,r),_e.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return be=Ae(be,t,e,n,r,i),!0;case"dragenter":return we=Ae(we,t,e,n,r,i),!0;case"mouseover":return Ee=Ae(Ee,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Te.set(o,Ae(Te.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ce.set(o,Ae(Ce.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){ke(t,r),t=fe(t,r,null,e);try{q(pe,t)}finally{he(t)}}}}function Je(t,e,n,r){if(null!==(n=xn(n=ue(r)))){var i=Zt(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=te(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=fe(t,r,n,e);try{q(pe,t)}finally{he(t)}return null}var Ze={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||Ze.hasOwnProperty(t)&&Ze[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Ze).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ze[e]=Ze[t]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(s(62,""))}}function sn(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=Dt;function un(t,e){var n=Jt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=S[e];for(var r=0;r<e.length;r++)de(e[r],t,n)}function cn(){}function ln(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fn(t,e){var n,r=hn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=hn(r)}}function pn(){for(var t=window,e=ln();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=ln((t=e.contentWindow).document)}return e}function dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var yn=null,vn=null;function gn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function mn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var _n="function"==typeof setTimeout?setTimeout:void 0,bn="function"==typeof clearTimeout?clearTimeout:void 0;function wn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function En(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Tn=Math.random().toString(36).slice(2),Cn="__reactInternalInstance$"+Tn,Sn="__reactEventHandlers$"+Tn,In="__reactContainere$"+Tn;function xn(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[In]||n[Cn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=En(t);null!==t;){if(n=t[Cn])return n;t=En(t)}return e}n=(t=n).parentNode}return null}function Nn(t){return!(t=t[Cn]||t[In])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function kn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function An(t){return t[Sn]||null}function Pn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function On(t,e){var n=t.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(s(231,e,typeof n));return n}function Rn(t,e,n){(e=On(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Dn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Pn(e);for(e=n.length;0<e--;)Rn(n[e],"captured",t);for(e=0;e<n.length;e++)Rn(n[e],"bubbled",t)}}function Ln(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=On(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Mn(t){t&&t.dispatchConfig.registrationName&&Ln(t._targetInst,null,t)}function Fn(t){ie(t,Dn)}var jn=null,Un=null,Vn=null;function qn(){if(Vn)return Vn;var t,e,n=Un,r=n.length,i="value"in jn?jn.value:jn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return Vn=i.slice(t,1<e?1-e:void 0)}function Bn(){return!0}function Wn(){return!1}function zn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Bn:Wn,this.isPropagationStopped=Wn,this}function Hn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function Qn(t){if(!(t instanceof this))throw Error(s(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Gn(t){t.eventPool=[],t.getPooled=Hn,t.release=Qn}i(zn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){this.isPersistent=Bn},isPersistent:Wn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Wn,this._dispatchInstances=this._dispatchListeners=null}}),zn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},zn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Gn(n),n},Gn(zn);var Yn=zn.extend({data:null}),Kn=zn.extend({data:null}),$n=[9,13,27,32],Xn=x&&"CompositionEvent"in window,Jn=null;x&&"documentMode"in document&&(Jn=document.documentMode);var Zn=x&&"TextEvent"in window&&!Jn,tr=x&&(!Xn||Jn&&8<Jn&&11>=Jn),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==$n.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var sr=!1;var ar={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if(Xn)t:{switch(t){case"compositionstart":var o=nr.compositionStart;break t;case"compositionend":o=nr.compositionEnd;break t;case"compositionupdate":o=nr.compositionUpdate;break t}o=void 0}else sr?ir(t,n)&&(o=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=nr.compositionStart);return o?(tr&&"ko"!==n.locale&&(sr||o!==nr.compositionStart?o===nr.compositionEnd&&sr&&(i=qn()):(Un="value"in(jn=r)?jn.value:jn.textContent,sr=!0)),o=Yn.getPooled(o,e,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),Fn(o),i=o):i=null,(t=Zn?function(t,e){switch(t){case"compositionend":return or(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(sr)return"compositionend"===t||!Xn&&ir(t,e)?(t=qn(),Vn=Un=jn=null,sr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Kn.getPooled(nr.beforeInput,e,n,r)).data=t,Fn(e)):e=null,null===i?e:null===e?i:[i,e]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ur[t.type]:"textarea"===e}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hr(t,e,n){return(t=zn.getPooled(lr.change,t,e,n)).type="change",O(n),Fn(t),t}var fr=null,pr=null;function dr(t){ae(t)}function yr(t){if(wt(kn(t)))return t}function vr(t,e){if("change"===t)return e}var gr=!1;function mr(){fr&&(fr.detachEvent("onpropertychange",_r),pr=fr=null)}function _r(t){if("value"===t.propertyName&&yr(pr))if(t=hr(pr,t,ue(t)),j)ae(t);else{j=!0;try{D(dr,t)}finally{j=!1,V()}}}function br(t,e,n){"focus"===t?(mr(),pr=n,(fr=e).attachEvent("onpropertychange",_r)):"blur"===t&&mr()}function wr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return yr(pr)}function Er(t,e){if("click"===t)return yr(e)}function Tr(t,e){if("input"===t||"change"===t)return yr(e)}x&&(gr=ce("input")&&(!document.documentMode||9<document.documentMode));var Cr={eventTypes:lr,_isInputEventSupported:gr,extractEvents:function(t,e,n,r){var i=e?kn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var s=vr;else if(cr(i))if(gr)s=Tr;else{s=wr;var a=br}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(s=Er);if(s&&(s=s(t,e)))return hr(s,n,r);a&&a(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&xt(i,"number",i.value)}},Sr=zn.extend({view:null,detail:null}),Ir={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ir[t])&&!!e[t]}function Nr(){return xr}var kr=0,Ar=0,Pr=!1,Or=!1,Rr=Sr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Nr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=kr;return kr=t.screenX,Pr?"mousemove"===t.type?t.screenX-e:0:(Pr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Ar;return Ar=t.screenY,Or?"mousemove"===t.type?t.screenY-e:0:(Or=!0,0)}}),Dr=Rr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Lr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Mr={eventTypes:Lr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,s="mouseout"===t||"pointerout"===t;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!s&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,s)?(s=e,null!==(e=(e=n.relatedTarget||n.toElement)?xn(e):null)&&(e!==Zt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):s=null;if(s===e)return null;if("mouseout"===t||"mouseover"===t)var a=Rr,u=Lr.mouseLeave,c=Lr.mouseEnter,l="mouse";else"pointerout"!==t&&"pointerover"!==t||(a=Dr,u=Lr.pointerLeave,c=Lr.pointerEnter,l="pointer");if(t=null==s?o:kn(s),o=null==e?o:kn(e),(u=a.getPooled(u,s,n,r)).type=l+"leave",u.target=t,u.relatedTarget=o,(n=a.getPooled(c,e,n,r)).type=l+"enter",n.target=o,n.relatedTarget=t,l=e,(r=s)&&l)t:{for(c=l,s=0,t=a=r;t;t=Pn(t))s++;for(t=0,e=c;e;e=Pn(e))t++;for(;0<s-t;)a=Pn(a),s--;for(;0<t-s;)c=Pn(c),t--;for(;s--;){if(a===c||a===c.alternate)break t;a=Pn(a),c=Pn(c)}a=null}else a=null;for(c=a,a=[];r&&r!==c&&(null===(s=r.alternate)||s!==c);)a.push(r),r=Pn(r);for(r=[];l&&l!==c&&(null===(s=l.alternate)||s!==c);)r.push(l),l=Pn(l);for(l=0;l<a.length;l++)Ln(a[l],"bubbled",u);for(l=r.length;0<l--;)Ln(r[l],"captured",n);return 0==(64&i)?[u]:[u,n]}};var Fr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},jr=Object.prototype.hasOwnProperty;function Ur(t,e){if(Fr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!jr.call(e,n[r])||!Fr(t[n[r]],e[n[r]]))return!1;return!0}var Vr=x&&"documentMode"in document&&11>=document.documentMode,qr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Br=null,Wr=null,zr=null,Hr=!1;function Qr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Hr||null==Br||Br!==ln(n)?null:("selectionStart"in(n=Br)&&dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},zr&&Ur(zr,n)?null:(zr=n,(t=zn.getPooled(qr.select,Wr,t,e)).type="select",t.target=Br,Fn(t),t))}var Gr={eventTypes:qr,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Jt(i),o=S.onSelect;for(var s=0;s<o.length;s++)if(!i.has(o[s])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?kn(e):window,t){case"focus":(cr(i)||"true"===i.contentEditable)&&(Br=i,Wr=e,zr=null);break;case"blur":zr=Wr=Br=null;break;case"mousedown":Hr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Hr=!1,Qr(n,r);case"selectionchange":if(Vr)break;case"keydown":case"keyup":return Qr(n,r)}return null}},Yr=zn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Kr=zn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$r=Sr.extend({relatedTarget:null});function Xr(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=Sr.extend({key:function(t){if(t.key){var e=Jr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Xr(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Zr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Nr,charCode:function(t){return"keypress"===t.type?Xr(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Xr(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=Rr.extend({dataTransfer:null}),ni=Sr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Nr}),ri=zn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Rr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Fe,extractEvents:function(t,e,n,r){var i=je.get(t);if(!i)return null;switch(t){case"keypress":if(0===Xr(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=$r;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Qt:case Gt:case Yt:t=Yr;break;case Kt:t=ri;break;case"scroll":t=Sr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Kr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Dr;break;default:t=zn}return Fn(e=t.getPooled(i,e,n,r)),e}};if(m)throw Error(s(101));m=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),b(),d=An,y=Nn,v=kn,I({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Mr,ChangeEventPlugin:Cr,SelectEventPlugin:Gr,BeforeInputEventPlugin:ar});var si=[],ai=-1;function ui(t){0>ai||(t.current=si[ai],si[ai]=null,ai--)}function ci(t,e){ai++,si[ai]=t.current,t.current=e}var li={},hi={current:li},fi={current:!1},pi=li;function di(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function yi(t){return null!=(t=t.childContextTypes)}function vi(){ui(fi),ui(hi)}function gi(t,e,n){if(hi.current!==li)throw Error(s(168));ci(hi,e),ci(fi,n)}function mi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(s(108,vt(e)||"Unknown",o));return i({},n,{},r)}function _i(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,pi=hi.current,ci(hi,t),ci(fi,fi.current),!0}function bi(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=mi(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,ui(fi),ui(hi),ci(hi,t)):ui(fi),ci(fi,n)}var wi=o.unstable_runWithPriority,Ei=o.unstable_scheduleCallback,Ti=o.unstable_cancelCallback,Ci=o.unstable_requestPaint,Si=o.unstable_now,Ii=o.unstable_getCurrentPriorityLevel,xi=o.unstable_ImmediatePriority,Ni=o.unstable_UserBlockingPriority,ki=o.unstable_NormalPriority,Ai=o.unstable_LowPriority,Pi=o.unstable_IdlePriority,Oi={},Ri=o.unstable_shouldYield,Di=void 0!==Ci?Ci:function(){},Li=null,Mi=null,Fi=!1,ji=Si(),Ui=1e4>ji?Si:function(){return Si()-ji};function Vi(){switch(Ii()){case xi:return 99;case Ni:return 98;case ki:return 97;case Ai:return 96;case Pi:return 95;default:throw Error(s(332))}}function qi(t){switch(t){case 99:return xi;case 98:return Ni;case 97:return ki;case 96:return Ai;case 95:return Pi;default:throw Error(s(332))}}function Bi(t,e){return t=qi(t),wi(t,e)}function Wi(t,e,n){return t=qi(t),Ei(t,e,n)}function zi(t){return null===Li?(Li=[t],Mi=Ei(xi,Qi)):Li.push(t),Oi}function Hi(){if(null!==Mi){var t=Mi;Mi=null,Ti(t)}Qi()}function Qi(){if(!Fi&&null!==Li){Fi=!0;var t=0;try{var e=Li;Bi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Li=null}catch(e){throw null!==Li&&(Li=Li.slice(t+1)),Ei(xi,Hi),e}finally{Fi=!1}}}function Gi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Yi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Ki={current:null},$i=null,Xi=null,Ji=null;function Zi(){Ji=Xi=$i=null}function to(t){var e=Ki.current;ui(Ki),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){$i=t,Ji=Xi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(As=!0),t.firstContext=null)}function ro(t,e){if(Ji!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(Ji=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Xi){if(null===$i)throw Error(s(308));Xi=e,$i.dependencies={expirationTime:0,firstContext:e,responders:null}}else Xi=Xi.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function so(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function ao(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.alternate;null!==n&&so(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function lo(t,e,n,r){var o=t.updateQueue;io=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var u=s.next;s.next=a.next,a.next=u}s=a,o.shared.pending=null,null!==(u=t.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=a))}if(null!==s){u=s.next;var c=o.baseState,l=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((a=d.expirationTime)<r){var y={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=y,h=c):p=p.next=y,a>l&&(l=a)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),ou(a,d.suspenseConfig);t:{var v=t,g=d;switch(a=e,y=n,g.tag){case 1:if("function"==typeof(v=g.payload)){c=v.call(y,c,a);break t}c=v;break t;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null==(a="function"==typeof(v=g.payload)?v.call(y,c,a):v))break t;c=i({},c,a);break t;case 2:io=!0}}null!==d.callback&&(t.effectTag|=32,null===(a=o.effects)?o.effects=[d]:a.push(d))}if(null===(d=d.next)||d===u){if(null===(a=o.shared.pending))break;d=s.next=a.next,a.next=u,o.baseQueue=s=a,o.shared.pending=null}}null===p?h=c:p.next=f,o.baseState=h,o.baseQueue=p,su(l),t.expirationTime=l,t.memoizedState=c}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(s(191,r));r.call(i)}}}var fo=$.ReactCurrentBatchConfig,po=(new r.Component).refs;function yo(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var vo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Qa(),i=fo.suspense;(i=ao(r=Ga(r,t,i),i)).payload=e,null!=n&&(i.callback=n),uo(t,i),Ya(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Qa(),i=fo.suspense;(i=ao(r=Ga(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),uo(t,i),Ya(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Qa(),r=fo.suspense;(r=ao(n=Ga(n,t,r),r)).tag=2,null!=e&&(r.callback=e),uo(t,r),Ya(t,n)}};function go(t,e,n,r,i,o,s){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!Ur(n,r)||!Ur(i,o))}function mo(t,e,n){var r=!1,i=li,o=e.contextType;return"object"==typeof o&&null!==o?o=ro(o):(i=yi(e)?pi:hi.current,o=(r=null!=(r=e.contextTypes))?di(t,i):li),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=vo,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function _o(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vo.enqueueReplaceState(e,e.state,null)}function bo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=po,oo(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=ro(o):(o=yi(e)?pi:hi.current,i.context=di(t,o)),lo(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(yo(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&vo.enqueueReplaceState(i,i.state,null),lo(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var wo=Array.isArray;function Eo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===po&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function To(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Co(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Iu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=ku(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Eo(t,e,n),r.return=t,r):((r=xu(n.type,n.key,n.props,null,t.mode,r)).ref=Eo(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Au(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Nu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=ku(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=xu(e.type,e.key,e.props,null,t.mode,n)).ref=Eo(t,null,e),n.return=t,n;case et:return(e=Au(e,t.mode,n)).return=t,e}if(wo(e)||yt(e))return(e=Nu(e,t.mode,n,null)).return=t,e;To(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case et:return n.key===i?l(t,e,n,r):null}if(wo(n)||yt(n))return null!==i?null:h(t,e,n,r,null);To(t,n)}return null}function d(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case et:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(wo(r)||yt(r))return h(e,t=t.get(n)||null,r,i,null);To(e,r)}return null}function y(i,s,a,u){for(var c=null,l=null,h=s,y=s=0,v=null;null!==h&&y<a.length;y++){h.index>y?(v=h,h=null):v=h.sibling;var g=p(i,h,a[y],u);if(null===g){null===h&&(h=v);break}t&&h&&null===g.alternate&&e(i,h),s=o(g,s,y),null===l?c=g:l.sibling=g,l=g,h=v}if(y===a.length)return n(i,h),c;if(null===h){for(;y<a.length;y++)null!==(h=f(i,a[y],u))&&(s=o(h,s,y),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);y<a.length;y++)null!==(v=d(h,i,y,a[y],u))&&(t&&null!==v.alternate&&h.delete(null===v.key?y:v.key),s=o(v,s,y),null===l?c=v:l.sibling=v,l=v);return t&&h.forEach((function(t){return e(i,t)})),c}function v(i,a,u,c){var l=yt(u);if("function"!=typeof l)throw Error(s(150));if(null==(u=l.call(u)))throw Error(s(151));for(var h=l=null,y=a,v=a=0,g=null,m=u.next();null!==y&&!m.done;v++,m=u.next()){y.index>v?(g=y,y=null):g=y.sibling;var _=p(i,y,m.value,c);if(null===_){null===y&&(y=g);break}t&&y&&null===_.alternate&&e(i,y),a=o(_,a,v),null===h?l=_:h.sibling=_,h=_,y=g}if(m.done)return n(i,y),l;if(null===y){for(;!m.done;v++,m=u.next())null!==(m=f(i,m.value,c))&&(a=o(m,a,v),null===h?l=m:h.sibling=m,h=m);return l}for(y=r(i,y);!m.done;v++,m=u.next())null!==(m=d(y,i,v,m.value,c))&&(t&&null!==m.alternate&&y.delete(null===m.key?v:m.key),a=o(m,a,v),null===h?l=m:h.sibling=m,h=m);return t&&y.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"==typeof o&&null!==o&&o.type===nt&&null===o.key;c&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case tt:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===nt){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=Eo(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===nt?((r=Nu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=xu(o.type,o.key,o.props,null,t.mode,u)).ref=Eo(t,r,o),u.return=t,t=u)}return a(t);case et:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Au(o,t.mode,u)).return=t,t=r}return a(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=ku(o,t.mode,u)).return=t,t=r),a(t);if(wo(o))return y(t,r,o,u);if(yt(o))return v(t,r,o,u);if(l&&To(t,o),void 0===o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(s(152,t.displayName||t.name||"Component"))}return n(t,r)}}var So=Co(!0),Io=Co(!1),xo={},No={current:xo},ko={current:xo},Ao={current:xo};function Po(t){if(t===xo)throw Error(s(174));return t}function Oo(t,e){switch(ci(Ao,e),ci(ko,t),ci(No,xo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ft(null,"");break;default:e=Ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ui(No),ci(No,e)}function Ro(){ui(No),ui(ko),ui(Ao)}function Do(t){Po(Ao.current);var e=Po(No.current),n=Ft(e,t.type);e!==n&&(ci(ko,t),ci(No,n))}function Lo(t){ko.current===t&&(ui(No),ui(ko))}var Mo={current:0};function Fo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function jo(t,e){return{responder:t,props:e}}var Uo=$.ReactCurrentDispatcher,Vo=$.ReactCurrentBatchConfig,qo=0,Bo=null,Wo=null,zo=null,Ho=!1;function Qo(){throw Error(s(321))}function Go(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fr(t[n],e[n]))return!1;return!0}function Yo(t,e,n,r,i,o){if(qo=o,Bo=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Uo.current=null===t||null===t.memoizedState?gs:ms,t=n(r,i),e.expirationTime===qo){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(s(301));o+=1,zo=Wo=null,e.updateQueue=null,Uo.current=_s,t=n(r,i)}while(e.expirationTime===qo)}if(Uo.current=vs,e=null!==Wo&&null!==Wo.next,qo=0,zo=Wo=Bo=null,Ho=!1,e)throw Error(s(300));return t}function Ko(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===zo?Bo.memoizedState=zo=t:zo=zo.next=t,zo}function $o(){if(null===Wo){var t=Bo.alternate;t=null!==t?t.memoizedState:null}else t=Wo.next;var e=null===zo?Bo.memoizedState:zo.next;if(null!==e)zo=e,Wo=t;else{if(null===t)throw Error(s(310));t={memoizedState:(Wo=t).memoizedState,baseState:Wo.baseState,baseQueue:Wo.baseQueue,queue:Wo.queue,next:null},null===zo?Bo.memoizedState=zo=t:zo=zo.next=t}return zo}function Xo(t,e){return"function"==typeof e?e(t):e}function Jo(t){var e=$o(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=Wo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=o=null,c=i;do{var l=c.expirationTime;if(l<qo){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(a=u=h,o=r):u=u.next=h,l>Bo.expirationTime&&(Bo.expirationTime=l,su(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ou(l,c.suspenseConfig),r=c.eagerReducer===t?c.eagerState:t(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=a,Fr(r,e.memoizedState)||(As=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Zo(t){var e=$o(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);Fr(o,e.memoizedState)||(As=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ts(t){var e=Ko();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:t}).dispatch=ys.bind(null,Bo,t),[e.memoizedState,t]}function es(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Bo.updateQueue)?(e={lastEffect:null},Bo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ns(){return $o().memoizedState}function rs(t,e,n,r){var i=Ko();Bo.effectTag|=t,i.memoizedState=es(1|e,n,void 0,void 0===r?null:r)}function is(t,e,n,r){var i=$o();r=void 0===r?null:r;var o=void 0;if(null!==Wo){var s=Wo.memoizedState;if(o=s.destroy,null!==r&&Go(r,s.deps))return void es(e,n,o,r)}Bo.effectTag|=t,i.memoizedState=es(1|e,n,o,r)}function os(t,e){return rs(516,4,t,e)}function ss(t,e){return is(516,4,t,e)}function as(t,e){return is(4,2,t,e)}function us(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function cs(t,e,n){return n=null!=n?n.concat([t]):null,is(4,2,us.bind(null,e,t),n)}function ls(){}function hs(t,e){return Ko().memoizedState=[t,void 0===e?null:e],t}function fs(t,e){var n=$o();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Go(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ps(t,e){var n=$o();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Go(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ds(t,e,n){var r=Vi();Bi(98>r?98:r,(function(){t(!0)})),Bi(97<r?97:r,(function(){var r=Vo.suspense;Vo.suspense=void 0===e?null:e;try{t(!1),n()}finally{Vo.suspense=r}}))}function ys(t,e,n){var r=Qa(),i=fo.suspense;i={expirationTime:r=Ga(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Bo||null!==o&&o===Bo)Ho=!0,i.expirationTime=qo,Bo.expirationTime=qo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.eagerReducer=o,i.eagerState=a,Fr(a,s))return}catch(t){}Ya(t,r)}}var vs={readContext:ro,useCallback:Qo,useContext:Qo,useEffect:Qo,useImperativeHandle:Qo,useLayoutEffect:Qo,useMemo:Qo,useReducer:Qo,useRef:Qo,useState:Qo,useDebugValue:Qo,useResponder:Qo,useDeferredValue:Qo,useTransition:Qo},gs={readContext:ro,useCallback:hs,useContext:ro,useEffect:os,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,rs(4,2,us.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rs(4,2,t,e)},useMemo:function(t,e){var n=Ko();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ko();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ys.bind(null,Bo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Ko().memoizedState=t},useState:ts,useDebugValue:ls,useResponder:jo,useDeferredValue:function(t,e){var n=ts(t),r=n[0],i=n[1];return os((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ts(!1),n=e[0];return e=e[1],[hs(ds.bind(null,e,t),[e,t]),n]}},ms={readContext:ro,useCallback:fs,useContext:ro,useEffect:ss,useImperativeHandle:cs,useLayoutEffect:as,useMemo:ps,useReducer:Jo,useRef:ns,useState:function(){return Jo(Xo)},useDebugValue:ls,useResponder:jo,useDeferredValue:function(t,e){var n=Jo(Xo),r=n[0],i=n[1];return ss((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Jo(Xo),n=e[0];return e=e[1],[fs(ds.bind(null,e,t),[e,t]),n]}},_s={readContext:ro,useCallback:fs,useContext:ro,useEffect:ss,useImperativeHandle:cs,useLayoutEffect:as,useMemo:ps,useReducer:Zo,useRef:ns,useState:function(){return Zo(Xo)},useDebugValue:ls,useResponder:jo,useDeferredValue:function(t,e){var n=Zo(Xo),r=n[0],i=n[1];return ss((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Zo(Xo),n=e[0];return e=e[1],[fs(ds.bind(null,e,t),[e,t]),n]}},bs=null,ws=null,Es=!1;function Ts(t,e){var n=Cu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Cs(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Ss(t){if(Es){var e=ws;if(e){var n=e;if(!Cs(t,e)){if(!(e=wn(n.nextSibling))||!Cs(t,e))return t.effectTag=-1025&t.effectTag|2,Es=!1,void(bs=t);Ts(bs,n)}bs=t,ws=wn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Es=!1,bs=t}}function Is(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;bs=t}function xs(t){if(t!==bs)return!1;if(!Es)return Is(t),Es=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!mn(e,t.memoizedProps))for(e=ws;e;)Ts(t,e),e=wn(e.nextSibling);if(Is(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ws=wn(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ws=null}}else ws=bs?wn(t.stateNode.nextSibling):null;return!0}function Ns(){ws=bs=null,Es=!1}var ks=$.ReactCurrentOwner,As=!1;function Ps(t,e,n,r){e.child=null===t?Io(e,null,n,r):So(e,t.child,n,r)}function Os(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=Yo(t,e,n,r,o,i),null===t||As?(e.effectTag|=1,Ps(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ys(t,e,i))}function Rs(t,e,n,r,i,o){if(null===t){var s=n.type;return"function"!=typeof s||Su(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=xu(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Ds(t,e,s,r,i,o))}return s=t.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:Ur)(i,r)&&t.ref===e.ref)?Ys(t,e,o):(e.effectTag|=1,(t=Iu(s,r)).ref=e.ref,t.return=e,e.child=t)}function Ds(t,e,n,r,i,o){return null!==t&&Ur(t.memoizedProps,r)&&t.ref===e.ref&&(As=!1,i<o)?(e.expirationTime=t.expirationTime,Ys(t,e,o)):Ms(t,e,n,r,o)}function Ls(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Ms(t,e,n,r,i){var o=yi(n)?pi:hi.current;return o=di(e,o),no(e,i),n=Yo(t,e,n,r,o,i),null===t||As?(e.effectTag|=1,Ps(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ys(t,e,i))}function Fs(t,e,n,r,i){if(yi(n)){var o=!0;_i(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),mo(e,n,r),bo(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,c=n.contextType;"object"==typeof c&&null!==c?c=ro(c):c=di(e,c=yi(n)?pi:hi.current);var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof s.getSnapshotBeforeUpdate;h||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||u!==c)&&_o(e,s,r,c),io=!1;var f=e.memoizedState;s.state=f,lo(e,r,s,i),u=e.memoizedState,a!==r||f!==u||fi.current||io?("function"==typeof l&&(yo(e,n,l,r),u=e.memoizedState),(a=io||go(e,n,a,r,f,u,c))?(h||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(e.effectTag|=4)):("function"==typeof s.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):("function"==typeof s.componentDidMount&&(e.effectTag|=4),r=!1)}else s=e.stateNode,so(t,e),a=e.memoizedProps,s.props=e.type===e.elementType?a:Yi(e.type,a),u=s.context,"object"==typeof(c=n.contextType)&&null!==c?c=ro(c):c=di(e,c=yi(n)?pi:hi.current),(h="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||u!==c)&&_o(e,s,r,c),io=!1,u=e.memoizedState,s.state=u,lo(e,r,s,i),f=e.memoizedState,a!==r||u!==f||fi.current||io?("function"==typeof l&&(yo(e,n,l,r),f=e.memoizedState),(l=io||go(e,n,a,r,u,f,c))?(h||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof s.componentDidUpdate&&(e.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),s.props=r,s.state=f,s.context=c,r=l):("function"!=typeof s.componentDidUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return js(t,e,n,r,o,i)}function js(t,e,n,r,i,o){Ls(t,e);var s=0!=(64&e.effectTag);if(!r&&!s)return i&&bi(e,n,!1),Ys(t,e,o);r=e.stateNode,ks.current=e;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&s?(e.child=So(e,t.child,null,o),e.child=So(e,null,a,o)):Ps(t,e,a,o),e.memoizedState=r.state,i&&bi(e,n,!0),e.child}function Us(t){var e=t.stateNode;e.pendingContext?gi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&gi(0,e.context,!1),Oo(t,e.containerInfo)}var Vs,qs,Bs,Ws={dehydrated:null,retryTime:0};function zs(t,e,n){var r,i=e.mode,o=e.pendingProps,s=Mo.current,a=!1;if((r=0!=(64&e.effectTag))||(r=0!=(2&s)&&(null===t||null!==t.memoizedState)),r?(a=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),ci(Mo,1&s),null===t){if(void 0!==o.fallback&&Ss(e),a){if(a=o.fallback,(o=Nu(null,i,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Nu(a,i,n,null)).return=e,o.sibling=n,e.memoizedState=Ws,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Io(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,a){if(o=o.fallback,(n=Iu(t,t.pendingProps)).return=e,0==(2&e.mode)&&(a=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=a;null!==a;)a.return=n,a=a.sibling;return(i=Iu(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Ws,e.child=n,i}return n=So(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,a){if(a=o.fallback,(o=Nu(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Nu(a,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Ws,e.child=o,n}return e.memoizedState=null,e.child=So(e,t,o.children,n)}function Hs(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function Qs(t,e,n,r,i,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailExpiration=0,s.tailMode=i,s.lastEffect=o)}function Gs(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ps(t,e,r.children,n),0!=(2&(r=Mo.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Hs(t,n);else if(19===t.tag)Hs(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ci(Mo,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Fo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qs(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Fo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qs(e,!0,n,null,o,e.lastEffect);break;case"together":Qs(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Ys(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&su(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Iu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Iu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ks(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $s(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return yi(e.type)&&vi(),null;case 3:return Ro(),ui(fi),ui(hi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!xs(e)||(e.effectTag|=4),null;case 5:Lo(e),n=Po(Ao.current);var o=e.type;if(null!==t&&null!=e.stateNode)qs(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(s(166));return null}if(t=Po(No.current),xs(e)){r=e.stateNode,o=e.type;var a=e.memoizedProps;switch(r[Cn]=e,r[Sn]=a,o){case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(t=0;t<$t.length;t++)Ge($t[t],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"form":Ge("reset",r),Ge("submit",r);break;case"details":Ge("toggle",r);break;case"input":Tt(r,a),Ge("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ge("invalid",r),un(n,"onChange");break;case"textarea":Pt(r,a),Ge("invalid",r),un(n,"onChange")}for(var u in on(o,a),t=null,a)if(a.hasOwnProperty(u)){var c=a[u];"children"===u?"string"==typeof c?r.textContent!==c&&(t=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(t=["children",""+c]):C.hasOwnProperty(u)&&null!=c&&un(n,u)}switch(o){case"input":bt(r),It(r,a,!0);break;case"textarea":bt(r),Rt(r);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(r.onclick=cn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===an&&(t=Mt(o)),t===an?"script"===o?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[Cn]=e,t[Sn]=r,Vs(t,e),e.stateNode=t,u=sn(o,r),o){case"iframe":case"object":case"embed":Ge("load",t),c=r;break;case"video":case"audio":for(c=0;c<$t.length;c++)Ge($t[c],t);c=r;break;case"source":Ge("error",t),c=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),c=r;break;case"form":Ge("reset",t),Ge("submit",t),c=r;break;case"details":Ge("toggle",t),c=r;break;case"input":Tt(t,r),c=Et(t,r),Ge("invalid",t),un(n,"onChange");break;case"option":c=Nt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Ge("invalid",t),un(n,"onChange");break;case"textarea":Pt(t,r),c=At(t,r),Ge("invalid",t),un(n,"onChange");break;default:c=r}on(o,c);var l=c;for(a in l)if(l.hasOwnProperty(a)){var h=l[a];"style"===a?nn(t,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&Ut(t,h):"children"===a?"string"==typeof h?("textarea"!==o||""!==h)&&Vt(t,h):"number"==typeof h&&Vt(t,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(C.hasOwnProperty(a)?null!=h&&un(n,a):null!=h&&X(t,a,h,u))}switch(o){case"input":bt(t),It(t,r,!1);break;case"textarea":bt(t),Rt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+mt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?kt(t,!!r.multiple,n,!1):null!=r.defaultValue&&kt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof c.onClick&&(t.onclick=cn)}gn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Bs(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(s(166));n=Po(Ao.current),Po(No.current),xs(e)?(n=e.stateNode,r=e.memoizedProps,n[Cn]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Cn]=e,e.stateNode=n)}return null;case 13:return ui(Mo),r=e.memoizedState,0!=(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&xs(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(a=e.firstEffect)?(e.firstEffect=o,o.nextEffect=a):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&Mo.current)?xa===ba&&(xa=wa):(xa!==ba&&xa!==wa||(xa=Ea),0!==Oa&&null!==Ca&&(Ru(Ca,Ia),Du(Ca,Oa)))),(n||r)&&(e.effectTag|=4),null);case 4:return Ro(),null;case 10:return to(e),null;case 17:return yi(e.type)&&vi(),null;case 19:if(ui(Mo),null===(r=e.memoizedState))return null;if(o=0!=(64&e.effectTag),null===(a=r.rendering)){if(o)Ks(r,!1);else if(xa!==ba||null!==t&&0!=(64&t.effectTag))for(a=e.child;null!==a;){if(null!==(t=Fo(a))){for(e.effectTag|=64,Ks(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)a=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,a=t.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),r=r.sibling;return ci(Mo,1&Mo.current|2),e.child}a=a.sibling}}else{if(!o)if(null!==(t=Fo(a))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Ks(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Ks(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(a.sibling=e.child,e.child=a):(null!==(n=r.last)?n.sibling=a:e.child=a,r.last=a)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ui()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,e=Mo.current,ci(Mo,o?1&e|2:1&e),n):null}throw Error(s(156,e.tag))}function Xs(t){switch(t.tag){case 1:yi(t.type)&&vi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Ro(),ui(fi),ui(hi),0!=(64&(e=t.effectTag)))throw Error(s(285));return t.effectTag=-4097&e|64,t;case 5:return Lo(t),null;case 13:return ui(Mo),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ui(Mo),null;case 4:return Ro(),null;case 10:return to(t),null;default:return null}}function Js(t,e){return{value:t,source:e,stack:gt(e)}}Vs=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qs=function(t,e,n,r,o){var s=t.memoizedProps;if(s!==r){var a,u,c=e.stateNode;switch(Po(No.current),t=null,n){case"input":s=Et(c,s),r=Et(c,r),t=[];break;case"option":s=Nt(c,s),r=Nt(c,r),t=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":s=At(c,s),r=At(c,r),t=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(c.onclick=cn)}for(a in on(n,r),n=null,s)if(!r.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(u in c=s[a])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(C.hasOwnProperty(a)?t||(t=[]):(t=t||[]).push(a,null));for(a in r){var l=r[a];if(c=null!=s?s[a]:void 0,r.hasOwnProperty(a)&&l!==c&&(null!=l||null!=c))if("style"===a)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(t||(t=[]),t.push(a,n)),n=l;else"dangerouslySetInnerHTML"===a?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(a,l)):"children"===a?c===l||"string"!=typeof l&&"number"!=typeof l||(t=t||[]).push(a,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(C.hasOwnProperty(a)?(null!=l&&un(o,a),t||c===l||(t=[])):(t=t||[]).push(a,l))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Bs=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var Zs="function"==typeof WeakSet?WeakSet:Set;function ta(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=gt(n)),null!==n&&vt(n.type),e=e.value,null!==t&&1===t.tag&&vt(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function ea(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){mu(t,e)}else e.current=null}function na(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Yi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(s(163))}function ra(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function ia(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function oa(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void ia(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:Yi(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&gn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Me(n)))));case 19:case 17:case 20:case 21:return}throw Error(s(163))}function sa(t,e,n){switch("function"==typeof Eu&&Eu(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Bi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(t){mu(i,t)}}t=t.next}while(t!==r)}))}break;case 1:ea(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){mu(t,e)}}(e,n);break;case 5:ea(e);break;case 4:la(t,e,n)}}function aa(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&aa(e)}function ua(t){return 5===t.tag||3===t.tag||4===t.tag}function ca(t){t:{for(var e=t.return;null!==e;){if(ua(e)){var n=e;break t}e=e.return}throw Error(s(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(Vt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ua(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function la(t,e,n){for(var r,i,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,l=n,h=c;;)if(sa(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break t;for(;null===h.sibling;){if(null===h.return||h.return===c)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(sa(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ha(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void ra(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Sn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&Ct(n,r),sn(t,i),e=sn(t,r),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];"style"===a?nn(n,u):"dangerouslySetInnerHTML"===a?Ut(n,u):"children"===a?Vt(n,u):X(n,a,u,e)}switch(t){case"input":St(n,r);break;case"textarea":Ot(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?kt(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?kt(n,!!r.multiple,r.defaultValue,!0):kt(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Me(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Da=Ui()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=null!=(i=t.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void fa(e);case 19:return void fa(e);case 17:return}throw Error(s(163))}function fa(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Zs),e.forEach((function(e){var r=bu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var pa="function"==typeof WeakMap?WeakMap:Map;function da(t,e,n){(n=ao(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ma||(Ma=!0,Fa=r),ta(t,e)},n}function ya(t,e,n){(n=ao(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return ta(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===ja?ja=new Set([this]):ja.add(this),ta(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var va,ga=Math.ceil,ma=$.ReactCurrentDispatcher,_a=$.ReactCurrentOwner,ba=0,wa=3,Ea=4,Ta=0,Ca=null,Sa=null,Ia=0,xa=ba,Na=null,ka=1073741823,Aa=1073741823,Pa=null,Oa=0,Ra=!1,Da=0,La=null,Ma=!1,Fa=null,ja=null,Ua=!1,Va=null,qa=90,Ba=null,Wa=0,za=null,Ha=0;function Qa(){return 0!=(48&Ta)?1073741821-(Ui()/10|0):0!==Ha?Ha:Ha=1073741821-(Ui()/10|0)}function Ga(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=Vi();if(0==(4&e))return 99===r?1073741823:1073741822;if(0!=(16&Ta))return Ia;if(null!==n)t=Gi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Gi(t,150,100);break;case 97:case 96:t=Gi(t,5e3,250);break;case 95:t=2;break;default:throw Error(s(326))}return null!==Ca&&t===Ia&&--t,t}function Ya(t,e){if(50<Wa)throw Wa=0,za=null,Error(s(185));if(null!==(t=Ka(t,e))){var n=Vi();1073741823===e?0!=(8&Ta)&&0==(48&Ta)?Za(t):(Xa(t),0===Ta&&Hi()):Xa(t),0==(4&Ta)||98!==n&&99!==n||(null===Ba?Ba=new Map([[t,e]]):(void 0===(n=Ba.get(t))||n>e)&&Ba.set(t,e))}}function Ka(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ca===i&&(su(e),xa===Ea&&Ru(i,Ia)),Du(i,e)),i}function $a(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Ou(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Xa(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=zi(Za.bind(null,t));else{var e=$a(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Qa();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Oi&&Ti(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?zi(Za.bind(null,t)):Wi(r,Ja.bind(null,t),{timeout:10*(1073741821-e)-Ui()}),t.callbackNode=e}}}function Ja(t,e){if(Ha=0,e)return Lu(t,e=Qa()),Xa(t),null;var n=$a(t);if(0!==n){if(e=t.callbackNode,0!=(48&Ta))throw Error(s(327));if(yu(),t===Ca&&n===Ia||nu(t,n),null!==Sa){var r=Ta;Ta|=16;for(var i=iu();;)try{uu();break}catch(e){ru(t,e)}if(Zi(),Ta=r,ma.current=i,1===xa)throw e=Na,nu(t,n),Ru(t,n),Xa(t),e;if(null===Sa)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=xa,Ca=null,r){case ba:case 1:throw Error(s(345));case 2:Lu(t,2<n?2:n);break;case wa:if(Ru(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),1073741823===ka&&10<(i=Da+500-Ui())){if(Ra){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,nu(t,n);break}}if(0!==(o=$a(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=_n(fu.bind(null,t),i);break}fu(t);break;case Ea:if(Ru(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),Ra&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,nu(t,n);break}if(0!==(i=$a(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==Aa?r=10*(1073741821-Aa)-Ui():1073741823===ka?r=0:(r=10*(1073741821-ka)-5e3,0>(r=(i=Ui())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ga(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=_n(fu.bind(null,t),r);break}fu(t);break;case 5:if(1073741823!==ka&&null!==Pa){o=ka;var a=Pa;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=Ui()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Ru(t,n),t.timeoutHandle=_n(fu.bind(null,t),r);break}}fu(t);break;default:throw Error(s(329))}if(Xa(t),t.callbackNode===e)return Ja.bind(null,t)}}return null}function Za(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!=(48&Ta))throw Error(s(327));if(yu(),t===Ca&&e===Ia||nu(t,e),null!==Sa){var n=Ta;Ta|=16;for(var r=iu();;)try{au();break}catch(e){ru(t,e)}if(Zi(),Ta=n,ma.current=r,1===xa)throw n=Na,nu(t,e),Ru(t,e),Xa(t),n;if(null!==Sa)throw Error(s(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Ca=null,fu(t),Xa(t)}return null}function tu(t,e){var n=Ta;Ta|=1;try{return t(e)}finally{0===(Ta=n)&&Hi()}}function eu(t,e){var n=Ta;Ta&=-2,Ta|=8;try{return t(e)}finally{0===(Ta=n)&&Hi()}}function nu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,bn(n)),null!==Sa)for(n=Sa.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&vi();break;case 3:Ro(),ui(fi),ui(hi);break;case 5:Lo(r);break;case 4:Ro();break;case 13:case 19:ui(Mo);break;case 10:to(r)}n=n.return}Ca=t,Sa=Iu(t.current,null),Ia=e,xa=ba,Na=null,Aa=ka=1073741823,Pa=null,Oa=0,Ra=!1}function ru(t,e){for(;;){try{if(Zi(),Uo.current=vs,Ho)for(var n=Bo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(qo=0,zo=Wo=Bo=null,Ho=!1,null===Sa||null===Sa.return)return xa=1,Na=e,Sa=null;t:{var i=t,o=Sa.return,s=Sa,a=e;if(e=Ia,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"==typeof a&&"function"==typeof a.then){var u=a;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.expirationTime=c.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var l=0!=(1&Mo.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!l)}}if(f){var y=h.updateQueue;if(null===y){var v=new Set;v.add(u),h.updateQueue=v}else y.add(u);if(0==(2&h.mode)){if(h.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=ao(1073741823,null);g.tag=2,uo(s,g)}s.expirationTime=1073741823;break t}a=void 0,s=e;var m=i.pingCache;if(null===m?(m=i.pingCache=new pa,a=new Set,m.set(u,a)):void 0===(a=m.get(u))&&(a=new Set,m.set(u,a)),!a.has(s)){a.add(s);var _=_u.bind(null,i,u,s);u.then(_,_)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);a=Error((vt(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+gt(s))}5!==xa&&(xa=2),a=Js(a,s),h=o;do{switch(h.tag){case 3:u=a,h.effectTag|=4096,h.expirationTime=e,co(h,da(h,u,e));break t;case 1:u=a;var b=h.type,w=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof b.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===ja||!ja.has(w)))){h.effectTag|=4096,h.expirationTime=e,co(h,ya(h,u,e));break t}}h=h.return}while(null!==h)}Sa=lu(Sa)}catch(t){e=t;continue}break}}function iu(){var t=ma.current;return ma.current=vs,null===t?vs:t}function ou(t,e){t<ka&&2<t&&(ka=t),null!==e&&t<Aa&&2<t&&(Aa=t,Pa=e)}function su(t){t>Oa&&(Oa=t)}function au(){for(;null!==Sa;)Sa=cu(Sa)}function uu(){for(;null!==Sa&&!Ri();)Sa=cu(Sa)}function cu(t){var e=va(t.alternate,t,Ia);return t.memoizedProps=t.pendingProps,null===e&&(e=lu(t)),_a.current=null,e}function lu(t){Sa=t;do{var e=Sa.alternate;if(t=Sa.return,0==(2048&Sa.effectTag)){if(e=$s(e,Sa,Ia),1===Ia||1!==Sa.childExpirationTime){for(var n=0,r=Sa.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Sa.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Sa.firstEffect),null!==Sa.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Sa.firstEffect),t.lastEffect=Sa.lastEffect),1<Sa.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Sa:t.firstEffect=Sa,t.lastEffect=Sa))}else{if(null!==(e=Xs(Sa)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Sa.sibling))return e;Sa=t}while(null!==Sa);return xa===ba&&(xa=5),null}function hu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function fu(t){var e=Vi();return Bi(99,pu.bind(null,t,e)),null}function pu(t,e){do{yu()}while(null!==Va);if(0!=(48&Ta))throw Error(s(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=hu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Ca&&(Sa=Ca=null,Ia=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ta;Ta|=32,_a.current=null,yn=Qe;var a=pn();if(dn(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else t:{var c=(u=(u=a.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(t){u=null;break t}var f=0,p=-1,d=-1,y=0,v=0,g=a,m=null;e:for(;;){for(var _;g!==u||0!==l&&3!==g.nodeType||(p=f+l),g!==h||0!==c&&3!==g.nodeType||(d=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(_=g.firstChild);)m=g,g=_;for(;;){if(g===a)break e;if(m===u&&++y===l&&(p=f),m===h&&++v===c&&(d=f),null!==(_=g.nextSibling))break;m=(g=m).parentNode}g=_}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;vn={activeElementDetached:null,focusedElem:a,selectionRange:u},Qe=!1,La=i;do{try{du()}catch(t){if(null===La)throw Error(s(330));mu(La,t),La=La.nextEffect}}while(null!==La);La=i;do{try{for(a=t,u=e;null!==La;){var b=La.effectTag;if(16&b&&Vt(La.stateNode,""),128&b){var w=La.alternate;if(null!==w){var E=w.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(1038&b){case 2:ca(La),La.effectTag&=-3;break;case 6:ca(La),La.effectTag&=-3,ha(La.alternate,La);break;case 1024:La.effectTag&=-1025;break;case 1028:La.effectTag&=-1025,ha(La.alternate,La);break;case 4:ha(La.alternate,La);break;case 8:la(a,l=La,u),aa(l)}La=La.nextEffect}}catch(t){if(null===La)throw Error(s(330));mu(La,t),La=La.nextEffect}}while(null!==La);if(E=vn,w=pn(),b=E.focusedElem,u=E.selectionRange,w!==b&&b&&b.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==u&&dn(b)&&(w=u.start,void 0===(E=u.end)&&(E=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(E,b.value.length)):(E=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(E=E.getSelection(),l=b.textContent.length,a=Math.min(u.start,l),u=void 0===u.end?a:Math.min(u.end,l),!E.extend&&a>u&&(l=u,u=a,a=l),l=fn(b,a),h=fn(b,u),l&&h&&(1!==E.rangeCount||E.anchorNode!==l.node||E.anchorOffset!==l.offset||E.focusNode!==h.node||E.focusOffset!==h.offset)&&((w=w.createRange()).setStart(l.node,l.offset),E.removeAllRanges(),a>u?(E.addRange(w),E.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),E.addRange(w))))),w=[];for(E=b;E=E.parentNode;)1===E.nodeType&&w.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(E=w[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Qe=!!yn,vn=yn=null,t.current=n,La=i;do{try{for(b=t;null!==La;){var T=La.effectTag;if(36&T&&oa(b,La.alternate,La),128&T){w=void 0;var C=La.ref;if(null!==C){var S=La.stateNode;switch(La.tag){case 5:w=S;break;default:w=S}"function"==typeof C?C(w):C.current=w}}La=La.nextEffect}}catch(t){if(null===La)throw Error(s(330));mu(La,t),La=La.nextEffect}}while(null!==La);La=null,Di(),Ta=o}else t.current=n;if(Ua)Ua=!1,Va=t,qa=e;else for(La=i;null!==La;)e=La.nextEffect,La.nextEffect=null,La=e;if(0===(e=t.firstPendingTime)&&(ja=null),1073741823===e?t===za?Wa++:(Wa=0,za=t):Wa=0,"function"==typeof wu&&wu(n.stateNode,r),Xa(t),Ma)throw Ma=!1,t=Fa,Fa=null,t;return 0!=(8&Ta)||Hi(),null}function du(){for(;null!==La;){var t=La.effectTag;0!=(256&t)&&na(La.alternate,La),0==(512&t)||Ua||(Ua=!0,Wi(97,(function(){return yu(),null}))),La=La.nextEffect}}function yu(){if(90!==qa){var t=97<qa?97:qa;return qa=90,Bi(t,vu)}}function vu(){if(null===Va)return!1;var t=Va;if(Va=null,0!=(48&Ta))throw Error(s(331));var e=Ta;for(Ta|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:ra(5,n),ia(5,n)}}catch(e){if(null===t)throw Error(s(330));mu(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return Ta=e,Hi(),!0}function gu(t,e,n){uo(t,e=da(t,e=Js(n,e),1073741823)),null!==(t=Ka(t,1073741823))&&Xa(t)}function mu(t,e){if(3===t.tag)gu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){gu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ja||!ja.has(r))){uo(n,t=ya(n,t=Js(e,t),1073741823)),null!==(n=Ka(n,1073741823))&&Xa(n);break}}n=n.return}}function _u(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),Ca===t&&Ia===n?xa===Ea||xa===wa&&1073741823===ka&&Ui()-Da<500?nu(t,Ia):Ra=!0:Ou(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Xa(t)))}function bu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=Ga(e=Qa(),t,null)),null!==(t=Ka(t,e))&&Xa(t)}va=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||fi.current)As=!0;else{if(r<n){switch(As=!1,e.tag){case 3:Us(e),Ns();break;case 5:if(Do(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:yi(e.type)&&_i(e);break;case 4:Oo(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,ci(Ki,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?zs(t,e,n):(ci(Mo,1&Mo.current),null!==(e=Ys(t,e,n))?e.sibling:null);ci(Mo,1&Mo.current);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return Gs(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),ci(Mo,Mo.current),!r)return null}return Ys(t,e,n)}As=!1}}else As=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=di(e,hi.current),no(e,n),i=Yo(null,e,r,t,i,n),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,yi(r)){var o=!0;_i(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var a=r.getDerivedStateFromProps;"function"==typeof a&&yo(e,r,a,t),i.updater=vo,e.stateNode=i,i._reactInternalFiber=e,bo(e,r,t,n),e=js(null,e,r,!0,o,n)}else e.tag=0,Ps(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"==typeof t)return Su(t)?1:0;if(null!=t){if((t=t.$$typeof)===ut)return 11;if(t===ht)return 14}return 2}(i),t=Yi(i,t),o){case 0:e=Ms(null,e,i,t,n);break t;case 1:e=Fs(null,e,i,t,n);break t;case 11:e=Os(null,e,i,t,n);break t;case 14:e=Rs(null,e,i,Yi(i.type,t),r,n);break t}throw Error(s(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ms(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Fs(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 3:if(Us(e),r=e.updateQueue,null===t||null===r)throw Error(s(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,so(t,e),lo(e,r,null,n),(r=e.memoizedState.element)===i)Ns(),e=Ys(t,e,n);else{if((i=e.stateNode.hydrate)&&(ws=wn(e.stateNode.containerInfo.firstChild),bs=e,i=Es=!0),i)for(n=Io(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ps(t,e,r,n),Ns();e=e.child}return e;case 5:return Do(e),null===t&&Ss(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,mn(r,i)?a=null:null!==o&&mn(r,o)&&(e.effectTag|=16),Ls(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Ps(t,e,a,n),e=e.child),e;case 6:return null===t&&Ss(e),null;case 13:return zs(t,e,n);case 4:return Oo(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=So(e,null,r,n):Ps(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Os(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 7:return Ps(t,e,e.pendingProps,n),e.child;case 8:case 12:return Ps(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value;var u=e.type._context;if(ci(Ki,u._currentValue),u._currentValue=o,null!==a)if(u=a.value,0===(o=Fr(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!fi.current){e=Ys(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){a=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===u.tag&&((l=ao(n,null)).tag=2,uo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),eo(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else a=10===u.tag&&u.type===e.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===e){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}Ps(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.effectTag|=1,Ps(t,e,r,n),e.child;case 14:return o=Yi(i=e.type,e.pendingProps),Rs(t,e,i,o=Yi(i.type,o),r,n);case 15:return Ds(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,yi(r)?(t=!0,_i(e)):t=!1,no(e,n),mo(e,r,i),bo(e,r,i,n),js(null,e,r,!0,t,n);case 19:return Gs(t,e,n)}throw Error(s(156,e.tag))};var wu=null,Eu=null;function Tu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Cu(t,e,n,r){return new Tu(t,e,n,r)}function Su(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Iu(t,e){var n=t.alternate;return null===n?((n=Cu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xu(t,e,n,r,i,o){var a=2;if(r=t,"function"==typeof t)Su(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case nt:return Nu(n.children,i,o,e);case at:a=8,i|=7;break;case rt:a=8,i|=1;break;case it:return(t=Cu(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case ct:return(t=Cu(13,n,e,i)).type=ct,t.elementType=ct,t.expirationTime=o,t;case lt:return(t=Cu(19,n,e,i)).elementType=lt,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case ot:a=10;break t;case st:a=9;break t;case ut:a=11;break t;case ht:a=14;break t;case ft:a=16,r=null;break t;case pt:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Cu(a,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Nu(t,e,n,r){return(t=Cu(7,t,r,e)).expirationTime=n,t}function ku(t,e,n){return(t=Cu(6,t,null,e)).expirationTime=n,t}function Au(t,e,n){return(e=Cu(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ou(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Ru(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Du(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Lu(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Mu(t,e,n,r){var i=e.current,o=Qa(),a=fo.suspense;o=Ga(o,i,a);t:if(n){e:{if(Zt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(yi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(s(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=mi(n,c,u);break t}}n=u}else n=li;return null===e.context?e.context=n:e.pendingContext=n,(e=ao(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),Ya(i,o),o}function Fu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function ju(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Uu(t,e){ju(t,e),(t=t.alternate)&&ju(t,e)}function Vu(t,e,n){var r=new Pu(t,e,n=null!=n&&!0===n.hydrate),i=Cu(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,oo(i),t[In]=r.current,n&&0!==e&&function(t,e){var n=Jt(e);Ie.forEach((function(t){de(t,e,n)})),xe.forEach((function(t){de(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Bu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"==typeof i){var a=i;i=function(){var t=Fu(s);a.call(t)}}Mu(e,s,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Vu(t,0,e?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"==typeof i){var u=i;i=function(){var t=Fu(s);u.call(t)}}eu((function(){Mu(e,s,t,i)}))}return Fu(s)}function Wu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function zu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qu(e))throw Error(s(200));return Wu(t,e,null,n)}Vu.prototype.render=function(t){Mu(t,this._internalRoot,null,null)},Vu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Mu(null,t,null,(function(){e[In]=null}))},ye=function(t){if(13===t.tag){var e=Gi(Qa(),150,100);Ya(t,e),Uu(t,e)}},ve=function(t){13===t.tag&&(Ya(t,3),Uu(t,3))},ge=function(t){if(13===t.tag){var e=Qa();Ya(t,e=Ga(e,t,null)),Uu(t,e)}},N=function(t,e,n){switch(e){case"input":if(St(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=An(r);if(!i)throw Error(s(90));wt(r),St(r,i)}}}break;case"textarea":Ot(t,n);break;case"select":null!=(e=n.value)&&kt(t,!!n.multiple,e,!1)}},D=tu,L=function(t,e,n,r,i){var o=Ta;Ta|=4;try{return Bi(98,t.bind(null,e,n,r,i))}finally{0===(Ta=o)&&Hi()}},M=function(){0==(49&Ta)&&(function(){if(null!==Ba){var t=Ba;Ba=null,t.forEach((function(t,e){Lu(e,t),Xa(e)})),Hi()}}(),yu())},F=function(t,e){var n=Ta;Ta|=2;try{return t(e)}finally{0===(Ta=n)&&Hi()}};var Hu,Qu,Gu={Events:[Nn,kn,An,I,T,Fn,function(t){ie(t,Mn)},O,R,Xe,ae,yu,{current:!1}]};Qu=(Hu={findFiberByHostInstance:xn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);wu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},Eu=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(i({},Hu,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return Qu?Qu(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gu,e.createPortal=zu,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"==typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!=(48&Ta))throw Error(s(187));var n=Ta;Ta|=1;try{return Bi(99,t.bind(null,e))}finally{Ta=n,Hi()}},e.hydrate=function(t,e,n){if(!qu(e))throw Error(s(200));return Bu(null,t,e,!0,n)},e.render=function(t,e,n){if(!qu(e))throw Error(s(200));return Bu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!qu(t))throw Error(s(40));return!!t._reactRootContainer&&(eu((function(){Bu(null,null,t,!1,(function(){t._reactRootContainer=null,t[In]=null}))})),!0)},e.unstable_batchedUpdates=tu,e.unstable_createPortal=function(t,e){return zu(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qu(n))throw Error(s(200));if(null==t||void 0===t._reactInternalFiber)throw Error(s(38));return Bu(t,e,n,!1,r)},e.version="16.13.1"},function(t,e,n){"use strict";t.exports=n(41)},function(t,e,n){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,i,o,s,a;if("undefined"==typeof window||"function"!=typeof MessageChannel){var u=null,c=null,l=function(){if(null!==u)try{var t=e.unstable_now();u(!0,t),u=null}catch(t){throw setTimeout(l,0),t}},h=Date.now();e.unstable_now=function(){return Date.now()-h},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(l,0))},i=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},s=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,d=window.setTimeout,y=window.clearTimeout;if("undefined"!=typeof console){var v=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof f&&"function"==typeof f.now)e.unstable_now=function(){return f.now()};else{var g=p.now();e.unstable_now=function(){return p.now()-g}}var m=!1,_=null,b=-1,w=5,E=0;s=function(){return e.unstable_now()>=E},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<t?Math.floor(1e3/t):5};var T=new MessageChannel,C=T.port2;T.port1.onmessage=function(){if(null!==_){var t=e.unstable_now();E=t+w;try{_(!0,t)?C.postMessage(null):(m=!1,_=null)}catch(t){throw C.postMessage(null),t}}else m=!1},r=function(t){_=t,m||(m=!0,C.postMessage(null))},i=function(t,n){b=d((function(){t(e.unstable_now())}),n)},o=function(){y(b),b=-1}}function S(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<N(i,e)))break t;t[r]=e,t[n]=i,n=r}}function I(t){return void 0===(t=t[0])?null:t}function x(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,s=t[o],a=o+1,u=t[a];if(void 0!==s&&0>N(s,n))void 0!==u&&0>N(u,s)?(t[r]=u,t[a]=n,r=a):(t[r]=s,t[o]=n,r=o);else{if(!(void 0!==u&&0>N(u,n)))break t;t[r]=u,t[a]=n,r=a}}}return e}return null}function N(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var k=[],A=[],P=1,O=null,R=3,D=!1,L=!1,M=!1;function F(t){for(var e=I(A);null!==e;){if(null===e.callback)x(A);else{if(!(e.startTime<=t))break;x(A),e.sortIndex=e.expirationTime,S(k,e)}e=I(A)}}function j(t){if(M=!1,F(t),!L)if(null!==I(k))L=!0,r(U);else{var e=I(A);null!==e&&i(j,e.startTime-t)}}function U(t,n){L=!1,M&&(M=!1,o()),D=!0;var r=R;try{for(F(n),O=I(k);null!==O&&(!(O.expirationTime>n)||t&&!s());){var a=O.callback;if(null!==a){O.callback=null,R=O.priorityLevel;var u=a(O.expirationTime<=n);n=e.unstable_now(),"function"==typeof u?O.callback=u:O===I(k)&&x(k),F(n)}else x(k);O=I(k)}if(null!==O)var c=!0;else{var l=I(A);null!==l&&i(j,l.startTime-n),c=!1}return c}finally{O=null,R=r,D=!1}}function V(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){L||D||(L=!0,r(U))},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return I(k)},e.unstable_next=function(t){switch(R){case 1:case 2:case 3:var e=3;break;default:e=R}var n=R;R=e;try{return t()}finally{R=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=q,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=R;R=t;try{return e()}finally{R=n}},e.unstable_scheduleCallback=function(t,n,s){var a=e.unstable_now();if("object"==typeof s&&null!==s){var u=s.delay;u="number"==typeof u&&0<u?a+u:a,s="number"==typeof s.timeout?s.timeout:V(t)}else s=V(t),u=a;return t={id:P++,callback:n,priorityLevel:t,startTime:u,expirationTime:s=u+s,sortIndex:-1},u>a?(t.sortIndex=u,S(A,t),null===I(k)&&t===I(A)&&(M?o():M=!0,i(j,u-a))):(t.sortIndex=s,S(k,t),L||D||(L=!0,r(U))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();F(t);var n=I(k);return n!==O&&null!==O&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<O.expirationTime||s()},e.unstable_wrapCallback=function(t){var e=R;return function(){var n=R;R=e;try{return t.apply(this,arguments)}finally{R=n}}}},function(t,e,n){"use strict";n.r(e);var r=n(21),i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},o=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return i(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}};var s=o(i),a=s.right,u=(s.left,a);var c=Array.prototype,l=(c.slice,c.map,Math.sqrt(50)),h=Math.sqrt(10),f=Math.sqrt(2),p=function(t,e,n){var r,i,o,s,a=-1;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(s=d(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(i=Math.ceil(e-t+1));++a<i;)o[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(i=Math.ceil(t-e+1));++a<i;)o[a]=(t-a)/s;return r&&o.reverse(),o};function d(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=l?10:o>=h?5:o>=f?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=l?10:o>=h?5:o>=f?2:1)}function y(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=l?i*=10:o>=h?i*=5:o>=f&&(i*=2),e<t?-i:i}var v=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},g=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r};Array.prototype.slice;var m={value:function(){}};function _(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new b(r)}function b(t){this._=t}function w(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function E(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function T(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=m,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}b.prototype=_.prototype={constructor:b,on:function(t,e){var n,r=this._,i=w(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=T(r[n],t.name,e);else if(null==e)for(n in r)r[n]=T(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=E(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new b(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var C=_;function S(){}var I=function(t){return null==t?S:function(){return this.querySelector(t)}};function x(){return[]}var N=function(t){return null==t?x:function(){return this.querySelectorAll(t)}},k=function(t){return function(){return this.matches(t)}},A=function(t){return new Array(t.length)};function P(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}P.prototype={constructor:P,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function O(t,e,n,r,i,o){for(var s,a=0,u=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new P(t,o[a]);for(;a<u;++a)(s=e[a])&&(i[a]=s)}function R(t,e,n,r,i,o,s){var a,u,c,l={},h=e.length,f=o.length,p=new Array(h);for(a=0;a<h;++a)(u=e[a])&&(p[a]=c="$"+s.call(u,u.__data__,a,e),c in l?i[a]=u:l[c]=u);for(a=0;a<f;++a)(u=l[c="$"+s.call(t,o[a],a,o)])?(r[a]=u,u.__data__=o[a],l[c]=null):n[a]=new P(t,o[a]);for(a=0;a<h;++a)(u=e[a])&&l[p[a]]===u&&(i[a]=u)}function D(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var L="http://www.w3.org/1999/xhtml",M={svg:"http://www.w3.org/2000/svg",xhtml:L,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},F=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),M.hasOwnProperty(e)?{space:M[e],local:t}:t};function j(t){return function(){this.removeAttribute(t)}}function U(t){return function(){this.removeAttributeNS(t.space,t.local)}}function V(t,e){return function(){this.setAttribute(t,e)}}function q(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function B(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function W(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var z=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function H(t){return function(){this.style.removeProperty(t)}}function Q(t,e,n){return function(){this.style.setProperty(t,e,n)}}function G(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Y(t,e){return t.style.getPropertyValue(e)||z(t).getComputedStyle(t,null).getPropertyValue(e)}function K(t){return function(){delete this[t]}}function $(t,e){return function(){this[t]=e}}function X(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function J(t){return t.trim().split(/^|\s+/)}function Z(t){return t.classList||new tt(t)}function tt(t){this._node=t,this._names=J(t.getAttribute("class")||"")}function et(t,e){for(var n=Z(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function nt(t,e){for(var n=Z(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function rt(t){return function(){et(this,t)}}function it(t){return function(){nt(this,t)}}function ot(t,e){return function(){(e.apply(this,arguments)?et:nt)(this,t)}}tt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function st(){this.textContent=""}function at(t){return function(){this.textContent=t}}function ut(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ct(){this.innerHTML=""}function lt(t){return function(){this.innerHTML=t}}function ht(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ft(){this.nextSibling&&this.parentNode.appendChild(this)}function pt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===L&&e.documentElement.namespaceURI===L?e.createElement(t):e.createElementNS(n,t)}}function yt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var vt=function(t){var e=F(t);return(e.local?yt:dt)(e)};function gt(){return null}function mt(){var t=this.parentNode;t&&t.removeChild(this)}function _t(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var wt={},Et=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(wt={mouseenter:"mouseover",mouseleave:"mouseout"}));function Tt(t,e,n){return t=Ct(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Ct(t,e,n){return function(r){var i=Et;Et=r;try{t.call(this,this.__data__,e,n)}finally{Et=i}}}function St(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function It(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function xt(t,e,n){var r=wt.hasOwnProperty(t.type)?Tt:Ct;return function(i,o,s){var a,u=this.__on,c=r(e,o,s);if(u)for(var l=0,h=u.length;l<h;++l)if((a=u[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=n),void(a.value=e);this.addEventListener(t.type,c,n),a={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(a):this.__on=[a]}}function Nt(t,e,n){var r=z(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function kt(t,e){return function(){return Nt(this,t,e)}}function At(t,e){return function(){return Nt(this,t,e.apply(this,arguments))}}var Pt=[null];function Ot(t,e){this._groups=t,this._parents=e}function Rt(){return new Ot([[document.documentElement]],Pt)}Ot.prototype=Rt.prototype={constructor:Ot,select:function(t){"function"!=typeof t&&(t=I(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],u=a.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=a[l])&&(s=t.call(o,o.__data__,l,a))&&("__data__"in o&&(s.__data__=o.__data__),c[l]=s);return new Ot(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=N(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],u=a.length,c=0;c<u;++c)(s=a[c])&&(r.push(t.call(s,s.__data__,c,a)),i.push(s));return new Ot(r,i)},filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&u.push(o);return new Ot(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),l=-1,this.each((function(t){d[++l]=t})),d;var n,r=e?R:O,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var s=o.length,a=new Array(s),u=new Array(s),c=new Array(s),l=0;l<s;++l){var h=i[l],f=o[l],p=f.length,d=t.call(h,h&&h.__data__,l,i),y=d.length,v=u[l]=new Array(y),g=a[l]=new Array(y);r(h,f,v,g,c[l]=new Array(p),d,e);for(var m,_,b=0,w=0;b<y;++b)if(m=v[b]){for(b>=w&&(w=b+1);!(_=g[w])&&++w<y;);m._next=_||null}}return(a=new Ot(a,i))._enter=u,a._exit=c,a},enter:function(){return new Ot(this._enter||this._groups.map(A),this._parents)},exit:function(){return new Ot(this._exit||this._groups.map(A),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u,c=e[a],l=n[a],h=c.length,f=s[a]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;a<r;++a)s[a]=e[a];return new Ot(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=D);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],u=a.length,c=i[o]=new Array(u),l=0;l<u;++l)(s=a[l])&&(c[l]=s);c.sort(e)}return new Ot(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=F(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?U:j:"function"==typeof e?n.local?W:B:n.local?q:V)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?H:"function"==typeof e?G:Q)(t,e,null==n?"":n)):Y(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?K:"function"==typeof e?X:$)(t,e)):this.node()[t]},classed:function(t,e){var n=J(t+"");if(arguments.length<2){for(var r=Z(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?ot:e?rt:it)(n,e))},text:function(t){return arguments.length?this.each(null==t?st:("function"==typeof t?ut:at)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ct:("function"==typeof t?ht:lt)(t)):this.node().innerHTML},raise:function(){return this.each(ft)},lower:function(){return this.each(pt)},append:function(t){var e="function"==typeof t?t:vt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:vt(t),r=null==e?gt:"function"==typeof e?e:I(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(mt)},clone:function(t){return this.select(t?bt:_t)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=St(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?xt:It,null==n&&(n=!1),r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(r=0,u=a[c];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?At:kt)(t,e))}};var Dt=Rt,Lt=function(t){return"string"==typeof t?new Ot([[document.querySelector(t)]],[document.documentElement]):new Ot([[t]],Pt)};var Mt=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function Ft(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function jt(){}var Ut="\\s*([+-]?\\d+)\\s*",Vt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",qt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bt=/^#([0-9a-f]{3,8})$/,Wt=new RegExp("^rgb\\("+[Ut,Ut,Ut]+"\\)$"),zt=new RegExp("^rgb\\("+[qt,qt,qt]+"\\)$"),Ht=new RegExp("^rgba\\("+[Ut,Ut,Ut,Vt]+"\\)$"),Qt=new RegExp("^rgba\\("+[qt,qt,qt,Vt]+"\\)$"),Gt=new RegExp("^hsl\\("+[Vt,qt,qt]+"\\)$"),Yt=new RegExp("^hsla\\("+[Vt,qt,qt,Vt]+"\\)$"),Kt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function $t(){return this.rgb().formatHex()}function Xt(){return this.rgb().formatRgb()}function Jt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Bt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Zt(e):3===n?new re(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?te(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?te(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Wt.exec(t))?new re(e[1],e[2],e[3],1):(e=zt.exec(t))?new re(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ht.exec(t))?te(e[1],e[2],e[3],e[4]):(e=Qt.exec(t))?te(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Gt.exec(t))?ae(e[1],e[2]/100,e[3]/100,1):(e=Yt.exec(t))?ae(e[1],e[2]/100,e[3]/100,e[4]):Kt.hasOwnProperty(t)?Zt(Kt[t]):"transparent"===t?new re(NaN,NaN,NaN,0):null}function Zt(t){return new re(t>>16&255,t>>8&255,255&t,1)}function te(t,e,n,r){return r<=0&&(t=e=n=NaN),new re(t,e,n,r)}function ee(t){return t instanceof jt||(t=Jt(t)),t?new re((t=t.rgb()).r,t.g,t.b,t.opacity):new re}function ne(t,e,n,r){return 1===arguments.length?ee(t):new re(t,e,n,null==r?1:r)}function re(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ie(){return"#"+se(this.r)+se(this.g)+se(this.b)}function oe(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function se(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ae(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ce(t,e,n,r)}function ue(t){if(t instanceof ce)return new ce(t.h,t.s,t.l,t.opacity);if(t instanceof jt||(t=Jt(t)),!t)return new ce;if(t instanceof ce)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new ce(s,a,u,t.opacity)}function ce(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function le(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function he(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}Mt(jt,Jt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:$t,formatHex:$t,formatHsl:function(){return ue(this).formatHsl()},formatRgb:Xt,toString:Xt}),Mt(re,ne,Ft(jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new re(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new re(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ie,formatHex:ie,formatRgb:oe,toString:oe})),Mt(ce,(function(t,e,n,r){return 1===arguments.length?ue(t):new ce(t,e,n,null==r?1:r)}),Ft(jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ce(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ce(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new re(le(t>=240?t-240:t+120,i,r),le(t,i,r),le(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var fe=function(t){return function(){return t}};function pe(t,e){return function(n){return t+n*e}}function de(t){return 1==(t=+t)?ye:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):fe(isNaN(e)?n:e)}}function ye(t,e){var n=e-t;return n?pe(t,n):fe(isNaN(t)?e:t)}var ve=function t(e){var n=de(e);function r(t,e){var r=n((t=ne(t)).r,(e=ne(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=ye(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function ge(t){return function(e){var n,r,i=e.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=ne(e[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=t(o),s=t(s),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=a(t),r+""}}}ge((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return he((n-r/e)*e,s,i,o,a)}})),ge((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],a=t[(r+2)%e];return he((n-r/e)*e,i,o,s,a)}}));var me=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}};function _e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function be(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),s=new Array(r);for(n=0;n<i;++n)o[n]=ke(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<i;++n)s[n]=o[n](t);return s}}var we=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},Ee=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},Te=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=ke(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Ce=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Se=new RegExp(Ce.source,"g");var Ie,xe,Ne=function(t,e){var n,r,i,o=Ce.lastIndex=Se.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=Ce.exec(t))&&(r=Se.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:Ee(n,r)})),o=Se.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})},ke=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?fe(e):("number"===r?Ee:"string"===r?(n=Jt(e))?(e=n,ve):Ne:e instanceof Jt?ve:e instanceof Date?we:_e(e)?me:Array.isArray(e)?be:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Te:Ee)(t,e)},Ae=0,Pe=0,Oe=0,Re=0,De=0,Le=0,Me="object"==typeof performance&&performance.now?performance:Date,Fe="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function je(){return De||(Fe(Ue),De=Me.now()+Le)}function Ue(){De=0}function Ve(){this._call=this._time=this._next=null}function qe(t,e,n){var r=new Ve;return r.restart(t,e,n),r}function Be(){De=(Re=Me.now())+Le,Ae=Pe=0;try{!function(){je(),++Ae;for(var t,e=Ie;e;)(t=De-e._time)>=0&&e._call.call(null,t),e=e._next;--Ae}()}finally{Ae=0,function(){var t,e,n=Ie,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ie=e);xe=t,ze(r)}(),De=0}}function We(){var t=Me.now(),e=t-Re;e>1e3&&(Le-=e,Re=t)}function ze(t){Ae||(Pe&&(Pe=clearTimeout(Pe)),t-De>24?(t<1/0&&(Pe=setTimeout(Be,t-Me.now()-Le)),Oe&&(Oe=clearInterval(Oe))):(Oe||(Re=Me.now(),Oe=setInterval(We,1e3)),Ae=1,Fe(Be)))}Ve.prototype=qe.prototype={constructor:Ve,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?je():+n)+(null==e?0:+e),this._next||xe===this||(xe?xe._next=this:Ie=this,xe=this),this._call=t,this._time=n,ze()},stop:function(){this._call&&(this._call=null,this._time=1/0,ze())}};var He=function(t,e,n){var r=new Ve;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},Qe=C("start","end","cancel","interrupt"),Ge=[],Ye=function(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var c,l,h,f;if(1!==n.state)return a();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return He(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(He((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=f);r.length=l+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=qe((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Qe,tween:Ge,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function Ke(t,e){var n=Xe(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function $e(t,e){var n=Xe(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Xe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var Je,Ze,tn,en,nn=function(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}},rn=180/Math.PI,on={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},sn=function(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*rn,skewX:Math.atan(u)*rn,scaleX:s,scaleY:a}};function an(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],u=[];return o=t(o),s=t(s),function(t,r,i,o,s,a){if(t!==i||r!==o){var u=s.push("translate(",null,e,null,n);a.push({i:u-4,x:Ee(t,i)},{i:u-2,x:Ee(r,o)})}else(i||o)&&s.push("translate("+i+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Ee(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,s.rotate,a,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Ee(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,s.skewX,a,u),function(t,e,n,r,o,s){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Ee(t,n)},{i:a-2,x:Ee(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,u),o=s=null,function(t){for(var e,n=-1,r=u.length;++n<r;)a[(e=u[n]).i]=e.x(t);return a.join("")}}}var un=an((function(t){return"none"===t?on:(Je||(Je=document.createElement("DIV"),Ze=document.documentElement,tn=document.defaultView),Je.style.transform=t,t=tn.getComputedStyle(Ze.appendChild(Je),null).getPropertyValue("transform"),Ze.removeChild(Je),t=t.slice(7,-1).split(","),sn(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),cn=an((function(t){return null==t?on:(en||(en=document.createElementNS("http://www.w3.org/2000/svg","g")),en.setAttribute("transform",t),(t=en.transform.baseVal.consolidate())?(t=t.matrix,sn(t.a,t.b,t.c,t.d,t.e,t.f)):on)}),", ",")",")");function ln(t,e){var n,r;return function(){var i=$e(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function hn(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=$e(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function fn(t,e,n){var r=t._id;return t.each((function(){var t=$e(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Xe(t,r).value[e]}}var pn=function(t,e){var n;return("number"==typeof e?Ee:e instanceof Jt?ve:(n=Jt(e))?(e=n,ve):Ne)(t,e)};function dn(t){return function(){this.removeAttribute(t)}}function yn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vn(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function gn(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function mn(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttribute(t))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttribute(t)}}function _n(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttributeNS(t.space,t.local))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttributeNS(t.space,t.local)}}function bn(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function wn(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function En(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&wn(t,i)),n}return i._value=e,i}function Tn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&bn(t,i)),n}return i._value=e,i}function Cn(t,e){return function(){Ke(this,t).delay=+e.apply(this,arguments)}}function Sn(t,e){return e=+e,function(){Ke(this,t).delay=e}}function In(t,e){return function(){$e(this,t).duration=+e.apply(this,arguments)}}function xn(t,e){return e=+e,function(){$e(this,t).duration=e}}function Nn(t,e){if("function"!=typeof e)throw new Error;return function(){$e(this,t).ease=e}}function kn(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Ke:$e;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}var An=Dt.prototype.constructor;function Pn(t){return function(){this.style.removeProperty(t)}}function On(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Rn(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&On(t,o,n)),r}return o._value=e,o}function Dn(t){return function(e){this.textContent=t.call(this,e)}}function Ln(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Dn(r)),e}return r._value=t,r}var Mn=0;function Fn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function jn(){return++Mn}var Un=Dt.prototype;Fn.prototype=function(t){return Dt().transition(t)}.prototype={constructor:Fn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=I(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,u,c=r[s],l=c.length,h=o[s]=new Array(l),f=0;f<l;++f)(a=c[f])&&(u=t.call(a,a.__data__,f,c))&&("__data__"in a&&(u.__data__=a.__data__),h[f]=u,Ye(h[f],e,n,f,h,Xe(a,n)));return new Fn(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=N(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u,c=r[a],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var f,p=t.call(u,u.__data__,h,c),d=Xe(u,n),y=0,v=p.length;y<v;++y)(f=p[y])&&Ye(f,e,n,y,p,d);o.push(p),s.push(u)}return new Fn(o,s,e,n)},filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],c=0;c<a;++c)(o=s[c])&&t.call(o,o.__data__,c,s)&&u.push(o);return new Fn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u,c=e[a],l=n[a],h=c.length,f=s[a]=new Array(h),p=0;p<h;++p)(u=c[p]||l[p])&&(f[p]=u);for(;a<r;++a)s[a]=e[a];return new Fn(s,this._parents,this._name,this._id)},selection:function(){return new An(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=jn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,c=0;c<u;++c)if(s=a[c]){var l=Xe(s,e);Ye(s,t,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Fn(r,this._parents,t,n)},call:Un.call,nodes:Un.nodes,node:Un.node,size:Un.size,empty:Un.empty,each:Un.each,on:function(t,e){var n=this._id;return arguments.length<2?Xe(this.node(),n).on.on(t):this.each(kn(n,t,e))},attr:function(t,e){var n=F(t),r="transform"===n?cn:pn;return this.attrTween(t,"function"==typeof e?(n.local?_n:mn)(n,r,fn(this,"attr."+t,e)):null==e?(n.local?yn:dn)(n):(n.local?gn:vn)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=F(t);return this.tween(n,(r.local?En:Tn)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?un:pn;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=Y(this,t),s=(this.style.removeProperty(t),Y(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,Pn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var s=Y(this,t),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(t),u=a=Y(this,t)),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}(t,r,fn(this,"style."+t,e))).each(function(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var u=$e(this,t),c=u.on,l=null==u.value[s]?o||(o=Pn(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(a,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var s=Y(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Rn(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(fn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Ln(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Xe(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?ln:hn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Cn:Sn)(e,t)):Xe(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?In:xn)(e,t)):Xe(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Nn(e,t)):Xe(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},u={value:function(){0==--i&&o()}};n.each((function(){var n=$e(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),n.on=e}))}))}};var Vn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function qn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Vn.time=je(),Vn;return n}Dt.prototype.interrupt=function(t){return this.each((function(){nn(this,t)}))},Dt.prototype.transition=function(t){var e,n;t instanceof Fn?(e=t._id,t=t._name):(e=jn(),(n=Vn).time=je(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,c=0;c<u;++c)(s=a[c])&&Ye(s,t,e,c,a,n||qn(s,e));return new Fn(r,this._parents,t,e)};function Bn(t){return[+t[0],+t[1]]}function Wn(t){return[Bn(t[0]),Bn(t[1])]}["w","e"].map(zn),["n","s"].map(zn),["n","w","e","s","nw","ne","sw","se"].map(zn);function zn(t){return{type:t}}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var Hn=Math.PI,Qn=2*Hn,Gn=Qn-1e-6;function Yn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Kn(){return new Yn}Yn.prototype=Kn.prototype={constructor:Yn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,s=this._y1,a=n-t,u=r-e,c=o-t,l=s-e,h=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(l*a-u*c)>1e-6&&i){var f=n-o,p=r-s,d=a*a+u*u,y=f*f+p*p,v=Math.sqrt(d),g=Math.sqrt(h),m=i*Math.tan((Hn-Math.acos((d+h-y)/(2*v*g)))/2),_=m/g,b=m/v;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(e+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*f>c*p)+","+(this._x1=t+b*a)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(r),a=n*Math.sin(r),u=t+s,c=e+a,l=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Qn+Qn),h>Gn?this._+="A"+n+","+n+",0,1,"+l+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=Hn)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function $n(){}function Xn(t,e){var n=new $n;if(t instanceof $n)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var s in t)n.set(s,t[s]);return n}$n.prototype=Xn.prototype={constructor:$n,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Jn=Xn;function Zn(){}var tr=Jn.prototype;function er(t,e){var n=new Zn;if(t instanceof Zn)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}Zn.prototype=er.prototype={constructor:Zn,has:tr.has,add:function(t){return this["$"+(t+="")]=t,this},remove:tr.remove,clear:tr.clear,values:tr.keys,size:tr.size,empty:tr.empty,each:tr.each};Array.prototype.slice;var nr={},rr={};function ir(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function or(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function sr(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ar(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+sr(-e,6):e>9999?"+"+sr(e,6):sr(e,4))+"-"+sr(t.getUTCMonth()+1,2)+"-"+sr(t.getUTCDate(),2)+(o?"T"+sr(n,2)+":"+sr(r,2)+":"+sr(i,2)+"."+sr(o,3)+"Z":i?"T"+sr(n,2)+":"+sr(r,2)+":"+sr(i,2)+"Z":r||n?"T"+sr(n,2)+":"+sr(r,2)+"Z":"")}var ur=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,i=[],o=t.length,s=0,a=0,u=o<=0,c=!1;function l(){if(u)return rr;if(c)return c=!1,nr;var e,r,i=s;if(34===t.charCodeAt(i)){for(;s++<o&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(e=s)>=o?u=!0:10===(r=t.charCodeAt(s++))?c=!0:13===r&&(c=!0,10===t.charCodeAt(s)&&++s),t.slice(i+1,e-1).replace(/""/g,'"')}for(;s<o;){if(10===(r=t.charCodeAt(e=s++)))c=!0;else if(13===r)c=!0,10===t.charCodeAt(s)&&++s;else if(r!==n)continue;return t.slice(i,e)}return u=!0,t.slice(i,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(r=l())!==rr;){for(var h=[];r!==nr&&r!==rr;)h.push(r),r=l();e&&null==(h=e(h,a++))||i.push(h)}return i}function i(e,n){return e.map((function(e){return n.map((function(t){return s(e[t])})).join(t)}))}function o(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?ar(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,i,o=r(t,(function(t,r){if(n)return n(t,r-1);i=t,n=e?function(t,e){var n=ir(t);return function(r,i){return e(n(r),i,t)}}(t,e):ir(t)}));return o.columns=i||[],o},parseRows:r,format:function(e,n){return null==n&&(n=or(e)),[n.map(s).join(t)].concat(i(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=or(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:s}},cr=ur(","),lr=cr.parse,hr=(cr.parseRows,cr.format,cr.formatBody,cr.formatRows,cr.formatRow,cr.formatValue,ur("\t")),fr=hr.parse;hr.parseRows,hr.format,hr.formatBody,hr.formatRows,hr.formatRow,hr.formatValue;function pr(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var dr=function(t,e){return fetch(t,e).then(pr)};function yr(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),dr(e,n).then((function(e){return t(e,r)}))}}var vr=yr(lr);yr(fr);function gr(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,u,c,l,h,f,p=t._root,d={data:r},y=t._x0,v=t._y0,g=t._x1,m=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((c=e>=(o=(y+g)/2))?y=o:g=o,(l=n>=(s=(v+m)/2))?v=s:m=s,i=p,!(p=p[h=l<<1|c]))return i[h]=d,t;if(a=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===a&&n===u)return d.next=p,i?i[h]=d:t._root=d,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(y+g)/2))?y=o:g=o,(l=n>=(s=(v+m)/2))?v=s:m=s}while((h=l<<1|c)==(f=(u>=s)<<1|a>=o));return i[f]=p,i[h]=d,t}var mr=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function _r(t){return t[0]}function br(t){return t[1]}function wr(t,e,n){var r=new Er(null==e?_r:e,null==n?br:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Er(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Tr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Cr=wr.prototype=Er.prototype;Cr.copy=function(){var t,e,n=new Er(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Tr(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Tr(e));return n},Cr.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return gr(this.cover(e,n),e,n,t)},Cr.addAll=function(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),u=1/0,c=1/0,l=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>h&&(h=i));if(u>l||c>h)return this;for(this.cover(u,c).cover(l,h),n=0;n<o;++n)gr(this,s[n],a[n],t[n]);return this},Cr.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s,a,u=i-n,c=this._root;n>t||t>=i||r>e||e>=o;)switch(a=(e<r)<<1|t<n,(s=new Array(4))[a]=c,c=s,u*=2,a){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Cr.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Cr.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Cr.find=function(t,e,n){var r,i,o,s,a,u,c,l=this._x0,h=this._y0,f=this._x1,p=this._y1,d=[],y=this._root;for(y&&d.push(new mr(y,l,h,f,p)),null==n?n=1/0:(l=t-n,h=e-n,f=t+n,p=e+n,n*=n);u=d.pop();)if(!(!(y=u.node)||(i=u.x0)>f||(o=u.y0)>p||(s=u.x1)<l||(a=u.y1)<h))if(y.length){var v=(i+s)/2,g=(o+a)/2;d.push(new mr(y[3],v,g,s,a),new mr(y[2],i,g,v,a),new mr(y[1],v,o,s,g),new mr(y[0],i,o,v,g)),(c=(e>=g)<<1|t>=v)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-c],d[d.length-1-c]=u)}else{var m=t-+this._x.call(null,y.data),_=e-+this._y.call(null,y.data),b=m*m+_*_;if(b<n){var w=Math.sqrt(n=b);l=t-w,h=e-w,f=t+w,p=e+w,r=y.data}}return r},Cr.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,u,c,l,h,f,p=this._root,d=this._x0,y=this._y0,v=this._x1,g=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(a=(d+v)/2))?d=a:v=a,(l=s>=(u=(y+g)/2))?y=u:g=u,e=p,!(p=p[h=l<<1|c]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=i,this)},Cr.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Cr.root=function(){return this._root},Cr.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Cr.visit=function(t){var e,n,r,i,o,s,a=[],u=this._root;for(u&&a.push(new mr(u,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&u.length){var c=(r+o)/2,l=(i+s)/2;(n=u[3])&&a.push(new mr(n,c,l,o,s)),(n=u[2])&&a.push(new mr(n,r,l,c,s)),(n=u[1])&&a.push(new mr(n,c,i,o,l)),(n=u[0])&&a.push(new mr(n,r,i,c,l))}return this},Cr.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new mr(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,u=e.x1,c=e.y1,l=(s+u)/2,h=(a+c)/2;(o=i[0])&&n.push(new mr(o,s,a,l,h)),(o=i[1])&&n.push(new mr(o,l,a,u,h)),(o=i[2])&&n.push(new mr(o,s,h,l,c)),(o=i[3])&&n.push(new mr(o,l,h,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Cr.x=function(t){return arguments.length?(this._x=t,this):this._x},Cr.y=function(t){return arguments.length?(this._y=t,this):this._y};Math.PI,Math.sqrt(5);var Sr=function(){return Math.random()},Ir=(function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(Sr),function t(e){function n(t,n){var r,i;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*e()-1,o=2*e()-1,i=r*r+o*o}while(!i||i>1);return t+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=t,n}(Sr)),xr=(function t(e){function n(){var t=Ir.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(Sr),function t(e){function n(t){return function(){for(var n=0,r=0;r<t;++r)n+=e();return n}}return n.source=t,n}(Sr));(function t(e){function n(t){var n=xr.source(e)(t);return function(){return n()/t}}return n.source=t,n})(Sr),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(Sr);function Nr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var kr=Array.prototype,Ar=kr.map,Pr=kr.slice;var Or=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},Rr=function(t){return+t},Dr=[0,1];function Lr(t){return t}function Mr(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Fr(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function jr(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Mr(i,r),o=n(s,o)):(r=Mr(r,i),o=n(o,s)),function(t){return o(r(t))}}function Ur(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Mr(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(e){var n=u(t,e,1,r)-1;return o[n](i[n](e))}}function Vr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function qr(){var t,e,n,r,i,o,s=Dr,a=Dr,u=ke,c=Lr;function l(){return r=Math.min(s.length,a.length)>2?Ur:jr,i=o=null,h}function h(e){return isNaN(e=+e)?n:(i||(i=r(s.map(t),a,u)))(t(c(e)))}return h.invert=function(n){return c(e((o||(o=r(a,s.map(t),Ee)))(n)))},h.domain=function(t){return arguments.length?(s=Ar.call(t,Rr),c===Lr||(c=Fr(s)),l()):s.slice()},h.range=function(t){return arguments.length?(a=Pr.call(t),l()):a.slice()},h.rangeRound=function(t){return a=Pr.call(t),u=Or,l()},h.clamp=function(t){return arguments.length?(c=t?Fr(s):Lr,h):c!==Lr},h.interpolate=function(t){return arguments.length?(u=t,l()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}function Br(t,e){return qr()(t,e)}var Wr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zr(t){if(!(e=Wr.exec(t)))throw new Error("invalid format: "+t);var e;return new Hr({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Hr(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}zr.prototype=Hr.prototype,Hr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Qr,Gr,Yr,Kr,$r=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},Xr=function(t){return(t=$r(Math.abs(t)))?t[1]:NaN},Jr=function(t,e){var n=$r(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Zr={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Jr(100*t,e)},r:Jr,s:function(t,e){var n=$r(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Qr=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+$r(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},ti=function(t){return t},ei=Array.prototype.map,ni=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];Gr=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?ti:(e=ei.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],s=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),o.push(t.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?ti:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(ei.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=zr(t)).fill,n=t.align,h=t.sign,f=t.symbol,p=t.zero,d=t.width,y=t.comma,v=t.precision,g=t.trim,m=t.type;"n"===m?(y=!0,m="g"):Zr[m]||(void 0===v&&(v=12),g=!0,m="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var _="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===f?o:/[%p]/.test(m)?u:"",w=Zr[m],E=/[defgprs%]/.test(m);function T(t){var i,o,u,f=_,T=b;if("c"===m)T=w(t)+T,t="";else{var C=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),v),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),C&&0==+t&&"+"!==h&&(C=!1),f=(C?"("===h?h:c:"-"===h||"("===h?"":h)+f,T=("s"===m?ni[8+Qr/3]:"")+T+(C&&"("===h?")":""),E)for(i=-1,o=t.length;++i<o;)if(48>(u=t.charCodeAt(i))||u>57){T=(46===u?s+t.slice(i+1):t.slice(i))+T,t=t.slice(0,i);break}}y&&!p&&(t=r(t,1/0));var S=f.length+t.length+T.length,I=S<d?new Array(d-S+1).join(e):"";switch(y&&p&&(t=r(I+t,I.length?d-T.length:1/0),I=""),n){case"<":t=f+t+T+I;break;case"=":t=f+I+t+T;break;case"^":t=I.slice(0,S=I.length>>1)+f+t+T+I.slice(S);break;default:t=I+f+t+T}return a(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),T.toString=function(){return t+""},T}return{format:h,formatPrefix:function(t,e){var n=h(((t=zr(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Xr(e)/3))),i=Math.pow(10,-r),o=ni[8+r/3];return function(t){return n(i*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Yr=Gr.format,Kr=Gr.formatPrefix;var ri=function(t,e,n,r){var i,o=y(t,e,n);switch((r=zr(null==r?",f":r)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Xr(e)/3)))-Xr(Math.abs(t)))}(o,s))||(r.precision=i),Kr(r,s);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xr(e)-Xr(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Xr(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Yr(r)};function ii(t){var e=t.domain;return t.ticks=function(t){var n=e();return p(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return ri(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),o=0,s=i.length-1,a=i[o],u=i[s];return u<a&&(r=a,a=u,u=r,r=o,o=s,s=r),(r=d(a,u,n))>0?r=d(a=Math.floor(a/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=d(a=Math.ceil(a*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(a/r)*r,i[s]=Math.ceil(u/r)*r,e(i)):r<0&&(i[o]=Math.ceil(a*r)/r,i[s]=Math.floor(u*r)/r,e(i)),t},t}function oi(){var t=Br(Lr,Lr);return t.copy=function(){return Vr(t,oi())},Nr.apply(t,arguments),ii(t)}var si=new Date,ai=new Date;function ui(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var s,a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=function(n){return ui((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return si.setTime(+e),ai.setTime(+r),t(si),t(ai),Math.floor(n(si,ai))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var ci=ui((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));ci.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ui((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var li=ci,hi=(ci.range,ui((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})));hi.range;function fi(t){return ui((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var pi=fi(0),di=fi(1),yi=fi(2),vi=fi(3),gi=fi(4),mi=fi(5),_i=fi(6),bi=(pi.range,di.range,yi.range,vi.range,gi.range,mi.range,_i.range,ui((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),wi=bi,Ei=(bi.range,ui((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),Ti=(Ei.range,ui((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),Ci=(Ti.range,ui((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),Si=(Ci.range,ui((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));Si.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ui((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):Si:null};Si.range;function Ii(t){return ui((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}var xi=Ii(0),Ni=Ii(1),ki=Ii(2),Ai=Ii(3),Pi=Ii(4),Oi=Ii(5),Ri=Ii(6),Di=(xi.range,Ni.range,ki.range,Ai.range,Pi.range,Oi.range,Ri.range,ui((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),Li=Di,Mi=(Di.range,ui((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));Mi.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ui((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var Fi=Mi;Mi.range;function ji(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ui(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vi(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var qi,Bi={"-":"",_:" ",0:"0"},Wi=/^\s*\d+/,zi=/^%/,Hi=/[\\^$*+?|[\]().{}]/g;function Qi(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Gi(t){return t.replace(Hi,"\\$&")}function Yi(t){return new RegExp("^(?:"+t.map(Gi).join("|")+")","i")}function Ki(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function $i(t,e,n){var r=Wi.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Xi(t,e,n){var r=Wi.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Ji(t,e,n){var r=Wi.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Zi(t,e,n){var r=Wi.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function to(t,e,n){var r=Wi.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function eo(t,e,n){var r=Wi.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function no(t,e,n){var r=Wi.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ro(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function io(t,e,n){var r=Wi.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function oo(t,e,n){var r=Wi.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function so(t,e,n){var r=Wi.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ao(t,e,n){var r=Wi.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function uo(t,e,n){var r=Wi.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function co(t,e,n){var r=Wi.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function lo(t,e,n){var r=Wi.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ho(t,e,n){var r=Wi.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function fo(t,e,n){var r=Wi.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function po(t,e,n){var r=zi.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function yo(t,e,n){var r=Wi.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function vo(t,e,n){var r=Wi.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function go(t,e){return Qi(t.getDate(),e,2)}function mo(t,e){return Qi(t.getHours(),e,2)}function _o(t,e){return Qi(t.getHours()%12||12,e,2)}function bo(t,e){return Qi(1+wi.count(li(t),t),e,3)}function wo(t,e){return Qi(t.getMilliseconds(),e,3)}function Eo(t,e){return wo(t,e)+"000"}function To(t,e){return Qi(t.getMonth()+1,e,2)}function Co(t,e){return Qi(t.getMinutes(),e,2)}function So(t,e){return Qi(t.getSeconds(),e,2)}function Io(t){var e=t.getDay();return 0===e?7:e}function xo(t,e){return Qi(pi.count(li(t)-1,t),e,2)}function No(t,e){var n=t.getDay();return t=n>=4||0===n?gi(t):gi.ceil(t),Qi(gi.count(li(t),t)+(4===li(t).getDay()),e,2)}function ko(t){return t.getDay()}function Ao(t,e){return Qi(di.count(li(t)-1,t),e,2)}function Po(t,e){return Qi(t.getFullYear()%100,e,2)}function Oo(t,e){return Qi(t.getFullYear()%1e4,e,4)}function Ro(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qi(e/60|0,"0",2)+Qi(e%60,"0",2)}function Do(t,e){return Qi(t.getUTCDate(),e,2)}function Lo(t,e){return Qi(t.getUTCHours(),e,2)}function Mo(t,e){return Qi(t.getUTCHours()%12||12,e,2)}function Fo(t,e){return Qi(1+Li.count(Fi(t),t),e,3)}function jo(t,e){return Qi(t.getUTCMilliseconds(),e,3)}function Uo(t,e){return jo(t,e)+"000"}function Vo(t,e){return Qi(t.getUTCMonth()+1,e,2)}function qo(t,e){return Qi(t.getUTCMinutes(),e,2)}function Bo(t,e){return Qi(t.getUTCSeconds(),e,2)}function Wo(t){var e=t.getUTCDay();return 0===e?7:e}function zo(t,e){return Qi(xi.count(Fi(t)-1,t),e,2)}function Ho(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Pi(t):Pi.ceil(t),Qi(Pi.count(Fi(t),t)+(4===Fi(t).getUTCDay()),e,2)}function Qo(t){return t.getUTCDay()}function Go(t,e){return Qi(Ni.count(Fi(t)-1,t),e,2)}function Yo(t,e){return Qi(t.getUTCFullYear()%100,e,2)}function Ko(t,e){return Qi(t.getUTCFullYear()%1e4,e,4)}function $o(){return"+0000"}function Xo(){return"%"}function Jo(t){return+t}function Zo(t){return Math.floor(+t/1e3)}!function(t){qi=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,u=t.shortMonths,c=Yi(i),l=Ki(i),h=Yi(o),f=Ki(o),p=Yi(s),d=Ki(s),y=Yi(a),v=Ki(a),g=Yi(u),m=Ki(u),_={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:go,e:go,f:Eo,H:mo,I:_o,j:bo,L:wo,m:To,M:Co,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Jo,s:Zo,S:So,u:Io,U:xo,V:No,w:ko,W:Ao,x:null,X:null,y:Po,Y:Oo,Z:Ro,"%":Xo},b={a:function(t){return s[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Do,e:Do,f:Uo,H:Lo,I:Mo,j:Fo,L:jo,m:Vo,M:qo,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Jo,s:Zo,S:Bo,u:Wo,U:zo,V:Ho,w:Qo,W:Go,x:null,X:null,y:Yo,Y:Ko,Z:$o,"%":Xo},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return C(t,e,n,r)},d:so,e:so,f:fo,H:uo,I:uo,j:ao,L:ho,m:oo,M:co,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},q:io,Q:yo,s:vo,S:lo,u:Xi,U:Ji,V:Zi,w:$i,W:to,x:function(t,e,r){return C(t,n,e,r)},X:function(t,e,n){return C(t,r,e,n)},y:no,Y:eo,Z:ro,"%":po};function E(t,e){return function(n){var r,i,o,s=[],a=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(i=Bi[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),s.push(r),u=a+1);return s.push(t.slice(u,a)),s.join("")}}function T(t,e){return function(n){var r,i,o=Vi(1900,void 0,1);if(C(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Ui(Vi(o.y,0,1))).getUTCDay(),r=i>4||0===i?Ni.ceil(r):Ni(r),r=Li.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=ji(Vi(o.y,0,1))).getDay(),r=i>4||0===i?di.ceil(r):di(r),r=wi.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Ui(Vi(o.y,0,1)).getUTCDay():ji(Vi(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ui(o)):ji(o)}}function C(t,e,n,r){for(var i,o,s=0,a=e.length,u=n.length;s<a;){if(r>=u)return-1;if(37===(i=e.charCodeAt(s++))){if(i=e.charAt(s++),!(o=w[i in Bi?e.charAt(s++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return _.x=E(n,_),_.X=E(r,_),_.c=E(e,_),b.x=E(n,b),b.X=E(r,b),b.c=E(e,b),{format:function(t){var e=E(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=T(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=E(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=T(t+="",!0);return e.toString=function(){return t},e}}}(t),qi.format,qi.parse,qi.utcFormat,qi.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ts=ui((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),es=(ts.range,ui((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))),ns=(es.range,ui((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()})));ns.range;function rs(){this._=null}function is(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function os(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ss(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function as(t){for(;t.L;)t=t.L;return t}rs.prototype={constructor:rs,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=as(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(os(this,n),n=(t=n).U),n.C=!1,r.C=!0,ss(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ss(this,n),n=(t=n).U),n.C=!1,r.C=!0,os(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?as(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,os(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ss(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,os(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,ss(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,os(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ss(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var us=rs;function cs(t,e,n,r){var i=[null,null],o=Rs.push(i)-1;return i.left=t,i.right=e,n&&hs(i,t,e,n),r&&hs(i,e,t,r),Ps[t.index].halfedges.push(o),Ps[e.index].halfedges.push(o),i}function ls(t,e,n){var r=[e,n];return r.left=t,r}function hs(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function fs(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],c=s[1],l=0,h=1,f=a[0]-u,p=a[1]-c;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>l&&(l=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<h&&(h=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>l&&(l=o)}if(o=i-c,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<h&&(h=o)}return!(l>0||h<1)||(l>0&&(t[0]=[u+l*f,c+l*p]),h<1&&(t[1]=[u+h*f,c+h*p]),!0)}}}}}function ps(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],p=l[0],d=l[1],y=(h+p)/2,v=(f+d)/2;if(d===f){if(y<e||y>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[y,n];o=[y,i]}else{if(u){if(u[1]<n)return}else u=[y,i];o=[y,n]}}else if(a=v-(s=(h-p)/(d-f))*y,s<-1||s>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ds(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function ys(t,e){return e[+(e.left!==t.site)]}function vs(t,e){return e[+(e.left===t.site)]}var gs,ms=[];function _s(){is(this),this.x=this.y=this.arc=this.site=this.cy=null}function bs(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,c=r[1]-a,l=o[0]-s,h=o[1]-a,f=2*(u*h-c*l);if(!(f>=-Ls)){var p=u*u+c*c,d=l*l+h*h,y=(h*p-c*d)/f,v=(u*d-l*p)/f,g=ms.pop()||new _s;g.arc=t,g.site=i,g.x=y+s,g.y=(g.cy=v+a)+Math.sqrt(y*y+v*v),t.circle=g;for(var m=null,_=Os._;_;)if(g.y<_.y||g.y===_.y&&g.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}Os.insert(m,g),m||(gs=g)}}}}function ws(t){var e=t.circle;e&&(e.P||(gs=e.N),Os.remove(e),ms.push(e),is(e),t.circle=null)}var Es=[];function Ts(){is(this),this.edge=this.site=this.circle=null}function Cs(t){var e=Es.pop()||new Ts;return e.site=t,e}function Ss(t){ws(t),As.remove(t),Es.push(t),is(t)}function Is(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Ss(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<Ds&&Math.abs(r-u.circle.cy)<Ds;)o=u.P,a.unshift(u),Ss(u),u=o;a.unshift(u),ws(u);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<Ds&&Math.abs(r-c.circle.cy)<Ds;)s=c.N,a.push(c),Ss(c),c=s;a.push(c),ws(c);var l,h=a.length;for(l=1;l<h;++l)c=a[l],u=a[l-1],hs(c.edge,u.site,c.site,i);u=a[0],(c=a[h-1]).edge=cs(u.site,c.site,null,i),bs(u),bs(c)}function xs(t){for(var e,n,r,i,o=t[0],s=t[1],a=As._;a;)if((r=Ns(a,s)-o)>Ds)a=a.L;else{if(!((i=o-ks(a,s))>Ds)){r>-Ds?(e=a.P,n=a):i>-Ds?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Ps[t.index]={site:t,halfedges:[]}}(t);var u=Cs(t);if(As.insert(e,u),e||n){if(e===n)return ws(e),n=Cs(e.site),As.insert(u,n),u.edge=n.edge=cs(e.site,u.site),bs(e),void bs(n);if(n){ws(e),ws(n);var c=e.site,l=c[0],h=c[1],f=t[0]-l,p=t[1]-h,d=n.site,y=d[0]-l,v=d[1]-h,g=2*(f*v-p*y),m=f*f+p*p,_=y*y+v*v,b=[(v*m-p*_)/g+l,(f*_-y*m)/g+h];hs(n.edge,c,d,b),u.edge=cs(c,t,null,b),n.edge=cs(t,d,null,b),bs(e),bs(n)}else u.edge=cs(e.site,u.site)}}function Ns(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-1/0;var a=(n=s.site)[0],u=n[1],c=u-e;if(!c)return a;var l=a-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+a)/2}function ks(t,e){var n=t.N;if(n)return Ns(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var As,Ps,Os,Rs,Ds=1e-6,Ls=1e-12;function Ms(t,e){return e[1]-t[1]||e[0]-t[0]}function Fs(t,e){var n,r,i,o=t.sort(Ms).pop();for(Rs=[],Ps=new Array(t.length),As=new us,Os=new us;;)if(i=gs,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(xs(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Is(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Ps.length;i<o;++i)if((t=Ps[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=ds(t,Rs[e[n]]);for(s.sort((function(t,e){return a[e]-a[t]})),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=Rs.length;o--;)ps(i=Rs[o],t,e,n,r)&&fs(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Ds||Math.abs(i[0][1]-i[1][1])>Ds)||delete Rs[o]}(s,a,u,c),function(t,e,n,r){var i,o,s,a,u,c,l,h,f,p,d,y,v=Ps.length,g=!0;for(i=0;i<v;++i)if(o=Ps[i]){for(s=o.site,a=(u=o.halfedges).length;a--;)Rs[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)d=(p=vs(o,Rs[u[a]]))[0],y=p[1],h=(l=ys(o,Rs[u[++a%c]]))[0],f=l[1],(Math.abs(d-h)>Ds||Math.abs(y-f)>Ds)&&(u.splice(a,0,Rs.push(ls(s,p,Math.abs(d-t)<Ds&&r-y>Ds?[t,Math.abs(h-t)<Ds?f:r]:Math.abs(y-r)<Ds&&n-d>Ds?[Math.abs(f-r)<Ds?h:n,r]:Math.abs(d-n)<Ds&&y-e>Ds?[n,Math.abs(h-n)<Ds?f:e]:Math.abs(y-e)<Ds&&d-t>Ds?[Math.abs(f-e)<Ds?h:t,e]:null))-1),++c);c&&(g=!1)}if(g){var m,_,b,w=1/0;for(i=0,g=null;i<v;++i)(o=Ps[i])&&(b=(m=(s=o.site)[0]-t)*m+(_=s[1]-e)*_)<w&&(w=b,g=o);if(g){var E=[t,e],T=[t,r],C=[n,r],S=[n,e];g.halfedges.push(Rs.push(ls(s=g.site,E,T))-1,Rs.push(ls(s,T,C))-1,Rs.push(ls(s,C,S))-1,Rs.push(ls(s,S,E))-1)}}for(i=0;i<v;++i)(o=Ps[i])&&(o.halfedges.length||delete Ps[i])}(s,a,u,c)}this.edges=Rs,this.cells=Ps,As=Os=Rs=Ps=null}Fs.prototype={constructor:Fs,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return ys(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a,u,c,l=n.site,h=-1,f=e[i[o-1]],p=f.left===l?f.right:f.left;++h<o;)s=p,p=(f=e[i[h]]).left===l?f.right:f.left,s&&p&&r<s.index&&r<p.index&&(u=s,c=p,((a=l)[0]-c[0])*(u[1]-a[1])-(a[0]-u[0])*(c[1]-a[1])<0)&&t.push([l.data,s.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=s],s=null,i.halfedges.forEach((function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],c=e-a[1],h=u*u+c*c;h<l&&(l=h,s=a.index)}}))}while(null!==s);return o._found=r,null==n||l<=n*n?i.site:null}};Math.SQRT2;function js(t,e,n){this.k=t,this.x=e,this.y=n}js.prototype={constructor:js,scale:function(t){return 1===t?this:new js(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new js(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new js(1,0,0);js.prototype;var Us=function(){function t(t,e,n){var r=this;this.margin={},this.width=0,this.height=0,this.quartetNum="",this.data=[],this.svg=Lt("#mainDiv").append("svg"),this.xScale=oi(),this.yScale=oi(),vr("https://gist.githubusercontent.com/ericbusboom/b2ac1d366c005cd2ed8c/raw/c92c66e43d144fa9c29dbd602d5af6988e8db533/anscombes.csv").then((function(i){r.data=i,r.margin={top:20,right:20,bottom:20,left:20},r.width=800-r.margin.left-r.margin.right,r.height=800-r.margin.top-r.margin.bottom,r.quartetNum="I",r.xScale.domain([g(r.data,(function(t){return+t.x})),v(r.data,(function(t){return+t.x}))]),r.xScale.range([50,750]),r.yScale.domain([g(r.data,(function(t){return+t.y})),v(r.data,(function(t){return+t.y}))]),r.yScale.range([50,750]),Lt("#quartets").on("change",(function(){t(this.value)})),r.initializeVis(e,n)}))}return t.prototype.initializeVis=function(t,e){var n=this;this.svg.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom);var r=this.data.filter((function(t){return t.dataset===n.quartetNum}));this.svg.selectAll("circle").data(r).enter().append("circle").attr("class","normalNode").attr("id",(function(t){return"node_"+t.id})).attr("cx",(function(t){return n.xScale(+t.x)})).attr("cy",(function(t){return n.height-n.yScale(+t.y)})).on("click",(function(e){return t("node_"+e.id)})).on("mouseover",(function(t){return e("node_"+t.id)})).on("mouseout",(function(t){return e("")}))},t.prototype.changeQuartet=function(t){var e=this;this.quartetNum=t;var n=this.data.filter((function(t){return t.dataset===e.quartetNum}));this.svg.selectAll("circle").data(n).attr("id",(function(t){return"node_"+t.id})).transition().duration(750).attr("cx",(function(t){return e.xScale(+t.x)})).attr("cy",(function(t){return e.height-e.yScale(+t.y)}))},t.prototype.selectNode=function(t){Lt(".selectedNode").classed("selectedNode",!1),Lt("#"+t).classed("selectedNode",!0)},t.prototype.hoverNode=function(t){Lt(".hoverNode").classed("hoverNode",!1),""!==t&&Lt("#"+t).classed("hoverNode",!0)},t}(),Vs=n(22),qs=Object(r.a)({selectedQuartet:"I",selectedNode:"none",hoveredNode:"none"},!1),Bs=new Us((function(t){qs.addAction("Quartet "+t+" Selected",(function(e){return e.selectedQuartet=t,e})).addEventType("Change Quartet").alwaysStoreState(!0).applyAction()}),(function(t){qs.addAction(t+" Selected",(function(e){return e.selectedNode=t,e})).addEventType("Select Node").applyAction()}),(function(t){qs.addAction(""===t?"Hover Removed":t+" hovered",(function(e){return e.hoveredNode=t,e})).isEphemeral(!0).addEventType("Hover Node").applyAction()})),Ws=function(t){qs.goToNode(t)};function zs(){Object(Vs.a)(document.getElementById("provDiv"),qs,Ws,!0,!0)}qs.addObserver(["selectedQuartet"],(function(){Bs.changeQuartet(qs.current().getState().selectedQuartet)})),qs.addObserver(["selectedNode"],(function(){Bs.selectNode(qs.current().getState().selectedNode)})),qs.addObserver(["hoveredNode"],(function(){Bs.hoverNode(qs.current().getState().hoveredNode)})),qs.addGlobalObserver((function(){console.log("global observer called"),zs()})),zs(),document.onkeydown=function(t){var e=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);!t.shiftKey&&(e?t.metaKey:t.ctrlKey)&&90==t.which?qs.goBackToNonEphemeral():t.shiftKey&&(e?t.metaKey:t.ctrlKey)&&90==t.which&&0!=qs.current().children.length&&qs.goForwardToNonEphemeral()}}]);